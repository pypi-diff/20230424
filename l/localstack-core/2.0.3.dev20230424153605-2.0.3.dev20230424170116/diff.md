# Comparing `tmp/localstack-core-2.0.3.dev20230424153605.tar.gz` & `tmp/localstack-core-2.0.3.dev20230424170116.tar.gz`

## filetype from file(1)

```diff
@@ -1 +1 @@
-gzip compressed data, was "localstack-core-2.0.3.dev20230424153605.tar", last modified: Mon Apr 24 15:36:13 2023, max compression
+gzip compressed data, was "localstack-core-2.0.3.dev20230424170116.tar", last modified: Mon Apr 24 17:01:23 2023, max compression
```

## Comparing `localstack-core-2.0.3.dev20230424153605.tar` & `localstack-core-2.0.3.dev20230424170116.tar`

### file list

```diff
@@ -1,839 +1,839 @@
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.057190 localstack-core-2.0.3.dev20230424153605/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      606 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/LICENSE.txt
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      216 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/MANIFEST.in
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    15152 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/Makefile
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      652 2023-04-24 15:36:13.057190 localstack-core-2.0.3.dev20230424153605/PKG-INFO
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    10815 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/README.md
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.857191 localstack-core-2.0.3.dev20230424153605/bin/
--rwxrwxr-x   0 circleci  (1001) circleci  (1002)      543 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/bin/localstack
--rwxrwxr-x   0 circleci  (1001) circleci  (1002)     5936 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/bin/localstack-supervisor
--rw-rw-r--   0 circleci  (1001) circleci  (1002)       29 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/bin/localstack.bat
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.857191 localstack-core-2.0.3.dev20230424153605/localstack/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)       40 2023-04-24 15:36:05.000000 localstack-core-2.0.3.dev20230424153605/localstack/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.861191 localstack-core-2.0.3.dev20230424153605/localstack/aws/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3959 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/accounts.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.861191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      371 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.861191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/acm/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    17594 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/acm/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.861191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/apigateway/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    72874 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/apigateway/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.861191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/cloudformation/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    84791 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/cloudformation/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.861191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/cloudwatch/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    42769 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/cloudwatch/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.861191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/config/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)   123939 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/config/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6035 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/core.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.861191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/dynamodb/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    81315 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/dynamodb/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.861191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/dynamodbstreams/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6998 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/dynamodbstreams/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.861191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/ec2/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)   754452 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/ec2/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.861191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/es/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    60425 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/es/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.861191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/events/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    55327 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/events/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.861191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/firehose/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    42200 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/firehose/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.861191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/iam/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)   102907 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/iam/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.861191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/kinesis/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    25818 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/kinesis/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.861191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/kms/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    47848 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/kms/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.861191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/lambda_/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    71894 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/lambda_/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/logs/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    35937 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/logs/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/opensearch/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    64389 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/opensearch/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/redshift/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)   129662 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/redshift/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/resource_groups/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    14546 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/resource_groups/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/resourcegroupstaggingapi/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     8578 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/resourcegroupstaggingapi/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/route53/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    67927 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/route53/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/route53resolver/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    52075 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/route53resolver/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/s3/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)   132536 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/s3/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/s3control/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    65907 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/s3control/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/secretsmanager/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    21744 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/secretsmanager/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/ses/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    54804 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/ses/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/sns/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    27429 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/sns/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/sqs/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    16662 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/sqs/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/ssm/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)   215900 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/ssm/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/stepfunctions/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    33164 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/stepfunctions/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/sts/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     9713 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/sts/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/support/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    14068 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/support/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/swf/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    59496 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/swf/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/transcribe/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    40302 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/api/transcribe/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4447 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/app.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     8455 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/chain.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     8023 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/client.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    22571 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/connect.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     8786 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/forwarder.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      998 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/gateway.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.865191 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1665 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2548 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/analytics.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2137 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/auth.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1337 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/codec.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     9926 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/cors.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2285 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/fallback.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1320 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/internal.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      843 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/internal_requests.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6990 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/legacy.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5877 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/logging.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6368 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/metric_handler.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    10511 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/partition_rewriter.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      650 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/proxy.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      665 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/region.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      862 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/routes.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    11919 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/service.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2924 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/service_plugin.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    13758 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/mocking.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.869191 localstack-core-2.0.3.dev20230424153605/localstack/aws/protocol/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/protocol/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    15278 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/protocol/op_router.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    49876 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/protocol/parser.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    73497 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/protocol/serializer.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    14590 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/protocol/service_router.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5316 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/protocol/validate.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1912 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/proxy.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    20281 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/scaffold.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.869191 localstack-core-2.0.3.dev20230424153605/localstack/aws/serving/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/serving/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2377 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/serving/asgi.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1060 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/serving/edge.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1424 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/serving/hypercorn.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      775 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/serving/werkzeug.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1446 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/serving/wsgi.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     7804 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/skeleton.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    27186 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/spec-patches.json
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     7072 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/spec.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    12624 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/aws/trace.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.869191 localstack-core-2.0.3.dev20230424153605/localstack/cli/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      176 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/cli/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      346 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/cli/console.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    18064 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/cli/localstack.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4220 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/cli/lpm.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      477 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/cli/main.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      879 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/cli/plugin.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3429 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/cli/plugins.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      997 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/cli/profiles.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    51228 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/config.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     8320 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/constants.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.869191 localstack-core-2.0.3.dev20230424153605/localstack/contrib/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      144 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/contrib/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    15553 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/contrib/thundra.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    11624 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/deprecations.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.869191 localstack-core-2.0.3.dev20230424153605/localstack/extensions/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)       95 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/extensions/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.869191 localstack-core-2.0.3.dev20230424153605/localstack/extensions/api/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      138 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/extensions/api/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      686 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/extensions/api/aws.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2588 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/extensions/api/extension.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      422 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/extensions/api/http.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)       84 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/extensions/api/runtime.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      104 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/extensions/api/services.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.873191 localstack-core-2.0.3.dev20230424153605/localstack/http/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      213 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/http/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2933 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/http/adapters.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    14117 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/http/asgi.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5518 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/http/client.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2397 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/http/dispatcher.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5033 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/http/hypercorn.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     7159 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/http/proxy.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    11089 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/http/request.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4124 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/http/resource.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3232 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/http/response.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    17247 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/http/router.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.873191 localstack-core-2.0.3.dev20230424153605/localstack/logging/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/logging/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4844 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/logging/format.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4230 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/logging/setup.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.873191 localstack-core-2.0.3.dev20230424153605/localstack/packages/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      533 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/packages/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    15427 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/packages/api.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6728 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/packages/core.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1296 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/packages/debugpy.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      193 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/packages/plugins.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1313 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/packages/terraform.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1174 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/plugins.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.873191 localstack-core-2.0.3.dev20230424153605/localstack/runtime/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/runtime/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2672 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/runtime/analytics.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      154 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/runtime/events.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      289 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/runtime/exceptions.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3114 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/runtime/hooks.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6440 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/runtime/init.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      817 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/runtime/main.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1415 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/runtime/shutdown.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.873191 localstack-core-2.0.3.dev20230424153605/localstack/services/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.873191 localstack-core-2.0.3.dev20230424153605/localstack/services/acm/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/acm/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6530 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/acm/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.877191 localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6200 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/context.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    41169 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/helpers.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    34409 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/integration.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    12745 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/invocations.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2564 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    12099 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/patches.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    67662 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/provider.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5657 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/router_asf.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    11189 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/templates.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.877191 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    23585 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/api_utils.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.877191 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/event_source_listeners/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/event_source_listeners/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     8672 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/event_source_listeners/adapters.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2923 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/event_source_listeners/dynamodb_event_source_listener.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3064 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/event_source_listeners/event_source_listener.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3931 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/event_source_listeners/kinesis_event_source_listener.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    11855 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/event_source_listeners/sqs_event_source_listener.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    18555 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/event_source_listeners/stream_event_source_listener.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      519 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/hooks.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.877191 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      202 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    17805 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/docker_runtime_executor.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4897 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/executor_endpoint.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    21171 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/lambda_models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    27232 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/lambda_service.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      914 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      406 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/plugins.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    12394 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/runtime_environment.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3908 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/runtime_executor.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    32703 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/version_manager.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    91859 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/lambda_api.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    72195 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/lambda_executors.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1012 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/lambda_models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4273 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/lambda_starter.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    17196 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/lambda_utils.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.877191 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/layerfetcher/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/layerfetcher/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      603 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/layerfetcher/layer_fetcher.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4843 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/packages.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1489 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/plugins.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)   153284 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/provider.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     7722 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/urlrouter.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.881191 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3644 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/api_utils.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1699 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/cfn_utils.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6328 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/deployment_utils.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.881191 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/engine/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/engine/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    17238 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/engine/entities.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      454 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/engine/policy_loader.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    60765 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/engine/template_deployer.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     8781 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/engine/template_preparer.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2288 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/engine/transformers.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2044 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/engine/yaml_parser.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.885191 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      428 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    30425 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/apigateway.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    20593 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/awslambda.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1201 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/cdk.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2242 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/certificatemanager.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4204 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/cloudformation.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1916 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/cloudwatch.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4936 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/dynamodb.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    22228 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/ec2.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2270 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/ecr.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2769 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/elasticsearch.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     8661 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/events.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    28098 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/iam.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3019 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/kinesis.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2112 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/kinesisfirehose.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5197 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/kms.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4769 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/logs.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2643 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/opensearch.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1177 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/redshift.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1382 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/resourcegroups.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3449 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/route53.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    11194 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/s3.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6593 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/secretsmanager.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     8455 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/sns.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5299 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/sqs.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3812 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/ssm.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5194 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/stepfunctions.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      668 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/packages.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      247 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/plugins.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    34578 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/provider.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6479 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/service_models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2940 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/stores.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.885191 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudwatch/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudwatch/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    15545 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudwatch/alarm_scheduler.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    16188 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/cloudwatch/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.885191 localstack-core-2.0.3.dev20230424153605/localstack/services/configservice/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/configservice/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)       92 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/configservice/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.885191 localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodb/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodb/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1198 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodb/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3949 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodb/packages.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      234 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodb/plugins.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    73346 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodb/provider.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6107 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodb/server.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     7804 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodb/utils.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.885191 localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodbstreams/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodbstreams/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4406 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodbstreams/dynamodbstreams_api.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      359 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodbstreams/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5747 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodbstreams/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.885191 localstack-core-2.0.3.dev20230424153605/localstack/services/ec2/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/ec2/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1801 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/ec2/exceptions.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      553 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/ec2/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    20653 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/ec2/provider.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    19131 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/edge.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.885191 localstack-core-2.0.3.dev20230424153605/localstack/services/es/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/es/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      234 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/es/plugins.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    16936 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/es/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.885191 localstack-core-2.0.3.dev20230424153605/localstack/services/events/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/events/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      306 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/events/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    21786 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/events/provider.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2675 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/events/scheduler.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.897191 localstack-core-2.0.3.dev20230424153605/localstack/services/firehose/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/firehose/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6345 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/firehose/mappers.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      620 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/firehose/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    31864 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/firehose/provider.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    24573 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/generic_proxy.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.897191 localstack-core-2.0.3.dev20230424153605/localstack/services/iam/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/iam/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    19454 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/iam/provider.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    15974 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/infra.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    11820 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/internal.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.901191 localstack-core-2.0.3.dev20230424153605/localstack/services/kinesis/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/kinesis/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6613 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/kinesis/kinesis_mock_server.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)       75 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/kinesis/kinesis_starter.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      641 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/kinesis/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1719 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/kinesis/packages.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      224 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/kinesis/plugins.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     7005 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/kinesis/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.901191 localstack-core-2.0.3.dev20230424153605/localstack/services/kms/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/kms/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2688 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/kms/local_kms_provider.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2592 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/kms/local_kms_server.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    34733 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/kms/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      797 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/kms/packages.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      211 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/kms/plugins.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    48525 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/kms/provider.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      250 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/kms/utils.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.901191 localstack-core-2.0.3.dev20230424153605/localstack/services/logs/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/logs/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      570 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/logs/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    16491 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/logs/provider.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1411 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/messages.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     7244 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/moto.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1903 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/motoserver.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.901191 localstack-core-2.0.3.dev20230424153605/localstack/services/opensearch/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/opensearch/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    24093 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/opensearch/cluster.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    15264 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/opensearch/cluster_manager.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      631 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/opensearch/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    13589 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/opensearch/packages.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      222 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/opensearch/plugins.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    26686 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/opensearch/provider.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     9592 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/opensearch/versions.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    26188 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/plugins.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    11565 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/providers.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.901191 localstack-core-2.0.3.dev20230424153605/localstack/services/redshift/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/redshift/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2039 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/redshift/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.901191 localstack-core-2.0.3.dev20230424153605/localstack/services/resourcegroups/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/resourcegroups/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      125 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/resourcegroups/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.901191 localstack-core-2.0.3.dev20230424153605/localstack/services/resourcegroupstaggingapi/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/resourcegroupstaggingapi/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      190 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/resourcegroupstaggingapi/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.901191 localstack-core-2.0.3.dev20230424153605/localstack/services/route53/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/route53/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      411 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/route53/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2651 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/route53/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.901191 localstack-core-2.0.3.dev20230424153605/localstack/services/route53resolver/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/route53resolver/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     8323 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/route53resolver/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    33479 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/route53resolver/provider.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2223 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/route53resolver/utils.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.905191 localstack-core-2.0.3.dev20230424153605/localstack/services/s3/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/s3/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1974 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/s3/constants.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    12621 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/s3/cors.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2979 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/s3/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3609 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/s3/multipart_content.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    23108 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/s3/notifications.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    31371 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/s3/presigned_url.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    60971 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/s3/provider.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    68236 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/s3/s3_listener.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    15062 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/s3/s3_starter.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    17709 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/s3/s3_utils.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     8940 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/s3/utils.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5562 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/s3/virtual_host.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    15417 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/s3/website_hosting.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.905191 localstack-core-2.0.3.dev20230424153605/localstack/services/s3control/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/s3control/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      104 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/s3control/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.905191 localstack-core-2.0.3.dev20230424153605/localstack/services/secretsmanager/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/secretsmanager/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    27006 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/secretsmanager/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.905191 localstack-core-2.0.3.dev20230424153605/localstack/services/ses/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/ses/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      441 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/ses/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    21143 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/ses/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.905191 localstack-core-2.0.3.dev20230424153605/localstack/services/sns/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/sns/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      778 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/sns/constants.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5648 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/sns/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    47737 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/sns/provider.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    54797 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/sns/publisher.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.909191 localstack-core-2.0.3.dev20230424153605/localstack/services/sqs/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/sqs/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1666 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/sqs/constants.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      518 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/sqs/exceptions.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    23987 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/sqs/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    53754 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/sqs/provider.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6936 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/sqs/query_api.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6878 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/sqs/utils.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.913190 localstack-core-2.0.3.dev20230424153605/localstack/services/ssm/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/ssm/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     9298 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/ssm/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.913190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.913190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.913190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/antlt4utils/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/antlt4utils/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      844 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/antlt4utils/antlr4utils.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.913190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.913190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.913190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/catch/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/catch/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1292 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/catch/catch_decl.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      155 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/catch/catch_outcome.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2367 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/catch/catcher_decl.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      165 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/catch/catcher_outcome.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      122 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/catch/catcher_props.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      211 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/cause_decl.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      215 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/comment.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      211 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/error_decl.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.913190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/error_name/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/error_name/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      618 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/error_name/custom_error_name.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2270 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/error_name/error_equals_decl.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      518 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/error_name/error_name.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      686 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/error_name/states_error_name.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1909 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/error_name/states_error_name_type.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.913190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/flow/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/flow/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      299 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/flow/end.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      421 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/flow/next.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      233 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/flow/start_at.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      568 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/parameters.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.945190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/path/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/path/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      708 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/path/input_path.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      719 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/path/items_path.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      649 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/path/output_path.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      658 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/path/result_path.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.945190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.945190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      155 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payload_value.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.945190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadarr/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadarr/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      625 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadarr/payload_arr.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.945190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      643 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1037 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding_intrinsic_func.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      803 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding_path.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      961 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding_path_context_obj.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      699 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding_value.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.945190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadtmpl/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadtmpl/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      727 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadtmpl/payload_tmpl.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.945190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadvaluelit/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadvaluelit/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      287 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadvaluelit/payload_value_bool.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      277 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadvaluelit/payload_value_float.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      271 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadvaluelit/payload_value_int.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      450 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadvaluelit/payload_value_lit.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      264 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadvaluelit/payload_value_null.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      271 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadvaluelit/payload_value_str.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      659 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/result_selector.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.969190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/retry/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/retry/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      679 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/retry/backoff_rate_decl.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      604 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/retry/interval_seconds_decl.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      550 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/retry/max_attempts_decl.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3289 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/retry/retrier_decl.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)       95 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/retry/retrier_outcome.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      122 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/retry/retrier_props.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1434 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/retry/retry_decl.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      105 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/retry/retry_outcome.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      180 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/component.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      890 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/eval_component.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.969190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.969190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/argument/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/argument/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      452 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      268 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_bool.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      269 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_float.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      661 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_function.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      265 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_int.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      623 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_json_path.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      647 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_list.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      266 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_string.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      175 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/component.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.969190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      606 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/function.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.969190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.969190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1153 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1698 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_contains.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1760 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_get_item.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1570 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_length.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2277 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_partition.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2077 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_range.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1869 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_unique.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.969190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/encoding_decoding/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/encoding_decoding/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2006 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/encoding_decoding/base_64_decode.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1988 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/encoding_decoding/base_64_encode.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4499 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/factory.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.969190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/generic/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/generic/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3708 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/generic/string_format.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.977190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/hash_calculations/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/hash_calculations/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      154 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/hash_calculations/hash_algorithm.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2837 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/hash_calculations/hash_func.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.977190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/json_manipulation/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/json_manipulation/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3146 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/json_manipulation/json_merge.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1297 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/json_manipulation/json_to_string.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1387 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/json_manipulation/string_to_json.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.977190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/math_operations/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/math_operations/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1936 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/math_operations/math_add.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2307 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/math_operations/math_random.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      576 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1167 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_array.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2143 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_format.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1288 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_json_to_string.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1288 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_string_to_json.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1190 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_uuid.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.977190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/string_operations/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/string_operations/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2138 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/string_operations/string_split.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.977190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/unique_id_generation/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/unique_id_generation/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1176 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/unique_id_generation/uuid.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.977190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/functionname/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/functionname/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      232 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/functionname/custom_function_name.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      209 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/functionname/function_name.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1071 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/functionname/state_fuinction_name_types.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1071 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/functionname/state_function_name_types.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      484 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/functionname/states_function_name.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      398 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/member.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      287 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/member_access.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      221 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/program.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.977190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/program/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/program/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3243 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/program/program.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.977190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5976 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.977190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1559 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/choice_rule.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      144 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/choice_rule_stmt.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      350 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/choices_decl.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.977190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      999 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3059 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_composite.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1268 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_func.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2309 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_operator_type.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1063 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_props.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      157 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_stmt.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.981190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1236 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/factory.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.981190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1422 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/boolean_equals.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3490 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/is_operator.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4233 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/numeric.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4496 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/string_operators.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5038 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/timestamp_operators.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      334 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/operator.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      228 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/default_decl.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2479 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/state_choice.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      361 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_continue_with.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.981190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4967 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/execute_state.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.981190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.985190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/itemprocessor/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/itemprocessor/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3857 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/itemprocessor/item_processor.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      128 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/itemprocessor/item_processor_props.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      450 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/itemprocessor/processor_config.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      263 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/max_concurrency.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      154 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/mode.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2870 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/state_map.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.985190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_parallel/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_parallel/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1550 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_parallel/branches_decl.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1445 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_parallel/state_parallel.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.985190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3281 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/resource.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3618 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2548 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task_lambda.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1161 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task_service.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1006 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task_service_aws_sdk.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2421 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task_service_lambda.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.985190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_fail/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_fail/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1150 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_fail/state_fail.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.985190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_pass/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_pass/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      205 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_pass/result.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2575 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_pass/state_pass.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1348 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_props.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.989190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_succeed/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_succeed/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1416 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_succeed/state_succeed.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      346 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_type.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.989190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1151 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/state_wait.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      776 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/variable.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.989190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      600 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/seconds.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      762 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/seconds_path.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1352 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/timestamp.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1041 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/timestamp_path.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1702 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/wait_function.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      278 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/states.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.989190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.989190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/contextobject/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/contextobject/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      983 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/contextobject/contex_object.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      498 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/count_down_latch.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4647 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/environment.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:12.989190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/event/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/event/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3681 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/event/event_detail.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1207 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/event/event_history.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1707 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/program_worker.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.017190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/programstate/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/programstate/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      140 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/programstate/program_ended.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      250 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/programstate/program_error.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      945 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/programstate/program_running.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)       50 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/programstate/program_state.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      464 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/programstate/program_stopped.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.017190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/parse/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/parse/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      790 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/parse/asl_parser.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.017190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/parse/intrinsic/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/parse/intrinsic/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      876 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/parse/intrinsic/intrinsic_parser.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5292 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/parse/intrinsic/preprocessor.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    31024 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/parse/preprocessor.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      964 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/parse/typed_props.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.017190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/utils/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/utils/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      352 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/utils/json_path.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.017190 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/backend/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/backend/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6407 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/backend/execution.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2551 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/backend/execution_worker.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      386 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/backend/execution_worker_comm.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1540 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/backend/state_machine.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      778 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/backend/store.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     7014 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/packages.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      262 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/plugins.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2587 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/provider.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    10302 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/provider_v2.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4342 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/stepfunctions_starter.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      645 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/stepfunctions_utils.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    11179 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/stores.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.017190 localstack-core-2.0.3.dev20230424153605/localstack/services/sts/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/sts/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      621 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/sts/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.017190 localstack-core-2.0.3.dev20230424153605/localstack/services/support/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/support/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      122 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/support/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.017190 localstack-core-2.0.3.dev20230424153605/localstack/services/swf/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/swf/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      106 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/swf/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.017190 localstack-core-2.0.3.dev20230424153605/localstack/services/transcribe/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/transcribe/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      376 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/transcribe/models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1390 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/transcribe/packages.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      206 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/transcribe/plugins.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    12180 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/services/transcribe/provider.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.021190 localstack-core-2.0.3.dev20230424153605/localstack/state/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      307 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/state/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3774 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/state/core.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6216 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/state/inspect.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    11061 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/state/pickle.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      751 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/state/snapshot.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.021190 localstack-core-2.0.3.dev20230424153605/localstack/testing/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.021190 localstack-core-2.0.3.dev20230424153605/localstack/testing/aws/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/aws/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5828 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/aws/asf_utils.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1466 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/aws/cloudformation_utils.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4452 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/aws/lambda_utils.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6391 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/aws/util.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.021190 localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1611 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/detect_thread_leakage.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1089 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/filters.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1337 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/find_orphaned_snapshots.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1473 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/fixture_conflicts.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    65199 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/fixtures.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2320 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/metric_collection.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4559 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/snapshot.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      941 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/util.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.021190 localstack-core-2.0.3.dev20230424153605/localstack/testing/snapshots/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      158 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/snapshots/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    12355 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/snapshots/prototype.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5012 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/snapshots/report.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     9496 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/snapshots/transformer.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    25709 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/testing/snapshots/transformer_utility.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.037190 localstack-core-2.0.3.dev20230424153605/localstack/utils/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/__init__.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.041190 localstack-core-2.0.3.dev20230424153605/localstack/utils/analytics/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      290 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/analytics/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2410 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/analytics/cli.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2985 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/analytics/client.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      582 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/analytics/events.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1397 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/analytics/logger.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3324 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/analytics/metadata.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     8421 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/analytics/publisher.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3926 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/analytics/service_request_aggregator.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     8479 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/archives.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      282 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/async_utils.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4396 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/asyncio.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2415 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/auth.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.041190 localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    13418 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/arns.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    14834 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/aws_models.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    10896 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/aws_responses.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    17098 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/aws_stack.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2926 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/client.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    12929 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/client_types.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5833 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/dead_letter_queue.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    11597 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/message_forwarding.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3437 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/queries.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     7899 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/request_context.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     7915 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/resources.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6780 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/templating.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    23334 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/bootstrap.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.053190 localstack-core-2.0.3.dev20230424153605/localstack/utils/cloudwatch/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/cloudwatch/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6253 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/cloudwatch/cloudwatch_util.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    16629 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/collections.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6561 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/common.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2343 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/config_listener.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4512 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/container_networking.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.057190 localstack-core-2.0.3.dev20230424153605/localstack/utils/container_utils/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/container_utils/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    43017 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/container_utils/container_client.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    28581 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/container_utils/docker_cmd_client.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    29580 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/container_utils/docker_sdk_client.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      701 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/coverage_docs.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6852 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/crypto.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4619 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/diagnose.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     9027 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/docker_utils.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     9365 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/files.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2966 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/functions.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     9391 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/http.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6182 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/json.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.057190 localstack-core-2.0.3.dev20230424153605/localstack/utils/kinesis/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/kinesis/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4127 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/kinesis/kclipy_helper.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    19202 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/kinesis/kinesis_connector.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2416 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/kinesis/kinesis_util.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    10057 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/net.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      811 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/no_exit_argument_parser.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1288 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/numbers.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6176 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/objects.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4923 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/patch.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1553 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/platform.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    16617 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/run.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6547 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/scheduler.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.057190 localstack-core-2.0.3.dev20230424153605/localstack/utils/server/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/server/__init__.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    12408 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/server/http2_server.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      149 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/server/multiserver.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5822 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/server/proxy_server.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     6037 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/serving.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2300 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/ssl.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5640 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/strings.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3725 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/sync.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      829 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/tagging.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2952 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/tail.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    23504 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/testutil.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4851 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/threads.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1834 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/time.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1235 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/urls.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3202 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/venv.py
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1146 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/localstack/utils/xml.py
-drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 15:36:13.057190 localstack-core-2.0.3.dev20230424153605/localstack_core.egg-info/
--rw-rw-r--   0 circleci  (1001) circleci  (1002)      652 2023-04-24 15:36:12.000000 localstack-core-2.0.3.dev20230424153605/localstack_core.egg-info/PKG-INFO
--rw-rw-r--   0 circleci  (1001) circleci  (1002)    37135 2023-04-24 15:36:12.000000 localstack-core-2.0.3.dev20230424153605/localstack_core.egg-info/SOURCES.txt
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        1 2023-04-24 15:36:12.000000 localstack-core-2.0.3.dev20230424153605/localstack_core.egg-info/dependency_links.txt
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     4968 2023-04-24 15:36:12.000000 localstack-core-2.0.3.dev20230424153605/localstack_core.egg-info/entry_points.txt
--rw-rw-r--   0 circleci  (1001) circleci  (1002)        1 2023-04-24 15:36:09.000000 localstack-core-2.0.3.dev20230424153605/localstack_core.egg-info/not-zip-safe
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     5055 2023-04-24 15:36:09.000000 localstack-core-2.0.3.dev20230424153605/localstack_core.egg-info/plux.json
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     2777 2023-04-24 15:36:12.000000 localstack-core-2.0.3.dev20230424153605/localstack_core.egg-info/requires.txt
--rw-rw-r--   0 circleci  (1001) circleci  (1002)       11 2023-04-24 15:36:12.000000 localstack-core-2.0.3.dev20230424153605/localstack_core.egg-info/top_level.txt
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     1414 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/pyproject.toml
--rw-rw-r--   0 circleci  (1001) circleci  (1002)     3137 2023-04-24 15:36:13.057190 localstack-core-2.0.3.dev20230424153605/setup.cfg
--rwxrwxr-x   0 circleci  (1001) circleci  (1002)       60 2023-04-24 12:31:35.000000 localstack-core-2.0.3.dev20230424153605/setup.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.871992 localstack-core-2.0.3.dev20230424170116/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      606 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/LICENSE.txt
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      216 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/MANIFEST.in
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    15152 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/Makefile
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      652 2023-04-24 17:01:23.871992 localstack-core-2.0.3.dev20230424170116/PKG-INFO
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    10815 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/README.md
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.707991 localstack-core-2.0.3.dev20230424170116/bin/
+-rwxrwxr-x   0 circleci  (1001) circleci  (1002)      543 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/bin/localstack
+-rwxrwxr-x   0 circleci  (1001) circleci  (1002)     5936 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/bin/localstack-supervisor
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)       29 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/bin/localstack.bat
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.711991 localstack-core-2.0.3.dev20230424170116/localstack/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)       40 2023-04-24 17:01:16.000000 localstack-core-2.0.3.dev20230424170116/localstack/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.711991 localstack-core-2.0.3.dev20230424170116/localstack/aws/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3959 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/accounts.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.711991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      371 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.711991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/acm/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    17594 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/acm/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.711991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/apigateway/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    72874 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/apigateway/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.711991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/cloudformation/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    84791 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/cloudformation/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.711991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/cloudwatch/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    42769 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/cloudwatch/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.711991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/config/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)   123939 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/config/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6224 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/core.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.711991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/dynamodb/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    81315 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/dynamodb/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.711991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/dynamodbstreams/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6998 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/dynamodbstreams/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.711991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/ec2/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)   754452 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/ec2/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.711991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/es/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    60425 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/es/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.711991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/events/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    55327 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/events/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.711991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/firehose/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    42200 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/firehose/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.711991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/iam/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)   102907 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/iam/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/kinesis/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    25818 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/kinesis/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/kms/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    47848 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/kms/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/lambda_/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    71894 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/lambda_/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/logs/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    35937 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/logs/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/opensearch/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    64389 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/opensearch/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/redshift/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)   129662 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/redshift/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/resource_groups/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    14546 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/resource_groups/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/resourcegroupstaggingapi/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     8578 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/resourcegroupstaggingapi/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/route53/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    67927 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/route53/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/route53resolver/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    52075 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/route53resolver/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/s3/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)   132536 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/s3/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/s3control/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    65907 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/s3control/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/secretsmanager/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    21744 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/secretsmanager/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/ses/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    54804 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/ses/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/sns/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    27429 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/sns/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/sqs/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    16662 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/sqs/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/ssm/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)   215900 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/ssm/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/stepfunctions/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    33164 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/stepfunctions/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/sts/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     9713 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/sts/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/support/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    14068 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/support/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/swf/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    59496 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/swf/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.715991 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/transcribe/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    40302 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/api/transcribe/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4447 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/app.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     8455 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/chain.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     8023 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/client.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    22571 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/connect.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     8786 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/forwarder.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      998 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/gateway.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.719991 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1665 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2548 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/analytics.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2137 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/auth.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1337 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/codec.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     9926 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/cors.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2285 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/fallback.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1320 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/internal.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      843 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/internal_requests.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6990 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/legacy.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5877 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/logging.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6368 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/metric_handler.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    10511 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/partition_rewriter.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      650 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/proxy.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      665 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/region.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      862 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/routes.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    11961 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/service.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2924 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/service_plugin.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    13758 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/mocking.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.719991 localstack-core-2.0.3.dev20230424170116/localstack/aws/protocol/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/protocol/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    15278 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/protocol/op_router.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    49876 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/protocol/parser.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    75997 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/protocol/serializer.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    14590 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/protocol/service_router.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5316 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/protocol/validate.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1912 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/proxy.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    20281 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/scaffold.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.719991 localstack-core-2.0.3.dev20230424170116/localstack/aws/serving/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/serving/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2377 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/serving/asgi.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1060 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/serving/edge.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1424 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/serving/hypercorn.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      775 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/serving/werkzeug.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1446 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/serving/wsgi.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     7908 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/skeleton.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    27186 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/spec-patches.json
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     7072 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/spec.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    12624 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/aws/trace.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.719991 localstack-core-2.0.3.dev20230424170116/localstack/cli/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      176 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/cli/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      346 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/cli/console.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    18064 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/cli/localstack.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4220 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/cli/lpm.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      477 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/cli/main.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      879 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/cli/plugin.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3429 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/cli/plugins.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      997 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/cli/profiles.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    51228 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/config.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     8320 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/constants.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.719991 localstack-core-2.0.3.dev20230424170116/localstack/contrib/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      144 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/contrib/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    15553 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/contrib/thundra.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    11624 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/deprecations.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.719991 localstack-core-2.0.3.dev20230424170116/localstack/extensions/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)       95 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/extensions/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.719991 localstack-core-2.0.3.dev20230424170116/localstack/extensions/api/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      138 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/extensions/api/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      686 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/extensions/api/aws.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2588 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/extensions/api/extension.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      422 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/extensions/api/http.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)       84 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/extensions/api/runtime.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      104 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/extensions/api/services.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.723991 localstack-core-2.0.3.dev20230424170116/localstack/http/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      213 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/http/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2933 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/http/adapters.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    14117 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/http/asgi.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5518 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/http/client.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2397 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/http/dispatcher.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5033 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/http/hypercorn.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     7159 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/http/proxy.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    11089 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/http/request.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4124 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/http/resource.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3232 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/http/response.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    17247 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/http/router.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.723991 localstack-core-2.0.3.dev20230424170116/localstack/logging/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/logging/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4844 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/logging/format.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4230 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/logging/setup.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.723991 localstack-core-2.0.3.dev20230424170116/localstack/packages/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      533 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/packages/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    15427 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/packages/api.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6728 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/packages/core.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1296 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/packages/debugpy.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      193 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/packages/plugins.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1313 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/packages/terraform.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1174 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/plugins.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.723991 localstack-core-2.0.3.dev20230424170116/localstack/runtime/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/runtime/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2672 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/runtime/analytics.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      154 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/runtime/events.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      289 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/runtime/exceptions.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3114 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/runtime/hooks.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6440 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/runtime/init.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      817 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/runtime/main.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1415 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/runtime/shutdown.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.723991 localstack-core-2.0.3.dev20230424170116/localstack/services/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.731991 localstack-core-2.0.3.dev20230424170116/localstack/services/acm/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/acm/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6530 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/acm/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.731991 localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6200 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/context.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    41169 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/helpers.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    34409 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/integration.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    12745 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/invocations.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2564 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    12099 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/patches.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    67662 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/provider.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5657 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/router_asf.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    11189 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/templates.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.735991 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    23585 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/api_utils.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.735991 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/event_source_listeners/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/event_source_listeners/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     8832 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/event_source_listeners/adapters.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2923 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/event_source_listeners/dynamodb_event_source_listener.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3064 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/event_source_listeners/event_source_listener.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3931 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/event_source_listeners/kinesis_event_source_listener.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    11855 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/event_source_listeners/sqs_event_source_listener.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    18555 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/event_source_listeners/stream_event_source_listener.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      519 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/hooks.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.735991 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      202 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    17805 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/docker_runtime_executor.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4894 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/executor_endpoint.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    21182 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/lambda_models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    27342 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/lambda_service.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      914 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      406 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/plugins.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    12432 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/runtime_environment.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3908 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/runtime_executor.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    32558 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/version_manager.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    91859 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/lambda_api.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    72195 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/lambda_executors.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1012 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/lambda_models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4273 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/lambda_starter.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    17196 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/lambda_utils.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.735991 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/layerfetcher/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/layerfetcher/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      603 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/layerfetcher/layer_fetcher.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4843 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/packages.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1489 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/plugins.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)   153327 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/provider.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     7878 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/urlrouter.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.735991 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3644 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/api_utils.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1699 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/cfn_utils.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6328 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/deployment_utils.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.735991 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/engine/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/engine/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    17238 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/engine/entities.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      454 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/engine/policy_loader.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    60765 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/engine/template_deployer.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     8781 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/engine/template_preparer.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2288 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/engine/transformers.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2044 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/engine/yaml_parser.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.739991 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      428 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    30425 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/apigateway.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    20593 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/awslambda.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1201 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/cdk.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2242 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/certificatemanager.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4204 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/cloudformation.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1916 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/cloudwatch.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4936 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/dynamodb.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    22228 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/ec2.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2270 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/ecr.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2769 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/elasticsearch.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     8661 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/events.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    28098 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/iam.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3019 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/kinesis.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2112 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/kinesisfirehose.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5197 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/kms.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4769 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/logs.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2643 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/opensearch.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1177 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/redshift.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1382 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/resourcegroups.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3449 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/route53.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    11194 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/s3.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6593 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/secretsmanager.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     8455 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/sns.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5299 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/sqs.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3812 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/ssm.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5194 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/stepfunctions.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      668 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/packages.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      247 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/plugins.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    34578 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/provider.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6479 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/service_models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2940 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/stores.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.743991 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudwatch/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudwatch/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    15545 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudwatch/alarm_scheduler.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    16188 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/cloudwatch/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.743991 localstack-core-2.0.3.dev20230424170116/localstack/services/configservice/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/configservice/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)       92 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/configservice/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.743991 localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodb/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodb/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1198 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodb/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3949 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodb/packages.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      234 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodb/plugins.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    73346 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodb/provider.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6107 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodb/server.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     7804 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodb/utils.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.743991 localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodbstreams/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodbstreams/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4406 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodbstreams/dynamodbstreams_api.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      359 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodbstreams/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5747 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodbstreams/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.743991 localstack-core-2.0.3.dev20230424170116/localstack/services/ec2/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/ec2/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1801 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/ec2/exceptions.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      553 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/ec2/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    20653 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/ec2/provider.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    19131 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/edge.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.743991 localstack-core-2.0.3.dev20230424170116/localstack/services/es/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/es/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      234 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/es/plugins.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    16936 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/es/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.743991 localstack-core-2.0.3.dev20230424170116/localstack/services/events/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/events/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      306 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/events/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    21786 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/events/provider.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2675 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/events/scheduler.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.743991 localstack-core-2.0.3.dev20230424170116/localstack/services/firehose/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/firehose/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6345 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/firehose/mappers.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      620 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/firehose/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    31864 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/firehose/provider.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    24573 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/generic_proxy.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.743991 localstack-core-2.0.3.dev20230424170116/localstack/services/iam/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/iam/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    19454 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/iam/provider.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    15974 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/infra.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    11820 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/internal.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.743991 localstack-core-2.0.3.dev20230424170116/localstack/services/kinesis/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/kinesis/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6613 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/kinesis/kinesis_mock_server.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)       75 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/kinesis/kinesis_starter.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      641 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/kinesis/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1719 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/kinesis/packages.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      224 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/kinesis/plugins.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     7005 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/kinesis/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.747991 localstack-core-2.0.3.dev20230424170116/localstack/services/kms/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/kms/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2688 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/kms/local_kms_provider.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2592 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/kms/local_kms_server.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    34733 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/kms/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      797 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/kms/packages.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      211 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/kms/plugins.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    48525 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/kms/provider.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      250 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/kms/utils.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.747991 localstack-core-2.0.3.dev20230424170116/localstack/services/logs/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/logs/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      570 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/logs/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    16491 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/logs/provider.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1411 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/messages.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     7244 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/moto.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1903 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/motoserver.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.747991 localstack-core-2.0.3.dev20230424170116/localstack/services/opensearch/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/opensearch/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    24093 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/opensearch/cluster.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    15264 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/opensearch/cluster_manager.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      631 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/opensearch/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    13589 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/opensearch/packages.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      222 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/opensearch/plugins.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    26686 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/opensearch/provider.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     9592 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/opensearch/versions.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    26188 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/plugins.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    11565 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/providers.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.747991 localstack-core-2.0.3.dev20230424170116/localstack/services/redshift/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/redshift/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2039 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/redshift/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.747991 localstack-core-2.0.3.dev20230424170116/localstack/services/resourcegroups/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/resourcegroups/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      125 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/resourcegroups/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.755992 localstack-core-2.0.3.dev20230424170116/localstack/services/resourcegroupstaggingapi/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/resourcegroupstaggingapi/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      190 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/resourcegroupstaggingapi/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.755992 localstack-core-2.0.3.dev20230424170116/localstack/services/route53/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/route53/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      411 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/route53/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2651 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/route53/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.755992 localstack-core-2.0.3.dev20230424170116/localstack/services/route53resolver/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/route53resolver/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     8323 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/route53resolver/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    33479 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/route53resolver/provider.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2223 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/route53resolver/utils.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.755992 localstack-core-2.0.3.dev20230424170116/localstack/services/s3/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/s3/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1974 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/s3/constants.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    12543 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/s3/cors.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2979 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/s3/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3609 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/s3/multipart_content.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    23097 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/s3/notifications.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    31371 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/s3/presigned_url.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    60971 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/s3/provider.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    68303 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/s3/s3_listener.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    15062 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/s3/s3_starter.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    17709 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/s3/s3_utils.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     8940 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/s3/utils.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5562 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/s3/virtual_host.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    15516 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/s3/website_hosting.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.755992 localstack-core-2.0.3.dev20230424170116/localstack/services/s3control/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/s3control/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      104 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/s3control/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.755992 localstack-core-2.0.3.dev20230424170116/localstack/services/secretsmanager/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/secretsmanager/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    27006 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/secretsmanager/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.755992 localstack-core-2.0.3.dev20230424170116/localstack/services/ses/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/ses/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      441 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/ses/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    21143 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/ses/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.759992 localstack-core-2.0.3.dev20230424170116/localstack/services/sns/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/sns/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      778 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/sns/constants.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5648 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/sns/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    47737 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/sns/provider.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    54566 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/sns/publisher.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.759992 localstack-core-2.0.3.dev20230424170116/localstack/services/sqs/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/sqs/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1666 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/sqs/constants.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      518 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/sqs/exceptions.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    23987 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/sqs/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    53754 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/sqs/provider.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     7059 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/sqs/query_api.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6878 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/sqs/utils.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.759992 localstack-core-2.0.3.dev20230424170116/localstack/services/ssm/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/ssm/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     9298 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/ssm/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.759992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.759992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.759992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/antlt4utils/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/antlt4utils/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      844 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/antlt4utils/antlr4utils.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.759992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.759992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.795992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/catch/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/catch/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1292 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/catch/catch_decl.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      155 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/catch/catch_outcome.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2367 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/catch/catcher_decl.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      165 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/catch/catcher_outcome.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      122 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/catch/catcher_props.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      211 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/cause_decl.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      215 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/comment.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      211 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/error_decl.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.795992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/error_name/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/error_name/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      618 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/error_name/custom_error_name.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2270 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/error_name/error_equals_decl.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      518 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/error_name/error_name.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      686 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/error_name/states_error_name.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1909 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/error_name/states_error_name_type.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.795992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/flow/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/flow/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      299 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/flow/end.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      421 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/flow/next.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      233 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/flow/start_at.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      568 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/parameters.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.795992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/path/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/path/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      708 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/path/input_path.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      719 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/path/items_path.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      649 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/path/output_path.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      658 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/path/result_path.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.795992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.795992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      155 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payload_value.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.795992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadarr/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadarr/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      625 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadarr/payload_arr.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.803992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      643 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1037 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding_intrinsic_func.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      803 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding_path.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      961 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding_path_context_obj.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      699 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding_value.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.803992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadtmpl/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadtmpl/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      727 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadtmpl/payload_tmpl.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.803992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadvaluelit/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadvaluelit/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      287 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadvaluelit/payload_value_bool.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      277 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadvaluelit/payload_value_float.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      271 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadvaluelit/payload_value_int.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      450 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadvaluelit/payload_value_lit.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      264 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadvaluelit/payload_value_null.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      271 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadvaluelit/payload_value_str.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      659 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/result_selector.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.803992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/retry/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/retry/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      679 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/retry/backoff_rate_decl.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      604 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/retry/interval_seconds_decl.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      550 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/retry/max_attempts_decl.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3289 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/retry/retrier_decl.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)       95 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/retry/retrier_outcome.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      122 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/retry/retrier_props.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1434 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/retry/retry_decl.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      105 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/retry/retry_outcome.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      180 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/component.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      890 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/eval_component.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.803992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.803992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/argument/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/argument/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      452 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      268 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_bool.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      269 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_float.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      661 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_function.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      265 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_int.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      623 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_json_path.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      647 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_list.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      266 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_string.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      175 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/component.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.807992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      606 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/function.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.819992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.819992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1153 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1698 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_contains.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1760 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_get_item.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1570 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_length.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2277 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_partition.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2077 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_range.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1869 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_unique.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.819992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/encoding_decoding/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/encoding_decoding/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2006 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/encoding_decoding/base_64_decode.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1988 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/encoding_decoding/base_64_encode.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4499 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/factory.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.819992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/generic/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/generic/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3708 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/generic/string_format.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.819992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/hash_calculations/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/hash_calculations/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      154 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/hash_calculations/hash_algorithm.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2837 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/hash_calculations/hash_func.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.819992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/json_manipulation/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/json_manipulation/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3146 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/json_manipulation/json_merge.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1297 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/json_manipulation/json_to_string.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1387 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/json_manipulation/string_to_json.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.819992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/math_operations/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/math_operations/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1936 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/math_operations/math_add.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2307 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/math_operations/math_random.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      576 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1167 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_array.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2143 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_format.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1288 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_json_to_string.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1288 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_string_to_json.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1190 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_uuid.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.819992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/string_operations/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/string_operations/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2138 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/string_operations/string_split.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.823992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/unique_id_generation/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/unique_id_generation/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1176 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/unique_id_generation/uuid.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.835992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/functionname/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/functionname/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      232 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/functionname/custom_function_name.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      209 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/functionname/function_name.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1071 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/functionname/state_fuinction_name_types.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1071 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/functionname/state_function_name_types.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      484 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/functionname/states_function_name.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      398 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/member.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      287 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/member_access.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      221 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/program.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.835992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/program/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/program/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3243 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/program/program.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.835992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5976 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.835992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1559 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/choice_rule.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      144 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/choice_rule_stmt.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      350 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/choices_decl.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.835992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      999 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3059 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_composite.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1268 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_func.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2309 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_operator_type.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1063 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_props.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      157 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_stmt.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.835992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1236 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/factory.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.835992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1422 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/boolean_equals.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3490 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/is_operator.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4233 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/numeric.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4496 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/string_operators.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5038 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/timestamp_operators.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      334 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/operator.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      228 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/default_decl.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2479 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/state_choice.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      361 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_continue_with.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.835992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4967 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/execute_state.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.839992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.843992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/itemprocessor/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/itemprocessor/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3857 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/itemprocessor/item_processor.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      128 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/itemprocessor/item_processor_props.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      450 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/itemprocessor/processor_config.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      263 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/max_concurrency.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      154 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/mode.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2870 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/state_map.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.847992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_parallel/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_parallel/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1550 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_parallel/branches_decl.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1445 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_parallel/state_parallel.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.847992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3281 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/resource.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3618 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2548 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task_lambda.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1161 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task_service.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1006 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task_service_aws_sdk.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2421 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task_service_lambda.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.847992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_fail/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_fail/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1150 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_fail/state_fail.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.847992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_pass/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_pass/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      205 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_pass/result.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2575 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_pass/state_pass.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1348 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_props.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.847992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_succeed/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_succeed/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1416 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_succeed/state_succeed.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      346 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_type.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.847992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1151 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/state_wait.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      776 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/variable.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.847992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      600 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/seconds.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      762 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/seconds_path.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1352 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/timestamp.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1041 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/timestamp_path.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1702 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/wait_function.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      278 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/states.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.847992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.847992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/contextobject/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/contextobject/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      983 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/contextobject/contex_object.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      498 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/count_down_latch.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4647 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/environment.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.847992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/event/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/event/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3681 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/event/event_detail.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1207 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/event/event_history.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1707 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/program_worker.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.847992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/programstate/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/programstate/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      140 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/programstate/program_ended.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      250 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/programstate/program_error.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      945 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/programstate/program_running.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)       50 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/programstate/program_state.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      464 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/programstate/program_stopped.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.847992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/parse/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/parse/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      790 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/parse/asl_parser.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.851992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/parse/intrinsic/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/parse/intrinsic/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      876 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/parse/intrinsic/intrinsic_parser.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5292 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/parse/intrinsic/preprocessor.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    31024 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/parse/preprocessor.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      964 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/parse/typed_props.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.851992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/utils/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/utils/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      352 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/utils/json_path.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.851992 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/backend/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/backend/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6407 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/backend/execution.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2551 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/backend/execution_worker.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      386 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/backend/execution_worker_comm.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1540 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/backend/state_machine.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      778 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/backend/store.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     7014 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/packages.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      262 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/plugins.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2587 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/provider.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    10302 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/provider_v2.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4342 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/stepfunctions_starter.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      645 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/stepfunctions_utils.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    11179 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/stores.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.851992 localstack-core-2.0.3.dev20230424170116/localstack/services/sts/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/sts/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      621 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/sts/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.851992 localstack-core-2.0.3.dev20230424170116/localstack/services/support/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/support/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      122 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/support/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.851992 localstack-core-2.0.3.dev20230424170116/localstack/services/swf/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/swf/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      106 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/swf/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.851992 localstack-core-2.0.3.dev20230424170116/localstack/services/transcribe/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/transcribe/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      376 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/transcribe/models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1390 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/transcribe/packages.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      206 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/transcribe/plugins.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    12180 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/services/transcribe/provider.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.851992 localstack-core-2.0.3.dev20230424170116/localstack/state/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      307 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/state/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3774 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/state/core.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6216 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/state/inspect.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    11061 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/state/pickle.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      751 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/state/snapshot.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.851992 localstack-core-2.0.3.dev20230424170116/localstack/testing/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.851992 localstack-core-2.0.3.dev20230424170116/localstack/testing/aws/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/aws/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5828 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/aws/asf_utils.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1466 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/aws/cloudformation_utils.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4452 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/aws/lambda_utils.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6391 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/aws/util.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.855992 localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1611 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/detect_thread_leakage.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1089 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/filters.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1337 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/find_orphaned_snapshots.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1473 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/fixture_conflicts.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    65199 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/fixtures.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2320 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/metric_collection.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4559 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/snapshot.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      941 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/util.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.855992 localstack-core-2.0.3.dev20230424170116/localstack/testing/snapshots/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      158 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/snapshots/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    12355 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/snapshots/prototype.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5012 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/snapshots/report.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     9496 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/snapshots/transformer.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    25709 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/testing/snapshots/transformer_utility.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.859992 localstack-core-2.0.3.dev20230424170116/localstack/utils/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/__init__.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.863992 localstack-core-2.0.3.dev20230424170116/localstack/utils/analytics/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      290 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/analytics/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2410 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/analytics/cli.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2985 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/analytics/client.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      582 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/analytics/events.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1397 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/analytics/logger.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3324 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/analytics/metadata.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     8421 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/analytics/publisher.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3926 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/analytics/service_request_aggregator.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     8479 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/archives.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      282 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/async_utils.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4396 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/asyncio.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2415 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/auth.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.863992 localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    13418 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/arns.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    14834 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/aws_models.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    10896 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/aws_responses.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    17098 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/aws_stack.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2926 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/client.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    12929 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/client_types.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5833 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/dead_letter_queue.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    11597 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/message_forwarding.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3437 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/queries.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     7899 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/request_context.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     7915 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/resources.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6780 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/templating.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    23334 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/bootstrap.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.863992 localstack-core-2.0.3.dev20230424170116/localstack/utils/cloudwatch/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/cloudwatch/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6253 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/cloudwatch/cloudwatch_util.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    16629 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/collections.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6561 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/common.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2343 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/config_listener.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4512 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/container_networking.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.863992 localstack-core-2.0.3.dev20230424170116/localstack/utils/container_utils/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/container_utils/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    43017 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/container_utils/container_client.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    28581 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/container_utils/docker_cmd_client.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    29580 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/container_utils/docker_sdk_client.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      701 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/coverage_docs.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6852 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/crypto.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4619 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/diagnose.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     9027 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/docker_utils.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     9365 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/files.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2966 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/functions.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     9391 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/http.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6182 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/json.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.867992 localstack-core-2.0.3.dev20230424170116/localstack/utils/kinesis/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/kinesis/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4127 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/kinesis/kclipy_helper.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    19202 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/kinesis/kinesis_connector.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2416 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/kinesis/kinesis_util.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    10057 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/net.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      811 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/no_exit_argument_parser.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1288 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/numbers.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6176 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/objects.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4923 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/patch.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1553 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/platform.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    16617 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/run.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6547 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/scheduler.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.867992 localstack-core-2.0.3.dev20230424170116/localstack/utils/server/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        0 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/server/__init__.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    12408 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/server/http2_server.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      149 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/server/multiserver.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5822 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/server/proxy_server.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     6037 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/serving.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2300 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/ssl.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5640 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/strings.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3725 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/sync.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      829 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/tagging.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2952 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/tail.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    23504 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/testutil.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4851 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/threads.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1834 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/time.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1235 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/urls.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3202 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/venv.py
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1146 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/localstack/utils/xml.py
+drwxrwxr-x   0 circleci  (1001) circleci  (1002)        0 2023-04-24 17:01:23.871992 localstack-core-2.0.3.dev20230424170116/localstack_core.egg-info/
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)      652 2023-04-24 17:01:23.000000 localstack-core-2.0.3.dev20230424170116/localstack_core.egg-info/PKG-INFO
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)    37135 2023-04-24 17:01:23.000000 localstack-core-2.0.3.dev20230424170116/localstack_core.egg-info/SOURCES.txt
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        1 2023-04-24 17:01:23.000000 localstack-core-2.0.3.dev20230424170116/localstack_core.egg-info/dependency_links.txt
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     4968 2023-04-24 17:01:23.000000 localstack-core-2.0.3.dev20230424170116/localstack_core.egg-info/entry_points.txt
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)        1 2023-04-24 17:01:20.000000 localstack-core-2.0.3.dev20230424170116/localstack_core.egg-info/not-zip-safe
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     5055 2023-04-24 17:01:20.000000 localstack-core-2.0.3.dev20230424170116/localstack_core.egg-info/plux.json
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     2777 2023-04-24 17:01:23.000000 localstack-core-2.0.3.dev20230424170116/localstack_core.egg-info/requires.txt
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)       11 2023-04-24 17:01:23.000000 localstack-core-2.0.3.dev20230424170116/localstack_core.egg-info/top_level.txt
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     1414 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/pyproject.toml
+-rw-rw-r--   0 circleci  (1001) circleci  (1002)     3137 2023-04-24 17:01:23.871992 localstack-core-2.0.3.dev20230424170116/setup.cfg
+-rwxrwxr-x   0 circleci  (1001) circleci  (1002)       60 2023-04-24 16:29:49.000000 localstack-core-2.0.3.dev20230424170116/setup.py
```

### Comparing `localstack-core-2.0.3.dev20230424153605/LICENSE.txt` & `localstack-core-2.0.3.dev20230424170116/LICENSE.txt`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/Makefile` & `localstack-core-2.0.3.dev20230424170116/Makefile`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/PKG-INFO` & `localstack-core-2.0.3.dev20230424170116/PKG-INFO`

 * *Files 16% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: localstack-core
-Version: 2.0.3.dev20230424153605
+Version: 2.0.3.dev20230424170116
 Summary: The core library and runtime of LocalStack
 Home-page: https://github.com/localstack/localstack
 Author: LocalStack Contributors
 Author-email: info@localstack.cloud
 License: Apache License 2.0
 Classifier: Programming Language :: Python :: 3.10
 Classifier: License :: OSI Approved :: Apache Software License
```

### Comparing `localstack-core-2.0.3.dev20230424153605/README.md` & `localstack-core-2.0.3.dev20230424170116/README.md`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/bin/localstack` & `localstack-core-2.0.3.dev20230424170116/bin/localstack`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/bin/localstack-supervisor` & `localstack-core-2.0.3.dev20230424170116/bin/localstack-supervisor`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/accounts.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/accounts.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/acm/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/acm/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/apigateway/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/apigateway/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/cloudformation/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/cloudformation/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/cloudwatch/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/cloudwatch/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/config/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/config/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/core.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/core.py`

 * *Files 5% similar despite different names*

```diff
@@ -1,12 +1,13 @@
 import functools
 import sys
 from typing import Any, NamedTuple, Optional, Type, Union
 
 from localstack.aws.connect import InternalRequestParameters
+from localstack.utils.strings import long_uid
 
 if sys.version_info >= (3, 8):
     from typing import Protocol, TypedDict
 else:
     from typing_extensions import Protocol, TypedDict
 
 from botocore.model import OperationModel, ServiceModel
@@ -87,14 +88,16 @@
     """The botocore ServiceModel of the service the request is made to."""
     operation: Optional[OperationModel]
     """The botocore OperationModel of the AWS operation being invoked."""
     region: Optional[str]
     """The region the request is made to."""
     account_id: Optional[str]
     """The account the request is made from."""
+    request_id: Optional[str]
+    """The autogenerated AWS request ID identifying the original request"""
     service_request: Optional[ServiceRequest]
     """The AWS operation parameters."""
     service_response: Optional[ServiceResponse]
     """The response from the AWS emulator backend."""
     service_exception: Optional[ServiceException]
     """The exception the AWS emulator backend may have raised."""
     internal_request_params: Optional[InternalRequestParameters]
@@ -102,14 +105,15 @@
 
     def __init__(self) -> None:
         self.service = None
         self.operation = None
         self.region = None
         self.account_id = None
         self.request = None
+        self.request_id = long_uid()
         self.service_request = None
         self.service_response = None
         self.service_exception = None
         self.internal_request_params = None
 
     @property
     def is_internal_call(self) -> bool:
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/dynamodb/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/dynamodb/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/dynamodbstreams/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/dynamodbstreams/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/ec2/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/ec2/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/es/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/es/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/events/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/events/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/firehose/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/firehose/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/iam/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/iam/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/kinesis/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/kinesis/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/kms/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/kms/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/lambda_/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/lambda_/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/logs/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/logs/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/opensearch/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/opensearch/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/redshift/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/redshift/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/resource_groups/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/resource_groups/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/resourcegroupstaggingapi/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/resourcegroupstaggingapi/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/route53/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/route53/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/route53resolver/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/route53resolver/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/s3/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/s3/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/s3control/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/s3control/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/secretsmanager/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/secretsmanager/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/ses/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/ses/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/sns/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/sns/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/sqs/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/sqs/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/ssm/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/ssm/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/stepfunctions/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/stepfunctions/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/sts/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/sts/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/support/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/support/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/swf/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/swf/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/api/transcribe/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/api/transcribe/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/app.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/app.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/chain.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/chain.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/client.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/client.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/connect.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/connect.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/forwarder.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/forwarder.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/gateway.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/gateway.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/analytics.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/analytics.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/auth.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/auth.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/codec.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/codec.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/cors.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/cors.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/fallback.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/fallback.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/internal.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/internal.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/internal_requests.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/internal_requests.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/legacy.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/legacy.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/logging.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/logging.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/metric_handler.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/metric_handler.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/partition_rewriter.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/partition_rewriter.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/proxy.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/proxy.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/region.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/region.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/routes.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/routes.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/service.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/service.py`

 * *Files 0% similar despite different names*

```diff
@@ -220,15 +220,17 @@
 
             status_code = 501 if config.FAIL_FAST else 500
 
             error = CommonServiceException("InternalError", msg, status_code=status_code)
             context.service_exception = error
 
         serializer = create_serializer(context.service)  # TODO: serializer cache
-        return serializer.serialize_error_to_response(error, operation, context.request.headers)
+        return serializer.serialize_error_to_response(
+            error, operation, context.request.headers, context.request_id
+        )
 
 
 class ServiceResponseParser(Handler):
     """
     This response handler makes sure that, if the current request in an AWS request, that either ``service_response``
     or ``service_exception`` of ``RequestContext`` is set to something sensible before other downstream response
     handlers are called. When the Skeleton invokes an ASF-native provider, this will mostly return immediately
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/handlers/service_plugin.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/handlers/service_plugin.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/mocking.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/mocking.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/protocol/op_router.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/protocol/op_router.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/protocol/parser.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/protocol/parser.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/protocol/serializer.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/protocol/serializer.py`

 * *Files 2% similar despite different names*

```diff
@@ -71,15 +71,14 @@
 be sent back to the calling client.
 """
 import abc
 import base64
 import functools
 import json
 import logging
-import random
 import string
 from abc import ABC
 from binascii import crc32
 from datetime import datetime
 from email.utils import formatdate
 from struct import pack
 from typing import Any, Dict, Iterable, Iterator, List, Optional, Tuple, Union
@@ -104,14 +103,15 @@
     APPLICATION_AMZ_JSON_1_1,
     APPLICATION_CBOR,
     APPLICATION_JSON,
     APPLICATION_XML,
     TEXT_XML,
 )
 from localstack.utils.common import to_bytes, to_str
+from localstack.utils.strings import long_uid
 from localstack.utils.xml import strip_xmlns
 
 LOG = logging.getLogger(__name__)
 
 REQUEST_ID_CHARACTERS = string.digits + string.ascii_uppercase
 
 
@@ -178,63 +178,76 @@
     AWS_BINARY_DATA_TYPE_STRING = 7
     # Defines the supported mime types of the specific serializer. Sorted by priority (preferred / default first).
     # Needs to be specified by subclasses.
     SUPPORTED_MIME_TYPES: List[str] = []
 
     @_handle_exceptions
     def serialize_to_response(
-        self, response: dict, operation_model: OperationModel, headers: Optional[Dict | Headers]
+        self,
+        response: dict,
+        operation_model: OperationModel,
+        headers: Optional[Dict | Headers],
+        request_id: str,
     ) -> HttpResponse:
         """
         Takes a response dict and serializes it to an actual HttpResponse.
 
         :param response: to serialize
         :param operation_model: specification of the service & operation containing information about the shape of the
                                 service's output / response
         :param headers: the headers of the incoming request this response should be serialized for. This is necessary
                         for features like Content-Negotiation (define response content type based on request headers).
+        :param request_id: autogenerated AWS request ID identifying the original request
         :return: HttpResponse which can be sent to the calling client
         :raises: ResponseSerializerError (either a ProtocolSerializerError or an UnknownSerializerError)
         """
 
         # determine the preferred mime type (based on the serializer's supported mime types and the Accept header)
         mime_type = self._get_mime_type(headers)
 
         # if the operation has a streaming output, handle the serialization differently
         if operation_model.has_event_stream_output:
-            return self._serialize_event_stream(response, operation_model, mime_type)
+            return self._serialize_event_stream(response, operation_model, mime_type, request_id)
 
         serialized_response = self._create_default_response(operation_model, mime_type)
         shape = operation_model.output_shape
         # The shape can also be none (for empty responses), but it still needs to be serialized (to add some metadata)
         shape_members = shape.members if shape is not None else None
         self._serialize_response(
-            response, serialized_response, shape, shape_members, operation_model, mime_type
+            response,
+            serialized_response,
+            shape,
+            shape_members,
+            operation_model,
+            mime_type,
+            request_id,
         )
         serialized_response = self._prepare_additional_traits_in_response(
-            serialized_response, operation_model
+            serialized_response, operation_model, request_id
         )
         return serialized_response
 
     @_handle_exceptions
     def serialize_error_to_response(
         self,
         error: ServiceException,
         operation_model: OperationModel,
         headers: Optional[Dict | Headers],
+        request_id: str,
     ) -> HttpResponse:
         """
         Takes an error instance and serializes it to an actual HttpResponse.
         Therefore, this method is used for errors which should be serialized and transmitted to the calling client.
 
         :param error: to serialize
         :param operation_model: specification of the service & operation containing information about the shape of the
                                 service's output / response
         :param headers: the headers of the incoming request this response should be serialized for. This is necessary
                         for features like Content-Negotiation (define response content type based on request headers).
+        :param request_id: autogenerated AWS request ID identifying the original request
         :return: HttpResponse which can be sent to the calling client
         :raises: ResponseSerializerError (either a ProtocolSerializerError or an UnknownSerializerError)
         """
         # determine the preferred mime type (based on the serializer's supported mime types and the Accept header)
         mime_type = self._get_mime_type(headers)
 
         # TODO implement streaming error serialization
@@ -242,69 +255,80 @@
         if not error or not isinstance(error, ServiceException):
             raise ProtocolSerializerError(
                 f"Error to serialize ({error.__class__.__name__ if error else None}) is not a ServiceException."
             )
         shape = operation_model.service_model.shape_for_error_code(error.code)
         serialized_response.status_code = error.status_code
 
-        self._serialize_error(error, serialized_response, shape, operation_model, mime_type)
+        self._serialize_error(
+            error, serialized_response, shape, operation_model, mime_type, request_id
+        )
         serialized_response = self._prepare_additional_traits_in_response(
-            serialized_response, operation_model
+            serialized_response, operation_model, request_id
         )
         return serialized_response
 
     def _serialize_response(
         self,
         parameters: dict,
         response: HttpResponse,
         shape: Optional[Shape],
         shape_members: dict,
         operation_model: OperationModel,
         mime_type: str,
+        request_id: str,
     ) -> None:
         raise NotImplementedError
 
     def _serialize_body_params(
         self,
         params: dict,
         shape: Shape,
         operation_model: OperationModel,
         mime_type: str,
+        request_id: str,
     ) -> Optional[str]:
         """
         Actually serializes the given params for the given shape to a string for the transmission in the body of the
         response.
         :param params: to serialize
         :param shape: to know how to serialize the params
         :param operation_model: for additional metadata
         :param mime_type: Mime type which should be used to encode the payload
+        :param request_id: autogenerated AWS request ID identifying the original request
         :return: string containing the serialized body
         """
         raise NotImplementedError
 
     def _serialize_error(
         self,
         error: ServiceException,
         response: HttpResponse,
         shape: StructureShape,
         operation_model: OperationModel,
         mime_type: str,
+        request_id: str,
     ) -> None:
         raise NotImplementedError
 
     def _serialize_event_stream(
-        self, response: dict, operation_model: OperationModel, mime_type: str
+        self,
+        response: dict,
+        operation_model: OperationModel,
+        mime_type: str,
+        request_id: str,
     ) -> HttpResponse:
         """
         Serializes a given response dict (the return payload of a service implementation) to an _event stream_ using the
         given operation model.
 
         :param response: dictionary containing the payload for the response
         :param operation_model: describing the operation the response dict is being returned by
         :param mime_type: Mime type which should be used to encode the payload
+        :param request_id: autogenerated AWS request ID identifying the original request
         :return: HttpResponse which can directly be sent to the client (in chunks)
         """
         event_stream_shape = operation_model.get_event_stream_output()
         event_stream_member_name = operation_model.output_shape.event_stream_name
 
         # wrap the generator in operation specific serialization
         def event_stream_serializer() -> Iterable[bytes]:
@@ -341,18 +365,19 @@
                 self._serialize_response(
                     event.get(event_member_name),
                     serialized_event_response,
                     event_member_shape,
                     event_member_shape.members if event_member_shape is not None else None,
                     operation_model,
                     mime_type,
+                    request_id,
                 )
                 # execute additional response traits (might be modifying the response)
                 serialized_event_response = self._prepare_additional_traits_in_response(
-                    serialized_event_response, operation_model
+                    serialized_event_response, operation_model, request_id
                 )
                 # encode the event and yield it
                 yield self._encode_event_payload(
                     event_type=event_member_name, content=serialized_event_response.data
                 )
 
         return HttpResponse(
@@ -531,15 +556,15 @@
 
     def _encode_payload(self, body: Union[bytes, str]) -> bytes:
         if isinstance(body, str):
             return body.encode(self.DEFAULT_ENCODING)
         return body
 
     def _prepare_additional_traits_in_response(
-        self, response: HttpResponse, operation_model: OperationModel
+        self, response: HttpResponse, operation_model: OperationModel, request_id: str
     ):
         """Applies additional traits on the raw response for a given model or protocol."""
         if operation_model.http_checksum_required:
             self._add_md5_header(response)
         return response
 
     def _has_header(self, header_name: str, headers: dict):
@@ -575,27 +600,28 @@
     def _serialize_error(
         self,
         error: ServiceException,
         response: HttpResponse,
         shape: StructureShape,
         operation_model: OperationModel,
         mime_type: str,
+        request_id: str,
     ) -> None:
         # Check if we need to add a namespace
         attr = (
             {"xmlns": operation_model.metadata.get("xmlNamespace")}
             if "xmlNamespace" in operation_model.metadata
             else {}
         )
         root = ETree.Element("ErrorResponse", attr)
 
         error_tag = ETree.SubElement(root, "Error")
         self._add_error_tags(error, error_tag, mime_type)
-        request_id = ETree.SubElement(root, "RequestId")
-        request_id.text = gen_amzn_requestid_long()
+        request_id_element = ETree.SubElement(root, "RequestId")
+        request_id_element.text = request_id
 
         self._add_additional_error_tags(error, root, shape, mime_type)
 
         response.set_response(self._encode_payload(self._node_to_string(root, mime_type)))
 
     def _add_error_tags(
         self, error: ServiceException, error_tag: ETree.Element, mime_type: str
@@ -634,17 +660,18 @@
 
     def _serialize_body_params(
         self,
         params: dict,
         shape: Shape,
         operation_model: OperationModel,
         mime_type: str,
+        request_id: str,
     ) -> Optional[str]:
         root = self._serialize_body_params_to_xml(params, shape, operation_model, mime_type)
-        self._prepare_additional_traits_in_xml(root)
+        self._prepare_additional_traits_in_xml(root, request_id)
         return self._node_to_string(root, mime_type)
 
     def _serialize_body_params_to_xml(
         self, params: dict, shape: Shape, operation_model: OperationModel, mime_type: str
     ) -> Optional[ETree.Element]:
         if shape is None:
             return
@@ -811,15 +838,15 @@
                 int(self._convert_timestamp_to_str(params, JSONResponseSerializer.TIMESTAMP_FORMAT))
             )
 
     def _default_serialize(self, xmlnode: ETree.Element, params: str, _, name: str, __) -> None:
         node = ETree.SubElement(xmlnode, name)
         node.text = str(params)
 
-    def _prepare_additional_traits_in_xml(self, root: Optional[ETree.Element]):
+    def _prepare_additional_traits_in_xml(self, root: Optional[ETree.Element], request_id: str):
         """
         Prepares the XML root node before being serialized with additional traits (like the Response ID in the Query
         protocol).
         For some protocols (like rest-xml), the root can be None.
         """
         pass
 
@@ -856,44 +883,53 @@
         self,
         parameters: dict,
         response: HttpResponse,
         shape: Optional[Shape],
         shape_members: dict,
         operation_model: OperationModel,
         mime_type: str,
+        request_id: str,
     ) -> None:
         header_params, payload_params = self._partition_members(parameters, shape)
         self._process_header_members(header_params, response, shape)
         # "HEAD" responses are basically "GET" responses without the actual body.
         # Do not process the body payload in this case (setting a body could also manipulate the headers)
         if operation_model.http.get("method") != "HEAD":
             self._serialize_payload(
-                payload_params, response, shape, shape_members, operation_model, mime_type
+                payload_params,
+                response,
+                shape,
+                shape_members,
+                operation_model,
+                mime_type,
+                request_id,
             )
         self._serialize_content_type(response, shape, shape_members, mime_type)
-        self._prepare_additional_traits_in_response(response, operation_model)
+        self._prepare_additional_traits_in_response(response, operation_model, request_id)
 
     def _serialize_payload(
         self,
         parameters: dict,
         response: HttpResponse,
         shape: Optional[Shape],
         shape_members: dict,
         operation_model: OperationModel,
         mime_type: str,
+        request_id: str,
     ) -> None:
         """
         Serializes the given payload.
 
         :param parameters: The user input params
         :param response: The final serialized HttpResponse
         :param shape: Describes the expected output shape (can be None in case of an "empty" response)
         :param shape_members: The members of the output struct shape
         :param operation_model: The specification of the operation of which the response is serialized here
         :param mime_type: Mime type which should be used to encode the payload
+        :param request_id: autogenerated AWS request ID identifying the original request
         :return: None - the given `serialized` dict is modified
         """
         if shape is None:
             return
 
         payload_member = shape.serialization.get("payload")
         # If this shape is defined as being an event, we need to search for the payload member
@@ -914,23 +950,29 @@
         elif payload_member is not None:
             # If there's a payload member, we serialized that member to the body.
             body_params = parameters.get(payload_member)
             if body_params is not None:
                 response.set_response(
                     self._encode_payload(
                         self._serialize_body_params(
-                            body_params, shape_members[payload_member], operation_model, mime_type
+                            body_params,
+                            shape_members[payload_member],
+                            operation_model,
+                            mime_type,
+                            request_id,
                         )
                     )
                 )
         else:
             # Otherwise, we use the "traditional" way of serializing the whole parameters dict recursively.
             response.set_response(
                 self._encode_payload(
-                    self._serialize_body_params(parameters, shape, operation_model, mime_type)
+                    self._serialize_body_params(
+                        parameters, shape, operation_model, mime_type, request_id
+                    )
                 )
             )
 
     def _serialize_content_type(
         self, serialized: HttpResponse, shape: Shape, shape_members: dict, mime_type: str
     ):
         """
@@ -940,19 +982,21 @@
         pass
 
     def _has_streaming_payload(self, payload: Optional[str], shape_members):
         """Determine if payload is streaming (a blob or string)."""
         return payload is not None and shape_members[payload].type_name in ["blob", "string"]
 
     def _prepare_additional_traits_in_response(
-        self, response: HttpResponse, operation_model: OperationModel
+        self, response: HttpResponse, operation_model: OperationModel, request_id: str
     ):
         """Adds the request ID to the headers (in contrast to the body - as in the Query protocol)."""
-        response = super()._prepare_additional_traits_in_response(response, operation_model)
-        response.headers["x-amz-request-id"] = gen_amzn_requestid_long()
+        response = super()._prepare_additional_traits_in_response(
+            response, operation_model, request_id
+        )
+        response.headers["x-amz-request-id"] = request_id
         return response
 
     def _process_header_members(self, parameters: dict, response: HttpResponse, shape: Shape):
         shape_members = shape.members if isinstance(shape, StructureShape) else []
         for name in shape_members:
             member_shape = shape_members[name]
             location = member_shape.serialization.get("location")
@@ -1045,29 +1089,33 @@
         self,
         parameters: dict,
         response: HttpResponse,
         shape: Optional[Shape],
         shape_members: dict,
         operation_model: OperationModel,
         mime_type: str,
+        request_id: str,
     ) -> None:
         """
         Serializes the given parameters as XML for the query protocol.
 
         :param parameters: The user input params
         :param response: The final serialized HttpResponse
         :param shape: Describes the expected output shape (can be None in case of an "empty" response)
         :param shape_members: The members of the output struct shape
         :param operation_model: The specification of the operation of which the response is serialized here
         :param mime_type: Mime type which should be used to encode the payload
+        :param request_id: autogenerated AWS request ID identifying the original request
         :return: None - the given `serialized` dict is modified
         """
         response.set_response(
             self._encode_payload(
-                self._serialize_body_params(parameters, shape, operation_model, mime_type)
+                self._serialize_body_params(
+                    parameters, shape, operation_model, mime_type, request_id
+                )
             )
         )
 
     def _serialize_body_params_to_xml(
         self, params: dict, shape: Shape, operation_model: OperationModel, mime_type: str
     ) -> ETree.Element:
         # The Query protocol responses have a root element which is not contained in the specification file.
@@ -1084,20 +1132,20 @@
 
         # Create the root element and add the result of the XML serializer as a child node
         root = ETree.Element(f"{operation_model.name}Response", attr)
         if node is not None:
             root.append(node)
         return root
 
-    def _prepare_additional_traits_in_xml(self, root: Optional[ETree.Element]):
+    def _prepare_additional_traits_in_xml(self, root: Optional[ETree.Element], request_id: str):
         # Add the response metadata here (it's not defined in the specs)
         # For the ec2 and the query protocol, the root cannot be None at this time.
         response_metadata = ETree.SubElement(root, "ResponseMetadata")
-        request_id = ETree.SubElement(response_metadata, "RequestId")
-        request_id.text = gen_amzn_requestid_long()
+        request_id_element = ETree.SubElement(response_metadata, "RequestId")
+        request_id_element.text = request_id
 
 
 class EC2ResponseSerializer(QueryResponseSerializer):
     """
     The ``EC2ResponseSerializer`` is responsible for the serialization of responses from services which use the
     ``ec2`` protocol (basically the EC2 service). This protocol is basically equal to the ``query`` protocol with only
     a few subtle differences.
@@ -1106,14 +1154,15 @@
     def _serialize_error(
         self,
         error: ServiceException,
         response: HttpResponse,
         shape: StructureShape,
         operation_model: OperationModel,
         mime_type: str,
+        request_id: str,
     ) -> None:
         # EC2 errors look like:
         # <Response>
         #   <Errors>
         #     <Error>
         #       <Code>InvalidInstanceID.Malformed</Code>
         #       <Message>Invalid id: "1343124"</Message>
@@ -1128,31 +1177,31 @@
             if "xmlNamespace" in operation_model.metadata
             else None
         )
         root = ETree.Element("Response", attr)
         errors_tag = ETree.SubElement(root, "Errors")
         error_tag = ETree.SubElement(errors_tag, "Error")
         self._add_error_tags(error, error_tag, mime_type)
-        request_id = ETree.SubElement(root, "RequestID")
-        request_id.text = gen_amzn_requestid_long()
+        request_id_element = ETree.SubElement(root, "RequestID")
+        request_id_element.text = request_id
         response.set_response(self._encode_payload(self._node_to_string(root, mime_type)))
 
-    def _prepare_additional_traits_in_xml(self, root: Optional[ETree.Element]):
+    def _prepare_additional_traits_in_xml(self, root: Optional[ETree.Element], request_id: str):
         # The EC2 protocol does not use the root output shape, therefore we need to remove the hierarchy level
         # below the root level
         if len(root) > 0:
             output_node = root[0]
             for child in output_node:
                 root.append(child)
             root.remove(output_node)
 
         # Add the requestId here (it's not defined in the specs)
         # For the ec2 and the query protocol, the root cannot be None at this time.
-        request_id = ETree.SubElement(root, "requestId")
-        request_id.text = gen_amzn_requestid_long()
+        request_id_element = ETree.SubElement(root, "requestId")
+        request_id_element.text = request_id
 
 
 class JSONResponseSerializer(ResponseSerializer):
     """
     The ``JSONResponseSerializer`` is responsible for the serialization of responses from services with the ``json``
     protocol. It implements the JSON response body serialization, which is also used by the
     ``RestJSONResponseSerializer``.
@@ -1167,14 +1216,15 @@
     def _serialize_error(
         self,
         error: ServiceException,
         response: HttpResponse,
         shape: StructureShape,
         operation_model: OperationModel,
         mime_type: str,
+        request_id: str,
     ) -> None:
         body = dict()
 
         # TODO implement different service-specific serializer configurations
         #   - currently we set both, the `__type` member as well as the `X-Amzn-Errortype` header
         #   - the specification defines that it's either the __type field OR the header
         response.headers["X-Amzn-Errortype"] = error.code
@@ -1207,27 +1257,33 @@
         self,
         parameters: dict,
         response: HttpResponse,
         shape: Optional[Shape],
         shape_members: dict,
         operation_model: OperationModel,
         mime_type: str,
+        request_id: str,
     ) -> None:
         if mime_type in self.CBOR_TYPES:
             response.content_type = mime_type
         else:
             json_version = operation_model.metadata.get("jsonVersion")
             if json_version is not None:
                 response.headers["Content-Type"] = "application/x-amz-json-%s" % json_version
         response.set_response(
-            self._serialize_body_params(parameters, shape, operation_model, mime_type)
+            self._serialize_body_params(parameters, shape, operation_model, mime_type, request_id)
         )
 
     def _serialize_body_params(
-        self, params: dict, shape: Shape, operation_model: OperationModel, mime_type: str
+        self,
+        params: dict,
+        shape: Shape,
+        operation_model: OperationModel,
+        mime_type: str,
+        request_id: str,
     ) -> Optional[str]:
         body = {}
         if shape is not None:
             self._serialize(body, params, shape, None, mime_type)
 
         if mime_type in self.CBOR_TYPES:
             return cbor2.dumps(body)
@@ -1325,18 +1381,20 @@
     ):
         if mime_type in self.CBOR_TYPES:
             body[key] = value
         else:
             body[key] = self._get_base64(value)
 
     def _prepare_additional_traits_in_response(
-        self, response: HttpResponse, operation_model: OperationModel
+        self, response: HttpResponse, operation_model: OperationModel, request_id: str
     ):
-        response.headers["x-amzn-requestid"] = gen_amzn_requestid_long()
-        response = super()._prepare_additional_traits_in_response(response, operation_model)
+        response.headers["x-amzn-requestid"] = request_id
+        response = super()._prepare_additional_traits_in_response(
+            response, operation_model, request_id
+        )
         return response
 
 
 class RestJSONResponseSerializer(BaseRestResponseSerializer, JSONResponseSerializer):
     """
     The ``RestJSONResponseSerializer`` is responsible for the serialization of responses from services with the
     ``rest-json`` protocol.
@@ -1412,69 +1470,82 @@
         self,
         parameters: dict,
         response: HttpResponse,
         shape: Optional[Shape],
         shape_members: dict,
         operation_model: OperationModel,
         mime_type: str,
+        request_id: str,
     ) -> None:
         header_params, payload_params = self._partition_members(parameters, shape)
         self._process_header_members(header_params, response, shape)
         # "HEAD" responses are basically "GET" responses without the actual body.
         # Do not process the body payload in this case (setting a body could also manipulate the headers)
         # If the response is a redirection, the body should be empty as well
         if operation_model.http.get("method") != "HEAD" and not 300 <= response.status_code < 400:
             self._serialize_payload(
-                payload_params, response, shape, shape_members, operation_model, mime_type
+                payload_params,
+                response,
+                shape,
+                shape_members,
+                operation_model,
+                mime_type,
+                request_id,
             )
         self._serialize_content_type(response, shape, shape_members, mime_type)
-        self._prepare_additional_traits_in_response(response, operation_model)
+        self._prepare_additional_traits_in_response(response, operation_model, request_id)
 
     def _serialize_error(
         self,
         error: ServiceException,
         response: HttpResponse,
         shape: StructureShape,
         operation_model: OperationModel,
         mime_type: str,
+        request_id: str,
     ) -> None:
         attr = (
             {"xmlns": operation_model.metadata.get("xmlNamespace")}
             if "xmlNamespace" in operation_model.metadata
             else {}
         )
         root = ETree.Element("Error", attr)
         self._add_error_tags(error, root, mime_type)
-        request_id = ETree.SubElement(root, "RequestId")
-        request_id.text = gen_amzn_requestid_long()
+        request_id_element = ETree.SubElement(root, "RequestId")
+        request_id_element.text = request_id
         self._add_additional_error_tags(error, root, shape, mime_type)
 
         response.set_response(self._encode_payload(self._node_to_string(root, mime_type)))
 
     def _serialize_body_params(
         self,
         params: dict,
         shape: Shape,
         operation_model: OperationModel,
         mime_type: str,
+        request_id: str,
     ) -> Optional[str]:
         root = self._serialize_body_params_to_xml(params, shape, operation_model, mime_type)
         # S3 does not follow the specs on the root tag name for 41 of 44 operations
         root.tag = self._RESPONSE_ROOT_TAGS.get(root.tag, root.tag)
-        self._prepare_additional_traits_in_xml(root)
+        self._prepare_additional_traits_in_xml(root, request_id)
         return self._node_to_string(root, mime_type)
 
     def _prepare_additional_traits_in_response(
-        self, response: HttpResponse, operation_model: OperationModel
+        self, response: HttpResponse, operation_model: OperationModel, request_id: str
     ):
         """Adds the request ID to the headers (in contrast to the body - as in the Query protocol)."""
-        response = super()._prepare_additional_traits_in_response(response, operation_model)
+        response = super()._prepare_additional_traits_in_response(
+            response, operation_model, request_id
+        )
+        # s3 extended Request ID
+        # mostly used internally on AWS and corresponds to a HostId
         response.headers[
             "x-amz-id-2"
-        ] = f"MzRISOwyjmnup{response.headers['x-amz-request-id']}7/JypPGXLh0OVFGcJaaO3KW/hRAqKOpIEEp"
+        ] = "s9lzHYrFp76ZVxRcpX9+5cjAnEH2ROuNkd2BHfIa6UkFVdtjf5mKR3/eTPFvsiP/XV/VLi31234="
         return response
 
     def _add_error_tags(
         self, error: ServiceException, error_tag: ETree.Element, mime_type: str
     ) -> None:
         code_tag = ETree.SubElement(error_tag, "Code")
         code_tag.text = error.code
@@ -1488,15 +1559,15 @@
             # The sender fault is either not set or "Sender"
             self._default_serialize(error_tag, "Sender", None, "Type", mime_type)
 
     @staticmethod
     def _create_empty_node(xmlnode: ETree.Element, name: str) -> None:
         ETree.SubElement(xmlnode, name)
 
-    def _prepare_additional_traits_in_xml(self, root: Optional[ETree.Element]):
+    def _prepare_additional_traits_in_xml(self, root: Optional[ETree.Element], request_id: str):
         # some tools (Serverless) require a newline after the "<?xml ...>\n" preamble line, e.g., for LocationConstraint
         if root and not root.tail:
             root.tail = "\n"
 
 
 class SqsResponseSerializer(QueryResponseSerializer):
     """
@@ -1537,16 +1608,25 @@
                 .replace("__marker__\r__marker__", "&#xD;")
             )
             if generated_string is not None
             else None
         )
 
 
-def gen_amzn_requestid_long():
-    return "".join([random.choice(REQUEST_ID_CHARACTERS) for _ in range(0, 52)])
+def gen_amzn_requestid():
+    """
+    Generate generic AWS request ID.
+
+    3 uses a different format and set of request Ids.
+
+    Examples:
+    996d38a0-a4e9-45de-bad4-480cd962d208
+    b9260553-df1b-4db6-ae41-97b89a5f85ea
+    """
+    return long_uid()
 
 
 def create_serializer(service: ServiceModel) -> ResponseSerializer:
     """
     Creates the right serializer for the given service model.
 
     :param service: to create the serializer for
@@ -1611,33 +1691,38 @@
                 # method (arg[0] == self)
                 request = args[1]
             elif "request" in kwargs:
                 request = kwargs["request"]
             else:
                 raise ValueError(f"could not find Request in signature of function {fn}")
 
+            # TODO: we have no context here
+            # TODO: maybe try to get the request ID from the headers first before generating a new one
+            request_id = gen_amzn_requestid()
+
             try:
                 response = fn(*args, **kwargs)
 
                 if isinstance(response, WerkzeugResponse):
                     return response
 
                 return serializer.serialize_to_response(
-                    response,
-                    operation_model,
-                    request.headers,
+                    response, operation_model, request.headers, request_id
                 )
 
             except ServiceException as e:
-                return serializer.serialize_error_to_response(e, operation_model, request.headers)
+                return serializer.serialize_error_to_response(
+                    e, operation_model, request.headers, request_id
+                )
             except Exception as e:
                 return serializer.serialize_error_to_response(
                     CommonServiceException(
                         "InternalError", f"An internal error occurred: {e}", status_code=500
                     ),
                     operation_model,
                     request.headers,
+                    request_id,
                 )
 
         return _proxy
 
     return _decorate
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/protocol/service_router.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/protocol/service_router.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/protocol/validate.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/protocol/validate.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/proxy.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/proxy.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/scaffold.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/scaffold.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/serving/asgi.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/serving/asgi.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/serving/edge.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/serving/edge.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/serving/hypercorn.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/serving/hypercorn.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/serving/werkzeug.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/serving/werkzeug.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/serving/wsgi.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/serving/wsgi.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/skeleton.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/skeleton.py`

 * *Files 5% similar despite different names*

```diff
@@ -168,30 +168,32 @@
         # if the service handler returned an HTTP request, forego serialization and return immediately
         if isinstance(result, HttpResponse):
             return result
 
         context.service_response = result
 
         # Serialize result dict to an HTTPResponse and return it
-        return self.serializer.serialize_to_response(result, operation, context.request.headers)
+        return self.serializer.serialize_to_response(
+            result, operation, context.request.headers, context.request_id
+        )
 
     def on_service_exception(
         self, context: RequestContext, exception: ServiceException
     ) -> HttpResponse:
         """
         Called by invoke if the handler of the operation raised a ServiceException.
 
         :param context: the request context
         :param exception: the exception that was raised
         :return: an HttpResponse object
         """
         context.service_exception = exception
 
         return self.serializer.serialize_error_to_response(
-            exception, context.operation, context.request.headers
+            exception, context.operation, context.request.headers, context.request_id
         )
 
     def on_not_implemented_error(
         self, context: RequestContext, exception: NotImplementedError
     ) -> HttpResponse:
         """
         Called by invoke if either the dispatch table did not contain an entry for the operation, or the service
@@ -211,8 +213,10 @@
         error = CommonServiceException("InternalFailure", message, status_code=501)
         # record event
         analytics.log.event(
             "services_notimplemented", payload={"s": service_name, "a": action_name}
         )
         context.service_exception = error
 
-        return serializer.serialize_error_to_response(error, operation, context.request.headers)
+        return serializer.serialize_error_to_response(
+            error, operation, context.request.headers, context.request_id
+        )
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/spec-patches.json` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/spec-patches.json`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/spec.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/spec.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/aws/trace.py` & `localstack-core-2.0.3.dev20230424170116/localstack/aws/trace.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/cli/localstack.py` & `localstack-core-2.0.3.dev20230424170116/localstack/cli/localstack.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/cli/lpm.py` & `localstack-core-2.0.3.dev20230424170116/localstack/cli/lpm.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/cli/plugin.py` & `localstack-core-2.0.3.dev20230424170116/localstack/cli/plugin.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/cli/plugins.py` & `localstack-core-2.0.3.dev20230424170116/localstack/cli/plugins.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/cli/profiles.py` & `localstack-core-2.0.3.dev20230424170116/localstack/cli/profiles.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/config.py` & `localstack-core-2.0.3.dev20230424170116/localstack/config.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/constants.py` & `localstack-core-2.0.3.dev20230424170116/localstack/constants.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/contrib/thundra.py` & `localstack-core-2.0.3.dev20230424170116/localstack/contrib/thundra.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/deprecations.py` & `localstack-core-2.0.3.dev20230424170116/localstack/deprecations.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/extensions/api/aws.py` & `localstack-core-2.0.3.dev20230424170116/localstack/extensions/api/aws.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/extensions/api/extension.py` & `localstack-core-2.0.3.dev20230424170116/localstack/extensions/api/extension.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/http/adapters.py` & `localstack-core-2.0.3.dev20230424170116/localstack/http/adapters.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/http/asgi.py` & `localstack-core-2.0.3.dev20230424170116/localstack/http/asgi.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/http/client.py` & `localstack-core-2.0.3.dev20230424170116/localstack/http/client.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/http/dispatcher.py` & `localstack-core-2.0.3.dev20230424170116/localstack/http/dispatcher.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/http/hypercorn.py` & `localstack-core-2.0.3.dev20230424170116/localstack/http/hypercorn.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/http/proxy.py` & `localstack-core-2.0.3.dev20230424170116/localstack/http/proxy.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/http/request.py` & `localstack-core-2.0.3.dev20230424170116/localstack/http/request.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/http/resource.py` & `localstack-core-2.0.3.dev20230424170116/localstack/http/resource.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/http/response.py` & `localstack-core-2.0.3.dev20230424170116/localstack/http/response.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/http/router.py` & `localstack-core-2.0.3.dev20230424170116/localstack/http/router.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/logging/format.py` & `localstack-core-2.0.3.dev20230424170116/localstack/logging/format.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/logging/setup.py` & `localstack-core-2.0.3.dev20230424170116/localstack/logging/setup.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/packages/__init__.py` & `localstack-core-2.0.3.dev20230424170116/localstack/packages/__init__.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/packages/api.py` & `localstack-core-2.0.3.dev20230424170116/localstack/packages/api.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/packages/core.py` & `localstack-core-2.0.3.dev20230424170116/localstack/packages/core.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/packages/debugpy.py` & `localstack-core-2.0.3.dev20230424170116/localstack/packages/debugpy.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/packages/terraform.py` & `localstack-core-2.0.3.dev20230424170116/localstack/packages/terraform.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/plugins.py` & `localstack-core-2.0.3.dev20230424170116/localstack/plugins.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/runtime/analytics.py` & `localstack-core-2.0.3.dev20230424170116/localstack/runtime/analytics.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/runtime/hooks.py` & `localstack-core-2.0.3.dev20230424170116/localstack/runtime/hooks.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/runtime/init.py` & `localstack-core-2.0.3.dev20230424170116/localstack/runtime/init.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/runtime/main.py` & `localstack-core-2.0.3.dev20230424170116/localstack/runtime/main.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/runtime/shutdown.py` & `localstack-core-2.0.3.dev20230424170116/localstack/runtime/shutdown.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/acm/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/acm/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/context.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/context.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/helpers.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/helpers.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/integration.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/integration.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/invocations.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/invocations.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/models.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/models.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/patches.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/patches.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/router_asf.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/router_asf.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/apigateway/templates.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/apigateway/templates.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/api_utils.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/api_utils.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/event_source_listeners/adapters.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/event_source_listeners/adapters.py`

 * *Files 1% similar despite different names*

```diff
@@ -3,14 +3,15 @@
 import threading
 from abc import ABC
 from concurrent.futures import Future
 from typing import Callable, Optional
 
 from localstack import config
 from localstack.aws.api.lambda_ import InvocationType
+from localstack.aws.protocol.serializer import gen_amzn_requestid
 from localstack.services.awslambda import api_utils
 from localstack.services.awslambda.invocation.lambda_models import InvocationError, InvocationResult
 from localstack.services.awslambda.invocation.lambda_service import LambdaService
 from localstack.services.awslambda.invocation.models import lambda_stores
 from localstack.services.awslambda.lambda_executors import (
     InvocationResult as LegacyInvocationResult,  # TODO: extract
 )
@@ -128,14 +129,15 @@
             function_name=fn_parts["function_name"],
             qualifier=fn_parts["qualifier"],
             region=fn_parts["region_name"],
             account_id=fn_parts["account_id"],
             invocation_type=invocation_type,
             client_context=json.dumps(context or {}),
             payload=to_bytes(json.dumps(payload or {})),
+            request_id=gen_amzn_requestid(),
         )
 
         if callback:
 
             def mapped_callback(ft_result: Future[InvocationResult]) -> None:
                 try:
                     result = ft_result.result(timeout=10)
@@ -184,14 +186,15 @@
                 function_name=fn_parts["function_name"],
                 qualifier=fn_parts["qualifier"],
                 region=fn_parts["region_name"],
                 account_id=fn_parts["account_id"],
                 invocation_type=invocation_type,
                 client_context=json.dumps(context or {}),
                 payload=to_bytes(json.dumps(payload or {})),
+                request_id=gen_amzn_requestid(),
             )
 
             if callback:
 
                 def mapped_callback(ft_result: Future[InvocationResult]) -> None:
                     try:
                         result = ft_result.result(timeout=10)
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/event_source_listeners/dynamodb_event_source_listener.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/event_source_listeners/dynamodb_event_source_listener.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/event_source_listeners/event_source_listener.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/event_source_listeners/event_source_listener.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/event_source_listeners/kinesis_event_source_listener.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/event_source_listeners/kinesis_event_source_listener.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/event_source_listeners/sqs_event_source_listener.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/event_source_listeners/sqs_event_source_listener.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/event_source_listeners/stream_event_source_listener.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/event_source_listeners/stream_event_source_listener.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/hooks.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/hooks.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/docker_runtime_executor.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/docker_runtime_executor.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/executor_endpoint.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/executor_endpoint.py`

 * *Files 0% similar despite different names*

```diff
@@ -59,15 +59,15 @@
             result = InvocationError(req_id, request.data)
             self.service_endpoint.invocation_error(invoke_id=req_id, invocation_error=result)
             return Response(status=HTTPStatus.ACCEPTED)
 
         def invocation_logs(request: Request, invoke_id: str) -> Response:
             logs = request.json
             if isinstance(logs, Dict):
-                logs["invocation_id"] = invoke_id
+                logs["request_id"] = invoke_id
                 invocation_logs = InvocationLogs(**logs)
                 self.service_endpoint.invocation_logs(
                     invoke_id=invoke_id, invocation_logs=invocation_logs
                 )
             else:
                 LOG.error("Invalid logs from RAPID! Logs: %s", logs)
                 # TODO handle error in some way?
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/lambda_models.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/lambda_models.py`

 * *Files 2% similar despite different names*

```diff
@@ -94,14 +94,15 @@
 @dataclasses.dataclass
 class Invocation:
     payload: bytes
     invoked_arn: str
     client_context: Optional[str]
     invocation_type: InvocationType
     invoke_time: datetime
+    request_id: str
 
 
 class ArchiveCode(metaclass=ABCMeta):
     @abstractmethod
     def generate_presigned_url(self, endpoint_url):
         """
         Generates a presigned url pointing to the code archive
@@ -451,31 +452,31 @@
     maximum_retry_attempts: Optional[int] = None
     maximum_event_age_in_seconds: Optional[int] = None
 
 
 # Result Models
 @dataclasses.dataclass
 class InvocationResult:
-    invocation_id: str
+    request_id: str
     payload: bytes | None
     executed_version: str | None = None
     logs: str | None = None
 
 
 @dataclasses.dataclass
 class InvocationError:
-    invocation_id: str
+    request_id: str
     payload: bytes | None
     executed_version: str | None = None
     logs: str | None = None
 
 
 @dataclasses.dataclass
 class InvocationLogs:
-    invocation_id: str
+    request_id: str
     logs: str
 
 
 class Credentials(TypedDict):
     AccessKeyId: str
     SecretAccessKey: str
     SessionToken: str
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/lambda_service.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/lambda_service.py`

 * *Files 0% similar despite different names*

```diff
@@ -193,19 +193,21 @@
         self,
         function_name: str,
         qualifier: str,
         region: str,
         account_id: str,
         invocation_type: InvocationType | None,
         client_context: Optional[str],
+        request_id: str,
         payload: bytes | None,
     ) -> Future[InvocationResult] | None:
         """
         Invokes a specific version of a lambda
 
+        :param request_id: context request ID
         :param function_name: Function name
         :param qualifier: Function version qualifier
         :param region: Region of the function
         :param account_id: Account id of the function
         :param invocation_type: Invocation Type
         :param client_context: Client Context, if applicable
         :param payload: Invocation payload
@@ -277,14 +279,15 @@
         return version_manager.invoke(
             invocation=Invocation(
                 payload=payload,
                 invoked_arn=invoked_arn,
                 client_context=client_context,
                 invocation_type=invocation_type,
                 invoke_time=datetime.now(),
+                request_id=request_id,
             )
         )
 
     def update_version(self, new_version: FunctionVersion) -> Future[None]:
         """
         Updates a given version. Will perform a rollover, so the old version will be active until the new one is ready
         to be invoked
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/models.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/models.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/runtime_environment.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/runtime_environment.py`

 * *Files 0% similar despite different names*

```diff
@@ -245,15 +245,15 @@
         with self.status_lock:
             if self.status != RuntimeStatus.READY:
                 raise InvalidStatusException("Invoke can only happen if status is ready")
             self.status = RuntimeStatus.RUNNING
             self.keepalive_timer.cancel()
 
         invoke_payload = {
-            "invoke-id": invocation_event.invocation_id,
+            "invoke-id": invocation_event.invocation.request_id,  # TODO: rename to request-id
             "invoked-function-arn": invocation_event.invocation.invoked_arn,
             "payload": to_str(invocation_event.invocation.payload),
             "trace-id": self._generate_trace_header(),
         }
         self.runtime_executor.invoke(payload=invoke_payload)
 
     def get_credentials(self) -> Credentials:
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/runtime_executor.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/runtime_executor.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/invocation/version_manager.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/invocation/version_manager.py`

 * *Files 1% similar despite different names*

```diff
@@ -1,15 +1,14 @@
 import concurrent.futures
 import dataclasses
 import json
 import logging
 import queue
 import threading
 import time
-import uuid
 from concurrent.futures import Future, ThreadPoolExecutor
 from datetime import datetime
 from math import ceil
 from queue import Queue
 from typing import TYPE_CHECKING, Dict, List, Optional, Union
 
 from localstack import config
@@ -51,15 +50,14 @@
     from localstack.services.awslambda.invocation.lambda_service import LambdaService
 
 LOG = logging.getLogger(__name__)
 
 
 @dataclasses.dataclass(frozen=True)
 class QueuedInvocation:
-    invocation_id: str
     result_future: Future[InvocationResult] | None
     retries: int
     invocation: Invocation
 
 
 @dataclasses.dataclass
 class RunningInvocation:
@@ -376,22 +374,24 @@
             try:
                 if self.shutdown_event.is_set() or queued_invocation is QUEUE_SHUTDOWN:
                     LOG.debug(
                         "Invocation loop for lambda %s stopped while waiting for invocations",
                         self.function_arn,
                     )
                     return
-                LOG.debug("Got invocation event %s in loop", queued_invocation.invocation_id)
+                LOG.debug(
+                    "Got invocation event %s in loop", queued_invocation.invocation.request_id
+                )
                 # Assumption: Synchronous invoke should never end up in the invocation queue because we catch it earlier
                 if self.function.reserved_concurrent_executions == 0:
                     # error...
                     self.destination_execution_pool.submit(
                         self.process_event_destinations,
                         invocation_result=InvocationError(
-                            queued_invocation.invocation_id,
+                            queued_invocation.invocation.request_id,
                             payload=None,
                             executed_version=None,
                             logs=None,
                         ),
                         queued_invocation=queued_invocation,
                         last_invoke_time=None,
                         original_payload=queued_invocation.invocation.payload,
@@ -417,21 +417,23 @@
                         # skip invocation tracking for provisioned invocations since they are always statically part of the reserved concurrency
                         if environment.initialization_type == "on-demand":
                             self.lambda_service.report_invocation_start(
                                 self.function_version.id.unqualified_arn()
                             )
 
                         self.running_invocations[
-                            queued_invocation.invocation_id
+                            queued_invocation.invocation.request_id
                         ] = RunningInvocation(
                             queued_invocation, datetime.now(), executor=environment
                         )
 
                         environment.invoke(invocation_event=queued_invocation)
-                        LOG.debug("Invoke for request %s done", queued_invocation.invocation_id)
+                        LOG.debug(
+                            "Invoke for request %s done", queued_invocation.invocation.request_id
+                        )
                     except queue.Empty:
                         # TODO if one environment threw an invalid status exception, we will get here potentially with
                         # another busy environment, and won't spawn a new one as there is one active here.
                         # We will be stuck in the loop until another becomes active without scaling.
                         if self.active_environment_count() == 0:
                             LOG.debug(
                                 "Detected no active environments for version %s. Starting one...",
@@ -440,15 +442,15 @@
                             self.start_environment()
                             # TODO what to do with too much failed environments?
                     except InvalidStatusException:
                         LOG.debug(
                             "Retrieved environment %s in invalid state from queue. Trying the next...",
                             environment.id,
                         )
-                        self.running_invocations.pop(queued_invocation.invocation_id, None)
+                        self.running_invocations.pop(queued_invocation.invocation.request_id, None)
                         if environment.initialization_type == "on-demand":
                             self.lambda_service.report_invocation_end(
                                 self.function_version.id.unqualified_arn()
                             )
                         # try next environment
                         environment = None
             except Exception as e:
@@ -458,19 +460,17 @@
                     self.function_version.qualified_arn,
                     exc_info=True,
                 )
                 if queued_invocation.result_future:
                     queued_invocation.result_future.set_exception(e)
 
     def invoke(
-        self, *, invocation: Invocation, current_retry: int = 0, invocation_id: str | None = None
+        self, *, invocation: Invocation, current_retry: int = 0
     ) -> Future[InvocationResult] | None:
         future = Future() if invocation.invocation_type == "RequestResponse" else None
-        if invocation_id is None:
-            invocation_id = str(uuid.uuid4())
         if invocation.invocation_type == "RequestResponse":
             # TODO: check for free provisioned concurrency and skip queue
             if (
                 self.lambda_service.get_available_fn_concurrency(
                     self.function_version.id.unqualified_arn()
                 )
                 <= 0
@@ -478,15 +478,14 @@
                 raise TooManyRequestsException(
                     "Rate Exceeded.",
                     Reason="ReservedFunctionConcurrentInvocationLimitExceeded",
                     Type="User",
                 )
 
         invocation_storage = QueuedInvocation(
-            invocation_id=invocation_id,
             result_future=future,
             retries=current_retry,
             invocation=invocation,
         )
         self.queued_invocations.put(invocation_storage)
 
         return invocation_storage.result_future
@@ -517,27 +516,27 @@
                 executor.get_log_stream_name(),
                 invocation_result.logs,
             )
             self.log_handler.add_logs(log_item)
         else:
             LOG.warning(
                 "Received no logs from invocation with id %s for lambda %s",
-                invocation_result.invocation_id,
+                invocation_result.request_id,
                 self.function_arn,
             )
 
     def process_event_destinations(
         self,
         invocation_result: InvocationResult | InvocationError,
         queued_invocation: QueuedInvocation,
         last_invoke_time: Optional[datetime],
         original_payload: bytes,
     ) -> None:
         """TODO refactor"""
-        LOG.debug("Got event invocation with id %s", invocation_result.invocation_id)
+        LOG.debug("Got event invocation with id %s", invocation_result.request_id)
 
         # 1. Handle DLQ routing
         if (
             isinstance(invocation_result, InvocationError)
             and self.function_version.config.dead_letter_arn
         ):
             try:
@@ -570,15 +569,15 @@
             )
             if success_destination is None:
                 return
             destination_payload = {
                 "version": "1.0",
                 "timestamp": timestamp_millis(),
                 "requestContext": {
-                    "requestId": invocation_result.invocation_id,
+                    "requestId": invocation_result.request_id,
                     "functionArn": self.function_version.qualified_arn,
                     "condition": "Success",
                     "approximateInvokeCount": queued_invocation.retries + 1,
                 },
                 "requestPayload": json.loads(to_str(original_payload)),
                 "responseContext": {
                     "statusCode": 200,
@@ -634,15 +633,14 @@
                         or enough_time_for_retry
                     ):
                         time.sleep(delay_queue_invoke_seconds)
                         LOG.debug("Retrying lambda invocation for %s", self.function_arn)
                         self.invoke(
                             invocation=queued_invocation.invocation,
                             current_retry=previous_retry_attempts + 1,
-                            invocation_id=queued_invocation.invocation_id,
                         )
                         return
 
                     failure_cause = "EventAgeExceeded"
                 else:
                     failure_cause = "RetriesExhausted"
 
@@ -657,15 +655,15 @@
             if failure_destination is None:
                 return
 
             destination_payload = {
                 "version": "1.0",
                 "timestamp": timestamp_millis(),
                 "requestContext": {
-                    "requestId": invocation_result.invocation_id,
+                    "requestId": invocation_result.request_id,
                     "functionArn": self.function_version.qualified_arn,
                     "condition": failure_cause,
                     "approximateInvokeCount": approx_invoke_count,
                 },
                 "requestPayload": json.loads(to_str(original_payload)),
             }
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/lambda_api.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/lambda_api.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/lambda_executors.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/lambda_executors.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/lambda_models.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/lambda_models.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/lambda_starter.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/lambda_starter.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/lambda_utils.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/lambda_utils.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/layerfetcher/layer_fetcher.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/layerfetcher/layer_fetcher.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/packages.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/packages.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/plugins.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/plugins.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/provider.py`

 * *Files 0% similar despite different names*

```diff
@@ -3379,6203 +3379,6205 @@
 0000d320: 6163 636f 756e 745f 6964 2c0a 2020 2020  account_id,.    
 0000d330: 2020 2020 2020 2020 696e 766f 6361 7469          invocati
 0000d340: 6f6e 5f74 7970 653d 696e 766f 6361 7469  on_type=invocati
 0000d350: 6f6e 5f74 7970 652c 0a20 2020 2020 2020  on_type,.       
 0000d360: 2020 2020 2063 6c69 656e 745f 636f 6e74       client_cont
 0000d370: 6578 743d 636c 6965 6e74 5f63 6f6e 7465  ext=client_conte
 0000d380: 7874 2c0a 2020 2020 2020 2020 2020 2020  xt,.            
-0000d390: 7061 796c 6f61 643d 7061 796c 6f61 642e  payload=payload.
-0000d3a0: 7265 6164 2829 2069 6620 7061 796c 6f61  read() if payloa
-0000d3b0: 6420 656c 7365 204e 6f6e 652c 0a20 2020  d else None,.   
-0000d3c0: 2020 2020 2029 0a20 2020 2020 2020 2069       ).        i
-0000d3d0: 6620 696e 766f 6361 7469 6f6e 5f74 7970  f invocation_typ
-0000d3e0: 6520 3d3d 2022 4576 656e 7422 3a0a 2020  e == "Event":.  
-0000d3f0: 2020 2020 2020 2020 2020 2320 5468 6973            # This
-0000d400: 2068 6170 7065 6e73 2077 6865 6e20 696e   happens when in
-0000d410: 766f 6361 7469 6f6e 2074 7970 6520 6973  vocation type is
-0000d420: 2065 7665 6e74 0a20 2020 2020 2020 2020   event.         
-0000d430: 2020 2072 6574 7572 6e20 496e 766f 6361     return Invoca
-0000d440: 7469 6f6e 5265 7370 6f6e 7365 2853 7461  tionResponse(Sta
-0000d450: 7475 7343 6f64 653d 3230 3229 0a20 2020  tusCode=202).   
-0000d460: 2020 2020 2074 7279 3a0a 2020 2020 2020       try:.      
-0000d470: 2020 2020 2020 696e 766f 6361 7469 6f6e        invocation
-0000d480: 5f72 6573 756c 7420 3d20 7265 7375 6c74  _result = result
-0000d490: 2e72 6573 756c 7428 290a 2020 2020 2020  .result().      
-0000d4a0: 2020 6578 6365 7074 2045 7863 6570 7469    except Excepti
-0000d4b0: 6f6e 2061 7320 653a 0a20 2020 2020 2020  on as e:.       
-0000d4c0: 2020 2020 204c 4f47 2e65 7272 6f72 2822       LOG.error("
-0000d4d0: 4572 726f 7220 7768 696c 6520 696e 766f  Error while invo
-0000d4e0: 6b69 6e67 206c 616d 6264 6122 2c20 6578  king lambda", ex
-0000d4f0: 635f 696e 666f 3d65 290a 2020 2020 2020  c_info=e).      
-0000d500: 2020 2020 2020 2320 544f 444f 206d 6170        # TODO map
-0000d510: 2074 6f20 636f 7272 6563 7420 6578 6365   to correct exce
-0000d520: 7074 696f 6e0a 2020 2020 2020 2020 2020  ption.          
-0000d530: 2020 7261 6973 6520 5365 7276 6963 6545    raise ServiceE
-0000d540: 7863 6570 7469 6f6e 2822 496e 7465 726e  xception("Intern
-0000d550: 616c 2065 7272 6f72 2077 6869 6c65 2065  al error while e
-0000d560: 7865 6375 7469 6e67 206c 616d 6264 6122  xecuting lambda"
-0000d570: 2920 6672 6f6d 2065 0a0a 2020 2020 2020  ) from e..      
-0000d580: 2020 4c4f 472e 6465 6275 6728 224c 616d    LOG.debug("Lam
-0000d590: 6264 6120 696e 766f 6361 7469 6f6e 2064  bda invocation d
-0000d5a0: 7572 6174 696f 6e3a 2025 302e 3266 6d73  uration: %0.2fms
-0000d5b0: 222c 2028 7469 6d65 2e70 6572 665f 636f  ", (time.perf_co
-0000d5c0: 756e 7465 7228 2920 2d20 7469 6d65 5f62  unter() - time_b
-0000d5d0: 6566 6f72 6529 202a 2031 3030 3029 0a0a  efore) * 1000)..
-0000d5e0: 2020 2020 2020 2020 7265 7370 6f6e 7365          response
-0000d5f0: 203d 2049 6e76 6f63 6174 696f 6e52 6573   = InvocationRes
-0000d600: 706f 6e73 6528 0a20 2020 2020 2020 2020  ponse(.         
-0000d610: 2020 2053 7461 7475 7343 6f64 653d 3230     StatusCode=20
-0000d620: 302c 0a20 2020 2020 2020 2020 2020 2050  0,.            P
-0000d630: 6179 6c6f 6164 3d69 6e76 6f63 6174 696f  ayload=invocatio
-0000d640: 6e5f 7265 7375 6c74 2e70 6179 6c6f 6164  n_result.payload
-0000d650: 2c0a 2020 2020 2020 2020 2020 2020 4578  ,.            Ex
-0000d660: 6563 7574 6564 5665 7273 696f 6e3d 696e  ecutedVersion=in
-0000d670: 766f 6361 7469 6f6e 5f72 6573 756c 742e  vocation_result.
-0000d680: 6578 6563 7574 6564 5f76 6572 7369 6f6e  executed_version
-0000d690: 2c0a 2020 2020 2020 2020 290a 0a20 2020  ,.        )..   
-0000d6a0: 2020 2020 2069 6620 6973 696e 7374 616e       if isinstan
-0000d6b0: 6365 2869 6e76 6f63 6174 696f 6e5f 7265  ce(invocation_re
-0000d6c0: 7375 6c74 2c20 496e 766f 6361 7469 6f6e  sult, Invocation
-0000d6d0: 4572 726f 7229 3a0a 2020 2020 2020 2020  Error):.        
-0000d6e0: 2020 2020 7265 7370 6f6e 7365 5b22 4675      response["Fu
-0000d6f0: 6e63 7469 6f6e 4572 726f 7222 5d20 3d20  nctionError"] = 
-0000d700: 2255 6e68 616e 646c 6564 220a 0a20 2020  "Unhandled"..   
-0000d710: 2020 2020 2069 6620 6c6f 675f 7479 7065       if log_type
-0000d720: 203d 3d20 4c6f 6754 7970 652e 5461 696c   == LogType.Tail
-0000d730: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-0000d740: 7370 6f6e 7365 5b22 4c6f 6752 6573 756c  sponse["LogResul
-0000d750: 7422 5d20 3d20 746f 5f73 7472 280a 2020  t"] = to_str(.  
-0000d760: 2020 2020 2020 2020 2020 2020 2020 6261                ba
-0000d770: 7365 3634 2e62 3634 656e 636f 6465 2874  se64.b64encode(t
-0000d780: 6f5f 6279 7465 7328 696e 766f 6361 7469  o_bytes(invocati
-0000d790: 6f6e 5f72 6573 756c 742e 6c6f 6773 295b  on_result.logs)[
-0000d7a0: 2d34 3039 363a 5d29 0a20 2020 2020 2020  -4096:]).       
-0000d7b0: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-0000d7c0: 7265 7475 726e 2072 6573 706f 6e73 650a  return response.
-0000d7d0: 0a20 2020 2023 2056 6572 7369 6f6e 206f  .    # Version o
-0000d7e0: 7065 7261 7469 6f6e 730a 2020 2020 6465  perations.    de
-0000d7f0: 6620 7075 626c 6973 685f 7665 7273 696f  f publish_versio
-0000d800: 6e28 0a20 2020 2020 2020 2073 656c 662c  n(.        self,
-0000d810: 0a20 2020 2020 2020 2063 6f6e 7465 7874  .        context
-0000d820: 3a20 5265 7175 6573 7443 6f6e 7465 7874  : RequestContext
-0000d830: 2c0a 2020 2020 2020 2020 6675 6e63 7469  ,.        functi
-0000d840: 6f6e 5f6e 616d 653a 2046 756e 6374 696f  on_name: Functio
-0000d850: 6e4e 616d 652c 0a20 2020 2020 2020 2063  nName,.        c
-0000d860: 6f64 655f 7368 6132 3536 3a20 5374 7269  ode_sha256: Stri
-0000d870: 6e67 203d 204e 6f6e 652c 0a20 2020 2020  ng = None,.     
-0000d880: 2020 2064 6573 6372 6970 7469 6f6e 3a20     description: 
-0000d890: 4465 7363 7269 7074 696f 6e20 3d20 4e6f  Description = No
-0000d8a0: 6e65 2c0a 2020 2020 2020 2020 7265 7669  ne,.        revi
-0000d8b0: 7369 6f6e 5f69 643a 2053 7472 696e 6720  sion_id: String 
-0000d8c0: 3d20 4e6f 6e65 2c0a 2020 2020 2920 2d3e  = None,.    ) ->
-0000d8d0: 2046 756e 6374 696f 6e43 6f6e 6669 6775   FunctionConfigu
-0000d8e0: 7261 7469 6f6e 3a0a 2020 2020 2020 2020  ration:.        
-0000d8f0: 6675 6e63 7469 6f6e 5f6e 616d 6520 3d20  function_name = 
-0000d900: 6170 695f 7574 696c 732e 6765 745f 6675  api_utils.get_fu
-0000d910: 6e63 7469 6f6e 5f6e 616d 6528 6675 6e63  nction_name(func
-0000d920: 7469 6f6e 5f6e 616d 652c 2063 6f6e 7465  tion_name, conte
-0000d930: 7874 2e72 6567 696f 6e29 0a20 2020 2020  xt.region).     
-0000d940: 2020 206e 6577 5f76 6572 7369 6f6e 203d     new_version =
-0000d950: 2073 656c 662e 5f70 7562 6c69 7368 5f76   self._publish_v
-0000d960: 6572 7369 6f6e 5f66 726f 6d5f 6578 6973  ersion_from_exis
-0000d970: 7469 6e67 5f76 6572 7369 6f6e 280a 2020  ting_version(.  
-0000d980: 2020 2020 2020 2020 2020 6675 6e63 7469            functi
-0000d990: 6f6e 5f6e 616d 653d 6675 6e63 7469 6f6e  on_name=function
-0000d9a0: 5f6e 616d 652c 0a20 2020 2020 2020 2020  _name,.         
-0000d9b0: 2020 2064 6573 6372 6970 7469 6f6e 3d64     description=d
-0000d9c0: 6573 6372 6970 7469 6f6e 2c0a 2020 2020  escription,.    
-0000d9d0: 2020 2020 2020 2020 6163 636f 756e 745f          account_
-0000d9e0: 6964 3d63 6f6e 7465 7874 2e61 6363 6f75  id=context.accou
-0000d9f0: 6e74 5f69 642c 0a20 2020 2020 2020 2020  nt_id,.         
-0000da00: 2020 2072 6567 696f 6e3d 636f 6e74 6578     region=contex
-0000da10: 742e 7265 6769 6f6e 2c0a 2020 2020 2020  t.region,.      
-0000da20: 2020 2020 2020 7265 7669 7369 6f6e 5f69        revision_i
-0000da30: 643d 7265 7669 7369 6f6e 5f69 642c 0a20  d=revision_id,. 
-0000da40: 2020 2020 2020 2020 2020 2063 6f64 655f             code_
-0000da50: 7368 6132 3536 3d63 6f64 655f 7368 6132  sha256=code_sha2
-0000da60: 3536 2c0a 2020 2020 2020 2020 290a 2020  56,.        ).  
-0000da70: 2020 2020 2020 7265 7475 726e 2061 7069        return api
-0000da80: 5f75 7469 6c73 2e6d 6170 5f63 6f6e 6669  _utils.map_confi
-0000da90: 675f 6f75 7428 6e65 775f 7665 7273 696f  g_out(new_versio
-0000daa0: 6e2c 2072 6574 7572 6e5f 7175 616c 6966  n, return_qualif
-0000dab0: 6965 645f 6172 6e3d 5472 7565 290a 0a20  ied_arn=True).. 
-0000dac0: 2020 2064 6566 206c 6973 745f 7665 7273     def list_vers
-0000dad0: 696f 6e73 5f62 795f 6675 6e63 7469 6f6e  ions_by_function
-0000dae0: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
-0000daf0: 2020 2020 2020 2020 636f 6e74 6578 743a          context:
-0000db00: 2052 6571 7565 7374 436f 6e74 6578 742c   RequestContext,
-0000db10: 0a20 2020 2020 2020 2066 756e 6374 696f  .        functio
-0000db20: 6e5f 6e61 6d65 3a20 4e61 6d65 7370 6163  n_name: Namespac
-0000db30: 6564 4675 6e63 7469 6f6e 4e61 6d65 2c0a  edFunctionName,.
-0000db40: 2020 2020 2020 2020 6d61 726b 6572 3a20          marker: 
-0000db50: 5374 7269 6e67 203d 204e 6f6e 652c 0a20  String = None,. 
-0000db60: 2020 2020 2020 206d 6178 5f69 7465 6d73         max_items
-0000db70: 3a20 4d61 784c 6973 7449 7465 6d73 203d  : MaxListItems =
-0000db80: 204e 6f6e 652c 0a20 2020 2029 202d 3e20   None,.    ) -> 
-0000db90: 4c69 7374 5665 7273 696f 6e73 4279 4675  ListVersionsByFu
-0000dba0: 6e63 7469 6f6e 5265 7370 6f6e 7365 3a0a  nctionResponse:.
-0000dbb0: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
-0000dbc0: 5f6e 616d 6520 3d20 6170 695f 7574 696c  _name = api_util
-0000dbd0: 732e 6765 745f 6675 6e63 7469 6f6e 5f6e  s.get_function_n
-0000dbe0: 616d 6528 6675 6e63 7469 6f6e 5f6e 616d  ame(function_nam
-0000dbf0: 652c 2063 6f6e 7465 7874 2e72 6567 696f  e, context.regio
-0000dc00: 6e29 0a20 2020 2020 2020 2066 756e 6374  n).        funct
-0000dc10: 696f 6e20 3d20 7365 6c66 2e5f 6765 745f  ion = self._get_
-0000dc20: 6675 6e63 7469 6f6e 280a 2020 2020 2020  function(.      
-0000dc30: 2020 2020 2020 6675 6e63 7469 6f6e 5f6e        function_n
-0000dc40: 616d 653d 6675 6e63 7469 6f6e 5f6e 616d  ame=function_nam
-0000dc50: 652c 2072 6567 696f 6e3d 636f 6e74 6578  e, region=contex
-0000dc60: 742e 7265 6769 6f6e 2c20 6163 636f 756e  t.region, accoun
-0000dc70: 745f 6964 3d63 6f6e 7465 7874 2e61 6363  t_id=context.acc
-0000dc80: 6f75 6e74 5f69 640a 2020 2020 2020 2020  ount_id.        
-0000dc90: 290a 2020 2020 2020 2020 7665 7273 696f  ).        versio
-0000dca0: 6e73 203d 205b 0a20 2020 2020 2020 2020  ns = [.         
-0000dcb0: 2020 2061 7069 5f75 7469 6c73 2e6d 6170     api_utils.map
-0000dcc0: 5f74 6f5f 6c69 7374 5f72 6573 706f 6e73  _to_list_respons
-0000dcd0: 6528 0a20 2020 2020 2020 2020 2020 2020  e(.             
-0000dce0: 2020 2061 7069 5f75 7469 6c73 2e6d 6170     api_utils.map
-0000dcf0: 5f63 6f6e 6669 675f 6f75 7428 7665 7273  _config_out(vers
-0000dd00: 696f 6e3d 7665 7273 696f 6e2c 2072 6574  ion=version, ret
-0000dd10: 7572 6e5f 7175 616c 6966 6965 645f 6172  urn_qualified_ar
-0000dd20: 6e3d 5472 7565 290a 2020 2020 2020 2020  n=True).        
-0000dd30: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-0000dd40: 2020 666f 7220 7665 7273 696f 6e20 696e    for version in
-0000dd50: 2066 756e 6374 696f 6e2e 7665 7273 696f   function.versio
-0000dd60: 6e73 2e76 616c 7565 7328 290a 2020 2020  ns.values().    
-0000dd70: 2020 2020 5d0a 2020 2020 2020 2020 6974      ].        it
-0000dd80: 656d 7320 3d20 5061 6769 6e61 7465 644c  ems = PaginatedL
-0000dd90: 6973 7428 7665 7273 696f 6e73 290a 2020  ist(versions).  
-0000dda0: 2020 2020 2020 7061 6765 2c20 746f 6b65        page, toke
-0000ddb0: 6e20 3d20 6974 656d 732e 6765 745f 7061  n = items.get_pa
-0000ddc0: 6765 280a 2020 2020 2020 2020 2020 2020  ge(.            
-0000ddd0: 6c61 6d62 6461 2069 7465 6d3a 2069 7465  lambda item: ite
-0000dde0: 6d2c 0a20 2020 2020 2020 2020 2020 206d  m,.            m
-0000ddf0: 6172 6b65 722c 0a20 2020 2020 2020 2020  arker,.         
-0000de00: 2020 206d 6178 5f69 7465 6d73 2c0a 2020     max_items,.  
-0000de10: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0000de20: 7265 7475 726e 204c 6973 7456 6572 7369  return ListVersi
-0000de30: 6f6e 7342 7946 756e 6374 696f 6e52 6573  onsByFunctionRes
-0000de40: 706f 6e73 6528 5665 7273 696f 6e73 3d70  ponse(Versions=p
-0000de50: 6167 652c 204e 6578 744d 6172 6b65 723d  age, NextMarker=
-0000de60: 746f 6b65 6e29 0a0a 2020 2020 2320 416c  token)..    # Al
-0000de70: 6961 730a 0a20 2020 2064 6566 205f 6372  ias..    def _cr
-0000de80: 6561 7465 5f72 6f75 7469 6e67 5f63 6f6e  eate_routing_con
-0000de90: 6669 675f 6d6f 6465 6c28 0a20 2020 2020  fig_model(.     
-0000dea0: 2020 2073 656c 662c 2072 6f75 7469 6e67     self, routing
-0000deb0: 5f63 6f6e 6669 675f 6469 6374 3a20 6469  _config_dict: di
-0000dec0: 6374 5b73 7472 2c20 666c 6f61 745d 2c20  ct[str, float], 
-0000ded0: 6675 6e63 7469 6f6e 5f76 6572 7369 6f6e  function_version
-0000dee0: 3a20 4675 6e63 7469 6f6e 5665 7273 696f  : FunctionVersio
-0000def0: 6e0a 2020 2020 293a 0a20 2020 2020 2020  n.    ):.       
-0000df00: 2069 6620 6c65 6e28 726f 7574 696e 675f   if len(routing_
-0000df10: 636f 6e66 6967 5f64 6963 7429 203e 2031  config_dict) > 1
-0000df20: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-0000df30: 6973 6520 496e 7661 6c69 6450 6172 616d  ise InvalidParam
-0000df40: 6574 6572 5661 6c75 6545 7863 6570 7469  eterValueExcepti
-0000df50: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
-0000df60: 2020 2020 224e 756d 6265 7220 6f66 2069      "Number of i
-0000df70: 7465 6d73 2069 6e20 4164 6469 7469 6f6e  tems in Addition
-0000df80: 616c 5665 7273 696f 6e57 6569 6768 7473  alVersionWeights
-0000df90: 2063 616e 6e6f 7420 6265 2067 7265 6174   cannot be great
-0000dfa0: 6572 2074 6861 6e20 3122 2c0a 2020 2020  er than 1",.    
-0000dfb0: 2020 2020 2020 2020 2020 2020 5479 7065              Type
-0000dfc0: 3d22 5573 6572 222c 0a20 2020 2020 2020  ="User",.       
-0000dfd0: 2020 2020 2029 0a20 2020 2020 2020 2023       ).        #
-0000dfe0: 2073 686f 756c 6420 6265 2065 7861 6374   should be exact
-0000dff0: 6c79 206f 6e65 2069 7465 6d20 6865 7265  ly one item here
-0000e000: 2c20 7374 696c 6c20 6974 6572 6174 696e  , still iteratin
-0000e010: 672c 206d 6967 6874 2062 6520 7375 7070  g, might be supp
-0000e020: 6f72 7465 6420 696e 2074 6865 2066 7574  orted in the fut
-0000e030: 7572 650a 2020 2020 2020 2020 666f 7220  ure.        for 
-0000e040: 6b65 792c 2076 616c 7565 2069 6e20 726f  key, value in ro
-0000e050: 7574 696e 675f 636f 6e66 6967 5f64 6963  uting_config_dic
-0000e060: 742e 6974 656d 7328 293a 0a20 2020 2020  t.items():.     
-0000e070: 2020 2020 2020 2069 6620 7661 6c75 6520         if value 
-0000e080: 3c20 302e 3020 6f72 2076 616c 7565 203e  < 0.0 or value >
-0000e090: 3d20 312e 303a 0a20 2020 2020 2020 2020  = 1.0:.         
-0000e0a0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-0000e0b0: 6964 6174 696f 6e45 7863 6570 7469 6f6e  idationException
-0000e0c0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0000e0d0: 2020 2020 2020 6622 3120 7661 6c69 6461        f"1 valida
-0000e0e0: 7469 6f6e 2065 7272 6f72 2064 6574 6563  tion error detec
-0000e0f0: 7465 643a 2056 616c 7565 2027 7b7b 7b6b  ted: Value '{{{k
-0000e100: 6579 7d3d 7b76 616c 7565 7d7d 7d27 2061  ey}={value}}}' a
-0000e110: 7420 2772 6f75 7469 6e67 436f 6e66 6967  t 'routingConfig
-0000e120: 2e61 6464 6974 696f 6e61 6c56 6572 7369  .additionalVersi
-0000e130: 6f6e 5765 6967 6874 7327 2066 6169 6c65  onWeights' faile
-0000e140: 6420 746f 2073 6174 6973 6679 2063 6f6e  d to satisfy con
-0000e150: 7374 7261 696e 743a 204d 6170 2076 616c  straint: Map val
-0000e160: 7565 206d 7573 7420 7361 7469 7366 7920  ue must satisfy 
-0000e170: 636f 6e73 7472 6169 6e74 3a20 5b4d 656d  constraint: [Mem
-0000e180: 6265 7220 6d75 7374 2068 6176 6520 7661  ber must have va
-0000e190: 6c75 6520 6c65 7373 2074 6861 6e20 6f72  lue less than or
-0000e1a0: 2065 7175 616c 2074 6f20 312e 302c 204d   equal to 1.0, M
-0000e1b0: 656d 6265 7220 6d75 7374 2068 6176 6520  ember must have 
-0000e1c0: 7661 6c75 6520 6772 6561 7465 7220 7468  value greater th
-0000e1d0: 616e 206f 7220 6571 7561 6c20 746f 2030  an or equal to 0
-0000e1e0: 2e30 2c20 4d65 6d62 6572 206d 7573 7420  .0, Member must 
-0000e1f0: 6e6f 7420 6265 206e 756c 6c5d 220a 2020  not be null]".  
-0000e200: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-0000e210: 2020 2020 2020 2020 2020 2020 6966 206b              if k
-0000e220: 6579 203d 3d20 6675 6e63 7469 6f6e 5f76  ey == function_v
-0000e230: 6572 7369 6f6e 2e69 642e 7175 616c 6966  ersion.id.qualif
-0000e240: 6965 723a 0a20 2020 2020 2020 2020 2020  ier:.           
-0000e250: 2020 2020 2072 6169 7365 2049 6e76 616c       raise Inval
-0000e260: 6964 5061 7261 6d65 7465 7256 616c 7565  idParameterValue
-0000e270: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
-0000e280: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0000e290: 2249 6e76 616c 6964 2066 756e 6374 696f  "Invalid functio
-0000e2a0: 6e20 7665 7273 696f 6e20 7b66 756e 6374  n version {funct
-0000e2b0: 696f 6e5f 7665 7273 696f 6e2e 6964 2e71  ion_version.id.q
-0000e2c0: 7561 6c69 6669 6572 7d2e 2046 756e 6374  ualifier}. Funct
-0000e2d0: 696f 6e20 7665 7273 696f 6e20 7b66 756e  ion version {fun
-0000e2e0: 6374 696f 6e5f 7665 7273 696f 6e2e 6964  ction_version.id
-0000e2f0: 2e71 7561 6c69 6669 6572 7d20 6973 2061  .qualifier} is a
-0000e300: 6c72 6561 6479 2069 6e63 6c75 6465 6420  lready included 
-0000e310: 696e 2072 6f75 7469 6e67 2063 6f6e 6669  in routing confi
-0000e320: 6775 7261 7469 6f6e 2e22 2c0a 2020 2020  guration.",.    
-0000e330: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000e340: 5479 7065 3d22 5573 6572 222c 0a20 2020  Type="User",.   
-0000e350: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-0000e360: 2020 2020 2020 2020 2020 2023 2063 6865             # che
-0000e370: 636b 2069 6620 7665 7273 696f 6e20 7461  ck if version ta
-0000e380: 7267 6574 2069 7320 6c61 7465 7374 2c20  rget is latest, 
-0000e390: 7468 656e 206e 6f20 726f 7574 696e 6720  then no routing 
-0000e3a0: 636f 6e66 6967 2069 7320 616c 6c6f 7765  config is allowe
-0000e3b0: 640a 2020 2020 2020 2020 2020 2020 6966  d.            if
-0000e3c0: 2066 756e 6374 696f 6e5f 7665 7273 696f   function_versio
-0000e3d0: 6e2e 6964 2e71 7561 6c69 6669 6572 203d  n.id.qualifier =
-0000e3e0: 3d20 2224 4c41 5445 5354 223a 0a20 2020  = "$LATEST":.   
-0000e3f0: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-0000e400: 7365 2049 6e76 616c 6964 5061 7261 6d65  se InvalidParame
-0000e410: 7465 7256 616c 7565 4578 6365 7074 696f  terValueExceptio
-0000e420: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
-0000e430: 2020 2020 2020 2022 244c 4154 4553 5420         "$LATEST 
-0000e440: 6973 206e 6f74 2073 7570 706f 7274 6564  is not supported
-0000e450: 2066 6f72 2061 6e20 616c 6961 7320 706f   for an alias po
-0000e460: 696e 7469 6e67 2074 6f20 6d6f 7265 2074  inting to more t
-0000e470: 6861 6e20 3120 7665 7273 696f 6e22 0a20  han 1 version". 
-0000e480: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0000e490: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0000e4a0: 6e6f 7420 6170 695f 7574 696c 732e 7175  not api_utils.qu
-0000e4b0: 616c 6966 6965 725f 6973 5f76 6572 7369  alifier_is_versi
-0000e4c0: 6f6e 286b 6579 293a 0a20 2020 2020 2020  on(key):.       
-0000e4d0: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
-0000e4e0: 616c 6964 6174 696f 6e45 7863 6570 7469  alidationExcepti
-0000e4f0: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
-0000e500: 2020 2020 2020 2020 6622 3120 7661 6c69          f"1 vali
-0000e510: 6461 7469 6f6e 2065 7272 6f72 2064 6574  dation error det
-0000e520: 6563 7465 643a 2056 616c 7565 2027 7b7b  ected: Value '{{
-0000e530: 7b6b 6579 7d3d 7b76 616c 7565 7d7d 7d27  {key}={value}}}'
-0000e540: 2061 7420 2772 6f75 7469 6e67 436f 6e66   at 'routingConf
-0000e550: 6967 2e61 6464 6974 696f 6e61 6c56 6572  ig.additionalVer
-0000e560: 7369 6f6e 5765 6967 6874 7327 2066 6169  sionWeights' fai
-0000e570: 6c65 6420 746f 2073 6174 6973 6679 2063  led to satisfy c
-0000e580: 6f6e 7374 7261 696e 743a 204d 6170 206b  onstraint: Map k
-0000e590: 6579 7320 6d75 7374 2073 6174 6973 6679  eys must satisfy
-0000e5a0: 2063 6f6e 7374 7261 696e 743a 205b 4d65   constraint: [Me
-0000e5b0: 6d62 6572 206d 7573 7420 6861 7665 206c  mber must have l
-0000e5c0: 656e 6774 6820 6c65 7373 2074 6861 6e20  ength less than 
-0000e5d0: 6f72 2065 7175 616c 2074 6f20 3130 3234  or equal to 1024
-0000e5e0: 2c20 4d65 6d62 6572 206d 7573 7420 6861  , Member must ha
-0000e5f0: 7665 206c 656e 6774 6820 6772 6561 7465  ve length greate
-0000e600: 7220 7468 616e 206f 7220 6571 7561 6c20  r than or equal 
-0000e610: 746f 2031 2c20 4d65 6d62 6572 206d 7573  to 1, Member mus
-0000e620: 7420 7361 7469 7366 7920 7265 6775 6c61  t satisfy regula
-0000e630: 7220 6578 7072 6573 7369 6f6e 2070 6174  r expression pat
-0000e640: 7465 726e 3a20 5b30 2d39 5d2b 2c20 4d65  tern: [0-9]+, Me
-0000e650: 6d62 6572 206d 7573 7420 6e6f 7420 6265  mber must not be
-0000e660: 206e 756c 6c5d 220a 2020 2020 2020 2020   null]".        
-0000e670: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-0000e680: 2020 2020 2020 2023 2063 6865 636b 696e         # checkin
-0000e690: 6720 6966 2074 6865 2076 6572 7369 6f6e  g if the version
-0000e6a0: 2069 6e20 7468 6520 636f 6e66 6967 2065   in the config e
-0000e6b0: 7869 7374 730a 2020 2020 2020 2020 2020  xists.          
-0000e6c0: 2020 7365 6c66 2e5f 6765 745f 6675 6e63    self._get_func
-0000e6d0: 7469 6f6e 5f76 6572 7369 6f6e 280a 2020  tion_version(.  
-0000e6e0: 2020 2020 2020 2020 2020 2020 2020 6675                fu
-0000e6f0: 6e63 7469 6f6e 5f6e 616d 653d 6675 6e63  nction_name=func
-0000e700: 7469 6f6e 5f76 6572 7369 6f6e 2e69 642e  tion_version.id.
-0000e710: 6675 6e63 7469 6f6e 5f6e 616d 652c 0a20  function_name,. 
-0000e720: 2020 2020 2020 2020 2020 2020 2020 2071                 q
-0000e730: 7561 6c69 6669 6572 3d6b 6579 2c0a 2020  ualifier=key,.  
-0000e740: 2020 2020 2020 2020 2020 2020 2020 7265                re
-0000e750: 6769 6f6e 3d66 756e 6374 696f 6e5f 7665  gion=function_ve
-0000e760: 7273 696f 6e2e 6964 2e72 6567 696f 6e2c  rsion.id.region,
-0000e770: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000e780: 2061 6363 6f75 6e74 5f69 643d 6675 6e63   account_id=func
-0000e790: 7469 6f6e 5f76 6572 7369 6f6e 2e69 642e  tion_version.id.
-0000e7a0: 6163 636f 756e 742c 0a20 2020 2020 2020  account,.       
-0000e7b0: 2020 2020 2029 0a20 2020 2020 2020 2072       ).        r
-0000e7c0: 6574 7572 6e20 416c 6961 7352 6f75 7469  eturn AliasRouti
-0000e7d0: 6e67 436f 6e66 6967 2876 6572 7369 6f6e  ngConfig(version
-0000e7e0: 5f77 6569 6768 7473 3d72 6f75 7469 6e67  _weights=routing
-0000e7f0: 5f63 6f6e 6669 675f 6469 6374 290a 0a20  _config_dict).. 
-0000e800: 2020 2064 6566 2063 7265 6174 655f 616c     def create_al
-0000e810: 6961 7328 0a20 2020 2020 2020 2073 656c  ias(.        sel
-0000e820: 662c 0a20 2020 2020 2020 2063 6f6e 7465  f,.        conte
-0000e830: 7874 3a20 5265 7175 6573 7443 6f6e 7465  xt: RequestConte
-0000e840: 7874 2c0a 2020 2020 2020 2020 6675 6e63  xt,.        func
-0000e850: 7469 6f6e 5f6e 616d 653a 2046 756e 6374  tion_name: Funct
-0000e860: 696f 6e4e 616d 652c 0a20 2020 2020 2020  ionName,.       
-0000e870: 206e 616d 653a 2041 6c69 6173 2c0a 2020   name: Alias,.  
-0000e880: 2020 2020 2020 6675 6e63 7469 6f6e 5f76        function_v
-0000e890: 6572 7369 6f6e 3a20 5665 7273 696f 6e2c  ersion: Version,
-0000e8a0: 0a20 2020 2020 2020 2064 6573 6372 6970  .        descrip
-0000e8b0: 7469 6f6e 3a20 4465 7363 7269 7074 696f  tion: Descriptio
-0000e8c0: 6e20 3d20 4e6f 6e65 2c0a 2020 2020 2020  n = None,.      
-0000e8d0: 2020 726f 7574 696e 675f 636f 6e66 6967    routing_config
-0000e8e0: 3a20 416c 6961 7352 6f75 7469 6e67 436f  : AliasRoutingCo
-0000e8f0: 6e66 6967 7572 6174 696f 6e20 3d20 4e6f  nfiguration = No
-0000e900: 6e65 2c0a 2020 2020 2920 2d3e 2041 6c69  ne,.    ) -> Ali
-0000e910: 6173 436f 6e66 6967 7572 6174 696f 6e3a  asConfiguration:
-0000e920: 0a20 2020 2020 2020 2066 756e 6374 696f  .        functio
-0000e930: 6e5f 6e61 6d65 203d 2061 7069 5f75 7469  n_name = api_uti
-0000e940: 6c73 2e67 6574 5f66 756e 6374 696f 6e5f  ls.get_function_
-0000e950: 6e61 6d65 2866 756e 6374 696f 6e5f 6e61  name(function_na
-0000e960: 6d65 2c20 636f 6e74 6578 742e 7265 6769  me, context.regi
-0000e970: 6f6e 290a 2020 2020 2020 2020 7461 7267  on).        targ
-0000e980: 6574 5f76 6572 7369 6f6e 203d 2073 656c  et_version = sel
-0000e990: 662e 5f67 6574 5f66 756e 6374 696f 6e5f  f._get_function_
-0000e9a0: 7665 7273 696f 6e28 0a20 2020 2020 2020  version(.       
-0000e9b0: 2020 2020 2066 756e 6374 696f 6e5f 6e61       function_na
-0000e9c0: 6d65 3d66 756e 6374 696f 6e5f 6e61 6d65  me=function_name
-0000e9d0: 2c0a 2020 2020 2020 2020 2020 2020 7175  ,.            qu
-0000e9e0: 616c 6966 6965 723d 6675 6e63 7469 6f6e  alifier=function
-0000e9f0: 5f76 6572 7369 6f6e 2c0a 2020 2020 2020  _version,.      
-0000ea00: 2020 2020 2020 7265 6769 6f6e 3d63 6f6e        region=con
-0000ea10: 7465 7874 2e72 6567 696f 6e2c 0a20 2020  text.region,.   
-0000ea20: 2020 2020 2020 2020 2061 6363 6f75 6e74           account
-0000ea30: 5f69 643d 636f 6e74 6578 742e 6163 636f  _id=context.acco
-0000ea40: 756e 745f 6964 2c0a 2020 2020 2020 2020  unt_id,.        
-0000ea50: 290a 2020 2020 2020 2020 6675 6e63 7469  ).        functi
-0000ea60: 6f6e 203d 2073 656c 662e 5f67 6574 5f66  on = self._get_f
-0000ea70: 756e 6374 696f 6e28 0a20 2020 2020 2020  unction(.       
-0000ea80: 2020 2020 2066 756e 6374 696f 6e5f 6e61       function_na
-0000ea90: 6d65 3d66 756e 6374 696f 6e5f 6e61 6d65  me=function_name
-0000eaa0: 2c20 7265 6769 6f6e 3d63 6f6e 7465 7874  , region=context
-0000eab0: 2e72 6567 696f 6e2c 2061 6363 6f75 6e74  .region, account
-0000eac0: 5f69 643d 636f 6e74 6578 742e 6163 636f  _id=context.acco
-0000ead0: 756e 745f 6964 0a20 2020 2020 2020 2029  unt_id.        )
-0000eae0: 0a20 2020 2020 2020 2023 2064 6573 6372  .        # descr
-0000eaf0: 6970 7469 6f6e 2069 7320 616c 7761 7973  iption is always
-0000eb00: 2070 7265 7365 6e74 2c20 6966 206e 6f74   present, if not
-0000eb10: 2073 7065 6369 6669 6564 2069 7427 7320   specified it's 
-0000eb20: 616e 2065 6d70 7479 2073 7472 696e 670a  an empty string.
-0000eb30: 2020 2020 2020 2020 6465 7363 7269 7074          descript
-0000eb40: 696f 6e20 3d20 6465 7363 7269 7074 696f  ion = descriptio
-0000eb50: 6e20 6f72 2022 220a 2020 2020 2020 2020  n or "".        
-0000eb60: 7769 7468 2066 756e 6374 696f 6e2e 6c6f  with function.lo
-0000eb70: 636b 3a0a 2020 2020 2020 2020 2020 2020  ck:.            
-0000eb80: 6966 2065 7869 7374 696e 675f 616c 6961  if existing_alia
-0000eb90: 7320 3a3d 2066 756e 6374 696f 6e2e 616c  s := function.al
-0000eba0: 6961 7365 732e 6765 7428 6e61 6d65 293a  iases.get(name):
-0000ebb0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ebc0: 2072 6169 7365 2052 6573 6f75 7263 6543   raise ResourceC
-0000ebd0: 6f6e 666c 6963 7445 7863 6570 7469 6f6e  onflictException
-0000ebe0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-0000ebf0: 2020 2020 2020 6622 416c 6961 7320 616c        f"Alias al
-0000ec00: 7265 6164 7920 6578 6973 7473 3a20 7b61  ready exists: {a
-0000ec10: 7069 5f75 7469 6c73 2e6d 6170 5f61 6c69  pi_utils.map_ali
-0000ec20: 6173 5f6f 7574 2861 6c69 6173 3d65 7869  as_out(alias=exi
-0000ec30: 7374 696e 675f 616c 6961 732c 2066 756e  sting_alias, fun
-0000ec40: 6374 696f 6e3d 6675 6e63 7469 6f6e 295b  ction=function)[
-0000ec50: 2741 6c69 6173 4172 6e27 5d7d 222c 0a20  'AliasArn']}",. 
-0000ec60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ec70: 2020 2054 7970 653d 2255 7365 7222 2c0a     Type="User",.
-0000ec80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000ec90: 290a 2020 2020 2020 2020 2020 2020 2320  ).            # 
-0000eca0: 6368 6563 6b69 6e67 2069 6620 7468 6520  checking if the 
-0000ecb0: 7665 7273 696f 6e20 6578 6973 7473 0a20  version exists. 
-0000ecc0: 2020 2020 2020 2020 2020 2072 6f75 7469             routi
-0000ecd0: 6e67 5f63 6f6e 6669 6775 7261 7469 6f6e  ng_configuration
-0000ece0: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
-0000ecf0: 2020 2020 6966 2072 6f75 7469 6e67 5f63      if routing_c
-0000ed00: 6f6e 6669 6720 616e 6420 280a 2020 2020  onfig and (.    
-0000ed10: 2020 2020 2020 2020 2020 2020 726f 7574              rout
-0000ed20: 696e 675f 636f 6e66 6967 5f64 6963 7420  ing_config_dict 
-0000ed30: 3a3d 2072 6f75 7469 6e67 5f63 6f6e 6669  := routing_confi
-0000ed40: 672e 6765 7428 2241 6464 6974 696f 6e61  g.get("Additiona
-0000ed50: 6c56 6572 7369 6f6e 5765 6967 6874 7322  lVersionWeights"
-0000ed60: 290a 2020 2020 2020 2020 2020 2020 293a  ).            ):
-0000ed70: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0000ed80: 2072 6f75 7469 6e67 5f63 6f6e 6669 6775   routing_configu
-0000ed90: 7261 7469 6f6e 203d 2073 656c 662e 5f63  ration = self._c
-0000eda0: 7265 6174 655f 726f 7574 696e 675f 636f  reate_routing_co
-0000edb0: 6e66 6967 5f6d 6f64 656c 280a 2020 2020  nfig_model(.    
-0000edc0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000edd0: 726f 7574 696e 675f 636f 6e66 6967 5f64  routing_config_d
-0000ede0: 6963 742c 2074 6172 6765 745f 7665 7273  ict, target_vers
-0000edf0: 696f 6e0a 2020 2020 2020 2020 2020 2020  ion.            
-0000ee00: 2020 2020 290a 0a20 2020 2020 2020 2020      )..         
-0000ee10: 2020 2061 6c69 6173 203d 2056 6572 7369     alias = Versi
-0000ee20: 6f6e 416c 6961 7328 0a20 2020 2020 2020  onAlias(.       
-0000ee30: 2020 2020 2020 2020 206e 616d 653d 6e61           name=na
-0000ee40: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
-0000ee50: 2020 2020 6675 6e63 7469 6f6e 5f76 6572      function_ver
-0000ee60: 7369 6f6e 3d66 756e 6374 696f 6e5f 7665  sion=function_ve
-0000ee70: 7273 696f 6e2c 0a20 2020 2020 2020 2020  rsion,.         
-0000ee80: 2020 2020 2020 2064 6573 6372 6970 7469         descripti
-0000ee90: 6f6e 3d64 6573 6372 6970 7469 6f6e 2c0a  on=description,.
-0000eea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000eeb0: 726f 7574 696e 675f 636f 6e66 6967 7572  routing_configur
-0000eec0: 6174 696f 6e3d 726f 7574 696e 675f 636f  ation=routing_co
-0000eed0: 6e66 6967 7572 6174 696f 6e2c 0a20 2020  nfiguration,.   
-0000eee0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0000eef0: 2020 2020 2020 2066 756e 6374 696f 6e2e         function.
-0000ef00: 616c 6961 7365 735b 6e61 6d65 5d20 3d20  aliases[name] = 
-0000ef10: 616c 6961 730a 2020 2020 2020 2020 7265  alias.        re
-0000ef20: 7475 726e 2061 7069 5f75 7469 6c73 2e6d  turn api_utils.m
-0000ef30: 6170 5f61 6c69 6173 5f6f 7574 2861 6c69  ap_alias_out(ali
-0000ef40: 6173 3d61 6c69 6173 2c20 6675 6e63 7469  as=alias, functi
-0000ef50: 6f6e 3d66 756e 6374 696f 6e29 0a0a 2020  on=function)..  
-0000ef60: 2020 6465 6620 6c69 7374 5f61 6c69 6173    def list_alias
-0000ef70: 6573 280a 2020 2020 2020 2020 7365 6c66  es(.        self
-0000ef80: 2c0a 2020 2020 2020 2020 636f 6e74 6578  ,.        contex
-0000ef90: 743a 2052 6571 7565 7374 436f 6e74 6578  t: RequestContex
-0000efa0: 742c 0a20 2020 2020 2020 2066 756e 6374  t,.        funct
-0000efb0: 696f 6e5f 6e61 6d65 3a20 4675 6e63 7469  ion_name: Functi
-0000efc0: 6f6e 4e61 6d65 2c0a 2020 2020 2020 2020  onName,.        
-0000efd0: 6675 6e63 7469 6f6e 5f76 6572 7369 6f6e  function_version
-0000efe0: 3a20 5665 7273 696f 6e20 3d20 4e6f 6e65  : Version = None
-0000eff0: 2c0a 2020 2020 2020 2020 6d61 726b 6572  ,.        marker
-0000f000: 3a20 5374 7269 6e67 203d 204e 6f6e 652c  : String = None,
-0000f010: 0a20 2020 2020 2020 206d 6178 5f69 7465  .        max_ite
-0000f020: 6d73 3a20 4d61 784c 6973 7449 7465 6d73  ms: MaxListItems
-0000f030: 203d 204e 6f6e 652c 0a20 2020 2029 202d   = None,.    ) -
-0000f040: 3e20 4c69 7374 416c 6961 7365 7352 6573  > ListAliasesRes
-0000f050: 706f 6e73 653a 0a20 2020 2020 2020 2066  ponse:.        f
-0000f060: 756e 6374 696f 6e5f 6e61 6d65 203d 2061  unction_name = a
-0000f070: 7069 5f75 7469 6c73 2e67 6574 5f66 756e  pi_utils.get_fun
-0000f080: 6374 696f 6e5f 6e61 6d65 2866 756e 6374  ction_name(funct
-0000f090: 696f 6e5f 6e61 6d65 2c20 636f 6e74 6578  ion_name, contex
-0000f0a0: 742e 7265 6769 6f6e 290a 2020 2020 2020  t.region).      
-0000f0b0: 2020 6675 6e63 7469 6f6e 203d 2073 656c    function = sel
-0000f0c0: 662e 5f67 6574 5f66 756e 6374 696f 6e28  f._get_function(
-0000f0d0: 0a20 2020 2020 2020 2020 2020 2066 756e  .            fun
-0000f0e0: 6374 696f 6e5f 6e61 6d65 3d66 756e 6374  ction_name=funct
-0000f0f0: 696f 6e5f 6e61 6d65 2c20 7265 6769 6f6e  ion_name, region
-0000f100: 3d63 6f6e 7465 7874 2e72 6567 696f 6e2c  =context.region,
-0000f110: 2061 6363 6f75 6e74 5f69 643d 636f 6e74   account_id=cont
-0000f120: 6578 742e 6163 636f 756e 745f 6964 0a20  ext.account_id. 
-0000f130: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0000f140: 2061 6c69 6173 6573 203d 205b 0a20 2020   aliases = [.   
-0000f150: 2020 2020 2020 2020 2061 7069 5f75 7469           api_uti
-0000f160: 6c73 2e6d 6170 5f61 6c69 6173 5f6f 7574  ls.map_alias_out
-0000f170: 2861 6c69 6173 2c20 6675 6e63 7469 6f6e  (alias, function
-0000f180: 290a 2020 2020 2020 2020 2020 2020 666f  ).            fo
-0000f190: 7220 616c 6961 7320 696e 2066 756e 6374  r alias in funct
-0000f1a0: 696f 6e2e 616c 6961 7365 732e 7661 6c75  ion.aliases.valu
-0000f1b0: 6573 2829 0a20 2020 2020 2020 2020 2020  es().           
-0000f1c0: 2069 6620 6675 6e63 7469 6f6e 5f76 6572   if function_ver
-0000f1d0: 7369 6f6e 2069 7320 4e6f 6e65 206f 7220  sion is None or 
-0000f1e0: 616c 6961 732e 6675 6e63 7469 6f6e 5f76  alias.function_v
-0000f1f0: 6572 7369 6f6e 203d 3d20 6675 6e63 7469  ersion == functi
-0000f200: 6f6e 5f76 6572 7369 6f6e 0a20 2020 2020  on_version.     
-0000f210: 2020 205d 0a0a 2020 2020 2020 2020 616c     ]..        al
-0000f220: 6961 7365 7320 3d20 5061 6769 6e61 7465  iases = Paginate
-0000f230: 644c 6973 7428 616c 6961 7365 7329 0a20  dList(aliases). 
-0000f240: 2020 2020 2020 2070 6167 652c 2074 6f6b         page, tok
-0000f250: 656e 203d 2061 6c69 6173 6573 2e67 6574  en = aliases.get
-0000f260: 5f70 6167 6528 0a20 2020 2020 2020 2020  _page(.         
-0000f270: 2020 206c 616d 6264 6120 616c 6961 733a     lambda alias:
-0000f280: 2061 6c69 6173 5b22 416c 6961 7341 726e   alias["AliasArn
-0000f290: 225d 2c0a 2020 2020 2020 2020 2020 2020  "],.            
-0000f2a0: 6d61 726b 6572 2c0a 2020 2020 2020 2020  marker,.        
-0000f2b0: 2020 2020 6d61 785f 6974 656d 732c 0a20      max_items,. 
-0000f2c0: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-0000f2d0: 2020 7265 7475 726e 204c 6973 7441 6c69    return ListAli
-0000f2e0: 6173 6573 5265 7370 6f6e 7365 2841 6c69  asesResponse(Ali
-0000f2f0: 6173 6573 3d70 6167 652c 204e 6578 744d  ases=page, NextM
-0000f300: 6172 6b65 723d 746f 6b65 6e29 0a0a 2020  arker=token)..  
-0000f310: 2020 6465 6620 6465 6c65 7465 5f61 6c69    def delete_ali
-0000f320: 6173 280a 2020 2020 2020 2020 7365 6c66  as(.        self
-0000f330: 2c20 636f 6e74 6578 743a 2052 6571 7565  , context: Reque
-0000f340: 7374 436f 6e74 6578 742c 2066 756e 6374  stContext, funct
-0000f350: 696f 6e5f 6e61 6d65 3a20 4675 6e63 7469  ion_name: Functi
-0000f360: 6f6e 4e61 6d65 2c20 6e61 6d65 3a20 416c  onName, name: Al
-0000f370: 6961 730a 2020 2020 2920 2d3e 204e 6f6e  ias.    ) -> Non
-0000f380: 653a 0a20 2020 2020 2020 2066 756e 6374  e:.        funct
-0000f390: 696f 6e5f 6e61 6d65 203d 2061 7069 5f75  ion_name = api_u
-0000f3a0: 7469 6c73 2e67 6574 5f66 756e 6374 696f  tils.get_functio
-0000f3b0: 6e5f 6e61 6d65 2866 756e 6374 696f 6e5f  n_name(function_
-0000f3c0: 6e61 6d65 2c20 636f 6e74 6578 742e 7265  name, context.re
-0000f3d0: 6769 6f6e 290a 2020 2020 2020 2020 6675  gion).        fu
-0000f3e0: 6e63 7469 6f6e 203d 2073 656c 662e 5f67  nction = self._g
-0000f3f0: 6574 5f66 756e 6374 696f 6e28 0a20 2020  et_function(.   
-0000f400: 2020 2020 2020 2020 2066 756e 6374 696f           functio
-0000f410: 6e5f 6e61 6d65 3d66 756e 6374 696f 6e5f  n_name=function_
-0000f420: 6e61 6d65 2c20 7265 6769 6f6e 3d63 6f6e  name, region=con
-0000f430: 7465 7874 2e72 6567 696f 6e2c 2061 6363  text.region, acc
-0000f440: 6f75 6e74 5f69 643d 636f 6e74 6578 742e  ount_id=context.
-0000f450: 6163 636f 756e 745f 6964 0a20 2020 2020  account_id.     
-0000f460: 2020 2029 0a20 2020 2020 2020 2069 6620     ).        if 
-0000f470: 6e61 6d65 206e 6f74 2069 6e20 6675 6e63  name not in func
-0000f480: 7469 6f6e 2e61 6c69 6173 6573 3a0a 2020  tion.aliases:.  
-0000f490: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0000f4a0: 5661 6c75 6545 7272 6f72 2822 416c 6961  ValueError("Alia
-0000f4b0: 7320 6e6f 7420 666f 756e 6422 2920 2023  s not found")  #
-0000f4c0: 2054 4f44 4f20 7072 6f70 6572 2065 7863   TODO proper exc
-0000f4d0: 6570 7469 6f6e 0a20 2020 2020 2020 2066  eption.        f
-0000f4e0: 756e 6374 696f 6e2e 616c 6961 7365 732e  unction.aliases.
-0000f4f0: 706f 7028 6e61 6d65 2c20 4e6f 6e65 290a  pop(name, None).
-0000f500: 0a20 2020 2020 2020 2023 2063 6c65 616e  .        # clean
-0000f510: 7570 2072 656c 6174 6564 2072 6573 6f75  up related resou
-0000f520: 7263 6573 0a20 2020 2020 2020 2069 6620  rces.        if 
-0000f530: 6e61 6d65 2069 6e20 6675 6e63 7469 6f6e  name in function
-0000f540: 2e70 726f 7669 7369 6f6e 6564 5f63 6f6e  .provisioned_con
-0000f550: 6375 7272 656e 6379 5f63 6f6e 6669 6773  currency_configs
-0000f560: 3a0a 2020 2020 2020 2020 2020 2020 6675  :.            fu
-0000f570: 6e63 7469 6f6e 2e70 726f 7669 7369 6f6e  nction.provision
-0000f580: 6564 5f63 6f6e 6375 7272 656e 6379 5f63  ed_concurrency_c
-0000f590: 6f6e 6669 6773 2e70 6f70 286e 616d 6529  onfigs.pop(name)
-0000f5a0: 0a0a 2020 2020 6465 6620 6765 745f 616c  ..    def get_al
-0000f5b0: 6961 7328 0a20 2020 2020 2020 2073 656c  ias(.        sel
-0000f5c0: 662c 2063 6f6e 7465 7874 3a20 5265 7175  f, context: Requ
-0000f5d0: 6573 7443 6f6e 7465 7874 2c20 6675 6e63  estContext, func
-0000f5e0: 7469 6f6e 5f6e 616d 653a 2046 756e 6374  tion_name: Funct
-0000f5f0: 696f 6e4e 616d 652c 206e 616d 653a 2041  ionName, name: A
-0000f600: 6c69 6173 0a20 2020 2029 202d 3e20 416c  lias.    ) -> Al
-0000f610: 6961 7343 6f6e 6669 6775 7261 7469 6f6e  iasConfiguration
-0000f620: 3a0a 2020 2020 2020 2020 6675 6e63 7469  :.        functi
-0000f630: 6f6e 5f6e 616d 6520 3d20 6170 695f 7574  on_name = api_ut
-0000f640: 696c 732e 6765 745f 6675 6e63 7469 6f6e  ils.get_function
-0000f650: 5f6e 616d 6528 6675 6e63 7469 6f6e 5f6e  _name(function_n
-0000f660: 616d 652c 2063 6f6e 7465 7874 2e72 6567  ame, context.reg
-0000f670: 696f 6e29 0a20 2020 2020 2020 2066 756e  ion).        fun
-0000f680: 6374 696f 6e20 3d20 7365 6c66 2e5f 6765  ction = self._ge
-0000f690: 745f 6675 6e63 7469 6f6e 280a 2020 2020  t_function(.    
+0000d390: 7265 7175 6573 745f 6964 3d63 6f6e 7465  request_id=conte
+0000d3a0: 7874 2e72 6571 7565 7374 5f69 642c 0a20  xt.request_id,. 
+0000d3b0: 2020 2020 2020 2020 2020 2070 6179 6c6f             paylo
+0000d3c0: 6164 3d70 6179 6c6f 6164 2e72 6561 6428  ad=payload.read(
+0000d3d0: 2920 6966 2070 6179 6c6f 6164 2065 6c73  ) if payload els
+0000d3e0: 6520 4e6f 6e65 2c0a 2020 2020 2020 2020  e None,.        
+0000d3f0: 290a 2020 2020 2020 2020 6966 2069 6e76  ).        if inv
+0000d400: 6f63 6174 696f 6e5f 7479 7065 203d 3d20  ocation_type == 
+0000d410: 2245 7665 6e74 223a 0a20 2020 2020 2020  "Event":.       
+0000d420: 2020 2020 2023 2054 6869 7320 6861 7070       # This happ
+0000d430: 656e 7320 7768 656e 2069 6e76 6f63 6174  ens when invocat
+0000d440: 696f 6e20 7479 7065 2069 7320 6576 656e  ion type is even
+0000d450: 740a 2020 2020 2020 2020 2020 2020 7265  t.            re
+0000d460: 7475 726e 2049 6e76 6f63 6174 696f 6e52  turn InvocationR
+0000d470: 6573 706f 6e73 6528 5374 6174 7573 436f  esponse(StatusCo
+0000d480: 6465 3d32 3032 290a 2020 2020 2020 2020  de=202).        
+0000d490: 7472 793a 0a20 2020 2020 2020 2020 2020  try:.           
+0000d4a0: 2069 6e76 6f63 6174 696f 6e5f 7265 7375   invocation_resu
+0000d4b0: 6c74 203d 2072 6573 756c 742e 7265 7375  lt = result.resu
+0000d4c0: 6c74 2829 0a20 2020 2020 2020 2065 7863  lt().        exc
+0000d4d0: 6570 7420 4578 6365 7074 696f 6e20 6173  ept Exception as
+0000d4e0: 2065 3a0a 2020 2020 2020 2020 2020 2020   e:.            
+0000d4f0: 4c4f 472e 6572 726f 7228 2245 7272 6f72  LOG.error("Error
+0000d500: 2077 6869 6c65 2069 6e76 6f6b 696e 6720   while invoking 
+0000d510: 6c61 6d62 6461 222c 2065 7863 5f69 6e66  lambda", exc_inf
+0000d520: 6f3d 6529 0a20 2020 2020 2020 2020 2020  o=e).           
+0000d530: 2023 2054 4f44 4f20 6d61 7020 746f 2063   # TODO map to c
+0000d540: 6f72 7265 6374 2065 7863 6570 7469 6f6e  orrect exception
+0000d550: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+0000d560: 7365 2053 6572 7669 6365 4578 6365 7074  se ServiceExcept
+0000d570: 696f 6e28 2249 6e74 6572 6e61 6c20 6572  ion("Internal er
+0000d580: 726f 7220 7768 696c 6520 6578 6563 7574  ror while execut
+0000d590: 696e 6720 6c61 6d62 6461 2229 2066 726f  ing lambda") fro
+0000d5a0: 6d20 650a 0a20 2020 2020 2020 204c 4f47  m e..        LOG
+0000d5b0: 2e64 6562 7567 2822 4c61 6d62 6461 2069  .debug("Lambda i
+0000d5c0: 6e76 6f63 6174 696f 6e20 6475 7261 7469  nvocation durati
+0000d5d0: 6f6e 3a20 2530 2e32 666d 7322 2c20 2874  on: %0.2fms", (t
+0000d5e0: 696d 652e 7065 7266 5f63 6f75 6e74 6572  ime.perf_counter
+0000d5f0: 2829 202d 2074 696d 655f 6265 666f 7265  () - time_before
+0000d600: 2920 2a20 3130 3030 290a 0a20 2020 2020  ) * 1000)..     
+0000d610: 2020 2072 6573 706f 6e73 6520 3d20 496e     response = In
+0000d620: 766f 6361 7469 6f6e 5265 7370 6f6e 7365  vocationResponse
+0000d630: 280a 2020 2020 2020 2020 2020 2020 5374  (.            St
+0000d640: 6174 7573 436f 6465 3d32 3030 2c0a 2020  atusCode=200,.  
+0000d650: 2020 2020 2020 2020 2020 5061 796c 6f61            Payloa
+0000d660: 643d 696e 766f 6361 7469 6f6e 5f72 6573  d=invocation_res
+0000d670: 756c 742e 7061 796c 6f61 642c 0a20 2020  ult.payload,.   
+0000d680: 2020 2020 2020 2020 2045 7865 6375 7465           Execute
+0000d690: 6456 6572 7369 6f6e 3d69 6e76 6f63 6174  dVersion=invocat
+0000d6a0: 696f 6e5f 7265 7375 6c74 2e65 7865 6375  ion_result.execu
+0000d6b0: 7465 645f 7665 7273 696f 6e2c 0a20 2020  ted_version,.   
+0000d6c0: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+0000d6d0: 6966 2069 7369 6e73 7461 6e63 6528 696e  if isinstance(in
+0000d6e0: 766f 6361 7469 6f6e 5f72 6573 756c 742c  vocation_result,
+0000d6f0: 2049 6e76 6f63 6174 696f 6e45 7272 6f72   InvocationError
+0000d700: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+0000d710: 6573 706f 6e73 655b 2246 756e 6374 696f  esponse["Functio
+0000d720: 6e45 7272 6f72 225d 203d 2022 556e 6861  nError"] = "Unha
+0000d730: 6e64 6c65 6422 0a0a 2020 2020 2020 2020  ndled"..        
+0000d740: 6966 206c 6f67 5f74 7970 6520 3d3d 204c  if log_type == L
+0000d750: 6f67 5479 7065 2e54 6169 6c3a 0a20 2020  ogType.Tail:.   
+0000d760: 2020 2020 2020 2020 2072 6573 706f 6e73           respons
+0000d770: 655b 224c 6f67 5265 7375 6c74 225d 203d  e["LogResult"] =
+0000d780: 2074 6f5f 7374 7228 0a20 2020 2020 2020   to_str(.       
+0000d790: 2020 2020 2020 2020 2062 6173 6536 342e           base64.
+0000d7a0: 6236 3465 6e63 6f64 6528 746f 5f62 7974  b64encode(to_byt
+0000d7b0: 6573 2869 6e76 6f63 6174 696f 6e5f 7265  es(invocation_re
+0000d7c0: 7375 6c74 2e6c 6f67 7329 5b2d 3430 3936  sult.logs)[-4096
+0000d7d0: 3a5d 290a 2020 2020 2020 2020 2020 2020  :]).            
+0000d7e0: 290a 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+0000d7f0: 6e20 7265 7370 6f6e 7365 0a0a 2020 2020  n response..    
+0000d800: 2320 5665 7273 696f 6e20 6f70 6572 6174  # Version operat
+0000d810: 696f 6e73 0a20 2020 2064 6566 2070 7562  ions.    def pub
+0000d820: 6c69 7368 5f76 6572 7369 6f6e 280a 2020  lish_version(.  
+0000d830: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
+0000d840: 2020 2020 636f 6e74 6578 743a 2052 6571      context: Req
+0000d850: 7565 7374 436f 6e74 6578 742c 0a20 2020  uestContext,.   
+0000d860: 2020 2020 2066 756e 6374 696f 6e5f 6e61       function_na
+0000d870: 6d65 3a20 4675 6e63 7469 6f6e 4e61 6d65  me: FunctionName
+0000d880: 2c0a 2020 2020 2020 2020 636f 6465 5f73  ,.        code_s
+0000d890: 6861 3235 363a 2053 7472 696e 6720 3d20  ha256: String = 
+0000d8a0: 4e6f 6e65 2c0a 2020 2020 2020 2020 6465  None,.        de
+0000d8b0: 7363 7269 7074 696f 6e3a 2044 6573 6372  scription: Descr
+0000d8c0: 6970 7469 6f6e 203d 204e 6f6e 652c 0a20  iption = None,. 
+0000d8d0: 2020 2020 2020 2072 6576 6973 696f 6e5f         revision_
+0000d8e0: 6964 3a20 5374 7269 6e67 203d 204e 6f6e  id: String = Non
+0000d8f0: 652c 0a20 2020 2029 202d 3e20 4675 6e63  e,.    ) -> Func
+0000d900: 7469 6f6e 436f 6e66 6967 7572 6174 696f  tionConfiguratio
+0000d910: 6e3a 0a20 2020 2020 2020 2066 756e 6374  n:.        funct
+0000d920: 696f 6e5f 6e61 6d65 203d 2061 7069 5f75  ion_name = api_u
+0000d930: 7469 6c73 2e67 6574 5f66 756e 6374 696f  tils.get_functio
+0000d940: 6e5f 6e61 6d65 2866 756e 6374 696f 6e5f  n_name(function_
+0000d950: 6e61 6d65 2c20 636f 6e74 6578 742e 7265  name, context.re
+0000d960: 6769 6f6e 290a 2020 2020 2020 2020 6e65  gion).        ne
+0000d970: 775f 7665 7273 696f 6e20 3d20 7365 6c66  w_version = self
+0000d980: 2e5f 7075 626c 6973 685f 7665 7273 696f  ._publish_versio
+0000d990: 6e5f 6672 6f6d 5f65 7869 7374 696e 675f  n_from_existing_
+0000d9a0: 7665 7273 696f 6e28 0a20 2020 2020 2020  version(.       
+0000d9b0: 2020 2020 2066 756e 6374 696f 6e5f 6e61       function_na
+0000d9c0: 6d65 3d66 756e 6374 696f 6e5f 6e61 6d65  me=function_name
+0000d9d0: 2c0a 2020 2020 2020 2020 2020 2020 6465  ,.            de
+0000d9e0: 7363 7269 7074 696f 6e3d 6465 7363 7269  scription=descri
+0000d9f0: 7074 696f 6e2c 0a20 2020 2020 2020 2020  ption,.         
+0000da00: 2020 2061 6363 6f75 6e74 5f69 643d 636f     account_id=co
+0000da10: 6e74 6578 742e 6163 636f 756e 745f 6964  ntext.account_id
+0000da20: 2c0a 2020 2020 2020 2020 2020 2020 7265  ,.            re
+0000da30: 6769 6f6e 3d63 6f6e 7465 7874 2e72 6567  gion=context.reg
+0000da40: 696f 6e2c 0a20 2020 2020 2020 2020 2020  ion,.           
+0000da50: 2072 6576 6973 696f 6e5f 6964 3d72 6576   revision_id=rev
+0000da60: 6973 696f 6e5f 6964 2c0a 2020 2020 2020  ision_id,.      
+0000da70: 2020 2020 2020 636f 6465 5f73 6861 3235        code_sha25
+0000da80: 363d 636f 6465 5f73 6861 3235 362c 0a20  6=code_sha256,. 
+0000da90: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0000daa0: 2072 6574 7572 6e20 6170 695f 7574 696c   return api_util
+0000dab0: 732e 6d61 705f 636f 6e66 6967 5f6f 7574  s.map_config_out
+0000dac0: 286e 6577 5f76 6572 7369 6f6e 2c20 7265  (new_version, re
+0000dad0: 7475 726e 5f71 7561 6c69 6669 6564 5f61  turn_qualified_a
+0000dae0: 726e 3d54 7275 6529 0a0a 2020 2020 6465  rn=True)..    de
+0000daf0: 6620 6c69 7374 5f76 6572 7369 6f6e 735f  f list_versions_
+0000db00: 6279 5f66 756e 6374 696f 6e28 0a20 2020  by_function(.   
+0000db10: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+0000db20: 2020 2063 6f6e 7465 7874 3a20 5265 7175     context: Requ
+0000db30: 6573 7443 6f6e 7465 7874 2c0a 2020 2020  estContext,.    
+0000db40: 2020 2020 6675 6e63 7469 6f6e 5f6e 616d      function_nam
+0000db50: 653a 204e 616d 6573 7061 6365 6446 756e  e: NamespacedFun
+0000db60: 6374 696f 6e4e 616d 652c 0a20 2020 2020  ctionName,.     
+0000db70: 2020 206d 6172 6b65 723a 2053 7472 696e     marker: Strin
+0000db80: 6720 3d20 4e6f 6e65 2c0a 2020 2020 2020  g = None,.      
+0000db90: 2020 6d61 785f 6974 656d 733a 204d 6178    max_items: Max
+0000dba0: 4c69 7374 4974 656d 7320 3d20 4e6f 6e65  ListItems = None
+0000dbb0: 2c0a 2020 2020 2920 2d3e 204c 6973 7456  ,.    ) -> ListV
+0000dbc0: 6572 7369 6f6e 7342 7946 756e 6374 696f  ersionsByFunctio
+0000dbd0: 6e52 6573 706f 6e73 653a 0a20 2020 2020  nResponse:.     
+0000dbe0: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
+0000dbf0: 203d 2061 7069 5f75 7469 6c73 2e67 6574   = api_utils.get
+0000dc00: 5f66 756e 6374 696f 6e5f 6e61 6d65 2866  _function_name(f
+0000dc10: 756e 6374 696f 6e5f 6e61 6d65 2c20 636f  unction_name, co
+0000dc20: 6e74 6578 742e 7265 6769 6f6e 290a 2020  ntext.region).  
+0000dc30: 2020 2020 2020 6675 6e63 7469 6f6e 203d        function =
+0000dc40: 2073 656c 662e 5f67 6574 5f66 756e 6374   self._get_funct
+0000dc50: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
+0000dc60: 2066 756e 6374 696f 6e5f 6e61 6d65 3d66   function_name=f
+0000dc70: 756e 6374 696f 6e5f 6e61 6d65 2c20 7265  unction_name, re
+0000dc80: 6769 6f6e 3d63 6f6e 7465 7874 2e72 6567  gion=context.reg
+0000dc90: 696f 6e2c 2061 6363 6f75 6e74 5f69 643d  ion, account_id=
+0000dca0: 636f 6e74 6578 742e 6163 636f 756e 745f  context.account_
+0000dcb0: 6964 0a20 2020 2020 2020 2029 0a20 2020  id.        ).   
+0000dcc0: 2020 2020 2076 6572 7369 6f6e 7320 3d20       versions = 
+0000dcd0: 5b0a 2020 2020 2020 2020 2020 2020 6170  [.            ap
+0000dce0: 695f 7574 696c 732e 6d61 705f 746f 5f6c  i_utils.map_to_l
+0000dcf0: 6973 745f 7265 7370 6f6e 7365 280a 2020  ist_response(.  
+0000dd00: 2020 2020 2020 2020 2020 2020 2020 6170                ap
+0000dd10: 695f 7574 696c 732e 6d61 705f 636f 6e66  i_utils.map_conf
+0000dd20: 6967 5f6f 7574 2876 6572 7369 6f6e 3d76  ig_out(version=v
+0000dd30: 6572 7369 6f6e 2c20 7265 7475 726e 5f71  ersion, return_q
+0000dd40: 7561 6c69 6669 6564 5f61 726e 3d54 7275  ualified_arn=Tru
+0000dd50: 6529 0a20 2020 2020 2020 2020 2020 2029  e).            )
+0000dd60: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
+0000dd70: 2076 6572 7369 6f6e 2069 6e20 6675 6e63   version in func
+0000dd80: 7469 6f6e 2e76 6572 7369 6f6e 732e 7661  tion.versions.va
+0000dd90: 6c75 6573 2829 0a20 2020 2020 2020 205d  lues().        ]
+0000dda0: 0a20 2020 2020 2020 2069 7465 6d73 203d  .        items =
+0000ddb0: 2050 6167 696e 6174 6564 4c69 7374 2876   PaginatedList(v
+0000ddc0: 6572 7369 6f6e 7329 0a20 2020 2020 2020  ersions).       
+0000ddd0: 2070 6167 652c 2074 6f6b 656e 203d 2069   page, token = i
+0000dde0: 7465 6d73 2e67 6574 5f70 6167 6528 0a20  tems.get_page(. 
+0000ddf0: 2020 2020 2020 2020 2020 206c 616d 6264             lambd
+0000de00: 6120 6974 656d 3a20 6974 656d 2c0a 2020  a item: item,.  
+0000de10: 2020 2020 2020 2020 2020 6d61 726b 6572            marker
+0000de20: 2c0a 2020 2020 2020 2020 2020 2020 6d61  ,.            ma
+0000de30: 785f 6974 656d 732c 0a20 2020 2020 2020  x_items,.       
+0000de40: 2029 0a20 2020 2020 2020 2072 6574 7572   ).        retur
+0000de50: 6e20 4c69 7374 5665 7273 696f 6e73 4279  n ListVersionsBy
+0000de60: 4675 6e63 7469 6f6e 5265 7370 6f6e 7365  FunctionResponse
+0000de70: 2856 6572 7369 6f6e 733d 7061 6765 2c20  (Versions=page, 
+0000de80: 4e65 7874 4d61 726b 6572 3d74 6f6b 656e  NextMarker=token
+0000de90: 290a 0a20 2020 2023 2041 6c69 6173 0a0a  )..    # Alias..
+0000dea0: 2020 2020 6465 6620 5f63 7265 6174 655f      def _create_
+0000deb0: 726f 7574 696e 675f 636f 6e66 6967 5f6d  routing_config_m
+0000dec0: 6f64 656c 280a 2020 2020 2020 2020 7365  odel(.        se
+0000ded0: 6c66 2c20 726f 7574 696e 675f 636f 6e66  lf, routing_conf
+0000dee0: 6967 5f64 6963 743a 2064 6963 745b 7374  ig_dict: dict[st
+0000def0: 722c 2066 6c6f 6174 5d2c 2066 756e 6374  r, float], funct
+0000df00: 696f 6e5f 7665 7273 696f 6e3a 2046 756e  ion_version: Fun
+0000df10: 6374 696f 6e56 6572 7369 6f6e 0a20 2020  ctionVersion.   
+0000df20: 2029 3a0a 2020 2020 2020 2020 6966 206c   ):.        if l
+0000df30: 656e 2872 6f75 7469 6e67 5f63 6f6e 6669  en(routing_confi
+0000df40: 675f 6469 6374 2920 3e20 313a 0a20 2020  g_dict) > 1:.   
+0000df50: 2020 2020 2020 2020 2072 6169 7365 2049           raise I
+0000df60: 6e76 616c 6964 5061 7261 6d65 7465 7256  nvalidParameterV
+0000df70: 616c 7565 4578 6365 7074 696f 6e28 0a20  alueException(. 
+0000df80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0000df90: 4e75 6d62 6572 206f 6620 6974 656d 7320  Number of items 
+0000dfa0: 696e 2041 6464 6974 696f 6e61 6c56 6572  in AdditionalVer
+0000dfb0: 7369 6f6e 5765 6967 6874 7320 6361 6e6e  sionWeights cann
+0000dfc0: 6f74 2062 6520 6772 6561 7465 7220 7468  ot be greater th
+0000dfd0: 616e 2031 222c 0a20 2020 2020 2020 2020  an 1",.         
+0000dfe0: 2020 2020 2020 2054 7970 653d 2255 7365         Type="Use
+0000dff0: 7222 2c0a 2020 2020 2020 2020 2020 2020  r",.            
+0000e000: 290a 2020 2020 2020 2020 2320 7368 6f75  ).        # shou
+0000e010: 6c64 2062 6520 6578 6163 746c 7920 6f6e  ld be exactly on
+0000e020: 6520 6974 656d 2068 6572 652c 2073 7469  e item here, sti
+0000e030: 6c6c 2069 7465 7261 7469 6e67 2c20 6d69  ll iterating, mi
+0000e040: 6768 7420 6265 2073 7570 706f 7274 6564  ght be supported
+0000e050: 2069 6e20 7468 6520 6675 7475 7265 0a20   in the future. 
+0000e060: 2020 2020 2020 2066 6f72 206b 6579 2c20         for key, 
+0000e070: 7661 6c75 6520 696e 2072 6f75 7469 6e67  value in routing
+0000e080: 5f63 6f6e 6669 675f 6469 6374 2e69 7465  _config_dict.ite
+0000e090: 6d73 2829 3a0a 2020 2020 2020 2020 2020  ms():.          
+0000e0a0: 2020 6966 2076 616c 7565 203c 2030 2e30    if value < 0.0
+0000e0b0: 206f 7220 7661 6c75 6520 3e3d 2031 2e30   or value >= 1.0
+0000e0c0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+0000e0d0: 2020 7261 6973 6520 5661 6c69 6461 7469    raise Validati
+0000e0e0: 6f6e 4578 6365 7074 696f 6e28 0a20 2020  onException(.   
+0000e0f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e100: 2066 2231 2076 616c 6964 6174 696f 6e20   f"1 validation 
+0000e110: 6572 726f 7220 6465 7465 6374 6564 3a20  error detected: 
+0000e120: 5661 6c75 6520 277b 7b7b 6b65 797d 3d7b  Value '{{{key}={
+0000e130: 7661 6c75 657d 7d7d 2720 6174 2027 726f  value}}}' at 'ro
+0000e140: 7574 696e 6743 6f6e 6669 672e 6164 6469  utingConfig.addi
+0000e150: 7469 6f6e 616c 5665 7273 696f 6e57 6569  tionalVersionWei
+0000e160: 6768 7473 2720 6661 696c 6564 2074 6f20  ghts' failed to 
+0000e170: 7361 7469 7366 7920 636f 6e73 7472 6169  satisfy constrai
+0000e180: 6e74 3a20 4d61 7020 7661 6c75 6520 6d75  nt: Map value mu
+0000e190: 7374 2073 6174 6973 6679 2063 6f6e 7374  st satisfy const
+0000e1a0: 7261 696e 743a 205b 4d65 6d62 6572 206d  raint: [Member m
+0000e1b0: 7573 7420 6861 7665 2076 616c 7565 206c  ust have value l
+0000e1c0: 6573 7320 7468 616e 206f 7220 6571 7561  ess than or equa
+0000e1d0: 6c20 746f 2031 2e30 2c20 4d65 6d62 6572  l to 1.0, Member
+0000e1e0: 206d 7573 7420 6861 7665 2076 616c 7565   must have value
+0000e1f0: 2067 7265 6174 6572 2074 6861 6e20 6f72   greater than or
+0000e200: 2065 7175 616c 2074 6f20 302e 302c 204d   equal to 0.0, M
+0000e210: 656d 6265 7220 6d75 7374 206e 6f74 2062  ember must not b
+0000e220: 6520 6e75 6c6c 5d22 0a20 2020 2020 2020  e null]".       
+0000e230: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+0000e240: 2020 2020 2020 2069 6620 6b65 7920 3d3d         if key ==
+0000e250: 2066 756e 6374 696f 6e5f 7665 7273 696f   function_versio
+0000e260: 6e2e 6964 2e71 7561 6c69 6669 6572 3a0a  n.id.qualifier:.
+0000e270: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e280: 7261 6973 6520 496e 7661 6c69 6450 6172  raise InvalidPar
+0000e290: 616d 6574 6572 5661 6c75 6545 7863 6570  ameterValueExcep
+0000e2a0: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
+0000e2b0: 2020 2020 2020 2020 2020 6622 496e 7661            f"Inva
+0000e2c0: 6c69 6420 6675 6e63 7469 6f6e 2076 6572  lid function ver
+0000e2d0: 7369 6f6e 207b 6675 6e63 7469 6f6e 5f76  sion {function_v
+0000e2e0: 6572 7369 6f6e 2e69 642e 7175 616c 6966  ersion.id.qualif
+0000e2f0: 6965 727d 2e20 4675 6e63 7469 6f6e 2076  ier}. Function v
+0000e300: 6572 7369 6f6e 207b 6675 6e63 7469 6f6e  ersion {function
+0000e310: 5f76 6572 7369 6f6e 2e69 642e 7175 616c  _version.id.qual
+0000e320: 6966 6965 727d 2069 7320 616c 7265 6164  ifier} is alread
+0000e330: 7920 696e 636c 7564 6564 2069 6e20 726f  y included in ro
+0000e340: 7574 696e 6720 636f 6e66 6967 7572 6174  uting configurat
+0000e350: 696f 6e2e 222c 0a20 2020 2020 2020 2020  ion.",.         
+0000e360: 2020 2020 2020 2020 2020 2054 7970 653d             Type=
+0000e370: 2255 7365 7222 2c0a 2020 2020 2020 2020  "User",.        
+0000e380: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0000e390: 2020 2020 2020 2320 6368 6563 6b20 6966        # check if
+0000e3a0: 2076 6572 7369 6f6e 2074 6172 6765 7420   version target 
+0000e3b0: 6973 206c 6174 6573 742c 2074 6865 6e20  is latest, then 
+0000e3c0: 6e6f 2072 6f75 7469 6e67 2063 6f6e 6669  no routing confi
+0000e3d0: 6720 6973 2061 6c6c 6f77 6564 0a20 2020  g is allowed.   
+0000e3e0: 2020 2020 2020 2020 2069 6620 6675 6e63           if func
+0000e3f0: 7469 6f6e 5f76 6572 7369 6f6e 2e69 642e  tion_version.id.
+0000e400: 7175 616c 6966 6965 7220 3d3d 2022 244c  qualifier == "$L
+0000e410: 4154 4553 5422 3a0a 2020 2020 2020 2020  ATEST":.        
+0000e420: 2020 2020 2020 2020 7261 6973 6520 496e          raise In
+0000e430: 7661 6c69 6450 6172 616d 6574 6572 5661  validParameterVa
+0000e440: 6c75 6545 7863 6570 7469 6f6e 280a 2020  lueException(.  
+0000e450: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e460: 2020 2224 4c41 5445 5354 2069 7320 6e6f    "$LATEST is no
+0000e470: 7420 7375 7070 6f72 7465 6420 666f 7220  t supported for 
+0000e480: 616e 2061 6c69 6173 2070 6f69 6e74 696e  an alias pointin
+0000e490: 6720 746f 206d 6f72 6520 7468 616e 2031  g to more than 1
+0000e4a0: 2076 6572 7369 6f6e 220a 2020 2020 2020   version".      
+0000e4b0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+0000e4c0: 2020 2020 2020 2020 6966 206e 6f74 2061          if not a
+0000e4d0: 7069 5f75 7469 6c73 2e71 7561 6c69 6669  pi_utils.qualifi
+0000e4e0: 6572 5f69 735f 7665 7273 696f 6e28 6b65  er_is_version(ke
+0000e4f0: 7929 3a0a 2020 2020 2020 2020 2020 2020  y):.            
+0000e500: 2020 2020 7261 6973 6520 5661 6c69 6461      raise Valida
+0000e510: 7469 6f6e 4578 6365 7074 696f 6e28 0a20  tionException(. 
+0000e520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000e530: 2020 2066 2231 2076 616c 6964 6174 696f     f"1 validatio
+0000e540: 6e20 6572 726f 7220 6465 7465 6374 6564  n error detected
+0000e550: 3a20 5661 6c75 6520 277b 7b7b 6b65 797d  : Value '{{{key}
+0000e560: 3d7b 7661 6c75 657d 7d7d 2720 6174 2027  ={value}}}' at '
+0000e570: 726f 7574 696e 6743 6f6e 6669 672e 6164  routingConfig.ad
+0000e580: 6469 7469 6f6e 616c 5665 7273 696f 6e57  ditionalVersionW
+0000e590: 6569 6768 7473 2720 6661 696c 6564 2074  eights' failed t
+0000e5a0: 6f20 7361 7469 7366 7920 636f 6e73 7472  o satisfy constr
+0000e5b0: 6169 6e74 3a20 4d61 7020 6b65 7973 206d  aint: Map keys m
+0000e5c0: 7573 7420 7361 7469 7366 7920 636f 6e73  ust satisfy cons
+0000e5d0: 7472 6169 6e74 3a20 5b4d 656d 6265 7220  traint: [Member 
+0000e5e0: 6d75 7374 2068 6176 6520 6c65 6e67 7468  must have length
+0000e5f0: 206c 6573 7320 7468 616e 206f 7220 6571   less than or eq
+0000e600: 7561 6c20 746f 2031 3032 342c 204d 656d  ual to 1024, Mem
+0000e610: 6265 7220 6d75 7374 2068 6176 6520 6c65  ber must have le
+0000e620: 6e67 7468 2067 7265 6174 6572 2074 6861  ngth greater tha
+0000e630: 6e20 6f72 2065 7175 616c 2074 6f20 312c  n or equal to 1,
+0000e640: 204d 656d 6265 7220 6d75 7374 2073 6174   Member must sat
+0000e650: 6973 6679 2072 6567 756c 6172 2065 7870  isfy regular exp
+0000e660: 7265 7373 696f 6e20 7061 7474 6572 6e3a  ression pattern:
+0000e670: 205b 302d 395d 2b2c 204d 656d 6265 7220   [0-9]+, Member 
+0000e680: 6d75 7374 206e 6f74 2062 6520 6e75 6c6c  must not be null
+0000e690: 5d22 0a20 2020 2020 2020 2020 2020 2020  ]".             
+0000e6a0: 2020 2029 0a0a 2020 2020 2020 2020 2020     )..          
+0000e6b0: 2020 2320 6368 6563 6b69 6e67 2069 6620    # checking if 
+0000e6c0: 7468 6520 7665 7273 696f 6e20 696e 2074  the version in t
+0000e6d0: 6865 2063 6f6e 6669 6720 6578 6973 7473  he config exists
+0000e6e0: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
+0000e6f0: 662e 5f67 6574 5f66 756e 6374 696f 6e5f  f._get_function_
+0000e700: 7665 7273 696f 6e28 0a20 2020 2020 2020  version(.       
+0000e710: 2020 2020 2020 2020 2066 756e 6374 696f           functio
+0000e720: 6e5f 6e61 6d65 3d66 756e 6374 696f 6e5f  n_name=function_
+0000e730: 7665 7273 696f 6e2e 6964 2e66 756e 6374  version.id.funct
+0000e740: 696f 6e5f 6e61 6d65 2c0a 2020 2020 2020  ion_name,.      
+0000e750: 2020 2020 2020 2020 2020 7175 616c 6966            qualif
+0000e760: 6965 723d 6b65 792c 0a20 2020 2020 2020  ier=key,.       
+0000e770: 2020 2020 2020 2020 2072 6567 696f 6e3d           region=
+0000e780: 6675 6e63 7469 6f6e 5f76 6572 7369 6f6e  function_version
+0000e790: 2e69 642e 7265 6769 6f6e 2c0a 2020 2020  .id.region,.    
+0000e7a0: 2020 2020 2020 2020 2020 2020 6163 636f              acco
+0000e7b0: 756e 745f 6964 3d66 756e 6374 696f 6e5f  unt_id=function_
+0000e7c0: 7665 7273 696f 6e2e 6964 2e61 6363 6f75  version.id.accou
+0000e7d0: 6e74 2c0a 2020 2020 2020 2020 2020 2020  nt,.            
+0000e7e0: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+0000e7f0: 2041 6c69 6173 526f 7574 696e 6743 6f6e   AliasRoutingCon
+0000e800: 6669 6728 7665 7273 696f 6e5f 7765 6967  fig(version_weig
+0000e810: 6874 733d 726f 7574 696e 675f 636f 6e66  hts=routing_conf
+0000e820: 6967 5f64 6963 7429 0a0a 2020 2020 6465  ig_dict)..    de
+0000e830: 6620 6372 6561 7465 5f61 6c69 6173 280a  f create_alias(.
+0000e840: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
+0000e850: 2020 2020 2020 636f 6e74 6578 743a 2052        context: R
+0000e860: 6571 7565 7374 436f 6e74 6578 742c 0a20  equestContext,. 
+0000e870: 2020 2020 2020 2066 756e 6374 696f 6e5f         function_
+0000e880: 6e61 6d65 3a20 4675 6e63 7469 6f6e 4e61  name: FunctionNa
+0000e890: 6d65 2c0a 2020 2020 2020 2020 6e61 6d65  me,.        name
+0000e8a0: 3a20 416c 6961 732c 0a20 2020 2020 2020  : Alias,.       
+0000e8b0: 2066 756e 6374 696f 6e5f 7665 7273 696f   function_versio
+0000e8c0: 6e3a 2056 6572 7369 6f6e 2c0a 2020 2020  n: Version,.    
+0000e8d0: 2020 2020 6465 7363 7269 7074 696f 6e3a      description:
+0000e8e0: 2044 6573 6372 6970 7469 6f6e 203d 204e   Description = N
+0000e8f0: 6f6e 652c 0a20 2020 2020 2020 2072 6f75  one,.        rou
+0000e900: 7469 6e67 5f63 6f6e 6669 673a 2041 6c69  ting_config: Ali
+0000e910: 6173 526f 7574 696e 6743 6f6e 6669 6775  asRoutingConfigu
+0000e920: 7261 7469 6f6e 203d 204e 6f6e 652c 0a20  ration = None,. 
+0000e930: 2020 2029 202d 3e20 416c 6961 7343 6f6e     ) -> AliasCon
+0000e940: 6669 6775 7261 7469 6f6e 3a0a 2020 2020  figuration:.    
+0000e950: 2020 2020 6675 6e63 7469 6f6e 5f6e 616d      function_nam
+0000e960: 6520 3d20 6170 695f 7574 696c 732e 6765  e = api_utils.ge
+0000e970: 745f 6675 6e63 7469 6f6e 5f6e 616d 6528  t_function_name(
+0000e980: 6675 6e63 7469 6f6e 5f6e 616d 652c 2063  function_name, c
+0000e990: 6f6e 7465 7874 2e72 6567 696f 6e29 0a20  ontext.region). 
+0000e9a0: 2020 2020 2020 2074 6172 6765 745f 7665         target_ve
+0000e9b0: 7273 696f 6e20 3d20 7365 6c66 2e5f 6765  rsion = self._ge
+0000e9c0: 745f 6675 6e63 7469 6f6e 5f76 6572 7369  t_function_versi
+0000e9d0: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
+0000e9e0: 6675 6e63 7469 6f6e 5f6e 616d 653d 6675  function_name=fu
+0000e9f0: 6e63 7469 6f6e 5f6e 616d 652c 0a20 2020  nction_name,.   
+0000ea00: 2020 2020 2020 2020 2071 7561 6c69 6669           qualifi
+0000ea10: 6572 3d66 756e 6374 696f 6e5f 7665 7273  er=function_vers
+0000ea20: 696f 6e2c 0a20 2020 2020 2020 2020 2020  ion,.           
+0000ea30: 2072 6567 696f 6e3d 636f 6e74 6578 742e   region=context.
+0000ea40: 7265 6769 6f6e 2c0a 2020 2020 2020 2020  region,.        
+0000ea50: 2020 2020 6163 636f 756e 745f 6964 3d63      account_id=c
+0000ea60: 6f6e 7465 7874 2e61 6363 6f75 6e74 5f69  ontext.account_i
+0000ea70: 642c 0a20 2020 2020 2020 2029 0a20 2020  d,.        ).   
+0000ea80: 2020 2020 2066 756e 6374 696f 6e20 3d20       function = 
+0000ea90: 7365 6c66 2e5f 6765 745f 6675 6e63 7469  self._get_functi
+0000eaa0: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
+0000eab0: 6675 6e63 7469 6f6e 5f6e 616d 653d 6675  function_name=fu
+0000eac0: 6e63 7469 6f6e 5f6e 616d 652c 2072 6567  nction_name, reg
+0000ead0: 696f 6e3d 636f 6e74 6578 742e 7265 6769  ion=context.regi
+0000eae0: 6f6e 2c20 6163 636f 756e 745f 6964 3d63  on, account_id=c
+0000eaf0: 6f6e 7465 7874 2e61 6363 6f75 6e74 5f69  ontext.account_i
+0000eb00: 640a 2020 2020 2020 2020 290a 2020 2020  d.        ).    
+0000eb10: 2020 2020 2320 6465 7363 7269 7074 696f      # descriptio
+0000eb20: 6e20 6973 2061 6c77 6179 7320 7072 6573  n is always pres
+0000eb30: 656e 742c 2069 6620 6e6f 7420 7370 6563  ent, if not spec
+0000eb40: 6966 6965 6420 6974 2773 2061 6e20 656d  ified it's an em
+0000eb50: 7074 7920 7374 7269 6e67 0a20 2020 2020  pty string.     
+0000eb60: 2020 2064 6573 6372 6970 7469 6f6e 203d     description =
+0000eb70: 2064 6573 6372 6970 7469 6f6e 206f 7220   description or 
+0000eb80: 2222 0a20 2020 2020 2020 2077 6974 6820  "".        with 
+0000eb90: 6675 6e63 7469 6f6e 2e6c 6f63 6b3a 0a20  function.lock:. 
+0000eba0: 2020 2020 2020 2020 2020 2069 6620 6578             if ex
+0000ebb0: 6973 7469 6e67 5f61 6c69 6173 203a 3d20  isting_alias := 
+0000ebc0: 6675 6e63 7469 6f6e 2e61 6c69 6173 6573  function.aliases
+0000ebd0: 2e67 6574 286e 616d 6529 3a0a 2020 2020  .get(name):.    
+0000ebe0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+0000ebf0: 6520 5265 736f 7572 6365 436f 6e66 6c69  e ResourceConfli
+0000ec00: 6374 4578 6365 7074 696f 6e28 0a20 2020  ctException(.   
+0000ec10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0000ec20: 2066 2241 6c69 6173 2061 6c72 6561 6479   f"Alias already
+0000ec30: 2065 7869 7374 733a 207b 6170 695f 7574   exists: {api_ut
+0000ec40: 696c 732e 6d61 705f 616c 6961 735f 6f75  ils.map_alias_ou
+0000ec50: 7428 616c 6961 733d 6578 6973 7469 6e67  t(alias=existing
+0000ec60: 5f61 6c69 6173 2c20 6675 6e63 7469 6f6e  _alias, function
+0000ec70: 3d66 756e 6374 696f 6e29 5b27 416c 6961  =function)['Alia
+0000ec80: 7341 726e 275d 7d22 2c0a 2020 2020 2020  sArn']}",.      
+0000ec90: 2020 2020 2020 2020 2020 2020 2020 5479                Ty
+0000eca0: 7065 3d22 5573 6572 222c 0a20 2020 2020  pe="User",.     
+0000ecb0: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
+0000ecc0: 2020 2020 2020 2020 2023 2063 6865 636b           # check
+0000ecd0: 696e 6720 6966 2074 6865 2076 6572 7369  ing if the versi
+0000ece0: 6f6e 2065 7869 7374 730a 2020 2020 2020  on exists.      
+0000ecf0: 2020 2020 2020 726f 7574 696e 675f 636f        routing_co
+0000ed00: 6e66 6967 7572 6174 696f 6e20 3d20 4e6f  nfiguration = No
+0000ed10: 6e65 0a20 2020 2020 2020 2020 2020 2069  ne.            i
+0000ed20: 6620 726f 7574 696e 675f 636f 6e66 6967  f routing_config
+0000ed30: 2061 6e64 2028 0a20 2020 2020 2020 2020   and (.         
+0000ed40: 2020 2020 2020 2072 6f75 7469 6e67 5f63         routing_c
+0000ed50: 6f6e 6669 675f 6469 6374 203a 3d20 726f  onfig_dict := ro
+0000ed60: 7574 696e 675f 636f 6e66 6967 2e67 6574  uting_config.get
+0000ed70: 2822 4164 6469 7469 6f6e 616c 5665 7273  ("AdditionalVers
+0000ed80: 696f 6e57 6569 6768 7473 2229 0a20 2020  ionWeights").   
+0000ed90: 2020 2020 2020 2020 2029 3a0a 2020 2020           ):.    
+0000eda0: 2020 2020 2020 2020 2020 2020 726f 7574              rout
+0000edb0: 696e 675f 636f 6e66 6967 7572 6174 696f  ing_configuratio
+0000edc0: 6e20 3d20 7365 6c66 2e5f 6372 6561 7465  n = self._create
+0000edd0: 5f72 6f75 7469 6e67 5f63 6f6e 6669 675f  _routing_config_
+0000ede0: 6d6f 6465 6c28 0a20 2020 2020 2020 2020  model(.         
+0000edf0: 2020 2020 2020 2020 2020 2072 6f75 7469             routi
+0000ee00: 6e67 5f63 6f6e 6669 675f 6469 6374 2c20  ng_config_dict, 
+0000ee10: 7461 7267 6574 5f76 6572 7369 6f6e 0a20  target_version. 
+0000ee20: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+0000ee30: 0a0a 2020 2020 2020 2020 2020 2020 616c  ..            al
+0000ee40: 6961 7320 3d20 5665 7273 696f 6e41 6c69  ias = VersionAli
+0000ee50: 6173 280a 2020 2020 2020 2020 2020 2020  as(.            
+0000ee60: 2020 2020 6e61 6d65 3d6e 616d 652c 0a20      name=name,. 
+0000ee70: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0000ee80: 756e 6374 696f 6e5f 7665 7273 696f 6e3d  unction_version=
+0000ee90: 6675 6e63 7469 6f6e 5f76 6572 7369 6f6e  function_version
+0000eea0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+0000eeb0: 2020 6465 7363 7269 7074 696f 6e3d 6465    description=de
+0000eec0: 7363 7269 7074 696f 6e2c 0a20 2020 2020  scription,.     
+0000eed0: 2020 2020 2020 2020 2020 2072 6f75 7469             routi
+0000eee0: 6e67 5f63 6f6e 6669 6775 7261 7469 6f6e  ng_configuration
+0000eef0: 3d72 6f75 7469 6e67 5f63 6f6e 6669 6775  =routing_configu
+0000ef00: 7261 7469 6f6e 2c0a 2020 2020 2020 2020  ration,.        
+0000ef10: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+0000ef20: 2020 6675 6e63 7469 6f6e 2e61 6c69 6173    function.alias
+0000ef30: 6573 5b6e 616d 655d 203d 2061 6c69 6173  es[name] = alias
+0000ef40: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+0000ef50: 6170 695f 7574 696c 732e 6d61 705f 616c  api_utils.map_al
+0000ef60: 6961 735f 6f75 7428 616c 6961 733d 616c  ias_out(alias=al
+0000ef70: 6961 732c 2066 756e 6374 696f 6e3d 6675  ias, function=fu
+0000ef80: 6e63 7469 6f6e 290a 0a20 2020 2064 6566  nction)..    def
+0000ef90: 206c 6973 745f 616c 6961 7365 7328 0a20   list_aliases(. 
+0000efa0: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
+0000efb0: 2020 2020 2063 6f6e 7465 7874 3a20 5265       context: Re
+0000efc0: 7175 6573 7443 6f6e 7465 7874 2c0a 2020  questContext,.  
+0000efd0: 2020 2020 2020 6675 6e63 7469 6f6e 5f6e        function_n
+0000efe0: 616d 653a 2046 756e 6374 696f 6e4e 616d  ame: FunctionNam
+0000eff0: 652c 0a20 2020 2020 2020 2066 756e 6374  e,.        funct
+0000f000: 696f 6e5f 7665 7273 696f 6e3a 2056 6572  ion_version: Ver
+0000f010: 7369 6f6e 203d 204e 6f6e 652c 0a20 2020  sion = None,.   
+0000f020: 2020 2020 206d 6172 6b65 723a 2053 7472       marker: Str
+0000f030: 696e 6720 3d20 4e6f 6e65 2c0a 2020 2020  ing = None,.    
+0000f040: 2020 2020 6d61 785f 6974 656d 733a 204d      max_items: M
+0000f050: 6178 4c69 7374 4974 656d 7320 3d20 4e6f  axListItems = No
+0000f060: 6e65 2c0a 2020 2020 2920 2d3e 204c 6973  ne,.    ) -> Lis
+0000f070: 7441 6c69 6173 6573 5265 7370 6f6e 7365  tAliasesResponse
+0000f080: 3a0a 2020 2020 2020 2020 6675 6e63 7469  :.        functi
+0000f090: 6f6e 5f6e 616d 6520 3d20 6170 695f 7574  on_name = api_ut
+0000f0a0: 696c 732e 6765 745f 6675 6e63 7469 6f6e  ils.get_function
+0000f0b0: 5f6e 616d 6528 6675 6e63 7469 6f6e 5f6e  _name(function_n
+0000f0c0: 616d 652c 2063 6f6e 7465 7874 2e72 6567  ame, context.reg
+0000f0d0: 696f 6e29 0a20 2020 2020 2020 2066 756e  ion).        fun
+0000f0e0: 6374 696f 6e20 3d20 7365 6c66 2e5f 6765  ction = self._ge
+0000f0f0: 745f 6675 6e63 7469 6f6e 280a 2020 2020  t_function(.    
+0000f100: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
+0000f110: 5f6e 616d 653d 6675 6e63 7469 6f6e 5f6e  _name=function_n
+0000f120: 616d 652c 2072 6567 696f 6e3d 636f 6e74  ame, region=cont
+0000f130: 6578 742e 7265 6769 6f6e 2c20 6163 636f  ext.region, acco
+0000f140: 756e 745f 6964 3d63 6f6e 7465 7874 2e61  unt_id=context.a
+0000f150: 6363 6f75 6e74 5f69 640a 2020 2020 2020  ccount_id.      
+0000f160: 2020 290a 2020 2020 2020 2020 616c 6961    ).        alia
+0000f170: 7365 7320 3d20 5b0a 2020 2020 2020 2020  ses = [.        
+0000f180: 2020 2020 6170 695f 7574 696c 732e 6d61      api_utils.ma
+0000f190: 705f 616c 6961 735f 6f75 7428 616c 6961  p_alias_out(alia
+0000f1a0: 732c 2066 756e 6374 696f 6e29 0a20 2020  s, function).   
+0000f1b0: 2020 2020 2020 2020 2066 6f72 2061 6c69           for ali
+0000f1c0: 6173 2069 6e20 6675 6e63 7469 6f6e 2e61  as in function.a
+0000f1d0: 6c69 6173 6573 2e76 616c 7565 7328 290a  liases.values().
+0000f1e0: 2020 2020 2020 2020 2020 2020 6966 2066              if f
+0000f1f0: 756e 6374 696f 6e5f 7665 7273 696f 6e20  unction_version 
+0000f200: 6973 204e 6f6e 6520 6f72 2061 6c69 6173  is None or alias
+0000f210: 2e66 756e 6374 696f 6e5f 7665 7273 696f  .function_versio
+0000f220: 6e20 3d3d 2066 756e 6374 696f 6e5f 7665  n == function_ve
+0000f230: 7273 696f 6e0a 2020 2020 2020 2020 5d0a  rsion.        ].
+0000f240: 0a20 2020 2020 2020 2061 6c69 6173 6573  .        aliases
+0000f250: 203d 2050 6167 696e 6174 6564 4c69 7374   = PaginatedList
+0000f260: 2861 6c69 6173 6573 290a 2020 2020 2020  (aliases).      
+0000f270: 2020 7061 6765 2c20 746f 6b65 6e20 3d20    page, token = 
+0000f280: 616c 6961 7365 732e 6765 745f 7061 6765  aliases.get_page
+0000f290: 280a 2020 2020 2020 2020 2020 2020 6c61  (.            la
+0000f2a0: 6d62 6461 2061 6c69 6173 3a20 616c 6961  mbda alias: alia
+0000f2b0: 735b 2241 6c69 6173 4172 6e22 5d2c 0a20  s["AliasArn"],. 
+0000f2c0: 2020 2020 2020 2020 2020 206d 6172 6b65             marke
+0000f2d0: 722c 0a20 2020 2020 2020 2020 2020 206d  r,.            m
+0000f2e0: 6178 5f69 7465 6d73 2c0a 2020 2020 2020  ax_items,.      
+0000f2f0: 2020 290a 0a20 2020 2020 2020 2072 6574    )..        ret
+0000f300: 7572 6e20 4c69 7374 416c 6961 7365 7352  urn ListAliasesR
+0000f310: 6573 706f 6e73 6528 416c 6961 7365 733d  esponse(Aliases=
+0000f320: 7061 6765 2c20 4e65 7874 4d61 726b 6572  page, NextMarker
+0000f330: 3d74 6f6b 656e 290a 0a20 2020 2064 6566  =token)..    def
+0000f340: 2064 656c 6574 655f 616c 6961 7328 0a20   delete_alias(. 
+0000f350: 2020 2020 2020 2073 656c 662c 2063 6f6e         self, con
+0000f360: 7465 7874 3a20 5265 7175 6573 7443 6f6e  text: RequestCon
+0000f370: 7465 7874 2c20 6675 6e63 7469 6f6e 5f6e  text, function_n
+0000f380: 616d 653a 2046 756e 6374 696f 6e4e 616d  ame: FunctionNam
+0000f390: 652c 206e 616d 653a 2041 6c69 6173 0a20  e, name: Alias. 
+0000f3a0: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
+0000f3b0: 2020 2020 2020 6675 6e63 7469 6f6e 5f6e        function_n
+0000f3c0: 616d 6520 3d20 6170 695f 7574 696c 732e  ame = api_utils.
+0000f3d0: 6765 745f 6675 6e63 7469 6f6e 5f6e 616d  get_function_nam
+0000f3e0: 6528 6675 6e63 7469 6f6e 5f6e 616d 652c  e(function_name,
+0000f3f0: 2063 6f6e 7465 7874 2e72 6567 696f 6e29   context.region)
+0000f400: 0a20 2020 2020 2020 2066 756e 6374 696f  .        functio
+0000f410: 6e20 3d20 7365 6c66 2e5f 6765 745f 6675  n = self._get_fu
+0000f420: 6e63 7469 6f6e 280a 2020 2020 2020 2020  nction(.        
+0000f430: 2020 2020 6675 6e63 7469 6f6e 5f6e 616d      function_nam
+0000f440: 653d 6675 6e63 7469 6f6e 5f6e 616d 652c  e=function_name,
+0000f450: 2072 6567 696f 6e3d 636f 6e74 6578 742e   region=context.
+0000f460: 7265 6769 6f6e 2c20 6163 636f 756e 745f  region, account_
+0000f470: 6964 3d63 6f6e 7465 7874 2e61 6363 6f75  id=context.accou
+0000f480: 6e74 5f69 640a 2020 2020 2020 2020 290a  nt_id.        ).
+0000f490: 2020 2020 2020 2020 6966 206e 616d 6520          if name 
+0000f4a0: 6e6f 7420 696e 2066 756e 6374 696f 6e2e  not in function.
+0000f4b0: 616c 6961 7365 733a 0a20 2020 2020 2020  aliases:.       
+0000f4c0: 2020 2020 2072 6169 7365 2056 616c 7565       raise Value
+0000f4d0: 4572 726f 7228 2241 6c69 6173 206e 6f74  Error("Alias not
+0000f4e0: 2066 6f75 6e64 2229 2020 2320 544f 444f   found")  # TODO
+0000f4f0: 2070 726f 7065 7220 6578 6365 7074 696f   proper exceptio
+0000f500: 6e0a 2020 2020 2020 2020 6675 6e63 7469  n.        functi
+0000f510: 6f6e 2e61 6c69 6173 6573 2e70 6f70 286e  on.aliases.pop(n
+0000f520: 616d 652c 204e 6f6e 6529 0a0a 2020 2020  ame, None)..    
+0000f530: 2020 2020 2320 636c 6561 6e75 7020 7265      # cleanup re
+0000f540: 6c61 7465 6420 7265 736f 7572 6365 730a  lated resources.
+0000f550: 2020 2020 2020 2020 6966 206e 616d 6520          if name 
+0000f560: 696e 2066 756e 6374 696f 6e2e 7072 6f76  in function.prov
+0000f570: 6973 696f 6e65 645f 636f 6e63 7572 7265  isioned_concurre
+0000f580: 6e63 795f 636f 6e66 6967 733a 0a20 2020  ncy_configs:.   
+0000f590: 2020 2020 2020 2020 2066 756e 6374 696f           functio
+0000f5a0: 6e2e 7072 6f76 6973 696f 6e65 645f 636f  n.provisioned_co
+0000f5b0: 6e63 7572 7265 6e63 795f 636f 6e66 6967  ncurrency_config
+0000f5c0: 732e 706f 7028 6e61 6d65 290a 0a20 2020  s.pop(name)..   
+0000f5d0: 2064 6566 2067 6574 5f61 6c69 6173 280a   def get_alias(.
+0000f5e0: 2020 2020 2020 2020 7365 6c66 2c20 636f          self, co
+0000f5f0: 6e74 6578 743a 2052 6571 7565 7374 436f  ntext: RequestCo
+0000f600: 6e74 6578 742c 2066 756e 6374 696f 6e5f  ntext, function_
+0000f610: 6e61 6d65 3a20 4675 6e63 7469 6f6e 4e61  name: FunctionNa
+0000f620: 6d65 2c20 6e61 6d65 3a20 416c 6961 730a  me, name: Alias.
+0000f630: 2020 2020 2920 2d3e 2041 6c69 6173 436f      ) -> AliasCo
+0000f640: 6e66 6967 7572 6174 696f 6e3a 0a20 2020  nfiguration:.   
+0000f650: 2020 2020 2066 756e 6374 696f 6e5f 6e61       function_na
+0000f660: 6d65 203d 2061 7069 5f75 7469 6c73 2e67  me = api_utils.g
+0000f670: 6574 5f66 756e 6374 696f 6e5f 6e61 6d65  et_function_name
+0000f680: 2866 756e 6374 696f 6e5f 6e61 6d65 2c20  (function_name, 
+0000f690: 636f 6e74 6578 742e 7265 6769 6f6e 290a  context.region).
 0000f6a0: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
-0000f6b0: 5f6e 616d 653d 6675 6e63 7469 6f6e 5f6e  _name=function_n
-0000f6c0: 616d 652c 2072 6567 696f 6e3d 636f 6e74  ame, region=cont
-0000f6d0: 6578 742e 7265 6769 6f6e 2c20 6163 636f  ext.region, acco
-0000f6e0: 756e 745f 6964 3d63 6f6e 7465 7874 2e61  unt_id=context.a
-0000f6f0: 6363 6f75 6e74 5f69 640a 2020 2020 2020  ccount_id.      
-0000f700: 2020 290a 2020 2020 2020 2020 6966 206e    ).        if n
-0000f710: 6f74 2028 616c 6961 7320 3a3d 2066 756e  ot (alias := fun
-0000f720: 6374 696f 6e2e 616c 6961 7365 732e 6765  ction.aliases.ge
-0000f730: 7428 6e61 6d65 2929 3a0a 2020 2020 2020  t(name)):.      
-0000f740: 2020 2020 2020 7261 6973 6520 5265 736f        raise Reso
-0000f750: 7572 6365 4e6f 7446 6f75 6e64 4578 6365  urceNotFoundExce
-0000f760: 7074 696f 6e28 0a20 2020 2020 2020 2020  ption(.         
-0000f770: 2020 2020 2020 2066 2243 616e 6e6f 7420         f"Cannot 
-0000f780: 6669 6e64 2061 6c69 6173 2061 726e 3a20  find alias arn: 
-0000f790: 7b61 7069 5f75 7469 6c73 2e71 7561 6c69  {api_utils.quali
-0000f7a0: 6669 6564 5f6c 616d 6264 615f 6172 6e28  fied_lambda_arn(
-0000f7b0: 6675 6e63 7469 6f6e 5f6e 616d 653d 6675  function_name=fu
-0000f7c0: 6e63 7469 6f6e 5f6e 616d 652c 2071 7561  nction_name, qua
-0000f7d0: 6c69 6669 6572 3d6e 616d 652c 2072 6567  lifier=name, reg
-0000f7e0: 696f 6e3d 636f 6e74 6578 742e 7265 6769  ion=context.regi
-0000f7f0: 6f6e 2c20 6163 636f 756e 743d 636f 6e74  on, account=cont
-0000f800: 6578 742e 6163 636f 756e 745f 6964 297d  ext.account_id)}
-0000f810: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
-0000f820: 2020 2054 7970 653d 2255 7365 7222 2c0a     Type="User",.
-0000f830: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-0000f840: 2020 2020 2020 7265 7475 726e 2061 7069        return api
-0000f850: 5f75 7469 6c73 2e6d 6170 5f61 6c69 6173  _utils.map_alias
-0000f860: 5f6f 7574 2861 6c69 6173 3d61 6c69 6173  _out(alias=alias
-0000f870: 2c20 6675 6e63 7469 6f6e 3d66 756e 6374  , function=funct
-0000f880: 696f 6e29 0a0a 2020 2020 6465 6620 7570  ion)..    def up
-0000f890: 6461 7465 5f61 6c69 6173 280a 2020 2020  date_alias(.    
-0000f8a0: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
-0000f8b0: 2020 636f 6e74 6578 743a 2052 6571 7565    context: Reque
-0000f8c0: 7374 436f 6e74 6578 742c 0a20 2020 2020  stContext,.     
-0000f8d0: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
-0000f8e0: 3a20 4675 6e63 7469 6f6e 4e61 6d65 2c0a  : FunctionName,.
-0000f8f0: 2020 2020 2020 2020 6e61 6d65 3a20 416c          name: Al
-0000f900: 6961 732c 0a20 2020 2020 2020 2066 756e  ias,.        fun
-0000f910: 6374 696f 6e5f 7665 7273 696f 6e3a 2056  ction_version: V
-0000f920: 6572 7369 6f6e 203d 204e 6f6e 652c 0a20  ersion = None,. 
-0000f930: 2020 2020 2020 2064 6573 6372 6970 7469         descripti
-0000f940: 6f6e 3a20 4465 7363 7269 7074 696f 6e20  on: Description 
-0000f950: 3d20 4e6f 6e65 2c0a 2020 2020 2020 2020  = None,.        
-0000f960: 726f 7574 696e 675f 636f 6e66 6967 3a20  routing_config: 
-0000f970: 416c 6961 7352 6f75 7469 6e67 436f 6e66  AliasRoutingConf
-0000f980: 6967 7572 6174 696f 6e20 3d20 4e6f 6e65  iguration = None
-0000f990: 2c0a 2020 2020 2020 2020 7265 7669 7369  ,.        revisi
-0000f9a0: 6f6e 5f69 643a 2053 7472 696e 6720 3d20  on_id: String = 
-0000f9b0: 4e6f 6e65 2c0a 2020 2020 2920 2d3e 2041  None,.    ) -> A
-0000f9c0: 6c69 6173 436f 6e66 6967 7572 6174 696f  liasConfiguratio
-0000f9d0: 6e3a 0a20 2020 2020 2020 2066 756e 6374  n:.        funct
-0000f9e0: 696f 6e5f 6e61 6d65 203d 2061 7069 5f75  ion_name = api_u
-0000f9f0: 7469 6c73 2e67 6574 5f66 756e 6374 696f  tils.get_functio
-0000fa00: 6e5f 6e61 6d65 2866 756e 6374 696f 6e5f  n_name(function_
-0000fa10: 6e61 6d65 2c20 636f 6e74 6578 742e 7265  name, context.re
-0000fa20: 6769 6f6e 290a 2020 2020 2020 2020 6675  gion).        fu
-0000fa30: 6e63 7469 6f6e 203d 2073 656c 662e 5f67  nction = self._g
-0000fa40: 6574 5f66 756e 6374 696f 6e28 0a20 2020  et_function(.   
-0000fa50: 2020 2020 2020 2020 2066 756e 6374 696f           functio
-0000fa60: 6e5f 6e61 6d65 3d66 756e 6374 696f 6e5f  n_name=function_
-0000fa70: 6e61 6d65 2c20 7265 6769 6f6e 3d63 6f6e  name, region=con
-0000fa80: 7465 7874 2e72 6567 696f 6e2c 2061 6363  text.region, acc
-0000fa90: 6f75 6e74 5f69 643d 636f 6e74 6578 742e  ount_id=context.
-0000faa0: 6163 636f 756e 745f 6964 0a20 2020 2020  account_id.     
-0000fab0: 2020 2029 0a20 2020 2020 2020 2069 6620     ).        if 
-0000fac0: 6e6f 7420 2861 6c69 6173 203a 3d20 6675  not (alias := fu
-0000fad0: 6e63 7469 6f6e 2e61 6c69 6173 6573 2e67  nction.aliases.g
-0000fae0: 6574 286e 616d 6529 293a 0a20 2020 2020  et(name)):.     
-0000faf0: 2020 2020 2020 2072 6169 7365 2056 616c         raise Val
-0000fb00: 7565 4572 726f 7228 2241 6c69 6173 206e  ueError("Alias n
-0000fb10: 6f74 2066 6f75 6e64 2229 2020 2320 544f  ot found")  # TO
-0000fb20: 444f 2070 726f 7065 7220 6578 6365 7074  DO proper except
-0000fb30: 696f 6e0a 2020 2020 2020 2020 6966 2072  ion.        if r
-0000fb40: 6576 6973 696f 6e5f 6964 2061 6e64 2061  evision_id and a
-0000fb50: 6c69 6173 2e72 6576 6973 696f 6e5f 6964  lias.revision_id
-0000fb60: 2021 3d20 7265 7669 7369 6f6e 5f69 643a   != revision_id:
-0000fb70: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-0000fb80: 7365 2050 7265 636f 6e64 6974 696f 6e46  se PreconditionF
-0000fb90: 6169 6c65 6445 7863 6570 7469 6f6e 280a  ailedException(.
-0000fba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0000fbb0: 2254 6865 2052 6576 6973 696f 6e20 4964  "The Revision Id
-0000fbc0: 2070 726f 7669 6465 6420 646f 6573 206e   provided does n
-0000fbd0: 6f74 206d 6174 6368 2074 6865 206c 6174  ot match the lat
-0000fbe0: 6573 7420 5265 7669 7369 6f6e 2049 642e  est Revision Id.
-0000fbf0: 2022 0a20 2020 2020 2020 2020 2020 2020   ".             
-0000fc00: 2020 2022 4361 6c6c 2074 6865 2047 6574     "Call the Get
-0000fc10: 4675 6e63 7469 6f6e 2f47 6574 416c 6961  Function/GetAlia
-0000fc20: 7320 4150 4920 746f 2072 6574 7269 6576  s API to retriev
-0000fc30: 6520 7468 6520 6c61 7465 7374 2052 6576  e the latest Rev
-0000fc40: 6973 696f 6e20 4964 222c 0a20 2020 2020  ision Id",.     
-0000fc50: 2020 2020 2020 2020 2020 2054 7970 653d             Type=
-0000fc60: 2255 7365 7222 2c0a 2020 2020 2020 2020  "User",.        
-0000fc70: 2020 2020 290a 2020 2020 2020 2020 6368      ).        ch
-0000fc80: 616e 6765 7320 3d20 7b7d 0a20 2020 2020  anges = {}.     
-0000fc90: 2020 2069 6620 6675 6e63 7469 6f6e 5f76     if function_v
-0000fca0: 6572 7369 6f6e 2069 7320 6e6f 7420 4e6f  ersion is not No
-0000fcb0: 6e65 3a0a 2020 2020 2020 2020 2020 2020  ne:.            
-0000fcc0: 6368 616e 6765 7320 7c3d 207b 2266 756e  changes |= {"fun
-0000fcd0: 6374 696f 6e5f 7665 7273 696f 6e22 3a20  ction_version": 
-0000fce0: 6675 6e63 7469 6f6e 5f76 6572 7369 6f6e  function_version
-0000fcf0: 7d0a 2020 2020 2020 2020 6966 2064 6573  }.        if des
-0000fd00: 6372 6970 7469 6f6e 2069 7320 6e6f 7420  cription is not 
-0000fd10: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-0000fd20: 2020 6368 616e 6765 7320 7c3d 207b 2264    changes |= {"d
-0000fd30: 6573 6372 6970 7469 6f6e 223a 2064 6573  escription": des
-0000fd40: 6372 6970 7469 6f6e 7d0a 2020 2020 2020  cription}.      
-0000fd50: 2020 6966 2072 6f75 7469 6e67 5f63 6f6e    if routing_con
-0000fd60: 6669 6720 6973 206e 6f74 204e 6f6e 653a  fig is not None:
-0000fd70: 0a20 2020 2020 2020 2020 2020 2023 2069  .            # i
-0000fd80: 6620 6974 2069 7320 616e 2065 6d70 7479  f it is an empty
-0000fd90: 2064 6963 7420 6f72 2041 6464 6974 696f   dict or Additio
-0000fda0: 6e61 6c56 6572 7369 6f6e 5765 6967 6874  nalVersionWeight
-0000fdb0: 7320 6973 2065 6d70 7479 2c20 7365 7420  s is empty, set 
-0000fdc0: 726f 7574 696e 6720 636f 6e66 6967 2074  routing config t
-0000fdd0: 6f20 4e6f 6e65 0a20 2020 2020 2020 2020  o None.         
-0000fde0: 2020 206e 6577 5f72 6f75 7469 6e67 5f63     new_routing_c
-0000fdf0: 6f6e 6669 6720 3d20 4e6f 6e65 0a20 2020  onfig = None.   
-0000fe00: 2020 2020 2020 2020 2069 6620 726f 7574           if rout
-0000fe10: 696e 675f 636f 6e66 6967 5f64 6963 7420  ing_config_dict 
-0000fe20: 3a3d 2072 6f75 7469 6e67 5f63 6f6e 6669  := routing_confi
-0000fe30: 672e 6765 7428 2241 6464 6974 696f 6e61  g.get("Additiona
-0000fe40: 6c56 6572 7369 6f6e 5765 6967 6874 7322  lVersionWeights"
-0000fe50: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
-0000fe60: 2020 206e 6577 5f72 6f75 7469 6e67 5f63     new_routing_c
-0000fe70: 6f6e 6669 6720 3d20 7365 6c66 2e5f 6372  onfig = self._cr
-0000fe80: 6561 7465 5f72 6f75 7469 6e67 5f63 6f6e  eate_routing_con
-0000fe90: 6669 675f 6d6f 6465 6c28 726f 7574 696e  fig_model(routin
-0000fea0: 675f 636f 6e66 6967 5f64 6963 7429 0a20  g_config_dict). 
-0000feb0: 2020 2020 2020 2020 2020 2063 6861 6e67             chang
-0000fec0: 6573 207c 3d20 7b22 726f 7574 696e 675f  es |= {"routing_
-0000fed0: 636f 6e66 6967 7572 6174 696f 6e22 3a20  configuration": 
-0000fee0: 6e65 775f 726f 7574 696e 675f 636f 6e66  new_routing_conf
-0000fef0: 6967 7d0a 2020 2020 2020 2020 2320 6576  ig}.        # ev
-0000ff00: 656e 2069 6620 6e6f 2063 6861 6e67 6573  en if no changes
-0000ff10: 2061 7265 2064 6f6e 652c 2077 6520 6861   are done, we ha
-0000ff20: 7665 2074 6f20 7570 6461 7465 2072 6576  ve to update rev
-0000ff30: 6973 696f 6e20 6964 2066 6f72 2073 6f6d  ision id for som
-0000ff40: 6520 7265 6173 6f6e 0a20 2020 2020 2020  e reason.       
-0000ff50: 206f 6c64 5f61 6c69 6173 203d 2061 6c69   old_alias = ali
-0000ff60: 6173 0a20 2020 2020 2020 2061 6c69 6173  as.        alias
-0000ff70: 203d 2064 6174 6163 6c61 7373 6573 2e72   = dataclasses.r
-0000ff80: 6570 6c61 6365 2861 6c69 6173 2c20 2a2a  eplace(alias, **
-0000ff90: 6368 616e 6765 7329 0a20 2020 2020 2020  changes).       
-0000ffa0: 2066 756e 6374 696f 6e2e 616c 6961 7365   function.aliase
-0000ffb0: 735b 6e61 6d65 5d20 3d20 616c 6961 730a  s[name] = alias.
-0000ffc0: 0a20 2020 2020 2020 2023 2054 4f44 4f3a  .        # TODO:
-0000ffd0: 2073 6967 6e61 6c20 6c61 6d62 6461 2073   signal lambda s
-0000ffe0: 6572 7669 6365 2074 6861 7420 706f 696e  ervice that poin
-0000fff0: 7465 7220 706f 7465 6e74 6961 6c6c 7920  ter potentially 
-00010000: 6368 616e 6765 640a 2020 2020 2020 2020  changed.        
-00010010: 7365 6c66 2e6c 616d 6264 615f 7365 7276  self.lambda_serv
-00010020: 6963 652e 7570 6461 7465 5f61 6c69 6173  ice.update_alias
-00010030: 286f 6c64 5f61 6c69 6173 3d6f 6c64 5f61  (old_alias=old_a
-00010040: 6c69 6173 2c20 6e65 775f 616c 6961 733d  lias, new_alias=
-00010050: 616c 6961 732c 2066 756e 6374 696f 6e3d  alias, function=
-00010060: 6675 6e63 7469 6f6e 290a 0a20 2020 2020  function)..     
-00010070: 2020 2072 6574 7572 6e20 6170 695f 7574     return api_ut
-00010080: 696c 732e 6d61 705f 616c 6961 735f 6f75  ils.map_alias_ou
-00010090: 7428 616c 6961 733d 616c 6961 732c 2066  t(alias=alias, f
-000100a0: 756e 6374 696f 6e3d 6675 6e63 7469 6f6e  unction=function
-000100b0: 290a 0a20 2020 2023 203d 3d3d 3d3d 3d3d  )..    # =======
-000100c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000100d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000100e0: 0a20 2020 2023 203d 3d3d 3d3d 3d3d 2045  .    # ======= E
-000100f0: 5645 4e54 2053 4f55 5243 4520 4d41 5050  VENT SOURCE MAPP
-00010100: 494e 4753 203d 3d3d 3d3d 3d3d 3d3d 0a20  INGS =========. 
-00010110: 2020 2023 203d 3d3d 3d3d 3d3d 3d3d 3d3d     # ===========
-00010120: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00010130: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 2020  ============..  
-00010140: 2020 4068 616e 646c 6572 2822 4372 6561    @handler("Crea
-00010150: 7465 4576 656e 7453 6f75 7263 654d 6170  teEventSourceMap
-00010160: 7069 6e67 222c 2065 7870 616e 643d 4661  ping", expand=Fa
-00010170: 6c73 6529 0a20 2020 2064 6566 2063 7265  lse).    def cre
-00010180: 6174 655f 6576 656e 745f 736f 7572 6365  ate_event_source
-00010190: 5f6d 6170 7069 6e67 280a 2020 2020 2020  _mapping(.      
-000101a0: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-000101b0: 636f 6e74 6578 743a 2052 6571 7565 7374  context: Request
-000101c0: 436f 6e74 6578 742c 0a20 2020 2020 2020  Context,.       
-000101d0: 2072 6571 7565 7374 3a20 4372 6561 7465   request: Create
-000101e0: 4576 656e 7453 6f75 7263 654d 6170 7069  EventSourceMappi
-000101f0: 6e67 5265 7175 6573 742c 0a20 2020 2029  ngRequest,.    )
-00010200: 202d 3e20 4576 656e 7453 6f75 7263 654d   -> EventSourceM
-00010210: 6170 7069 6e67 436f 6e66 6967 7572 6174  appingConfigurat
-00010220: 696f 6e3a 0a20 2020 2020 2020 2069 6620  ion:.        if 
-00010230: 2245 7665 6e74 536f 7572 6365 4172 6e22  "EventSourceArn"
-00010240: 206e 6f74 2069 6e20 7265 7175 6573 743a   not in request:
-00010250: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00010260: 7365 2049 6e76 616c 6964 5061 7261 6d65  se InvalidParame
-00010270: 7465 7256 616c 7565 4578 6365 7074 696f  terValueExceptio
-00010280: 6e28 2255 6e72 6563 6f67 6e69 7a65 6420  n("Unrecognized 
-00010290: 6576 656e 7420 736f 7572 6365 2e22 2c20  event source.", 
-000102a0: 5479 7065 3d22 5573 6572 2229 0a0a 2020  Type="User")..  
-000102b0: 2020 2020 2020 7365 7276 6963 6520 3d20        service = 
-000102c0: 6578 7472 6163 745f 7365 7276 6963 655f  extract_service_
-000102d0: 6672 6f6d 5f61 726e 2872 6571 7565 7374  from_arn(request
-000102e0: 2e67 6574 2822 4576 656e 7453 6f75 7263  .get("EventSourc
-000102f0: 6541 726e 2229 290a 2020 2020 2020 2020  eArn")).        
-00010300: 6966 2073 6572 7669 6365 2069 6e20 5b22  if service in ["
-00010310: 6479 6e61 6d6f 6462 222c 2022 6b69 6e65  dynamodb", "kine
-00010320: 7369 7322 2c20 226b 6166 6b61 225d 2061  sis", "kafka"] a
-00010330: 6e64 2022 5374 6172 7469 6e67 506f 7369  nd "StartingPosi
-00010340: 7469 6f6e 2220 6e6f 7420 696e 2072 6571  tion" not in req
-00010350: 7565 7374 3a0a 2020 2020 2020 2020 2020  uest:.          
-00010360: 2020 7261 6973 6520 496e 7661 6c69 6450    raise InvalidP
-00010370: 6172 616d 6574 6572 5661 6c75 6545 7863  arameterValueExc
-00010380: 6570 7469 6f6e 280a 2020 2020 2020 2020  eption(.        
-00010390: 2020 2020 2020 2020 2231 2076 616c 6964          "1 valid
-000103a0: 6174 696f 6e20 6572 726f 7220 6465 7465  ation error dete
-000103b0: 6374 6564 3a20 5661 6c75 6520 6e75 6c6c  cted: Value null
-000103c0: 2061 7420 2773 7461 7274 696e 6750 6f73   at 'startingPos
-000103d0: 6974 696f 6e27 2066 6169 6c65 6420 746f  ition' failed to
-000103e0: 2073 6174 6973 6679 2063 6f6e 7374 7261   satisfy constra
-000103f0: 696e 743a 204d 656d 6265 7220 6d75 7374  int: Member must
-00010400: 206e 6f74 2062 6520 6e75 6c6c 2e22 2c0a   not be null.",.
-00010410: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010420: 5479 7065 3d22 5573 6572 222c 0a20 2020  Type="User",.   
-00010430: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
-00010440: 2020 2020 7374 6174 6520 3d20 6c61 6d62      state = lamb
-00010450: 6461 5f73 746f 7265 735b 636f 6e74 6578  da_stores[contex
-00010460: 742e 6163 636f 756e 745f 6964 5d5b 636f  t.account_id][co
-00010470: 6e74 6578 742e 7265 6769 6f6e 5d0a 2020  ntext.region].  
-00010480: 2020 2020 2020 6675 6e63 7469 6f6e 5f6e        function_n
-00010490: 616d 6520 3d20 7265 7175 6573 745b 2246  ame = request["F
-000104a0: 756e 6374 696f 6e4e 616d 6522 5d0a 0a20  unctionName"].. 
-000104b0: 2020 2020 2020 2069 6620 6170 695f 7574         if api_ut
-000104c0: 696c 732e 4655 4c4c 5f46 4e5f 4152 4e5f  ils.FULL_FN_ARN_
-000104d0: 5041 5454 4552 4e2e 6d61 7463 6828 6675  PATTERN.match(fu
-000104e0: 6e63 7469 6f6e 5f6e 616d 6529 3a0a 2020  nction_name):.  
-000104f0: 2020 2020 2020 2020 2020 666e 5f61 726e            fn_arn
-00010500: 203d 2066 756e 6374 696f 6e5f 6e61 6d65   = function_name
-00010510: 0a20 2020 2020 2020 2020 2020 2066 756e  .            fun
-00010520: 6374 696f 6e5f 6e61 6d65 203d 2061 7069  ction_name = api
-00010530: 5f75 7469 6c73 2e67 6574 5f66 756e 6374  _utils.get_funct
-00010540: 696f 6e5f 6e61 6d65 2866 756e 6374 696f  ion_name(functio
-00010550: 6e5f 6e61 6d65 2c20 636f 6e74 6578 742e  n_name, context.
-00010560: 7265 6769 6f6e 290a 2020 2020 2020 2020  region).        
-00010570: 656c 7365 3a0a 2020 2020 2020 2020 2020  else:.          
-00010580: 2020 666e 5f61 726e 203d 2061 7069 5f75    fn_arn = api_u
-00010590: 7469 6c73 2e75 6e71 7561 6c69 6669 6564  tils.unqualified
-000105a0: 5f6c 616d 6264 615f 6172 6e28 0a20 2020  _lambda_arn(.   
-000105b0: 2020 2020 2020 2020 2020 2020 2066 756e               fun
-000105c0: 6374 696f 6e5f 6e61 6d65 2c20 636f 6e74  ction_name, cont
-000105d0: 6578 742e 6163 636f 756e 745f 6964 2c20  ext.account_id, 
-000105e0: 636f 6e74 6578 742e 7265 6769 6f6e 0a20  context.region. 
-000105f0: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-00010600: 2020 2020 2020 666e 203d 2073 7461 7465        fn = state
-00010610: 2e66 756e 6374 696f 6e73 2e67 6574 2866  .functions.get(f
-00010620: 756e 6374 696f 6e5f 6e61 6d65 290a 2020  unction_name).  
-00010630: 2020 2020 2020 6966 206e 6f74 2066 6e3a        if not fn:
-00010640: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00010650: 7365 2049 6e76 616c 6964 5061 7261 6d65  se InvalidParame
-00010660: 7465 7256 616c 7565 4578 6365 7074 696f  terValueExceptio
-00010670: 6e28 2246 756e 6374 696f 6e20 646f 6573  n("Function does
-00010680: 206e 6f74 2065 7869 7374 222c 2054 7970   not exist", Typ
-00010690: 653d 2255 7365 7222 290a 0a20 2020 2020  e="User")..     
-000106a0: 2020 2023 2054 4f44 4f3a 2063 6865 636b     # TODO: check
-000106b0: 2069 6620 616c 6961 732f 7665 7273 696f   if alias/versio
-000106c0: 6e20 6578 6973 7473 0a0a 2020 2020 2020  n exists..      
-000106d0: 2020 6e65 775f 7575 6964 203d 206c 6f6e    new_uuid = lon
-000106e0: 675f 7569 6428 290a 0a20 2020 2020 2020  g_uid()..       
-000106f0: 2023 2064 6566 6175 6c74 7320 6574 632e   # defaults etc.
-00010700: 2076 6172 7920 6465 7065 6e64 696e 6720   vary depending 
-00010710: 6f6e 2074 7970 6520 6f66 2065 7665 6e74  on type of event
-00010720: 2073 6f75 7263 650a 2020 2020 2020 2020   source.        
-00010730: 2320 544f 444f 3a20 6669 6e64 2061 2062  # TODO: find a b
-00010740: 6574 7465 7220 6162 7374 7261 6374 696f  etter abstractio
-00010750: 6e20 746f 2063 7265 6174 6520 7468 6573  n to create thes
-00010760: 650a 2020 2020 2020 2020 7061 7261 6d73  e.        params
-00010770: 203d 2072 6571 7565 7374 2e63 6f70 7928   = request.copy(
-00010780: 290a 2020 2020 2020 2020 7061 7261 6d73  ).        params
-00010790: 2e70 6f70 2822 4675 6e63 7469 6f6e 4e61  .pop("FunctionNa
-000107a0: 6d65 2229 0a20 2020 2020 2020 2062 6174  me").        bat
-000107b0: 6368 5f73 697a 6520 3d20 6170 695f 7574  ch_size = api_ut
-000107c0: 696c 732e 7661 6c69 6461 7465 5f61 6e64  ils.validate_and
-000107d0: 5f73 6574 5f62 6174 6368 5f73 697a 6528  _set_batch_size(
-000107e0: 0a20 2020 2020 2020 2020 2020 2072 6571  .            req
-000107f0: 7565 7374 5b22 4576 656e 7453 6f75 7263  uest["EventSourc
-00010800: 6541 726e 225d 2c20 7265 7175 6573 742e  eArn"], request.
-00010810: 6765 7428 2242 6174 6368 5369 7a65 2229  get("BatchSize")
-00010820: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-00010830: 2020 2070 6172 616d 735b 2246 756e 6374     params["Funct
-00010840: 696f 6e41 726e 225d 203d 2066 6e5f 6172  ionArn"] = fn_ar
-00010850: 6e0a 2020 2020 2020 2020 7061 7261 6d73  n.        params
-00010860: 5b22 4261 7463 6853 697a 6522 5d20 3d20  ["BatchSize"] = 
-00010870: 6261 7463 685f 7369 7a65 0a20 2020 2020  batch_size.     
-00010880: 2020 2070 6172 616d 735b 2255 5549 4422     params["UUID"
-00010890: 5d20 3d20 6e65 775f 7575 6964 0a20 2020  ] = new_uuid.   
-000108a0: 2020 2020 2070 6172 616d 735b 224d 6178       params["Max
-000108b0: 696d 756d 4261 7463 6869 6e67 5769 6e64  imumBatchingWind
-000108c0: 6f77 496e 5365 636f 6e64 7322 5d20 3d20  owInSeconds"] = 
-000108d0: 7265 7175 6573 742e 6765 7428 224d 6178  request.get("Max
-000108e0: 696d 756d 4261 7463 6869 6e67 5769 6e64  imumBatchingWind
-000108f0: 6f77 496e 5365 636f 6e64 7322 2c20 3029  owInSeconds", 0)
-00010900: 0a20 2020 2020 2020 2070 6172 616d 735b  .        params[
-00010910: 224c 6173 744d 6f64 6966 6965 6422 5d20  "LastModified"] 
-00010920: 3d20 6170 695f 7574 696c 732e 6765 6e65  = api_utils.gene
-00010930: 7261 7465 5f6c 616d 6264 615f 6461 7465  rate_lambda_date
-00010940: 2829 0a20 2020 2020 2020 2070 6172 616d  ().        param
-00010950: 735b 2246 756e 6374 696f 6e52 6573 706f  s["FunctionRespo
-00010960: 6e73 6554 7970 6573 225d 203d 2072 6571  nseTypes"] = req
-00010970: 7565 7374 2e67 6574 2822 4675 6e63 7469  uest.get("Functi
-00010980: 6f6e 5265 7370 6f6e 7365 5479 7065 7322  onResponseTypes"
-00010990: 2c20 5b5d 290a 2020 2020 2020 2020 7061  , []).        pa
-000109a0: 7261 6d73 5b22 5374 6174 6522 5d20 3d20  rams["State"] = 
-000109b0: 2245 6e61 626c 6564 220a 0a20 2020 2020  "Enabled"..     
-000109c0: 2020 2069 6620 2273 7173 2220 696e 2072     if "sqs" in r
-000109d0: 6571 7565 7374 5b22 4576 656e 7453 6f75  equest["EventSou
-000109e0: 7263 6541 726e 225d 3a0a 2020 2020 2020  rceArn"]:.      
-000109f0: 2020 2020 2020 7061 7261 6d73 5b22 5374        params["St
-00010a00: 6174 6554 7261 6e73 6974 696f 6e52 6561  ateTransitionRea
-00010a10: 736f 6e22 5d20 3d20 2255 5345 525f 494e  son"] = "USER_IN
-00010a20: 4954 4941 5445 4422 0a20 2020 2020 2020  ITIATED".       
-00010a30: 2020 2020 2069 6620 6261 7463 685f 7369       if batch_si
-00010a40: 7a65 203e 2031 3020 616e 6420 7265 7175  ze > 10 and requ
-00010a50: 6573 742e 6765 7428 224d 6178 696d 756d  est.get("Maximum
-00010a60: 4261 7463 6869 6e67 5769 6e64 6f77 496e  BatchingWindowIn
-00010a70: 5365 636f 6e64 7322 2c20 3029 203d 3d20  Seconds", 0) == 
-00010a80: 303a 0a20 2020 2020 2020 2020 2020 2020  0:.             
-00010a90: 2020 2072 6169 7365 2049 6e76 616c 6964     raise Invalid
-00010aa0: 5061 7261 6d65 7465 7256 616c 7565 4578  ParameterValueEx
-00010ab0: 6365 7074 696f 6e28 0a20 2020 2020 2020  ception(.       
-00010ac0: 2020 2020 2020 2020 2020 2020 2022 4d61               "Ma
-00010ad0: 7869 6d75 6d20 6261 7463 6820 7769 6e64  ximum batch wind
-00010ae0: 6f77 2069 6e20 7365 636f 6e64 7320 6d75  ow in seconds mu
-00010af0: 7374 2062 6520 6772 6561 7465 7220 7468  st be greater th
-00010b00: 616e 2030 2069 6620 6d61 7869 6d75 6d20  an 0 if maximum 
-00010b10: 6261 7463 6820 7369 7a65 2069 7320 6772  batch size is gr
-00010b20: 6561 7465 7220 7468 616e 2031 3022 2c0a  eater than 10",.
-00010b30: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00010b40: 2020 2020 5479 7065 3d22 5573 6572 222c      Type="User",
-00010b50: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00010b60: 2029 0a20 2020 2020 2020 2065 6c73 653a   ).        else:
-00010b70: 0a20 2020 2020 2020 2020 2020 2023 2061  .            # a
-00010b80: 6661 696b 2065 7665 7279 206f 7468 6572  faik every other
-00010b90: 206f 6e65 2063 7572 7265 6e74 6c79 2069   one currently i
-00010ba0: 7320 6120 7374 7265 616d 0a20 2020 2020  s a stream.     
-00010bb0: 2020 2020 2020 2070 6172 616d 735b 2253         params["S
-00010bc0: 7461 7465 5472 616e 7369 7469 6f6e 5265  tateTransitionRe
-00010bd0: 6173 6f6e 225d 203d 2022 5573 6572 2061  ason"] = "User a
-00010be0: 6374 696f 6e22 0a20 2020 2020 2020 2020  ction".         
-00010bf0: 2020 2070 6172 616d 735b 224d 6178 696d     params["Maxim
-00010c00: 756d 5265 7472 7941 7474 656d 7074 7322  umRetryAttempts"
-00010c10: 5d20 3d20 7265 7175 6573 742e 6765 7428  ] = request.get(
-00010c20: 224d 6178 696d 756d 5265 7472 7941 7474  "MaximumRetryAtt
-00010c30: 656d 7074 7322 2c20 2d31 290a 2020 2020  empts", -1).    
-00010c40: 2020 2020 2020 2020 7061 7261 6d73 5b22          params["
-00010c50: 5061 7261 6c6c 656c 697a 6174 696f 6e46  ParallelizationF
-00010c60: 6163 746f 7222 5d20 3d20 7265 7175 6573  actor"] = reques
-00010c70: 742e 6765 7428 2250 6172 616c 6c65 6c69  t.get("Paralleli
-00010c80: 7a61 7469 6f6e 4661 6374 6f72 222c 2031  zationFactor", 1
-00010c90: 290a 2020 2020 2020 2020 2020 2020 7061  ).            pa
-00010ca0: 7261 6d73 5b22 4269 7365 6374 4261 7463  rams["BisectBatc
-00010cb0: 684f 6e46 756e 6374 696f 6e45 7272 6f72  hOnFunctionError
-00010cc0: 225d 203d 2072 6571 7565 7374 2e67 6574  "] = request.get
-00010cd0: 2822 4269 7365 6374 4261 7463 684f 6e46  ("BisectBatchOnF
-00010ce0: 756e 6374 696f 6e45 7272 6f72 222c 2046  unctionError", F
-00010cf0: 616c 7365 290a 2020 2020 2020 2020 2020  alse).          
-00010d00: 2020 7061 7261 6d73 5b22 4c61 7374 5072    params["LastPr
-00010d10: 6f63 6573 7369 6e67 5265 7375 6c74 225d  ocessingResult"]
-00010d20: 203d 2022 4e6f 2072 6563 6f72 6473 2070   = "No records p
-00010d30: 726f 6365 7373 6564 220a 2020 2020 2020  rocessed".      
-00010d40: 2020 2020 2020 7061 7261 6d73 5b22 4d61        params["Ma
-00010d50: 7869 6d75 6d52 6563 6f72 6441 6765 496e  ximumRecordAgeIn
-00010d60: 5365 636f 6e64 7322 5d20 3d20 7265 7175  Seconds"] = requ
-00010d70: 6573 742e 6765 7428 224d 6178 696d 756d  est.get("Maximum
+0000f6b0: 203d 2073 656c 662e 5f67 6574 5f66 756e   = self._get_fun
+0000f6c0: 6374 696f 6e28 0a20 2020 2020 2020 2020  ction(.         
+0000f6d0: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
+0000f6e0: 3d66 756e 6374 696f 6e5f 6e61 6d65 2c20  =function_name, 
+0000f6f0: 7265 6769 6f6e 3d63 6f6e 7465 7874 2e72  region=context.r
+0000f700: 6567 696f 6e2c 2061 6363 6f75 6e74 5f69  egion, account_i
+0000f710: 643d 636f 6e74 6578 742e 6163 636f 756e  d=context.accoun
+0000f720: 745f 6964 0a20 2020 2020 2020 2029 0a20  t_id.        ). 
+0000f730: 2020 2020 2020 2069 6620 6e6f 7420 2861         if not (a
+0000f740: 6c69 6173 203a 3d20 6675 6e63 7469 6f6e  lias := function
+0000f750: 2e61 6c69 6173 6573 2e67 6574 286e 616d  .aliases.get(nam
+0000f760: 6529 293a 0a20 2020 2020 2020 2020 2020  e)):.           
+0000f770: 2072 6169 7365 2052 6573 6f75 7263 654e   raise ResourceN
+0000f780: 6f74 466f 756e 6445 7863 6570 7469 6f6e  otFoundException
+0000f790: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0000f7a0: 2020 6622 4361 6e6e 6f74 2066 696e 6420    f"Cannot find 
+0000f7b0: 616c 6961 7320 6172 6e3a 207b 6170 695f  alias arn: {api_
+0000f7c0: 7574 696c 732e 7175 616c 6966 6965 645f  utils.qualified_
+0000f7d0: 6c61 6d62 6461 5f61 726e 2866 756e 6374  lambda_arn(funct
+0000f7e0: 696f 6e5f 6e61 6d65 3d66 756e 6374 696f  ion_name=functio
+0000f7f0: 6e5f 6e61 6d65 2c20 7175 616c 6966 6965  n_name, qualifie
+0000f800: 723d 6e61 6d65 2c20 7265 6769 6f6e 3d63  r=name, region=c
+0000f810: 6f6e 7465 7874 2e72 6567 696f 6e2c 2061  ontext.region, a
+0000f820: 6363 6f75 6e74 3d63 6f6e 7465 7874 2e61  ccount=context.a
+0000f830: 6363 6f75 6e74 5f69 6429 7d22 2c0a 2020  ccount_id)}",.  
+0000f840: 2020 2020 2020 2020 2020 2020 2020 5479                Ty
+0000f850: 7065 3d22 5573 6572 222c 0a20 2020 2020  pe="User",.     
+0000f860: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0000f870: 2072 6574 7572 6e20 6170 695f 7574 696c   return api_util
+0000f880: 732e 6d61 705f 616c 6961 735f 6f75 7428  s.map_alias_out(
+0000f890: 616c 6961 733d 616c 6961 732c 2066 756e  alias=alias, fun
+0000f8a0: 6374 696f 6e3d 6675 6e63 7469 6f6e 290a  ction=function).
+0000f8b0: 0a20 2020 2064 6566 2075 7064 6174 655f  .    def update_
+0000f8c0: 616c 6961 7328 0a20 2020 2020 2020 2073  alias(.        s
+0000f8d0: 656c 662c 0a20 2020 2020 2020 2063 6f6e  elf,.        con
+0000f8e0: 7465 7874 3a20 5265 7175 6573 7443 6f6e  text: RequestCon
+0000f8f0: 7465 7874 2c0a 2020 2020 2020 2020 6675  text,.        fu
+0000f900: 6e63 7469 6f6e 5f6e 616d 653a 2046 756e  nction_name: Fun
+0000f910: 6374 696f 6e4e 616d 652c 0a20 2020 2020  ctionName,.     
+0000f920: 2020 206e 616d 653a 2041 6c69 6173 2c0a     name: Alias,.
+0000f930: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
+0000f940: 5f76 6572 7369 6f6e 3a20 5665 7273 696f  _version: Versio
+0000f950: 6e20 3d20 4e6f 6e65 2c0a 2020 2020 2020  n = None,.      
+0000f960: 2020 6465 7363 7269 7074 696f 6e3a 2044    description: D
+0000f970: 6573 6372 6970 7469 6f6e 203d 204e 6f6e  escription = Non
+0000f980: 652c 0a20 2020 2020 2020 2072 6f75 7469  e,.        routi
+0000f990: 6e67 5f63 6f6e 6669 673a 2041 6c69 6173  ng_config: Alias
+0000f9a0: 526f 7574 696e 6743 6f6e 6669 6775 7261  RoutingConfigura
+0000f9b0: 7469 6f6e 203d 204e 6f6e 652c 0a20 2020  tion = None,.   
+0000f9c0: 2020 2020 2072 6576 6973 696f 6e5f 6964       revision_id
+0000f9d0: 3a20 5374 7269 6e67 203d 204e 6f6e 652c  : String = None,
+0000f9e0: 0a20 2020 2029 202d 3e20 416c 6961 7343  .    ) -> AliasC
+0000f9f0: 6f6e 6669 6775 7261 7469 6f6e 3a0a 2020  onfiguration:.  
+0000fa00: 2020 2020 2020 6675 6e63 7469 6f6e 5f6e        function_n
+0000fa10: 616d 6520 3d20 6170 695f 7574 696c 732e  ame = api_utils.
+0000fa20: 6765 745f 6675 6e63 7469 6f6e 5f6e 616d  get_function_nam
+0000fa30: 6528 6675 6e63 7469 6f6e 5f6e 616d 652c  e(function_name,
+0000fa40: 2063 6f6e 7465 7874 2e72 6567 696f 6e29   context.region)
+0000fa50: 0a20 2020 2020 2020 2066 756e 6374 696f  .        functio
+0000fa60: 6e20 3d20 7365 6c66 2e5f 6765 745f 6675  n = self._get_fu
+0000fa70: 6e63 7469 6f6e 280a 2020 2020 2020 2020  nction(.        
+0000fa80: 2020 2020 6675 6e63 7469 6f6e 5f6e 616d      function_nam
+0000fa90: 653d 6675 6e63 7469 6f6e 5f6e 616d 652c  e=function_name,
+0000faa0: 2072 6567 696f 6e3d 636f 6e74 6578 742e   region=context.
+0000fab0: 7265 6769 6f6e 2c20 6163 636f 756e 745f  region, account_
+0000fac0: 6964 3d63 6f6e 7465 7874 2e61 6363 6f75  id=context.accou
+0000fad0: 6e74 5f69 640a 2020 2020 2020 2020 290a  nt_id.        ).
+0000fae0: 2020 2020 2020 2020 6966 206e 6f74 2028          if not (
+0000faf0: 616c 6961 7320 3a3d 2066 756e 6374 696f  alias := functio
+0000fb00: 6e2e 616c 6961 7365 732e 6765 7428 6e61  n.aliases.get(na
+0000fb10: 6d65 2929 3a0a 2020 2020 2020 2020 2020  me)):.          
+0000fb20: 2020 7261 6973 6520 5661 6c75 6545 7272    raise ValueErr
+0000fb30: 6f72 2822 416c 6961 7320 6e6f 7420 666f  or("Alias not fo
+0000fb40: 756e 6422 2920 2023 2054 4f44 4f20 7072  und")  # TODO pr
+0000fb50: 6f70 6572 2065 7863 6570 7469 6f6e 0a20  oper exception. 
+0000fb60: 2020 2020 2020 2069 6620 7265 7669 7369         if revisi
+0000fb70: 6f6e 5f69 6420 616e 6420 616c 6961 732e  on_id and alias.
+0000fb80: 7265 7669 7369 6f6e 5f69 6420 213d 2072  revision_id != r
+0000fb90: 6576 6973 696f 6e5f 6964 3a0a 2020 2020  evision_id:.    
+0000fba0: 2020 2020 2020 2020 7261 6973 6520 5072          raise Pr
+0000fbb0: 6563 6f6e 6469 7469 6f6e 4661 696c 6564  econditionFailed
+0000fbc0: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
+0000fbd0: 2020 2020 2020 2020 2020 2022 5468 6520             "The 
+0000fbe0: 5265 7669 7369 6f6e 2049 6420 7072 6f76  Revision Id prov
+0000fbf0: 6964 6564 2064 6f65 7320 6e6f 7420 6d61  ided does not ma
+0000fc00: 7463 6820 7468 6520 6c61 7465 7374 2052  tch the latest R
+0000fc10: 6576 6973 696f 6e20 4964 2e20 220a 2020  evision Id. ".  
+0000fc20: 2020 2020 2020 2020 2020 2020 2020 2243                "C
+0000fc30: 616c 6c20 7468 6520 4765 7446 756e 6374  all the GetFunct
+0000fc40: 696f 6e2f 4765 7441 6c69 6173 2041 5049  ion/GetAlias API
+0000fc50: 2074 6f20 7265 7472 6965 7665 2074 6865   to retrieve the
+0000fc60: 206c 6174 6573 7420 5265 7669 7369 6f6e   latest Revision
+0000fc70: 2049 6422 2c0a 2020 2020 2020 2020 2020   Id",.          
+0000fc80: 2020 2020 2020 5479 7065 3d22 5573 6572        Type="User
+0000fc90: 222c 0a20 2020 2020 2020 2020 2020 2029  ",.            )
+0000fca0: 0a20 2020 2020 2020 2063 6861 6e67 6573  .        changes
+0000fcb0: 203d 207b 7d0a 2020 2020 2020 2020 6966   = {}.        if
+0000fcc0: 2066 756e 6374 696f 6e5f 7665 7273 696f   function_versio
+0000fcd0: 6e20 6973 206e 6f74 204e 6f6e 653a 0a20  n is not None:. 
+0000fce0: 2020 2020 2020 2020 2020 2063 6861 6e67             chang
+0000fcf0: 6573 207c 3d20 7b22 6675 6e63 7469 6f6e  es |= {"function
+0000fd00: 5f76 6572 7369 6f6e 223a 2066 756e 6374  _version": funct
+0000fd10: 696f 6e5f 7665 7273 696f 6e7d 0a20 2020  ion_version}.   
+0000fd20: 2020 2020 2069 6620 6465 7363 7269 7074       if descript
+0000fd30: 696f 6e20 6973 206e 6f74 204e 6f6e 653a  ion is not None:
+0000fd40: 0a20 2020 2020 2020 2020 2020 2063 6861  .            cha
+0000fd50: 6e67 6573 207c 3d20 7b22 6465 7363 7269  nges |= {"descri
+0000fd60: 7074 696f 6e22 3a20 6465 7363 7269 7074  ption": descript
+0000fd70: 696f 6e7d 0a20 2020 2020 2020 2069 6620  ion}.        if 
+0000fd80: 726f 7574 696e 675f 636f 6e66 6967 2069  routing_config i
+0000fd90: 7320 6e6f 7420 4e6f 6e65 3a0a 2020 2020  s not None:.    
+0000fda0: 2020 2020 2020 2020 2320 6966 2069 7420          # if it 
+0000fdb0: 6973 2061 6e20 656d 7074 7920 6469 6374  is an empty dict
+0000fdc0: 206f 7220 4164 6469 7469 6f6e 616c 5665   or AdditionalVe
+0000fdd0: 7273 696f 6e57 6569 6768 7473 2069 7320  rsionWeights is 
+0000fde0: 656d 7074 792c 2073 6574 2072 6f75 7469  empty, set routi
+0000fdf0: 6e67 2063 6f6e 6669 6720 746f 204e 6f6e  ng config to Non
+0000fe00: 650a 2020 2020 2020 2020 2020 2020 6e65  e.            ne
+0000fe10: 775f 726f 7574 696e 675f 636f 6e66 6967  w_routing_config
+0000fe20: 203d 204e 6f6e 650a 2020 2020 2020 2020   = None.        
+0000fe30: 2020 2020 6966 2072 6f75 7469 6e67 5f63      if routing_c
+0000fe40: 6f6e 6669 675f 6469 6374 203a 3d20 726f  onfig_dict := ro
+0000fe50: 7574 696e 675f 636f 6e66 6967 2e67 6574  uting_config.get
+0000fe60: 2822 4164 6469 7469 6f6e 616c 5665 7273  ("AdditionalVers
+0000fe70: 696f 6e57 6569 6768 7473 2229 3a0a 2020  ionWeights"):.  
+0000fe80: 2020 2020 2020 2020 2020 2020 2020 6e65                ne
+0000fe90: 775f 726f 7574 696e 675f 636f 6e66 6967  w_routing_config
+0000fea0: 203d 2073 656c 662e 5f63 7265 6174 655f   = self._create_
+0000feb0: 726f 7574 696e 675f 636f 6e66 6967 5f6d  routing_config_m
+0000fec0: 6f64 656c 2872 6f75 7469 6e67 5f63 6f6e  odel(routing_con
+0000fed0: 6669 675f 6469 6374 290a 2020 2020 2020  fig_dict).      
+0000fee0: 2020 2020 2020 6368 616e 6765 7320 7c3d        changes |=
+0000fef0: 207b 2272 6f75 7469 6e67 5f63 6f6e 6669   {"routing_confi
+0000ff00: 6775 7261 7469 6f6e 223a 206e 6577 5f72  guration": new_r
+0000ff10: 6f75 7469 6e67 5f63 6f6e 6669 677d 0a20  outing_config}. 
+0000ff20: 2020 2020 2020 2023 2065 7665 6e20 6966         # even if
+0000ff30: 206e 6f20 6368 616e 6765 7320 6172 6520   no changes are 
+0000ff40: 646f 6e65 2c20 7765 2068 6176 6520 746f  done, we have to
+0000ff50: 2075 7064 6174 6520 7265 7669 7369 6f6e   update revision
+0000ff60: 2069 6420 666f 7220 736f 6d65 2072 6561   id for some rea
+0000ff70: 736f 6e0a 2020 2020 2020 2020 6f6c 645f  son.        old_
+0000ff80: 616c 6961 7320 3d20 616c 6961 730a 2020  alias = alias.  
+0000ff90: 2020 2020 2020 616c 6961 7320 3d20 6461        alias = da
+0000ffa0: 7461 636c 6173 7365 732e 7265 706c 6163  taclasses.replac
+0000ffb0: 6528 616c 6961 732c 202a 2a63 6861 6e67  e(alias, **chang
+0000ffc0: 6573 290a 2020 2020 2020 2020 6675 6e63  es).        func
+0000ffd0: 7469 6f6e 2e61 6c69 6173 6573 5b6e 616d  tion.aliases[nam
+0000ffe0: 655d 203d 2061 6c69 6173 0a0a 2020 2020  e] = alias..    
+0000fff0: 2020 2020 2320 544f 444f 3a20 7369 676e      # TODO: sign
+00010000: 616c 206c 616d 6264 6120 7365 7276 6963  al lambda servic
+00010010: 6520 7468 6174 2070 6f69 6e74 6572 2070  e that pointer p
+00010020: 6f74 656e 7469 616c 6c79 2063 6861 6e67  otentially chang
+00010030: 6564 0a20 2020 2020 2020 2073 656c 662e  ed.        self.
+00010040: 6c61 6d62 6461 5f73 6572 7669 6365 2e75  lambda_service.u
+00010050: 7064 6174 655f 616c 6961 7328 6f6c 645f  pdate_alias(old_
+00010060: 616c 6961 733d 6f6c 645f 616c 6961 732c  alias=old_alias,
+00010070: 206e 6577 5f61 6c69 6173 3d61 6c69 6173   new_alias=alias
+00010080: 2c20 6675 6e63 7469 6f6e 3d66 756e 6374  , function=funct
+00010090: 696f 6e29 0a0a 2020 2020 2020 2020 7265  ion)..        re
+000100a0: 7475 726e 2061 7069 5f75 7469 6c73 2e6d  turn api_utils.m
+000100b0: 6170 5f61 6c69 6173 5f6f 7574 2861 6c69  ap_alias_out(ali
+000100c0: 6173 3d61 6c69 6173 2c20 6675 6e63 7469  as=alias, functi
+000100d0: 6f6e 3d66 756e 6374 696f 6e29 0a0a 2020  on=function)..  
+000100e0: 2020 2320 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d    # ============
+000100f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00010100: 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 2020 2020  ===========.    
+00010110: 2320 3d3d 3d3d 3d3d 3d20 4556 454e 5420  # ======= EVENT 
+00010120: 534f 5552 4345 204d 4150 5049 4e47 5320  SOURCE MAPPINGS 
+00010130: 3d3d 3d3d 3d3d 3d3d 3d0a 2020 2020 2320  =========.    # 
+00010140: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00010150: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00010160: 3d3d 3d3d 3d3d 3d0a 0a20 2020 2040 6861  =======..    @ha
+00010170: 6e64 6c65 7228 2243 7265 6174 6545 7665  ndler("CreateEve
+00010180: 6e74 536f 7572 6365 4d61 7070 696e 6722  ntSourceMapping"
+00010190: 2c20 6578 7061 6e64 3d46 616c 7365 290a  , expand=False).
+000101a0: 2020 2020 6465 6620 6372 6561 7465 5f65      def create_e
+000101b0: 7665 6e74 5f73 6f75 7263 655f 6d61 7070  vent_source_mapp
+000101c0: 696e 6728 0a20 2020 2020 2020 2073 656c  ing(.        sel
+000101d0: 662c 0a20 2020 2020 2020 2063 6f6e 7465  f,.        conte
+000101e0: 7874 3a20 5265 7175 6573 7443 6f6e 7465  xt: RequestConte
+000101f0: 7874 2c0a 2020 2020 2020 2020 7265 7175  xt,.        requ
+00010200: 6573 743a 2043 7265 6174 6545 7665 6e74  est: CreateEvent
+00010210: 536f 7572 6365 4d61 7070 696e 6752 6571  SourceMappingReq
+00010220: 7565 7374 2c0a 2020 2020 2920 2d3e 2045  uest,.    ) -> E
+00010230: 7665 6e74 536f 7572 6365 4d61 7070 696e  ventSourceMappin
+00010240: 6743 6f6e 6669 6775 7261 7469 6f6e 3a0a  gConfiguration:.
+00010250: 2020 2020 2020 2020 6966 2022 4576 656e          if "Even
+00010260: 7453 6f75 7263 6541 726e 2220 6e6f 7420  tSourceArn" not 
+00010270: 696e 2072 6571 7565 7374 3a0a 2020 2020  in request:.    
+00010280: 2020 2020 2020 2020 7261 6973 6520 496e          raise In
+00010290: 7661 6c69 6450 6172 616d 6574 6572 5661  validParameterVa
+000102a0: 6c75 6545 7863 6570 7469 6f6e 2822 556e  lueException("Un
+000102b0: 7265 636f 676e 697a 6564 2065 7665 6e74  recognized event
+000102c0: 2073 6f75 7263 652e 222c 2054 7970 653d   source.", Type=
+000102d0: 2255 7365 7222 290a 0a20 2020 2020 2020  "User")..       
+000102e0: 2073 6572 7669 6365 203d 2065 7874 7261   service = extra
+000102f0: 6374 5f73 6572 7669 6365 5f66 726f 6d5f  ct_service_from_
+00010300: 6172 6e28 7265 7175 6573 742e 6765 7428  arn(request.get(
+00010310: 2245 7665 6e74 536f 7572 6365 4172 6e22  "EventSourceArn"
+00010320: 2929 0a20 2020 2020 2020 2069 6620 7365  )).        if se
+00010330: 7276 6963 6520 696e 205b 2264 796e 616d  rvice in ["dynam
+00010340: 6f64 6222 2c20 226b 696e 6573 6973 222c  odb", "kinesis",
+00010350: 2022 6b61 666b 6122 5d20 616e 6420 2253   "kafka"] and "S
+00010360: 7461 7274 696e 6750 6f73 6974 696f 6e22  tartingPosition"
+00010370: 206e 6f74 2069 6e20 7265 7175 6573 743a   not in request:
+00010380: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00010390: 7365 2049 6e76 616c 6964 5061 7261 6d65  se InvalidParame
+000103a0: 7465 7256 616c 7565 4578 6365 7074 696f  terValueExceptio
+000103b0: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+000103c0: 2020 2022 3120 7661 6c69 6461 7469 6f6e     "1 validation
+000103d0: 2065 7272 6f72 2064 6574 6563 7465 643a   error detected:
+000103e0: 2056 616c 7565 206e 756c 6c20 6174 2027   Value null at '
+000103f0: 7374 6172 7469 6e67 506f 7369 7469 6f6e  startingPosition
+00010400: 2720 6661 696c 6564 2074 6f20 7361 7469  ' failed to sati
+00010410: 7366 7920 636f 6e73 7472 6169 6e74 3a20  sfy constraint: 
+00010420: 4d65 6d62 6572 206d 7573 7420 6e6f 7420  Member must not 
+00010430: 6265 206e 756c 6c2e 222c 0a20 2020 2020  be null.",.     
+00010440: 2020 2020 2020 2020 2020 2054 7970 653d             Type=
+00010450: 2255 7365 7222 2c0a 2020 2020 2020 2020  "User",.        
+00010460: 2020 2020 290a 0a20 2020 2020 2020 2073      )..        s
+00010470: 7461 7465 203d 206c 616d 6264 615f 7374  tate = lambda_st
+00010480: 6f72 6573 5b63 6f6e 7465 7874 2e61 6363  ores[context.acc
+00010490: 6f75 6e74 5f69 645d 5b63 6f6e 7465 7874  ount_id][context
+000104a0: 2e72 6567 696f 6e5d 0a20 2020 2020 2020  .region].       
+000104b0: 2066 756e 6374 696f 6e5f 6e61 6d65 203d   function_name =
+000104c0: 2072 6571 7565 7374 5b22 4675 6e63 7469   request["Functi
+000104d0: 6f6e 4e61 6d65 225d 0a0a 2020 2020 2020  onName"]..      
+000104e0: 2020 6966 2061 7069 5f75 7469 6c73 2e46    if api_utils.F
+000104f0: 554c 4c5f 464e 5f41 524e 5f50 4154 5445  ULL_FN_ARN_PATTE
+00010500: 524e 2e6d 6174 6368 2866 756e 6374 696f  RN.match(functio
+00010510: 6e5f 6e61 6d65 293a 0a20 2020 2020 2020  n_name):.       
+00010520: 2020 2020 2066 6e5f 6172 6e20 3d20 6675       fn_arn = fu
+00010530: 6e63 7469 6f6e 5f6e 616d 650a 2020 2020  nction_name.    
+00010540: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
+00010550: 5f6e 616d 6520 3d20 6170 695f 7574 696c  _name = api_util
+00010560: 732e 6765 745f 6675 6e63 7469 6f6e 5f6e  s.get_function_n
+00010570: 616d 6528 6675 6e63 7469 6f6e 5f6e 616d  ame(function_nam
+00010580: 652c 2063 6f6e 7465 7874 2e72 6567 696f  e, context.regio
+00010590: 6e29 0a20 2020 2020 2020 2065 6c73 653a  n).        else:
+000105a0: 0a20 2020 2020 2020 2020 2020 2066 6e5f  .            fn_
+000105b0: 6172 6e20 3d20 6170 695f 7574 696c 732e  arn = api_utils.
+000105c0: 756e 7175 616c 6966 6965 645f 6c61 6d62  unqualified_lamb
+000105d0: 6461 5f61 726e 280a 2020 2020 2020 2020  da_arn(.        
+000105e0: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
+000105f0: 5f6e 616d 652c 2063 6f6e 7465 7874 2e61  _name, context.a
+00010600: 6363 6f75 6e74 5f69 642c 2063 6f6e 7465  ccount_id, conte
+00010610: 7874 2e72 6567 696f 6e0a 2020 2020 2020  xt.region.      
+00010620: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+00010630: 2066 6e20 3d20 7374 6174 652e 6675 6e63   fn = state.func
+00010640: 7469 6f6e 732e 6765 7428 6675 6e63 7469  tions.get(functi
+00010650: 6f6e 5f6e 616d 6529 0a20 2020 2020 2020  on_name).       
+00010660: 2069 6620 6e6f 7420 666e 3a0a 2020 2020   if not fn:.    
+00010670: 2020 2020 2020 2020 7261 6973 6520 496e          raise In
+00010680: 7661 6c69 6450 6172 616d 6574 6572 5661  validParameterVa
+00010690: 6c75 6545 7863 6570 7469 6f6e 2822 4675  lueException("Fu
+000106a0: 6e63 7469 6f6e 2064 6f65 7320 6e6f 7420  nction does not 
+000106b0: 6578 6973 7422 2c20 5479 7065 3d22 5573  exist", Type="Us
+000106c0: 6572 2229 0a0a 2020 2020 2020 2020 2320  er")..        # 
+000106d0: 544f 444f 3a20 6368 6563 6b20 6966 2061  TODO: check if a
+000106e0: 6c69 6173 2f76 6572 7369 6f6e 2065 7869  lias/version exi
+000106f0: 7374 730a 0a20 2020 2020 2020 206e 6577  sts..        new
+00010700: 5f75 7569 6420 3d20 6c6f 6e67 5f75 6964  _uuid = long_uid
+00010710: 2829 0a0a 2020 2020 2020 2020 2320 6465  ()..        # de
+00010720: 6661 756c 7473 2065 7463 2e20 7661 7279  faults etc. vary
+00010730: 2064 6570 656e 6469 6e67 206f 6e20 7479   depending on ty
+00010740: 7065 206f 6620 6576 656e 7420 736f 7572  pe of event sour
+00010750: 6365 0a20 2020 2020 2020 2023 2054 4f44  ce.        # TOD
+00010760: 4f3a 2066 696e 6420 6120 6265 7474 6572  O: find a better
+00010770: 2061 6273 7472 6163 7469 6f6e 2074 6f20   abstraction to 
+00010780: 6372 6561 7465 2074 6865 7365 0a20 2020  create these.   
+00010790: 2020 2020 2070 6172 616d 7320 3d20 7265       params = re
+000107a0: 7175 6573 742e 636f 7079 2829 0a20 2020  quest.copy().   
+000107b0: 2020 2020 2070 6172 616d 732e 706f 7028       params.pop(
+000107c0: 2246 756e 6374 696f 6e4e 616d 6522 290a  "FunctionName").
+000107d0: 2020 2020 2020 2020 6261 7463 685f 7369          batch_si
+000107e0: 7a65 203d 2061 7069 5f75 7469 6c73 2e76  ze = api_utils.v
+000107f0: 616c 6964 6174 655f 616e 645f 7365 745f  alidate_and_set_
+00010800: 6261 7463 685f 7369 7a65 280a 2020 2020  batch_size(.    
+00010810: 2020 2020 2020 2020 7265 7175 6573 745b          request[
+00010820: 2245 7665 6e74 536f 7572 6365 4172 6e22  "EventSourceArn"
+00010830: 5d2c 2072 6571 7565 7374 2e67 6574 2822  ], request.get("
+00010840: 4261 7463 6853 697a 6522 290a 2020 2020  BatchSize").    
+00010850: 2020 2020 290a 2020 2020 2020 2020 7061      ).        pa
+00010860: 7261 6d73 5b22 4675 6e63 7469 6f6e 4172  rams["FunctionAr
+00010870: 6e22 5d20 3d20 666e 5f61 726e 0a20 2020  n"] = fn_arn.   
+00010880: 2020 2020 2070 6172 616d 735b 2242 6174       params["Bat
+00010890: 6368 5369 7a65 225d 203d 2062 6174 6368  chSize"] = batch
+000108a0: 5f73 697a 650a 2020 2020 2020 2020 7061  _size.        pa
+000108b0: 7261 6d73 5b22 5555 4944 225d 203d 206e  rams["UUID"] = n
+000108c0: 6577 5f75 7569 640a 2020 2020 2020 2020  ew_uuid.        
+000108d0: 7061 7261 6d73 5b22 4d61 7869 6d75 6d42  params["MaximumB
+000108e0: 6174 6368 696e 6757 696e 646f 7749 6e53  atchingWindowInS
+000108f0: 6563 6f6e 6473 225d 203d 2072 6571 7565  econds"] = reque
+00010900: 7374 2e67 6574 2822 4d61 7869 6d75 6d42  st.get("MaximumB
+00010910: 6174 6368 696e 6757 696e 646f 7749 6e53  atchingWindowInS
+00010920: 6563 6f6e 6473 222c 2030 290a 2020 2020  econds", 0).    
+00010930: 2020 2020 7061 7261 6d73 5b22 4c61 7374      params["Last
+00010940: 4d6f 6469 6669 6564 225d 203d 2061 7069  Modified"] = api
+00010950: 5f75 7469 6c73 2e67 656e 6572 6174 655f  _utils.generate_
+00010960: 6c61 6d62 6461 5f64 6174 6528 290a 2020  lambda_date().  
+00010970: 2020 2020 2020 7061 7261 6d73 5b22 4675        params["Fu
+00010980: 6e63 7469 6f6e 5265 7370 6f6e 7365 5479  nctionResponseTy
+00010990: 7065 7322 5d20 3d20 7265 7175 6573 742e  pes"] = request.
+000109a0: 6765 7428 2246 756e 6374 696f 6e52 6573  get("FunctionRes
+000109b0: 706f 6e73 6554 7970 6573 222c 205b 5d29  ponseTypes", [])
+000109c0: 0a20 2020 2020 2020 2070 6172 616d 735b  .        params[
+000109d0: 2253 7461 7465 225d 203d 2022 456e 6162  "State"] = "Enab
+000109e0: 6c65 6422 0a0a 2020 2020 2020 2020 6966  led"..        if
+000109f0: 2022 7371 7322 2069 6e20 7265 7175 6573   "sqs" in reques
+00010a00: 745b 2245 7665 6e74 536f 7572 6365 4172  t["EventSourceAr
+00010a10: 6e22 5d3a 0a20 2020 2020 2020 2020 2020  n"]:.           
+00010a20: 2070 6172 616d 735b 2253 7461 7465 5472   params["StateTr
+00010a30: 616e 7369 7469 6f6e 5265 6173 6f6e 225d  ansitionReason"]
+00010a40: 203d 2022 5553 4552 5f49 4e49 5449 4154   = "USER_INITIAT
+00010a50: 4544 220a 2020 2020 2020 2020 2020 2020  ED".            
+00010a60: 6966 2062 6174 6368 5f73 697a 6520 3e20  if batch_size > 
+00010a70: 3130 2061 6e64 2072 6571 7565 7374 2e67  10 and request.g
+00010a80: 6574 2822 4d61 7869 6d75 6d42 6174 6368  et("MaximumBatch
+00010a90: 696e 6757 696e 646f 7749 6e53 6563 6f6e  ingWindowInSecon
+00010aa0: 6473 222c 2030 2920 3d3d 2030 3a0a 2020  ds", 0) == 0:.  
+00010ab0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
+00010ac0: 6973 6520 496e 7661 6c69 6450 6172 616d  ise InvalidParam
+00010ad0: 6574 6572 5661 6c75 6545 7863 6570 7469  eterValueExcepti
+00010ae0: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
+00010af0: 2020 2020 2020 2020 224d 6178 696d 756d          "Maximum
+00010b00: 2062 6174 6368 2077 696e 646f 7720 696e   batch window in
+00010b10: 2073 6563 6f6e 6473 206d 7573 7420 6265   seconds must be
+00010b20: 2067 7265 6174 6572 2074 6861 6e20 3020   greater than 0 
+00010b30: 6966 206d 6178 696d 756d 2062 6174 6368  if maximum batch
+00010b40: 2073 697a 6520 6973 2067 7265 6174 6572   size is greater
+00010b50: 2074 6861 6e20 3130 222c 0a20 2020 2020   than 10",.     
+00010b60: 2020 2020 2020 2020 2020 2020 2020 2054                 T
+00010b70: 7970 653d 2255 7365 7222 2c0a 2020 2020  ype="User",.    
+00010b80: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00010b90: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00010ba0: 2020 2020 2020 2020 2320 6166 6169 6b20          # afaik 
+00010bb0: 6576 6572 7920 6f74 6865 7220 6f6e 6520  every other one 
+00010bc0: 6375 7272 656e 746c 7920 6973 2061 2073  currently is a s
+00010bd0: 7472 6561 6d0a 2020 2020 2020 2020 2020  tream.          
+00010be0: 2020 7061 7261 6d73 5b22 5374 6174 6554    params["StateT
+00010bf0: 7261 6e73 6974 696f 6e52 6561 736f 6e22  ransitionReason"
+00010c00: 5d20 3d20 2255 7365 7220 6163 7469 6f6e  ] = "User action
+00010c10: 220a 2020 2020 2020 2020 2020 2020 7061  ".            pa
+00010c20: 7261 6d73 5b22 4d61 7869 6d75 6d52 6574  rams["MaximumRet
+00010c30: 7279 4174 7465 6d70 7473 225d 203d 2072  ryAttempts"] = r
+00010c40: 6571 7565 7374 2e67 6574 2822 4d61 7869  equest.get("Maxi
+00010c50: 6d75 6d52 6574 7279 4174 7465 6d70 7473  mumRetryAttempts
+00010c60: 222c 202d 3129 0a20 2020 2020 2020 2020  ", -1).         
+00010c70: 2020 2070 6172 616d 735b 2250 6172 616c     params["Paral
+00010c80: 6c65 6c69 7a61 7469 6f6e 4661 6374 6f72  lelizationFactor
+00010c90: 225d 203d 2072 6571 7565 7374 2e67 6574  "] = request.get
+00010ca0: 2822 5061 7261 6c6c 656c 697a 6174 696f  ("Parallelizatio
+00010cb0: 6e46 6163 746f 7222 2c20 3129 0a20 2020  nFactor", 1).   
+00010cc0: 2020 2020 2020 2020 2070 6172 616d 735b           params[
+00010cd0: 2242 6973 6563 7442 6174 6368 4f6e 4675  "BisectBatchOnFu
+00010ce0: 6e63 7469 6f6e 4572 726f 7222 5d20 3d20  nctionError"] = 
+00010cf0: 7265 7175 6573 742e 6765 7428 2242 6973  request.get("Bis
+00010d00: 6563 7442 6174 6368 4f6e 4675 6e63 7469  ectBatchOnFuncti
+00010d10: 6f6e 4572 726f 7222 2c20 4661 6c73 6529  onError", False)
+00010d20: 0a20 2020 2020 2020 2020 2020 2070 6172  .            par
+00010d30: 616d 735b 224c 6173 7450 726f 6365 7373  ams["LastProcess
+00010d40: 696e 6752 6573 756c 7422 5d20 3d20 224e  ingResult"] = "N
+00010d50: 6f20 7265 636f 7264 7320 7072 6f63 6573  o records proces
+00010d60: 7365 6422 0a20 2020 2020 2020 2020 2020  sed".           
+00010d70: 2070 6172 616d 735b 224d 6178 696d 756d   params["Maximum
 00010d80: 5265 636f 7264 4167 6549 6e53 6563 6f6e  RecordAgeInSecon
-00010d90: 6473 222c 202d 3129 0a20 2020 2020 2020  ds", -1).       
-00010da0: 2020 2020 2070 6172 616d 735b 2254 756d       params["Tum
-00010db0: 626c 696e 6757 696e 646f 7749 6e53 6563  blingWindowInSec
-00010dc0: 6f6e 6473 225d 203d 2072 6571 7565 7374  onds"] = request
-00010dd0: 2e67 6574 2822 5475 6d62 6c69 6e67 5769  .get("TumblingWi
-00010de0: 6e64 6f77 496e 5365 636f 6e64 7322 2c20  ndowInSeconds", 
-00010df0: 3029 0a20 2020 2020 2020 2020 2020 2064  0).            d
-00010e00: 6573 7469 6e61 7469 6f6e 5f63 6f6e 6669  estination_confi
-00010e10: 6720 3d20 7265 7175 6573 742e 6765 7428  g = request.get(
-00010e20: 2244 6573 7469 6e61 7469 6f6e 436f 6e66  "DestinationConf
-00010e30: 6967 222c 207b 224f 6e46 6169 6c75 7265  ig", {"OnFailure
-00010e40: 223a 207b 7d7d 290a 2020 2020 2020 2020  ": {}}).        
-00010e50: 2020 2020 7365 6c66 2e5f 7661 6c69 6461      self._valida
-00010e60: 7465 5f64 6573 7469 6e61 7469 6f6e 5f63  te_destination_c
-00010e70: 6f6e 6669 6728 7374 6174 652c 2066 756e  onfig(state, fun
-00010e80: 6374 696f 6e5f 6e61 6d65 2c20 6465 7374  ction_name, dest
-00010e90: 696e 6174 696f 6e5f 636f 6e66 6967 290a  ination_config).
-00010ea0: 2020 2020 2020 2020 2020 2020 7061 7261              para
-00010eb0: 6d73 5b22 4465 7374 696e 6174 696f 6e43  ms["DestinationC
-00010ec0: 6f6e 6669 6722 5d20 3d20 6465 7374 696e  onfig"] = destin
-00010ed0: 6174 696f 6e5f 636f 6e66 6967 0a0a 2020  ation_config..  
-00010ee0: 2020 2020 2020 2320 544f 444f 3a20 6372        # TODO: cr
-00010ef0: 6561 7465 2064 6f6d 6169 6e20 6d6f 6465  eate domain mode
-00010f00: 6c73 2061 6e64 206d 6170 2061 6363 6f72  ls and map accor
-00010f10: 6469 6e67 6c79 0a0a 2020 2020 2020 2020  dingly..        
-00010f20: 6573 6d5f 636f 6e66 6967 203d 2045 7665  esm_config = Eve
-00010f30: 6e74 536f 7572 6365 4d61 7070 696e 6743  ntSourceMappingC
-00010f40: 6f6e 6669 6775 7261 7469 6f6e 282a 2a70  onfiguration(**p
-00010f50: 6172 616d 7329 0a20 2020 2020 2020 2066  arams).        f
-00010f60: 696c 7465 725f 6372 6974 6572 6961 203d  ilter_criteria =
-00010f70: 2065 736d 5f63 6f6e 6669 672e 6765 7428   esm_config.get(
-00010f80: 2246 696c 7465 7243 7269 7465 7269 6122  "FilterCriteria"
-00010f90: 290a 2020 2020 2020 2020 6966 2066 696c  ).        if fil
-00010fa0: 7465 725f 6372 6974 6572 6961 3a0a 2020  ter_criteria:.  
-00010fb0: 2020 2020 2020 2020 2020 2320 7661 6c69            # vali
-00010fc0: 6461 7465 2066 6f72 2076 616c 6964 206a  date for valid j
-00010fd0: 736f 6e0a 2020 2020 2020 2020 2020 2020  son.            
-00010fe0: 6966 206e 6f74 2076 616c 6964 6174 655f  if not validate_
-00010ff0: 6669 6c74 6572 7328 6669 6c74 6572 5f63  filters(filter_c
-00011000: 7269 7465 7269 6129 3a0a 2020 2020 2020  riteria):.      
-00011010: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00011020: 496e 7661 6c69 6450 6172 616d 6574 6572  InvalidParameter
-00011030: 5661 6c75 6545 7863 6570 7469 6f6e 280a  ValueException(.
-00011040: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00011050: 2020 2020 2249 6e76 616c 6964 2066 696c      "Invalid fil
-00011060: 7465 7220 7061 7474 6572 6e20 6465 6669  ter pattern defi
-00011070: 6e69 7469 6f6e 2e22 2c20 5479 7065 3d22  nition.", Type="
-00011080: 5573 6572 220a 2020 2020 2020 2020 2020  User".          
-00011090: 2020 2020 2020 2920 2023 2054 4f44 4f3a        )  # TODO:
-000110a0: 2076 6572 6966 790a 0a20 2020 2020 2020   verify..       
-000110b0: 2073 7461 7465 2e65 7665 6e74 5f73 6f75   state.event_sou
-000110c0: 7263 655f 6d61 7070 696e 6773 5b6e 6577  rce_mappings[new
-000110d0: 5f75 7569 645d 203d 2065 736d 5f63 6f6e  _uuid] = esm_con
-000110e0: 6669 670a 0a20 2020 2020 2020 2023 2054  fig..        # T
-000110f0: 4f44 4f3a 2065 7661 6c75 6174 6520 6166  ODO: evaluate af
-00011100: 7465 7220 7465 6d70 206d 6967 7261 7469  ter temp migrati
-00011110: 6f6e 0a20 2020 2020 2020 2045 7665 6e74  on.        Event
-00011120: 536f 7572 6365 4c69 7374 656e 6572 2e73  SourceListener.s
-00011130: 7461 7274 5f6c 6973 7465 6e65 7273 5f66  tart_listeners_f
-00011140: 6f72 5f61 7366 2872 6571 7565 7374 2c20  or_asf(request, 
-00011150: 7365 6c66 2e6c 616d 6264 615f 7365 7276  self.lambda_serv
-00011160: 6963 6529 0a0a 2020 2020 2020 2020 7265  ice)..        re
-00011170: 7475 726e 207b 2a2a 6573 6d5f 636f 6e66  turn {**esm_conf
-00011180: 6967 2c20 2253 7461 7465 223a 2022 4372  ig, "State": "Cr
-00011190: 6561 7469 6e67 227d 2020 2320 544f 444f  eating"}  # TODO
-000111a0: 3a20 7368 6f75 6c64 2062 6520 7365 7420  : should be set 
-000111b0: 6173 796e 6368 726f 6e6f 7573 6c79 0a0a  asynchronously..
-000111c0: 2020 2020 4068 616e 646c 6572 2822 5570      @handler("Up
-000111d0: 6461 7465 4576 656e 7453 6f75 7263 654d  dateEventSourceM
-000111e0: 6170 7069 6e67 222c 2065 7870 616e 643d  apping", expand=
-000111f0: 4661 6c73 6529 0a20 2020 2064 6566 2075  False).    def u
-00011200: 7064 6174 655f 6576 656e 745f 736f 7572  pdate_event_sour
-00011210: 6365 5f6d 6170 7069 6e67 280a 2020 2020  ce_mapping(.    
-00011220: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
-00011230: 2020 636f 6e74 6578 743a 2052 6571 7565    context: Reque
-00011240: 7374 436f 6e74 6578 742c 0a20 2020 2020  stContext,.     
-00011250: 2020 2072 6571 7565 7374 3a20 5570 6461     request: Upda
-00011260: 7465 4576 656e 7453 6f75 7263 654d 6170  teEventSourceMap
-00011270: 7069 6e67 5265 7175 6573 742c 0a20 2020  pingRequest,.   
-00011280: 2029 202d 3e20 4576 656e 7453 6f75 7263   ) -> EventSourc
-00011290: 654d 6170 7069 6e67 436f 6e66 6967 7572  eMappingConfigur
-000112a0: 6174 696f 6e3a 0a20 2020 2020 2020 2073  ation:.        s
-000112b0: 7461 7465 203d 206c 616d 6264 615f 7374  tate = lambda_st
-000112c0: 6f72 6573 5b63 6f6e 7465 7874 2e61 6363  ores[context.acc
-000112d0: 6f75 6e74 5f69 645d 5b63 6f6e 7465 7874  ount_id][context
-000112e0: 2e72 6567 696f 6e5d 0a20 2020 2020 2020  .region].       
-000112f0: 2072 6571 7565 7374 5f64 6174 6120 3d20   request_data = 
-00011300: 7b2a 2a72 6571 7565 7374 7d0a 2020 2020  {**request}.    
-00011310: 2020 2020 7575 6964 203d 2072 6571 7565      uuid = reque
-00011320: 7374 5f64 6174 612e 706f 7028 2255 5549  st_data.pop("UUI
-00011330: 4422 2c20 4e6f 6e65 290a 2020 2020 2020  D", None).      
-00011340: 2020 6966 206e 6f74 2075 7569 643a 0a20    if not uuid:. 
-00011350: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00011360: 2052 6573 6f75 7263 654e 6f74 466f 756e   ResourceNotFoun
-00011370: 6445 7863 6570 7469 6f6e 280a 2020 2020  dException(.    
-00011380: 2020 2020 2020 2020 2020 2020 2254 6865              "The
-00011390: 2072 6573 6f75 7263 6520 796f 7520 7265   resource you re
-000113a0: 7175 6573 7465 6420 646f 6573 206e 6f74  quested does not
-000113b0: 2065 7869 7374 2e22 2c20 5479 7065 3d22   exist.", Type="
-000113c0: 5573 6572 220a 2020 2020 2020 2020 2020  User".          
-000113d0: 2020 290a 2020 2020 2020 2020 6f6c 645f    ).        old_
-000113e0: 6576 656e 745f 736f 7572 6365 5f6d 6170  event_source_map
-000113f0: 7069 6e67 203d 2073 7461 7465 2e65 7665  ping = state.eve
-00011400: 6e74 5f73 6f75 7263 655f 6d61 7070 696e  nt_source_mappin
-00011410: 6773 2e67 6574 2875 7569 6429 0a20 2020  gs.get(uuid).   
-00011420: 2020 2020 2069 6620 6f6c 645f 6576 656e       if old_even
-00011430: 745f 736f 7572 6365 5f6d 6170 7069 6e67  t_source_mapping
-00011440: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-00011450: 2020 2020 2020 7261 6973 6520 5265 736f        raise Reso
-00011460: 7572 6365 4e6f 7446 6f75 6e64 4578 6365  urceNotFoundExce
-00011470: 7074 696f 6e28 0a20 2020 2020 2020 2020  ption(.         
-00011480: 2020 2020 2020 2022 5468 6520 7265 736f         "The reso
-00011490: 7572 6365 2079 6f75 2072 6571 7565 7374  urce you request
-000114a0: 6564 2064 6f65 7320 6e6f 7420 6578 6973  ed does not exis
-000114b0: 742e 222c 2054 7970 653d 2255 7365 7222  t.", Type="User"
-000114c0: 0a20 2020 2020 2020 2020 2020 2029 2020  .            )  
-000114d0: 2320 544f 444f 3a20 7465 7374 3f0a 2020  # TODO: test?.  
-000114e0: 2020 2020 2020 6576 656e 745f 736f 7572        event_sour
-000114f0: 6365 5f6d 6170 7069 6e67 203d 207b 2a2a  ce_mapping = {**
-00011500: 6f6c 645f 6576 656e 745f 736f 7572 6365  old_event_source
-00011510: 5f6d 6170 7069 6e67 2c20 2a2a 7265 7175  _mapping, **requ
-00011520: 6573 745f 6461 7461 7d0a 0a20 2020 2020  est_data}..     
-00011530: 2020 2074 656d 705f 7061 7261 6d73 203d     temp_params =
-00011540: 2028 0a20 2020 2020 2020 2020 2020 207b   (.            {
-00011550: 7d0a 2020 2020 2020 2020 2920 2023 2076  }.        )  # v
-00011560: 616c 7565 7320 6f6e 6c79 2073 6574 2066  alues only set f
-00011570: 6f72 2074 6865 2072 6574 7572 6e65 6420  or the returned 
-00011580: 7265 7370 6f6e 7365 2c20 6e6f 7420 7361  response, not sa
-00011590: 7665 6420 696e 7465 726e 616c 6c79 2028  ved internally (
-000115a0: 652e 672e 2074 7261 6e73 6965 6e74 2073  e.g. transient s
-000115b0: 7461 7465 290a 0a20 2020 2020 2020 2069  tate)..        i
-000115c0: 6620 7265 7175 6573 742e 6765 7428 2245  f request.get("E
-000115d0: 6e61 626c 6564 2229 2069 7320 6e6f 7420  nabled") is not 
-000115e0: 4e6f 6e65 3a0a 2020 2020 2020 2020 2020  None:.          
-000115f0: 2020 6966 2072 6571 7565 7374 5b22 456e    if request["En
-00011600: 6162 6c65 6422 5d3a 0a20 2020 2020 2020  abled"]:.       
-00011610: 2020 2020 2020 2020 2065 736d 5f73 7461           esm_sta
-00011620: 7465 203d 2022 456e 6162 6c65 6422 0a20  te = "Enabled". 
-00011630: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-00011640: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00011650: 2065 736d 5f73 7461 7465 203d 2022 4469   esm_state = "Di
-00011660: 7361 626c 6564 220a 2020 2020 2020 2020  sabled".        
-00011670: 2020 2020 2020 2020 7465 6d70 5f70 6172          temp_par
-00011680: 616d 735b 2253 7461 7465 225d 203d 2022  ams["State"] = "
-00011690: 4469 7361 626c 696e 6722 2020 2320 544f  Disabling"  # TO
-000116a0: 444f 3a20 6d61 6b65 2074 6869 7320 7072  DO: make this pr
-000116b0: 6f70 6572 6c79 2061 7379 6e63 0a20 2020  operly async.   
-000116c0: 2020 2020 2020 2020 2065 7665 6e74 5f73           event_s
-000116d0: 6f75 7263 655f 6d61 7070 696e 675b 2253  ource_mapping["S
-000116e0: 7461 7465 225d 203d 2065 736d 5f73 7461  tate"] = esm_sta
-000116f0: 7465 0a0a 2020 2020 2020 2020 6966 2072  te..        if r
-00011700: 6571 7565 7374 2e67 6574 2822 4261 7463  equest.get("Batc
-00011710: 6853 697a 6522 293a 0a20 2020 2020 2020  hSize"):.       
-00011720: 2020 2020 2062 6174 6368 5f73 697a 6520       batch_size 
-00011730: 3d20 6170 695f 7574 696c 732e 7661 6c69  = api_utils.vali
-00011740: 6461 7465 5f61 6e64 5f73 6574 5f62 6174  date_and_set_bat
-00011750: 6368 5f73 697a 6528 0a20 2020 2020 2020  ch_size(.       
-00011760: 2020 2020 2020 2020 2065 7665 6e74 5f73           event_s
-00011770: 6f75 7263 655f 6d61 7070 696e 675b 2245  ource_mapping["E
-00011780: 7665 6e74 536f 7572 6365 4172 6e22 5d2c  ventSourceArn"],
-00011790: 2072 6571 7565 7374 5b22 4261 7463 6853   request["BatchS
-000117a0: 697a 6522 5d0a 2020 2020 2020 2020 2020  ize"].          
-000117b0: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
-000117c0: 6966 2062 6174 6368 5f73 697a 6520 3e20  if batch_size > 
-000117d0: 3130 2061 6e64 2072 6571 7565 7374 2e67  10 and request.g
-000117e0: 6574 2822 4d61 7869 6d75 6d42 6174 6368  et("MaximumBatch
-000117f0: 696e 6757 696e 646f 7749 6e53 6563 6f6e  ingWindowInSecon
-00011800: 6473 222c 2030 2920 3d3d 2030 3a0a 2020  ds", 0) == 0:.  
-00011810: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-00011820: 6973 6520 496e 7661 6c69 6450 6172 616d  ise InvalidParam
-00011830: 6574 6572 5661 6c75 6545 7863 6570 7469  eterValueExcepti
-00011840: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
-00011850: 2020 2020 2020 2020 224d 6178 696d 756d          "Maximum
-00011860: 2062 6174 6368 2077 696e 646f 7720 696e   batch window in
-00011870: 2073 6563 6f6e 6473 206d 7573 7420 6265   seconds must be
-00011880: 2067 7265 6174 6572 2074 6861 6e20 3020   greater than 0 
-00011890: 6966 206d 6178 696d 756d 2062 6174 6368  if maximum batch
-000118a0: 2073 697a 6520 6973 2067 7265 6174 6572   size is greater
-000118b0: 2074 6861 6e20 3130 222c 0a20 2020 2020   than 10",.     
-000118c0: 2020 2020 2020 2020 2020 2020 2020 2054                 T
-000118d0: 7970 653d 2255 7365 7222 2c0a 2020 2020  ype="User",.    
-000118e0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-000118f0: 2020 2020 2020 6966 2072 6571 7565 7374        if request
-00011900: 2e67 6574 2822 4465 7374 696e 6174 696f  .get("Destinatio
-00011910: 6e43 6f6e 6669 6722 293a 0a20 2020 2020  nConfig"):.     
-00011920: 2020 2020 2020 2064 6573 7469 6e61 7469         destinati
-00011930: 6f6e 5f63 6f6e 6669 6720 3d20 7265 7175  on_config = requ
-00011940: 6573 745b 2244 6573 7469 6e61 7469 6f6e  est["Destination
-00011950: 436f 6e66 6967 225d 0a20 2020 2020 2020  Config"].       
-00011960: 2020 2020 2073 656c 662e 5f76 616c 6964       self._valid
-00011970: 6174 655f 6465 7374 696e 6174 696f 6e5f  ate_destination_
-00011980: 636f 6e66 6967 280a 2020 2020 2020 2020  config(.        
-00011990: 2020 2020 2020 2020 7374 6174 652c 2065          state, e
-000119a0: 7665 6e74 5f73 6f75 7263 655f 6d61 7070  vent_source_mapp
-000119b0: 696e 675b 2246 756e 6374 696f 6e4e 616d  ing["FunctionNam
-000119c0: 6522 5d2c 2064 6573 7469 6e61 7469 6f6e  e"], destination
-000119d0: 5f63 6f6e 6669 670a 2020 2020 2020 2020  _config.        
-000119e0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
-000119f0: 2020 6576 656e 745f 736f 7572 6365 5f6d    event_source_m
-00011a00: 6170 7069 6e67 5b22 4465 7374 696e 6174  apping["Destinat
-00011a10: 696f 6e43 6f6e 6669 6722 5d20 3d20 6465  ionConfig"] = de
-00011a20: 7374 696e 6174 696f 6e5f 636f 6e66 6967  stination_config
-00011a30: 0a20 2020 2020 2020 2065 7665 6e74 5f73  .        event_s
-00011a40: 6f75 7263 655f 6d61 7070 696e 675b 224c  ource_mapping["L
-00011a50: 6173 7450 726f 6365 7373 696e 6752 6573  astProcessingRes
-00011a60: 756c 7422 5d20 3d20 224f 4b22 0a20 2020  ult"] = "OK".   
-00011a70: 2020 2020 2073 7461 7465 2e65 7665 6e74       state.event
-00011a80: 5f73 6f75 7263 655f 6d61 7070 696e 6773  _source_mappings
-00011a90: 5b75 7569 645d 203d 2065 7665 6e74 5f73  [uuid] = event_s
-00011aa0: 6f75 7263 655f 6d61 7070 696e 670a 2020  ource_mapping.  
-00011ab0: 2020 2020 2020 7265 7475 726e 207b 2a2a        return {**
-00011ac0: 6576 656e 745f 736f 7572 6365 5f6d 6170  event_source_map
-00011ad0: 7069 6e67 2c20 2a2a 7465 6d70 5f70 6172  ping, **temp_par
-00011ae0: 616d 737d 0a0a 2020 2020 6465 6620 6465  ams}..    def de
-00011af0: 6c65 7465 5f65 7665 6e74 5f73 6f75 7263  lete_event_sourc
-00011b00: 655f 6d61 7070 696e 6728 0a20 2020 2020  e_mapping(.     
-00011b10: 2020 2073 656c 662c 2063 6f6e 7465 7874     self, context
-00011b20: 3a20 5265 7175 6573 7443 6f6e 7465 7874  : RequestContext
-00011b30: 2c20 7575 6964 3a20 5374 7269 6e67 0a20  , uuid: String. 
-00011b40: 2020 2029 202d 3e20 4576 656e 7453 6f75     ) -> EventSou
-00011b50: 7263 654d 6170 7069 6e67 436f 6e66 6967  rceMappingConfig
-00011b60: 7572 6174 696f 6e3a 0a20 2020 2020 2020  uration:.       
-00011b70: 2073 7461 7465 203d 206c 616d 6264 615f   state = lambda_
-00011b80: 7374 6f72 6573 5b63 6f6e 7465 7874 2e61  stores[context.a
-00011b90: 6363 6f75 6e74 5f69 645d 5b63 6f6e 7465  ccount_id][conte
-00011ba0: 7874 2e72 6567 696f 6e5d 0a20 2020 2020  xt.region].     
-00011bb0: 2020 2065 7665 6e74 5f73 6f75 7263 655f     event_source_
-00011bc0: 6d61 7070 696e 6720 3d20 7374 6174 652e  mapping = state.
-00011bd0: 6576 656e 745f 736f 7572 6365 5f6d 6170  event_source_map
-00011be0: 7069 6e67 732e 6765 7428 7575 6964 290a  pings.get(uuid).
-00011bf0: 2020 2020 2020 2020 6966 206e 6f74 2065          if not e
-00011c00: 7665 6e74 5f73 6f75 7263 655f 6d61 7070  vent_source_mapp
-00011c10: 696e 673a 0a20 2020 2020 2020 2020 2020  ing:.           
-00011c20: 2072 6169 7365 2052 6573 6f75 7263 654e   raise ResourceN
-00011c30: 6f74 466f 756e 6445 7863 6570 7469 6f6e  otFoundException
-00011c40: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00011c50: 2020 2254 6865 2072 6573 6f75 7263 6520    "The resource 
-00011c60: 796f 7520 7265 7175 6573 7465 6420 646f  you requested do
-00011c70: 6573 206e 6f74 2065 7869 7374 2e22 2c20  es not exist.", 
-00011c80: 5479 7065 3d22 5573 6572 220a 2020 2020  Type="User".    
-00011c90: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-00011ca0: 2020 6573 6d20 3d20 7374 6174 652e 6576    esm = state.ev
-00011cb0: 656e 745f 736f 7572 6365 5f6d 6170 7069  ent_source_mappi
-00011cc0: 6e67 732e 706f 7028 7575 6964 290a 2020  ngs.pop(uuid).  
-00011cd0: 2020 2020 2020 7265 7475 726e 207b 2a2a        return {**
-00011ce0: 6573 6d2c 2022 5374 6174 6522 3a20 2244  esm, "State": "D
-00011cf0: 656c 6574 696e 6722 7d0a 0a20 2020 2064  eleting"}..    d
-00011d00: 6566 2067 6574 5f65 7665 6e74 5f73 6f75  ef get_event_sou
-00011d10: 7263 655f 6d61 7070 696e 6728 0a20 2020  rce_mapping(.   
-00011d20: 2020 2020 2073 656c 662c 2063 6f6e 7465       self, conte
-00011d30: 7874 3a20 5265 7175 6573 7443 6f6e 7465  xt: RequestConte
-00011d40: 7874 2c20 7575 6964 3a20 5374 7269 6e67  xt, uuid: String
-00011d50: 0a20 2020 2029 202d 3e20 4576 656e 7453  .    ) -> EventS
-00011d60: 6f75 7263 654d 6170 7069 6e67 436f 6e66  ourceMappingConf
-00011d70: 6967 7572 6174 696f 6e3a 0a20 2020 2020  iguration:.     
-00011d80: 2020 2073 7461 7465 203d 206c 616d 6264     state = lambd
-00011d90: 615f 7374 6f72 6573 5b63 6f6e 7465 7874  a_stores[context
-00011da0: 2e61 6363 6f75 6e74 5f69 645d 5b63 6f6e  .account_id][con
-00011db0: 7465 7874 2e72 6567 696f 6e5d 0a20 2020  text.region].   
-00011dc0: 2020 2020 2065 7665 6e74 5f73 6f75 7263       event_sourc
-00011dd0: 655f 6d61 7070 696e 6720 3d20 7374 6174  e_mapping = stat
-00011de0: 652e 6576 656e 745f 736f 7572 6365 5f6d  e.event_source_m
-00011df0: 6170 7069 6e67 732e 6765 7428 7575 6964  appings.get(uuid
-00011e00: 290a 2020 2020 2020 2020 6966 206e 6f74  ).        if not
-00011e10: 2065 7665 6e74 5f73 6f75 7263 655f 6d61   event_source_ma
-00011e20: 7070 696e 673a 0a20 2020 2020 2020 2020  pping:.         
-00011e30: 2020 2072 6169 7365 2052 6573 6f75 7263     raise Resourc
-00011e40: 654e 6f74 466f 756e 6445 7863 6570 7469  eNotFoundExcepti
-00011e50: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
-00011e60: 2020 2020 2254 6865 2072 6573 6f75 7263      "The resourc
-00011e70: 6520 796f 7520 7265 7175 6573 7465 6420  e you requested 
-00011e80: 646f 6573 206e 6f74 2065 7869 7374 2e22  does not exist."
-00011e90: 2c20 5479 7065 3d22 5573 6572 220a 2020  , Type="User".  
-00011ea0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00011eb0: 2020 2020 7265 7475 726e 2065 7665 6e74      return event
-00011ec0: 5f73 6f75 7263 655f 6d61 7070 696e 670a  _source_mapping.
-00011ed0: 0a20 2020 2064 6566 206c 6973 745f 6576  .    def list_ev
-00011ee0: 656e 745f 736f 7572 6365 5f6d 6170 7069  ent_source_mappi
-00011ef0: 6e67 7328 0a20 2020 2020 2020 2073 656c  ngs(.        sel
-00011f00: 662c 0a20 2020 2020 2020 2063 6f6e 7465  f,.        conte
-00011f10: 7874 3a20 5265 7175 6573 7443 6f6e 7465  xt: RequestConte
-00011f20: 7874 2c0a 2020 2020 2020 2020 6576 656e  xt,.        even
-00011f30: 745f 736f 7572 6365 5f61 726e 3a20 4172  t_source_arn: Ar
-00011f40: 6e20 3d20 4e6f 6e65 2c0a 2020 2020 2020  n = None,.      
-00011f50: 2020 6675 6e63 7469 6f6e 5f6e 616d 653a    function_name:
-00011f60: 2046 756e 6374 696f 6e4e 616d 6520 3d20   FunctionName = 
-00011f70: 4e6f 6e65 2c0a 2020 2020 2020 2020 6d61  None,.        ma
-00011f80: 726b 6572 3a20 5374 7269 6e67 203d 204e  rker: String = N
-00011f90: 6f6e 652c 0a20 2020 2020 2020 206d 6178  one,.        max
-00011fa0: 5f69 7465 6d73 3a20 4d61 784c 6973 7449  _items: MaxListI
-00011fb0: 7465 6d73 203d 204e 6f6e 652c 0a20 2020  tems = None,.   
-00011fc0: 2029 202d 3e20 4c69 7374 4576 656e 7453   ) -> ListEventS
-00011fd0: 6f75 7263 654d 6170 7069 6e67 7352 6573  ourceMappingsRes
-00011fe0: 706f 6e73 653a 0a20 2020 2020 2020 2073  ponse:.        s
-00011ff0: 7461 7465 203d 206c 616d 6264 615f 7374  tate = lambda_st
-00012000: 6f72 6573 5b63 6f6e 7465 7874 2e61 6363  ores[context.acc
-00012010: 6f75 6e74 5f69 645d 5b63 6f6e 7465 7874  ount_id][context
-00012020: 2e72 6567 696f 6e5d 0a0a 2020 2020 2020  .region]..      
-00012030: 2020 6573 6d73 203d 2073 7461 7465 2e65    esms = state.e
-00012040: 7665 6e74 5f73 6f75 7263 655f 6d61 7070  vent_source_mapp
-00012050: 696e 6773 2e76 616c 7565 7328 290a 0a20  ings.values().. 
-00012060: 2020 2020 2020 2069 6620 6576 656e 745f         if event_
-00012070: 736f 7572 6365 5f61 726e 3a20 2023 2054  source_arn:  # T
-00012080: 4f44 4f3a 2076 616c 6964 6174 6520 7061  ODO: validate pa
-00012090: 7474 6572 6e0a 2020 2020 2020 2020 2020  ttern.          
-000120a0: 2020 6573 6d73 203d 205b 6520 666f 7220    esms = [e for 
-000120b0: 6520 696e 2065 736d 7320 6966 2065 5b22  e in esms if e["
-000120c0: 4576 656e 7453 6f75 7263 6541 726e 225d  EventSourceArn"]
-000120d0: 203d 3d20 6576 656e 745f 736f 7572 6365   == event_source
-000120e0: 5f61 726e 5d0a 0a20 2020 2020 2020 2069  _arn]..        i
-000120f0: 6620 6675 6e63 7469 6f6e 5f6e 616d 653a  f function_name:
-00012100: 0a20 2020 2020 2020 2020 2020 2065 736d  .            esm
-00012110: 7320 3d20 5b65 2066 6f72 2065 2069 6e20  s = [e for e in 
-00012120: 6573 6d73 2069 6620 6675 6e63 7469 6f6e  esms if function
-00012130: 5f6e 616d 6520 696e 2065 5b22 4675 6e63  _name in e["Func
-00012140: 7469 6f6e 4172 6e22 5d5d 0a0a 2020 2020  tionArn"]]..    
-00012150: 2020 2020 6573 6d73 203d 2050 6167 696e      esms = Pagin
-00012160: 6174 6564 4c69 7374 2865 736d 7329 0a20  atedList(esms). 
-00012170: 2020 2020 2020 2070 6167 652c 2074 6f6b         page, tok
-00012180: 656e 203d 2065 736d 732e 6765 745f 7061  en = esms.get_pa
-00012190: 6765 280a 2020 2020 2020 2020 2020 2020  ge(.            
-000121a0: 6c61 6d62 6461 2078 3a20 785b 2255 5549  lambda x: x["UUI
-000121b0: 4422 5d2c 0a20 2020 2020 2020 2020 2020  D"],.           
-000121c0: 206d 6172 6b65 722c 0a20 2020 2020 2020   marker,.       
-000121d0: 2020 2020 206d 6178 5f69 7465 6d73 2c0a       max_items,.
-000121e0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
-000121f0: 2020 7265 7475 726e 204c 6973 7445 7665    return ListEve
-00012200: 6e74 536f 7572 6365 4d61 7070 696e 6773  ntSourceMappings
-00012210: 5265 7370 6f6e 7365 2845 7665 6e74 536f  Response(EventSo
-00012220: 7572 6365 4d61 7070 696e 6773 3d70 6167  urceMappings=pag
-00012230: 652c 204e 6578 744d 6172 6b65 723d 746f  e, NextMarker=to
-00012240: 6b65 6e29 0a0a 2020 2020 2320 3d3d 3d3d  ken)..    # ====
-00012250: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00012260: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00012270: 3d3d 3d0a 2020 2020 2320 3d3d 3d3d 3d3d  ===.    # ======
-00012280: 3d3d 3d3d 3d3d 2046 554e 4354 494f 4e20  ====== FUNCTION 
-00012290: 5552 4c53 203d 3d3d 3d3d 3d3d 3d3d 3d3d  URLS ===========
-000122a0: 3d0a 2020 2020 2320 3d3d 3d3d 3d3d 3d3d  =.    # ========
-000122b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000122c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a  ===============.
-000122d0: 0a20 2020 2023 2054 4f44 4f3a 2077 6861  .    # TODO: wha
-000122e0: 7420 6861 7070 656e 7320 6966 2066 756e  t happens if fun
-000122f0: 6374 696f 6e20 7374 6174 6520 6973 206e  ction state is n
-00012300: 6f74 2061 6374 6976 653f 0a20 2020 2064  ot active?.    d
-00012310: 6566 2063 7265 6174 655f 6675 6e63 7469  ef create_functi
-00012320: 6f6e 5f75 726c 5f63 6f6e 6669 6728 0a20  on_url_config(. 
-00012330: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
-00012340: 2020 2020 2063 6f6e 7465 7874 3a20 5265       context: Re
-00012350: 7175 6573 7443 6f6e 7465 7874 2c0a 2020  questContext,.  
-00012360: 2020 2020 2020 6675 6e63 7469 6f6e 5f6e        function_n
-00012370: 616d 653a 2046 756e 6374 696f 6e4e 616d  ame: FunctionNam
-00012380: 652c 0a20 2020 2020 2020 2061 7574 685f  e,.        auth_
-00012390: 7479 7065 3a20 4675 6e63 7469 6f6e 5572  type: FunctionUr
-000123a0: 6c41 7574 6854 7970 652c 0a20 2020 2020  lAuthType,.     
-000123b0: 2020 2071 7561 6c69 6669 6572 3a20 4675     qualifier: Fu
-000123c0: 6e63 7469 6f6e 5572 6c51 7561 6c69 6669  nctionUrlQualifi
-000123d0: 6572 203d 204e 6f6e 652c 0a20 2020 2020  er = None,.     
-000123e0: 2020 2063 6f72 733a 2043 6f72 7320 3d20     cors: Cors = 
-000123f0: 4e6f 6e65 2c0a 2020 2020 2020 2020 696e  None,.        in
-00012400: 766f 6b65 5f6d 6f64 653a 2049 6e76 6f6b  voke_mode: Invok
-00012410: 654d 6f64 6520 3d20 4e6f 6e65 2c0a 2020  eMode = None,.  
-00012420: 2020 2920 2d3e 2043 7265 6174 6546 756e    ) -> CreateFun
-00012430: 6374 696f 6e55 726c 436f 6e66 6967 5265  ctionUrlConfigRe
-00012440: 7370 6f6e 7365 3a0a 2020 2020 2020 2020  sponse:.        
-00012450: 7374 6174 6520 3d20 6c61 6d62 6461 5f73  state = lambda_s
-00012460: 746f 7265 735b 636f 6e74 6578 742e 6163  tores[context.ac
-00012470: 636f 756e 745f 6964 5d5b 636f 6e74 6578  count_id][contex
-00012480: 742e 7265 6769 6f6e 5d0a 0a20 2020 2020  t.region]..     
-00012490: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
-000124a0: 2c20 7175 616c 6966 6965 7220 3d20 6170  , qualifier = ap
-000124b0: 695f 7574 696c 732e 6765 745f 6e61 6d65  i_utils.get_name
-000124c0: 5f61 6e64 5f71 7561 6c69 6669 6572 280a  _and_qualifier(.
-000124d0: 2020 2020 2020 2020 2020 2020 6675 6e63              func
-000124e0: 7469 6f6e 5f6e 616d 652c 2071 7561 6c69  tion_name, quali
-000124f0: 6669 6572 2c20 636f 6e74 6578 742e 7265  fier, context.re
-00012500: 6769 6f6e 0a20 2020 2020 2020 2029 0a20  gion.        ). 
-00012510: 2020 2020 2020 2069 6620 7175 616c 6966         if qualif
-00012520: 6965 7220 3d3d 2022 244c 4154 4553 5422  ier == "$LATEST"
-00012530: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-00012540: 6973 6520 5661 6c69 6461 7469 6f6e 4578  ise ValidationEx
-00012550: 6365 7074 696f 6e28 0a20 2020 2020 2020  ception(.       
-00012560: 2020 2020 2020 2020 2022 3120 7661 6c69           "1 vali
-00012570: 6461 7469 6f6e 2065 7272 6f72 2064 6574  dation error det
-00012580: 6563 7465 643a 2056 616c 7565 2027 244c  ected: Value '$L
-00012590: 4154 4553 5427 2061 7420 2771 7561 6c69  ATEST' at 'quali
-000125a0: 6669 6572 2720 6661 696c 6564 2074 6f20  fier' failed to 
-000125b0: 7361 7469 7366 7920 636f 6e73 7472 6169  satisfy constrai
-000125c0: 6e74 3a20 4d65 6d62 6572 206d 7573 7420  nt: Member must 
-000125d0: 7361 7469 7366 7920 7265 6775 6c61 7220  satisfy regular 
-000125e0: 6578 7072 6573 7369 6f6e 2070 6174 7465  expression patte
-000125f0: 726e 3a20 2828 3f21 5e5c 5c64 2b24 295e  rn: ((?!^\\d+$)^
-00012600: 5b30 2d39 612d 7a41 2d5a 2d5f 5d2b 2429  [0-9a-zA-Z-_]+$)
-00012610: 220a 2020 2020 2020 2020 2020 2020 290a  ".            ).
-00012620: 2020 2020 2020 2020 6966 2071 7561 6c69          if quali
-00012630: 6669 6572 2061 6e64 2061 7069 5f75 7469  fier and api_uti
-00012640: 6c73 2e71 7561 6c69 6669 6572 5f69 735f  ls.qualifier_is_
-00012650: 7665 7273 696f 6e28 7175 616c 6966 6965  version(qualifie
-00012660: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-00012670: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
-00012680: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
-00012690: 2020 2020 2020 2020 2020 2066 2231 2076             f"1 v
-000126a0: 616c 6964 6174 696f 6e20 6572 726f 7220  alidation error 
-000126b0: 6465 7465 6374 6564 3a20 5661 6c75 6520  detected: Value 
-000126c0: 277b 7175 616c 6966 6965 727d 2720 6174  '{qualifier}' at
-000126d0: 2027 7175 616c 6966 6965 7227 2066 6169   'qualifier' fai
-000126e0: 6c65 6420 746f 2073 6174 6973 6679 2063  led to satisfy c
-000126f0: 6f6e 7374 7261 696e 743a 204d 656d 6265  onstraint: Membe
-00012700: 7220 6d75 7374 2073 6174 6973 6679 2072  r must satisfy r
-00012710: 6567 756c 6172 2065 7870 7265 7373 696f  egular expressio
-00012720: 6e20 7061 7474 6572 6e3a 2028 5e5c 5c24  n pattern: (^\\$
-00012730: 4c41 5445 5354 2429 7c28 283f 215e 5b30  LATEST$)|((?!^[0
-00012740: 2d39 5d2b 2429 285b 612d 7a41 2d5a 302d  -9]+$)([a-zA-Z0-
-00012750: 392d 5f5d 2b29 2922 0a20 2020 2020 2020  9-_]+))".       
-00012760: 2020 2020 2029 0a20 2020 2020 2020 2066       ).        f
-00012770: 6e20 3d20 7374 6174 652e 6675 6e63 7469  n = state.functi
-00012780: 6f6e 732e 6765 7428 6675 6e63 7469 6f6e  ons.get(function
-00012790: 5f6e 616d 6529 0a20 2020 2020 2020 2069  _name).        i
-000127a0: 6620 666e 2069 7320 4e6f 6e65 3a0a 2020  f fn is None:.  
-000127b0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-000127c0: 5265 736f 7572 6365 4e6f 7446 6f75 6e64  ResourceNotFound
-000127d0: 4578 6365 7074 696f 6e28 2246 756e 6374  Exception("Funct
-000127e0: 696f 6e20 646f 6573 206e 6f74 2065 7869  ion does not exi
-000127f0: 7374 222c 2054 7970 653d 2255 7365 7222  st", Type="User"
-00012800: 290a 0a20 2020 2020 2020 2075 726c 5f63  )..        url_c
-00012810: 6f6e 6669 6720 3d20 666e 2e66 756e 6374  onfig = fn.funct
-00012820: 696f 6e5f 7572 6c5f 636f 6e66 6967 732e  ion_url_configs.
-00012830: 6765 7428 7175 616c 6966 6965 7220 6f72  get(qualifier or
-00012840: 2022 244c 4154 4553 5422 290a 2020 2020   "$LATEST").    
-00012850: 2020 2020 6966 2075 726c 5f63 6f6e 6669      if url_confi
-00012860: 673a 0a20 2020 2020 2020 2020 2020 2072  g:.            r
-00012870: 6169 7365 2052 6573 6f75 7263 6543 6f6e  aise ResourceCon
-00012880: 666c 6963 7445 7863 6570 7469 6f6e 280a  flictException(.
-00012890: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000128a0: 6622 4661 696c 6564 2074 6f20 6372 6561  f"Failed to crea
-000128b0: 7465 2066 756e 6374 696f 6e20 7572 6c20  te function url 
-000128c0: 636f 6e66 6967 2066 6f72 205b 6675 6e63  config for [func
-000128d0: 7469 6f6e 4172 6e20 3d20 7b75 726c 5f63  tionArn = {url_c
-000128e0: 6f6e 6669 672e 6675 6e63 7469 6f6e 5f61  onfig.function_a
-000128f0: 726e 7d5d 2e20 4572 726f 7220 6d65 7373  rn}]. Error mess
-00012900: 6167 653a 2020 4675 6e63 7469 6f6e 5572  age:  FunctionUr
-00012910: 6c43 6f6e 6669 6720 6578 6973 7473 2066  lConfig exists f
-00012920: 6f72 2074 6869 7320 4c61 6d62 6461 2066  or this Lambda f
-00012930: 756e 6374 696f 6e22 2c0a 2020 2020 2020  unction",.      
-00012940: 2020 2020 2020 2020 2020 5479 7065 3d22            Type="
-00012950: 5573 6572 222c 0a20 2020 2020 2020 2020  User",.         
-00012960: 2020 2029 0a0a 2020 2020 2020 2020 6966     )..        if
-00012970: 2071 7561 6c69 6669 6572 2061 6e64 2071   qualifier and q
-00012980: 7561 6c69 6669 6572 2021 3d20 2224 4c41  ualifier != "$LA
-00012990: 5445 5354 2220 616e 6420 7175 616c 6966  TEST" and qualif
-000129a0: 6965 7220 6e6f 7420 696e 2066 6e2e 616c  ier not in fn.al
-000129b0: 6961 7365 733a 0a20 2020 2020 2020 2020  iases:.         
-000129c0: 2020 2072 6169 7365 2052 6573 6f75 7263     raise Resourc
-000129d0: 654e 6f74 466f 756e 6445 7863 6570 7469  eNotFoundExcepti
-000129e0: 6f6e 2822 4675 6e63 7469 6f6e 2064 6f65  on("Function doe
-000129f0: 7320 6e6f 7420 6578 6973 7422 2c20 5479  s not exist", Ty
-00012a00: 7065 3d22 5573 6572 2229 0a0a 2020 2020  pe="User")..    
-00012a10: 2020 2020 6e6f 726d 616c 697a 6564 5f71      normalized_q
-00012a20: 7561 6c69 6669 6572 203d 2071 7561 6c69  ualifier = quali
-00012a30: 6669 6572 206f 7220 2224 4c41 5445 5354  fier or "$LATEST
-00012a40: 220a 0a20 2020 2020 2020 2066 756e 6374  "..        funct
-00012a50: 696f 6e5f 6172 6e20 3d20 280a 2020 2020  ion_arn = (.    
-00012a60: 2020 2020 2020 2020 6170 695f 7574 696c          api_util
-00012a70: 732e 7175 616c 6966 6965 645f 6c61 6d62  s.qualified_lamb
-00012a80: 6461 5f61 726e 280a 2020 2020 2020 2020  da_arn(.        
-00012a90: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
-00012aa0: 5f6e 616d 652c 2071 7561 6c69 6669 6572  _name, qualifier
-00012ab0: 2c20 636f 6e74 6578 742e 6163 636f 756e  , context.accoun
-00012ac0: 745f 6964 2c20 636f 6e74 6578 742e 7265  t_id, context.re
-00012ad0: 6769 6f6e 0a20 2020 2020 2020 2020 2020  gion.           
-00012ae0: 2029 0a20 2020 2020 2020 2020 2020 2069   ).            i
-00012af0: 6620 7175 616c 6966 6965 720a 2020 2020  f qualifier.    
-00012b00: 2020 2020 2020 2020 656c 7365 2061 7069          else api
-00012b10: 5f75 7469 6c73 2e75 6e71 7561 6c69 6669  _utils.unqualifi
-00012b20: 6564 5f6c 616d 6264 615f 6172 6e28 6675  ed_lambda_arn(fu
-00012b30: 6e63 7469 6f6e 5f6e 616d 652c 2063 6f6e  nction_name, con
-00012b40: 7465 7874 2e61 6363 6f75 6e74 5f69 642c  text.account_id,
-00012b50: 2063 6f6e 7465 7874 2e72 6567 696f 6e29   context.region)
-00012b60: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-00012b70: 2020 2020 2320 6372 6561 7465 2066 756e      # create fun
-00012b80: 6374 696f 6e20 5552 4c20 636f 6e66 6967  ction URL config
-00012b90: 0a20 2020 2020 2020 2075 726c 5f69 6420  .        url_id 
-00012ba0: 3d20 6170 695f 7574 696c 732e 6765 6e65  = api_utils.gene
-00012bb0: 7261 7465 5f72 616e 646f 6d5f 7572 6c5f  rate_random_url_
-00012bc0: 6964 2829 0a0a 2020 2020 2020 2020 686f  id()..        ho
-00012bd0: 7374 5f64 6566 696e 6974 696f 6e20 3d20  st_definition = 
-00012be0: 6c6f 6361 6c73 7461 636b 5f68 6f73 7428  localstack_host(
-00012bf0: 0a20 2020 2020 2020 2020 2020 2075 7365  .            use
-00012c00: 5f6c 6f63 616c 686f 7374 5f63 6c6f 7564  _localhost_cloud
-00012c10: 3d54 7275 652c 2063 7573 746f 6d5f 706f  =True, custom_po
-00012c20: 7274 3d63 6f6e 6669 672e 4544 4745 5f50  rt=config.EDGE_P
-00012c30: 4f52 545f 4854 5450 206f 7220 636f 6e66  ORT_HTTP or conf
-00012c40: 6967 2e45 4447 455f 504f 5254 0a20 2020  ig.EDGE_PORT.   
-00012c50: 2020 2020 2029 0a20 2020 2020 2020 2066       ).        f
-00012c60: 6e2e 6675 6e63 7469 6f6e 5f75 726c 5f63  n.function_url_c
-00012c70: 6f6e 6669 6773 5b6e 6f72 6d61 6c69 7a65  onfigs[normalize
-00012c80: 645f 7175 616c 6966 6965 725d 203d 2046  d_qualifier] = F
-00012c90: 756e 6374 696f 6e55 726c 436f 6e66 6967  unctionUrlConfig
-00012ca0: 280a 2020 2020 2020 2020 2020 2020 6675  (.            fu
-00012cb0: 6e63 7469 6f6e 5f61 726e 3d66 756e 6374  nction_arn=funct
-00012cc0: 696f 6e5f 6172 6e2c 0a20 2020 2020 2020  ion_arn,.       
-00012cd0: 2020 2020 2066 756e 6374 696f 6e5f 6e61       function_na
-00012ce0: 6d65 3d66 756e 6374 696f 6e5f 6e61 6d65  me=function_name
-00012cf0: 2c0a 2020 2020 2020 2020 2020 2020 636f  ,.            co
-00012d00: 7273 3d63 6f72 732c 0a20 2020 2020 2020  rs=cors,.       
-00012d10: 2020 2020 2075 726c 5f69 643d 7572 6c5f       url_id=url_
-00012d20: 6964 2c0a 2020 2020 2020 2020 2020 2020  id,.            
-00012d30: 7572 6c3d 6622 6874 7470 3a2f 2f7b 7572  url=f"http://{ur
-00012d40: 6c5f 6964 7d2e 6c61 6d62 6461 2d75 726c  l_id}.lambda-url
-00012d50: 2e7b 636f 6e74 6578 742e 7265 6769 6f6e  .{context.region
-00012d60: 7d2e 7b68 6f73 745f 6465 6669 6e69 7469  }.{host_definiti
-00012d70: 6f6e 2e68 6f73 745f 616e 645f 706f 7274  on.host_and_port
-00012d80: 2829 7d2f 222c 2020 2320 544f 444f 3a20  ()}/",  # TODO: 
-00012d90: 6874 7470 7320 7375 7070 6f72 740a 2020  https support.  
-00012da0: 2020 2020 2020 2020 2020 6175 7468 5f74            auth_t
-00012db0: 7970 653d 6175 7468 5f74 7970 652c 0a20  ype=auth_type,. 
-00012dc0: 2020 2020 2020 2020 2020 2063 7265 6174             creat
-00012dd0: 696f 6e5f 7469 6d65 3d61 7069 5f75 7469  ion_time=api_uti
-00012de0: 6c73 2e67 656e 6572 6174 655f 6c61 6d62  ls.generate_lamb
-00012df0: 6461 5f64 6174 6528 292c 0a20 2020 2020  da_date(),.     
-00012e00: 2020 2020 2020 206c 6173 745f 6d6f 6469         last_modi
-00012e10: 6669 6564 5f74 696d 653d 6170 695f 7574  fied_time=api_ut
-00012e20: 696c 732e 6765 6e65 7261 7465 5f6c 616d  ils.generate_lam
-00012e30: 6264 615f 6461 7465 2829 2c0a 2020 2020  bda_date(),.    
-00012e40: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
-00012e50: 2070 6572 7369 7374 2061 6e64 2073 7461   persist and sta
-00012e60: 7274 2055 524c 0a20 2020 2020 2020 2023  rt URL.        #
-00012e70: 2054 4f44 4f3a 2069 6d70 6c65 6d65 6e74   TODO: implement
-00012e80: 2055 524c 2069 6e76 6f6b 650a 2020 2020   URL invoke.    
-00012e90: 2020 2020 6170 695f 7572 6c5f 636f 6e66      api_url_conf
-00012ea0: 6967 203d 2061 7069 5f75 7469 6c73 2e6d  ig = api_utils.m
-00012eb0: 6170 5f66 756e 6374 696f 6e5f 7572 6c5f  ap_function_url_
-00012ec0: 636f 6e66 6967 280a 2020 2020 2020 2020  config(.        
-00012ed0: 2020 2020 666e 2e66 756e 6374 696f 6e5f      fn.function_
-00012ee0: 7572 6c5f 636f 6e66 6967 735b 6e6f 726d  url_configs[norm
-00012ef0: 616c 697a 6564 5f71 7561 6c69 6669 6572  alized_qualifier
-00012f00: 5d0a 2020 2020 2020 2020 290a 0a20 2020  ].        )..   
-00012f10: 2020 2020 2072 6574 7572 6e20 4372 6561       return Crea
-00012f20: 7465 4675 6e63 7469 6f6e 5572 6c43 6f6e  teFunctionUrlCon
-00012f30: 6669 6752 6573 706f 6e73 6528 0a20 2020  figResponse(.   
-00012f40: 2020 2020 2020 2020 2046 756e 6374 696f           Functio
-00012f50: 6e55 726c 3d61 7069 5f75 726c 5f63 6f6e  nUrl=api_url_con
-00012f60: 6669 675b 2246 756e 6374 696f 6e55 726c  fig["FunctionUrl
-00012f70: 225d 2c0a 2020 2020 2020 2020 2020 2020  "],.            
-00012f80: 4675 6e63 7469 6f6e 4172 6e3d 6170 695f  FunctionArn=api_
-00012f90: 7572 6c5f 636f 6e66 6967 5b22 4675 6e63  url_config["Func
-00012fa0: 7469 6f6e 4172 6e22 5d2c 0a20 2020 2020  tionArn"],.     
-00012fb0: 2020 2020 2020 2041 7574 6854 7970 653d         AuthType=
-00012fc0: 6170 695f 7572 6c5f 636f 6e66 6967 5b22  api_url_config["
-00012fd0: 4175 7468 5479 7065 225d 2c0a 2020 2020  AuthType"],.    
-00012fe0: 2020 2020 2020 2020 436f 7273 3d61 7069          Cors=api
-00012ff0: 5f75 726c 5f63 6f6e 6669 675b 2243 6f72  _url_config["Cor
-00013000: 7322 5d2c 0a20 2020 2020 2020 2020 2020  s"],.           
-00013010: 2043 7265 6174 696f 6e54 696d 653d 6170   CreationTime=ap
-00013020: 695f 7572 6c5f 636f 6e66 6967 5b22 4372  i_url_config["Cr
-00013030: 6561 7469 6f6e 5469 6d65 225d 2c0a 2020  eationTime"],.  
-00013040: 2020 2020 2020 290a 0a20 2020 2064 6566        )..    def
-00013050: 2067 6574 5f66 756e 6374 696f 6e5f 7572   get_function_ur
-00013060: 6c5f 636f 6e66 6967 280a 2020 2020 2020  l_config(.      
-00013070: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-00013080: 636f 6e74 6578 743a 2052 6571 7565 7374  context: Request
-00013090: 436f 6e74 6578 742c 0a20 2020 2020 2020  Context,.       
-000130a0: 2066 756e 6374 696f 6e5f 6e61 6d65 3a20   function_name: 
-000130b0: 4675 6e63 7469 6f6e 4e61 6d65 2c0a 2020  FunctionName,.  
-000130c0: 2020 2020 2020 7175 616c 6966 6965 723a        qualifier:
-000130d0: 2046 756e 6374 696f 6e55 726c 5175 616c   FunctionUrlQual
-000130e0: 6966 6965 7220 3d20 4e6f 6e65 2c0a 2020  ifier = None,.  
-000130f0: 2020 2920 2d3e 2047 6574 4675 6e63 7469    ) -> GetFuncti
-00013100: 6f6e 5572 6c43 6f6e 6669 6752 6573 706f  onUrlConfigRespo
-00013110: 6e73 653a 0a20 2020 2020 2020 2073 7461  nse:.        sta
-00013120: 7465 203d 206c 616d 6264 615f 7374 6f72  te = lambda_stor
-00013130: 6573 5b63 6f6e 7465 7874 2e61 6363 6f75  es[context.accou
-00013140: 6e74 5f69 645d 5b63 6f6e 7465 7874 2e72  nt_id][context.r
-00013150: 6567 696f 6e5d 0a0a 2020 2020 2020 2020  egion]..        
-00013160: 666e 5f6e 616d 652c 2071 7561 6c69 6669  fn_name, qualifi
-00013170: 6572 203d 2061 7069 5f75 7469 6c73 2e67  er = api_utils.g
-00013180: 6574 5f6e 616d 655f 616e 645f 7175 616c  et_name_and_qual
-00013190: 6966 6965 7228 0a20 2020 2020 2020 2020  ifier(.         
-000131a0: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
-000131b0: 2c20 7175 616c 6966 6965 722c 2063 6f6e  , qualifier, con
-000131c0: 7465 7874 2e72 6567 696f 6e0a 2020 2020  text.region.    
-000131d0: 2020 2020 290a 0a20 2020 2020 2020 2069      )..        i
-000131e0: 6620 7175 616c 6966 6965 7220 3d3d 2022  f qualifier == "
-000131f0: 244c 4154 4553 5422 3a0a 2020 2020 2020  $LATEST":.      
-00013200: 2020 2020 2020 7261 6973 6520 5661 6c69        raise Vali
-00013210: 6461 7469 6f6e 4578 6365 7074 696f 6e28  dationException(
-00013220: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00013230: 2022 3120 7661 6c69 6461 7469 6f6e 2065   "1 validation e
-00013240: 7272 6f72 2064 6574 6563 7465 643a 2056  rror detected: V
-00013250: 616c 7565 2027 244c 4154 4553 5427 2061  alue '$LATEST' a
-00013260: 7420 2771 7561 6c69 6669 6572 2720 6661  t 'qualifier' fa
-00013270: 696c 6564 2074 6f20 7361 7469 7366 7920  iled to satisfy 
-00013280: 636f 6e73 7472 6169 6e74 3a20 4d65 6d62  constraint: Memb
-00013290: 6572 206d 7573 7420 7361 7469 7366 7920  er must satisfy 
-000132a0: 7265 6775 6c61 7220 6578 7072 6573 7369  regular expressi
-000132b0: 6f6e 2070 6174 7465 726e 3a20 2828 3f21  on pattern: ((?!
-000132c0: 5e5c 5c64 2b24 295e 5b30 2d39 612d 7a41  ^\\d+$)^[0-9a-zA
-000132d0: 2d5a 2d5f 5d2b 2429 220a 2020 2020 2020  -Z-_]+$)".      
-000132e0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-000132f0: 6966 2071 7561 6c69 6669 6572 2061 6e64  if qualifier and
-00013300: 2061 7069 5f75 7469 6c73 2e71 7561 6c69   api_utils.quali
-00013310: 6669 6572 5f69 735f 7665 7273 696f 6e28  fier_is_version(
-00013320: 7175 616c 6966 6965 7229 3a0a 2020 2020  qualifier):.    
-00013330: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
-00013340: 6c69 6461 7469 6f6e 4578 6365 7074 696f  lidationExceptio
-00013350: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
-00013360: 2020 2066 2231 2076 616c 6964 6174 696f     f"1 validatio
-00013370: 6e20 6572 726f 7220 6465 7465 6374 6564  n error detected
-00013380: 3a20 5661 6c75 6520 277b 7175 616c 6966  : Value '{qualif
-00013390: 6965 727d 2720 6174 2027 7175 616c 6966  ier}' at 'qualif
-000133a0: 6965 7227 2066 6169 6c65 6420 746f 2073  ier' failed to s
-000133b0: 6174 6973 6679 2063 6f6e 7374 7261 696e  atisfy constrain
-000133c0: 743a 204d 656d 6265 7220 6d75 7374 2073  t: Member must s
-000133d0: 6174 6973 6679 2072 6567 756c 6172 2065  atisfy regular e
-000133e0: 7870 7265 7373 696f 6e20 7061 7474 6572  xpression patter
-000133f0: 6e3a 2028 5e5c 5c24 4c41 5445 5354 2429  n: (^\\$LATEST$)
-00013400: 7c28 283f 215e 5b30 2d39 5d2b 2429 285b  |((?!^[0-9]+$)([
-00013410: 612d 7a41 2d5a 302d 392d 5f5d 2b29 2922  a-zA-Z0-9-_]+))"
-00013420: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
-00013430: 2020 2020 2020 2020 7265 736f 6c76 6564          resolved
-00013440: 5f66 6e20 3d20 7374 6174 652e 6675 6e63  _fn = state.func
-00013450: 7469 6f6e 732e 6765 7428 666e 5f6e 616d  tions.get(fn_nam
-00013460: 6529 0a20 2020 2020 2020 2069 6620 6e6f  e).        if no
-00013470: 7420 7265 736f 6c76 6564 5f66 6e3a 0a20  t resolved_fn:. 
-00013480: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00013490: 2052 6573 6f75 7263 654e 6f74 466f 756e   ResourceNotFoun
-000134a0: 6445 7863 6570 7469 6f6e 280a 2020 2020  dException(.    
-000134b0: 2020 2020 2020 2020 2020 2020 2254 6865              "The
-000134c0: 2072 6573 6f75 7263 6520 796f 7520 7265   resource you re
-000134d0: 7175 6573 7465 6420 646f 6573 206e 6f74  quested does not
-000134e0: 2065 7869 7374 2e22 2c20 5479 7065 3d22   exist.", Type="
-000134f0: 5573 6572 220a 2020 2020 2020 2020 2020  User".          
-00013500: 2020 290a 0a20 2020 2020 2020 2071 7561    )..        qua
-00013510: 6c69 6669 6572 203d 2071 7561 6c69 6669  lifier = qualifi
-00013520: 6572 206f 7220 2224 4c41 5445 5354 220a  er or "$LATEST".
-00013530: 2020 2020 2020 2020 7572 6c5f 636f 6e66          url_conf
-00013540: 6967 203d 2072 6573 6f6c 7665 645f 666e  ig = resolved_fn
-00013550: 2e66 756e 6374 696f 6e5f 7572 6c5f 636f  .function_url_co
-00013560: 6e66 6967 732e 6765 7428 7175 616c 6966  nfigs.get(qualif
-00013570: 6965 7229 0a20 2020 2020 2020 2069 6620  ier).        if 
-00013580: 6e6f 7420 7572 6c5f 636f 6e66 6967 3a0a  not url_config:.
-00013590: 2020 2020 2020 2020 2020 2020 7261 6973              rais
-000135a0: 6520 5265 736f 7572 6365 4e6f 7446 6f75  e ResourceNotFou
-000135b0: 6e64 4578 6365 7074 696f 6e28 0a20 2020  ndException(.   
-000135c0: 2020 2020 2020 2020 2020 2020 2022 5468               "Th
-000135d0: 6520 7265 736f 7572 6365 2079 6f75 2072  e resource you r
-000135e0: 6571 7565 7374 6564 2064 6f65 7320 6e6f  equested does no
-000135f0: 7420 6578 6973 742e 222c 2054 7970 653d  t exist.", Type=
-00013600: 2255 7365 7222 0a20 2020 2020 2020 2020  "User".         
-00013610: 2020 2029 0a0a 2020 2020 2020 2020 7265     )..        re
-00013620: 7475 726e 2061 7069 5f75 7469 6c73 2e6d  turn api_utils.m
-00013630: 6170 5f66 756e 6374 696f 6e5f 7572 6c5f  ap_function_url_
-00013640: 636f 6e66 6967 2875 726c 5f63 6f6e 6669  config(url_confi
-00013650: 6729 0a0a 2020 2020 6465 6620 7570 6461  g)..    def upda
-00013660: 7465 5f66 756e 6374 696f 6e5f 7572 6c5f  te_function_url_
-00013670: 636f 6e66 6967 280a 2020 2020 2020 2020  config(.        
-00013680: 7365 6c66 2c0a 2020 2020 2020 2020 636f  self,.        co
-00013690: 6e74 6578 743a 2052 6571 7565 7374 436f  ntext: RequestCo
-000136a0: 6e74 6578 742c 0a20 2020 2020 2020 2066  ntext,.        f
-000136b0: 756e 6374 696f 6e5f 6e61 6d65 3a20 4675  unction_name: Fu
-000136c0: 6e63 7469 6f6e 4e61 6d65 2c0a 2020 2020  nctionName,.    
-000136d0: 2020 2020 7175 616c 6966 6965 723a 2046      qualifier: F
-000136e0: 756e 6374 696f 6e55 726c 5175 616c 6966  unctionUrlQualif
-000136f0: 6965 7220 3d20 4e6f 6e65 2c0a 2020 2020  ier = None,.    
-00013700: 2020 2020 6175 7468 5f74 7970 653a 2046      auth_type: F
-00013710: 756e 6374 696f 6e55 726c 4175 7468 5479  unctionUrlAuthTy
-00013720: 7065 203d 204e 6f6e 652c 0a20 2020 2020  pe = None,.     
-00013730: 2020 2063 6f72 733a 2043 6f72 7320 3d20     cors: Cors = 
-00013740: 4e6f 6e65 2c0a 2020 2020 2020 2020 696e  None,.        in
-00013750: 766f 6b65 5f6d 6f64 653a 2049 6e76 6f6b  voke_mode: Invok
-00013760: 654d 6f64 6520 3d20 4e6f 6e65 2c0a 2020  eMode = None,.  
-00013770: 2020 2920 2d3e 2055 7064 6174 6546 756e    ) -> UpdateFun
-00013780: 6374 696f 6e55 726c 436f 6e66 6967 5265  ctionUrlConfigRe
-00013790: 7370 6f6e 7365 3a0a 2020 2020 2020 2020  sponse:.        
-000137a0: 7374 6174 6520 3d20 6c61 6d62 6461 5f73  state = lambda_s
-000137b0: 746f 7265 735b 636f 6e74 6578 742e 6163  tores[context.ac
-000137c0: 636f 756e 745f 6964 5d5b 636f 6e74 6578  count_id][contex
-000137d0: 742e 7265 6769 6f6e 5d0a 0a20 2020 2020  t.region]..     
-000137e0: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
-000137f0: 2c20 7175 616c 6966 6965 7220 3d20 6170  , qualifier = ap
-00013800: 695f 7574 696c 732e 6765 745f 6e61 6d65  i_utils.get_name
-00013810: 5f61 6e64 5f71 7561 6c69 6669 6572 280a  _and_qualifier(.
-00013820: 2020 2020 2020 2020 2020 2020 6675 6e63              func
-00013830: 7469 6f6e 5f6e 616d 652c 2071 7561 6c69  tion_name, quali
-00013840: 6669 6572 2c20 636f 6e74 6578 742e 7265  fier, context.re
-00013850: 6769 6f6e 0a20 2020 2020 2020 2029 0a20  gion.        ). 
-00013860: 2020 2020 2020 2069 6620 7175 616c 6966         if qualif
-00013870: 6965 7220 3d3d 2022 244c 4154 4553 5422  ier == "$LATEST"
-00013880: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-00013890: 6973 6520 5661 6c69 6461 7469 6f6e 4578  ise ValidationEx
-000138a0: 6365 7074 696f 6e28 0a20 2020 2020 2020  ception(.       
-000138b0: 2020 2020 2020 2020 2022 3120 7661 6c69           "1 vali
-000138c0: 6461 7469 6f6e 2065 7272 6f72 2064 6574  dation error det
-000138d0: 6563 7465 643a 2056 616c 7565 2027 244c  ected: Value '$L
-000138e0: 4154 4553 5427 2061 7420 2771 7561 6c69  ATEST' at 'quali
-000138f0: 6669 6572 2720 6661 696c 6564 2074 6f20  fier' failed to 
-00013900: 7361 7469 7366 7920 636f 6e73 7472 6169  satisfy constrai
-00013910: 6e74 3a20 4d65 6d62 6572 206d 7573 7420  nt: Member must 
-00013920: 7361 7469 7366 7920 7265 6775 6c61 7220  satisfy regular 
-00013930: 6578 7072 6573 7369 6f6e 2070 6174 7465  expression patte
-00013940: 726e 3a20 2828 3f21 5e5c 5c64 2b24 295e  rn: ((?!^\\d+$)^
-00013950: 5b30 2d39 612d 7a41 2d5a 2d5f 5d2b 2429  [0-9a-zA-Z-_]+$)
-00013960: 220a 2020 2020 2020 2020 2020 2020 290a  ".            ).
-00013970: 2020 2020 2020 2020 6966 2071 7561 6c69          if quali
-00013980: 6669 6572 2061 6e64 2061 7069 5f75 7469  fier and api_uti
-00013990: 6c73 2e71 7561 6c69 6669 6572 5f69 735f  ls.qualifier_is_
-000139a0: 7665 7273 696f 6e28 7175 616c 6966 6965  version(qualifie
-000139b0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-000139c0: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
-000139d0: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
-000139e0: 2020 2020 2020 2020 2020 2066 2231 2076             f"1 v
-000139f0: 616c 6964 6174 696f 6e20 6572 726f 7220  alidation error 
-00013a00: 6465 7465 6374 6564 3a20 5661 6c75 6520  detected: Value 
-00013a10: 277b 7175 616c 6966 6965 727d 2720 6174  '{qualifier}' at
-00013a20: 2027 7175 616c 6966 6965 7227 2066 6169   'qualifier' fai
-00013a30: 6c65 6420 746f 2073 6174 6973 6679 2063  led to satisfy c
-00013a40: 6f6e 7374 7261 696e 743a 204d 656d 6265  onstraint: Membe
-00013a50: 7220 6d75 7374 2073 6174 6973 6679 2072  r must satisfy r
-00013a60: 6567 756c 6172 2065 7870 7265 7373 696f  egular expressio
-00013a70: 6e20 7061 7474 6572 6e3a 2028 5e5c 5c24  n pattern: (^\\$
-00013a80: 4c41 5445 5354 2429 7c28 283f 215e 5b30  LATEST$)|((?!^[0
-00013a90: 2d39 5d2b 2429 285b 612d 7a41 2d5a 302d  -9]+$)([a-zA-Z0-
-00013aa0: 392d 5f5d 2b29 2922 0a20 2020 2020 2020  9-_]+))".       
-00013ab0: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-00013ac0: 666e 203d 2073 7461 7465 2e66 756e 6374  fn = state.funct
-00013ad0: 696f 6e73 2e67 6574 2866 756e 6374 696f  ions.get(functio
-00013ae0: 6e5f 6e61 6d65 290a 2020 2020 2020 2020  n_name).        
-00013af0: 6966 206e 6f74 2066 6e3a 0a20 2020 2020  if not fn:.     
-00013b00: 2020 2020 2020 2072 6169 7365 2052 6573         raise Res
-00013b10: 6f75 7263 654e 6f74 466f 756e 6445 7863  ourceNotFoundExc
-00013b20: 6570 7469 6f6e 2822 4675 6e63 7469 6f6e  eption("Function
-00013b30: 2064 6f65 7320 6e6f 7420 6578 6973 7422   does not exist"
-00013b40: 2c20 5479 7065 3d22 5573 6572 2229 0a0a  , Type="User")..
-00013b50: 2020 2020 2020 2020 6e6f 726d 616c 697a          normaliz
-00013b60: 6564 5f71 7561 6c69 6669 6572 203d 2071  ed_qualifier = q
-00013b70: 7561 6c69 6669 6572 206f 7220 2224 4c41  ualifier or "$LA
-00013b80: 5445 5354 220a 0a20 2020 2020 2020 2069  TEST"..        i
-00013b90: 6620 280a 2020 2020 2020 2020 2020 2020  f (.            
-00013ba0: 6170 695f 7574 696c 732e 7175 616c 6966  api_utils.qualif
-00013bb0: 6965 725f 6973 5f61 6c69 6173 286e 6f72  ier_is_alias(nor
-00013bc0: 6d61 6c69 7a65 645f 7175 616c 6966 6965  malized_qualifie
-00013bd0: 7229 0a20 2020 2020 2020 2020 2020 2061  r).            a
-00013be0: 6e64 206e 6f72 6d61 6c69 7a65 645f 7175  nd normalized_qu
-00013bf0: 616c 6966 6965 7220 6e6f 7420 696e 2066  alifier not in f
-00013c00: 6e2e 616c 6961 7365 730a 2020 2020 2020  n.aliases.      
-00013c10: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
-00013c20: 2072 6169 7365 2052 6573 6f75 7263 654e   raise ResourceN
-00013c30: 6f74 466f 756e 6445 7863 6570 7469 6f6e  otFoundException
-00013c40: 2822 4675 6e63 7469 6f6e 2064 6f65 7320  ("Function does 
-00013c50: 6e6f 7420 6578 6973 7422 2c20 5479 7065  not exist", Type
-00013c60: 3d22 5573 6572 2229 0a0a 2020 2020 2020  ="User")..      
-00013c70: 2020 7572 6c5f 636f 6e66 6967 203d 2066    url_config = f
-00013c80: 6e2e 6675 6e63 7469 6f6e 5f75 726c 5f63  n.function_url_c
-00013c90: 6f6e 6669 6773 2e67 6574 286e 6f72 6d61  onfigs.get(norma
-00013ca0: 6c69 7a65 645f 7175 616c 6966 6965 7229  lized_qualifier)
-00013cb0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-00013cc0: 7572 6c5f 636f 6e66 6967 3a0a 2020 2020  url_config:.    
-00013cd0: 2020 2020 2020 2020 7261 6973 6520 5265          raise Re
-00013ce0: 736f 7572 6365 4e6f 7446 6f75 6e64 4578  sourceNotFoundEx
-00013cf0: 6365 7074 696f 6e28 0a20 2020 2020 2020  ception(.       
-00013d00: 2020 2020 2020 2020 2022 5468 6520 7265           "The re
-00013d10: 736f 7572 6365 2079 6f75 2072 6571 7565  source you reque
-00013d20: 7374 6564 2064 6f65 7320 6e6f 7420 6578  sted does not ex
-00013d30: 6973 742e 222c 2054 7970 653d 2255 7365  ist.", Type="Use
-00013d40: 7222 0a20 2020 2020 2020 2020 2020 2029  r".            )
-00013d50: 0a0a 2020 2020 2020 2020 6368 616e 6765  ..        change
-00013d60: 7320 3d20 7b0a 2020 2020 2020 2020 2020  s = {.          
-00013d70: 2020 226c 6173 745f 6d6f 6469 6669 6564    "last_modified
-00013d80: 5f74 696d 6522 3a20 6170 695f 7574 696c  _time": api_util
-00013d90: 732e 6765 6e65 7261 7465 5f6c 616d 6264  s.generate_lambd
-00013da0: 615f 6461 7465 2829 2c0a 2020 2020 2020  a_date(),.      
-00013db0: 2020 2020 2020 2a2a 287b 2263 6f72 7322        **({"cors"
-00013dc0: 3a20 636f 7273 7d20 6966 2063 6f72 7320  : cors} if cors 
-00013dd0: 6973 206e 6f74 204e 6f6e 6520 656c 7365  is not None else
-00013de0: 207b 7d29 2c0a 2020 2020 2020 2020 2020   {}),.          
-00013df0: 2020 2a2a 287b 2261 7574 685f 7479 7065    **({"auth_type
-00013e00: 223a 2061 7574 685f 7479 7065 7d20 6966  ": auth_type} if
-00013e10: 2061 7574 685f 7479 7065 2069 7320 6e6f   auth_type is no
-00013e20: 7420 4e6f 6e65 2065 6c73 6520 7b7d 292c  t None else {}),
-00013e30: 0a20 2020 2020 2020 207d 0a20 2020 2020  .        }.     
-00013e40: 2020 206e 6577 5f75 726c 5f63 6f6e 6669     new_url_confi
-00013e50: 6720 3d20 6461 7461 636c 6173 7365 732e  g = dataclasses.
-00013e60: 7265 706c 6163 6528 7572 6c5f 636f 6e66  replace(url_conf
-00013e70: 6967 2c20 2a2a 6368 616e 6765 7329 0a20  ig, **changes). 
-00013e80: 2020 2020 2020 2066 6e2e 6675 6e63 7469         fn.functi
-00013e90: 6f6e 5f75 726c 5f63 6f6e 6669 6773 5b6e  on_url_configs[n
-00013ea0: 6f72 6d61 6c69 7a65 645f 7175 616c 6966  ormalized_qualif
-00013eb0: 6965 725d 203d 206e 6577 5f75 726c 5f63  ier] = new_url_c
-00013ec0: 6f6e 6669 670a 0a20 2020 2020 2020 2072  onfig..        r
-00013ed0: 6574 7572 6e20 5570 6461 7465 4675 6e63  eturn UpdateFunc
-00013ee0: 7469 6f6e 5572 6c43 6f6e 6669 6752 6573  tionUrlConfigRes
-00013ef0: 706f 6e73 6528 0a20 2020 2020 2020 2020  ponse(.         
-00013f00: 2020 2046 756e 6374 696f 6e55 726c 3d6e     FunctionUrl=n
-00013f10: 6577 5f75 726c 5f63 6f6e 6669 672e 7572  ew_url_config.ur
-00013f20: 6c2c 0a20 2020 2020 2020 2020 2020 2046  l,.            F
-00013f30: 756e 6374 696f 6e41 726e 3d6e 6577 5f75  unctionArn=new_u
-00013f40: 726c 5f63 6f6e 6669 672e 6675 6e63 7469  rl_config.functi
-00013f50: 6f6e 5f61 726e 2c0a 2020 2020 2020 2020  on_arn,.        
-00013f60: 2020 2020 4175 7468 5479 7065 3d6e 6577      AuthType=new
-00013f70: 5f75 726c 5f63 6f6e 6669 672e 6175 7468  _url_config.auth
-00013f80: 5f74 7970 652c 0a20 2020 2020 2020 2020  _type,.         
-00013f90: 2020 2043 6f72 733d 6e65 775f 7572 6c5f     Cors=new_url_
-00013fa0: 636f 6e66 6967 2e63 6f72 732c 0a20 2020  config.cors,.   
-00013fb0: 2020 2020 2020 2020 2043 7265 6174 696f           Creatio
-00013fc0: 6e54 696d 653d 6e65 775f 7572 6c5f 636f  nTime=new_url_co
-00013fd0: 6e66 6967 2e63 7265 6174 696f 6e5f 7469  nfig.creation_ti
-00013fe0: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
-00013ff0: 4c61 7374 4d6f 6469 6669 6564 5469 6d65  LastModifiedTime
-00014000: 3d6e 6577 5f75 726c 5f63 6f6e 6669 672e  =new_url_config.
-00014010: 6c61 7374 5f6d 6f64 6966 6965 645f 7469  last_modified_ti
-00014020: 6d65 2c0a 2020 2020 2020 2020 290a 0a20  me,.        ).. 
-00014030: 2020 2023 2054 4f44 4f3a 2064 6f65 7320     # TODO: does 
-00014040: 6f6e 6c79 2073 7065 6369 6679 696e 6720  only specifying 
-00014050: 7468 6520 6675 6e63 7469 6f6e 206e 616d  the function nam
-00014060: 652c 2061 6c73 6f20 6465 6c65 7465 2074  e, also delete t
-00014070: 6865 206f 6e65 7320 6672 6f6d 2061 6c6c  he ones from all
-00014080: 2072 656c 6174 6564 2061 6c69 6173 6573   related aliases
-00014090: 3f0a 2020 2020 6465 6620 6465 6c65 7465  ?.    def delete
-000140a0: 5f66 756e 6374 696f 6e5f 7572 6c5f 636f  _function_url_co
-000140b0: 6e66 6967 280a 2020 2020 2020 2020 7365  nfig(.        se
-000140c0: 6c66 2c0a 2020 2020 2020 2020 636f 6e74  lf,.        cont
-000140d0: 6578 743a 2052 6571 7565 7374 436f 6e74  ext: RequestCont
-000140e0: 6578 742c 0a20 2020 2020 2020 2066 756e  ext,.        fun
-000140f0: 6374 696f 6e5f 6e61 6d65 3a20 4675 6e63  ction_name: Func
-00014100: 7469 6f6e 4e61 6d65 2c0a 2020 2020 2020  tionName,.      
-00014110: 2020 7175 616c 6966 6965 723a 2046 756e    qualifier: Fun
-00014120: 6374 696f 6e55 726c 5175 616c 6966 6965  ctionUrlQualifie
-00014130: 7220 3d20 4e6f 6e65 2c0a 2020 2020 2920  r = None,.    ) 
-00014140: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
-00014150: 2073 7461 7465 203d 206c 616d 6264 615f   state = lambda_
-00014160: 7374 6f72 6573 5b63 6f6e 7465 7874 2e61  stores[context.a
-00014170: 6363 6f75 6e74 5f69 645d 5b63 6f6e 7465  ccount_id][conte
-00014180: 7874 2e72 6567 696f 6e5d 0a0a 2020 2020  xt.region]..    
-00014190: 2020 2020 6675 6e63 7469 6f6e 5f6e 616d      function_nam
-000141a0: 652c 2071 7561 6c69 6669 6572 203d 2061  e, qualifier = a
-000141b0: 7069 5f75 7469 6c73 2e67 6574 5f6e 616d  pi_utils.get_nam
-000141c0: 655f 616e 645f 7175 616c 6966 6965 7228  e_and_qualifier(
-000141d0: 0a20 2020 2020 2020 2020 2020 2066 756e  .            fun
-000141e0: 6374 696f 6e5f 6e61 6d65 2c20 7175 616c  ction_name, qual
-000141f0: 6966 6965 722c 2063 6f6e 7465 7874 2e72  ifier, context.r
-00014200: 6567 696f 6e0a 2020 2020 2020 2020 290a  egion.        ).
-00014210: 2020 2020 2020 2020 6966 2071 7561 6c69          if quali
-00014220: 6669 6572 203d 3d20 2224 4c41 5445 5354  fier == "$LATEST
-00014230: 223a 0a20 2020 2020 2020 2020 2020 2072  ":.            r
-00014240: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
-00014250: 7863 6570 7469 6f6e 280a 2020 2020 2020  xception(.      
-00014260: 2020 2020 2020 2020 2020 2231 2076 616c            "1 val
-00014270: 6964 6174 696f 6e20 6572 726f 7220 6465  idation error de
-00014280: 7465 6374 6564 3a20 5661 6c75 6520 2724  tected: Value '$
-00014290: 4c41 5445 5354 2720 6174 2027 7175 616c  LATEST' at 'qual
-000142a0: 6966 6965 7227 2066 6169 6c65 6420 746f  ifier' failed to
-000142b0: 2073 6174 6973 6679 2063 6f6e 7374 7261   satisfy constra
-000142c0: 696e 743a 204d 656d 6265 7220 6d75 7374  int: Member must
-000142d0: 2073 6174 6973 6679 2072 6567 756c 6172   satisfy regular
-000142e0: 2065 7870 7265 7373 696f 6e20 7061 7474   expression patt
-000142f0: 6572 6e3a 2028 283f 215e 5c5c 642b 2429  ern: ((?!^\\d+$)
-00014300: 5e5b 302d 3961 2d7a 412d 5a2d 5f5d 2b24  ^[0-9a-zA-Z-_]+$
-00014310: 2922 0a20 2020 2020 2020 2020 2020 2029  )".            )
-00014320: 0a20 2020 2020 2020 2069 6620 7175 616c  .        if qual
-00014330: 6966 6965 7220 616e 6420 6170 695f 7574  ifier and api_ut
-00014340: 696c 732e 7175 616c 6966 6965 725f 6973  ils.qualifier_is
-00014350: 5f76 6572 7369 6f6e 2871 7561 6c69 6669  _version(qualifi
-00014360: 6572 293a 0a20 2020 2020 2020 2020 2020  er):.           
-00014370: 2072 6169 7365 2056 616c 6964 6174 696f   raise Validatio
-00014380: 6e45 7863 6570 7469 6f6e 280a 2020 2020  nException(.    
-00014390: 2020 2020 2020 2020 2020 2020 6622 3120              f"1 
-000143a0: 7661 6c69 6461 7469 6f6e 2065 7272 6f72  validation error
-000143b0: 2064 6574 6563 7465 643a 2056 616c 7565   detected: Value
-000143c0: 2027 7b71 7561 6c69 6669 6572 7d27 2061   '{qualifier}' a
-000143d0: 7420 2771 7561 6c69 6669 6572 2720 6661  t 'qualifier' fa
-000143e0: 696c 6564 2074 6f20 7361 7469 7366 7920  iled to satisfy 
-000143f0: 636f 6e73 7472 6169 6e74 3a20 4d65 6d62  constraint: Memb
-00014400: 6572 206d 7573 7420 7361 7469 7366 7920  er must satisfy 
-00014410: 7265 6775 6c61 7220 6578 7072 6573 7369  regular expressi
-00014420: 6f6e 2070 6174 7465 726e 3a20 285e 5c5c  on pattern: (^\\
-00014430: 244c 4154 4553 5424 297c 2828 3f21 5e5b  $LATEST$)|((?!^[
-00014440: 302d 395d 2b24 2928 5b61 2d7a 412d 5a30  0-9]+$)([a-zA-Z0
-00014450: 2d39 2d5f 5d2b 2929 220a 2020 2020 2020  -9-_]+))".      
-00014460: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00014470: 7265 736f 6c76 6564 5f66 6e20 3d20 7374  resolved_fn = st
-00014480: 6174 652e 6675 6e63 7469 6f6e 732e 6765  ate.functions.ge
-00014490: 7428 6675 6e63 7469 6f6e 5f6e 616d 6529  t(function_name)
-000144a0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-000144b0: 7265 736f 6c76 6564 5f66 6e3a 0a20 2020  resolved_fn:.   
-000144c0: 2020 2020 2020 2020 2072 6169 7365 2052           raise R
-000144d0: 6573 6f75 7263 654e 6f74 466f 756e 6445  esourceNotFoundE
-000144e0: 7863 6570 7469 6f6e 280a 2020 2020 2020  xception(.      
-000144f0: 2020 2020 2020 2020 2020 2254 6865 2072            "The r
-00014500: 6573 6f75 7263 6520 796f 7520 7265 7175  esource you requ
-00014510: 6573 7465 6420 646f 6573 206e 6f74 2065  ested does not e
-00014520: 7869 7374 2e22 2c20 5479 7065 3d22 5573  xist.", Type="Us
-00014530: 6572 220a 2020 2020 2020 2020 2020 2020  er".            
-00014540: 290a 0a20 2020 2020 2020 2071 7561 6c69  )..        quali
-00014550: 6669 6572 203d 2071 7561 6c69 6669 6572  fier = qualifier
-00014560: 206f 7220 2224 4c41 5445 5354 220a 2020   or "$LATEST".  
-00014570: 2020 2020 2020 7572 6c5f 636f 6e66 6967        url_config
-00014580: 203d 2072 6573 6f6c 7665 645f 666e 2e66   = resolved_fn.f
-00014590: 756e 6374 696f 6e5f 7572 6c5f 636f 6e66  unction_url_conf
-000145a0: 6967 732e 6765 7428 7175 616c 6966 6965  igs.get(qualifie
-000145b0: 7229 0a20 2020 2020 2020 2069 6620 6e6f  r).        if no
-000145c0: 7420 7572 6c5f 636f 6e66 6967 3a0a 2020  t url_config:.  
-000145d0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-000145e0: 5265 736f 7572 6365 4e6f 7446 6f75 6e64  ResourceNotFound
-000145f0: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
-00014600: 2020 2020 2020 2020 2020 2022 5468 6520             "The 
-00014610: 7265 736f 7572 6365 2079 6f75 2072 6571  resource you req
-00014620: 7565 7374 6564 2064 6f65 7320 6e6f 7420  uested does not 
-00014630: 6578 6973 742e 222c 2054 7970 653d 2255  exist.", Type="U
-00014640: 7365 7222 0a20 2020 2020 2020 2020 2020  ser".           
-00014650: 2029 0a0a 2020 2020 2020 2020 6465 6c20   )..        del 
-00014660: 7265 736f 6c76 6564 5f66 6e2e 6675 6e63  resolved_fn.func
-00014670: 7469 6f6e 5f75 726c 5f63 6f6e 6669 6773  tion_url_configs
-00014680: 5b71 7561 6c69 6669 6572 5d0a 0a20 2020  [qualifier]..   
-00014690: 2064 6566 206c 6973 745f 6675 6e63 7469   def list_functi
-000146a0: 6f6e 5f75 726c 5f63 6f6e 6669 6773 280a  on_url_configs(.
-000146b0: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
-000146c0: 2020 2020 2020 636f 6e74 6578 743a 2052        context: R
-000146d0: 6571 7565 7374 436f 6e74 6578 742c 0a20  equestContext,. 
-000146e0: 2020 2020 2020 2066 756e 6374 696f 6e5f         function_
-000146f0: 6e61 6d65 3a20 4675 6e63 7469 6f6e 4e61  name: FunctionNa
-00014700: 6d65 2c0a 2020 2020 2020 2020 6d61 726b  me,.        mark
-00014710: 6572 3a20 5374 7269 6e67 203d 204e 6f6e  er: String = Non
-00014720: 652c 0a20 2020 2020 2020 206d 6178 5f69  e,.        max_i
-00014730: 7465 6d73 3a20 4d61 7849 7465 6d73 203d  tems: MaxItems =
-00014740: 204e 6f6e 652c 0a20 2020 2029 202d 3e20   None,.    ) -> 
-00014750: 4c69 7374 4675 6e63 7469 6f6e 5572 6c43  ListFunctionUrlC
-00014760: 6f6e 6669 6773 5265 7370 6f6e 7365 3a0a  onfigsResponse:.
-00014770: 2020 2020 2020 2020 7374 6174 6520 3d20          state = 
-00014780: 6c61 6d62 6461 5f73 746f 7265 735b 636f  lambda_stores[co
-00014790: 6e74 6578 742e 6163 636f 756e 745f 6964  ntext.account_id
-000147a0: 5d5b 636f 6e74 6578 742e 7265 6769 6f6e  ][context.region
-000147b0: 5d0a 0a20 2020 2020 2020 2066 6e5f 6e61  ]..        fn_na
-000147c0: 6d65 203d 2061 7069 5f75 7469 6c73 2e67  me = api_utils.g
-000147d0: 6574 5f66 756e 6374 696f 6e5f 6e61 6d65  et_function_name
-000147e0: 2866 756e 6374 696f 6e5f 6e61 6d65 2c20  (function_name, 
-000147f0: 636f 6e74 6578 742e 7265 6769 6f6e 290a  context.region).
-00014800: 2020 2020 2020 2020 7265 736f 6c76 6564          resolved
-00014810: 5f66 6e20 3d20 7374 6174 652e 6675 6e63  _fn = state.func
-00014820: 7469 6f6e 732e 6765 7428 666e 5f6e 616d  tions.get(fn_nam
-00014830: 6529 0a20 2020 2020 2020 2069 6620 6e6f  e).        if no
-00014840: 7420 7265 736f 6c76 6564 5f66 6e3a 0a20  t resolved_fn:. 
-00014850: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00014860: 2052 6573 6f75 7263 654e 6f74 466f 756e   ResourceNotFoun
-00014870: 6445 7863 6570 7469 6f6e 2822 4675 6e63  dException("Func
-00014880: 7469 6f6e 2064 6f65 7320 6e6f 7420 6578  tion does not ex
-00014890: 6973 7422 2c20 5479 7065 3d22 5573 6572  ist", Type="User
-000148a0: 2229 0a0a 2020 2020 2020 2020 7572 6c5f  ")..        url_
-000148b0: 636f 6e66 6967 7320 3d20 5b0a 2020 2020  configs = [.    
-000148c0: 2020 2020 2020 2020 6170 695f 7574 696c          api_util
-000148d0: 732e 6d61 705f 6675 6e63 7469 6f6e 5f75  s.map_function_u
-000148e0: 726c 5f63 6f6e 6669 6728 666e 5f63 6f6e  rl_config(fn_con
-000148f0: 6629 0a20 2020 2020 2020 2020 2020 2066  f).            f
-00014900: 6f72 2066 6e5f 636f 6e66 2069 6e20 7265  or fn_conf in re
-00014910: 736f 6c76 6564 5f66 6e2e 6675 6e63 7469  solved_fn.functi
-00014920: 6f6e 5f75 726c 5f63 6f6e 6669 6773 2e76  on_url_configs.v
-00014930: 616c 7565 7328 290a 2020 2020 2020 2020  alues().        
-00014940: 5d0a 2020 2020 2020 2020 7572 6c5f 636f  ].        url_co
-00014950: 6e66 6967 7320 3d20 5061 6769 6e61 7465  nfigs = Paginate
-00014960: 644c 6973 7428 7572 6c5f 636f 6e66 6967  dList(url_config
-00014970: 7329 0a20 2020 2020 2020 2070 6167 652c  s).        page,
-00014980: 2074 6f6b 656e 203d 2075 726c 5f63 6f6e   token = url_con
-00014990: 6669 6773 2e67 6574 5f70 6167 6528 0a20  figs.get_page(. 
-000149a0: 2020 2020 2020 2020 2020 206c 616d 6264             lambd
-000149b0: 6120 7572 6c5f 636f 6e66 6967 3a20 7572  a url_config: ur
-000149c0: 6c5f 636f 6e66 6967 5b22 4675 6e63 7469  l_config["Functi
-000149d0: 6f6e 4172 6e22 5d2c 0a20 2020 2020 2020  onArn"],.       
-000149e0: 2020 2020 206d 6172 6b65 722c 0a20 2020       marker,.   
-000149f0: 2020 2020 2020 2020 206d 6178 5f69 7465           max_ite
-00014a00: 6d73 2c0a 2020 2020 2020 2020 290a 2020  ms,.        ).  
-00014a10: 2020 2020 2020 7572 6c5f 636f 6e66 6967        url_config
-00014a20: 7320 3d20 7061 6765 0a20 2020 2020 2020  s = page.       
-00014a30: 2072 6574 7572 6e20 4c69 7374 4675 6e63   return ListFunc
-00014a40: 7469 6f6e 5572 6c43 6f6e 6669 6773 5265  tionUrlConfigsRe
-00014a50: 7370 6f6e 7365 2846 756e 6374 696f 6e55  sponse(FunctionU
-00014a60: 726c 436f 6e66 6967 733d 7572 6c5f 636f  rlConfigs=url_co
-00014a70: 6e66 6967 732c 204e 6578 744d 6172 6b65  nfigs, NextMarke
-00014a80: 723d 746f 6b65 6e29 0a0a 2020 2020 2320  r=token)..    # 
-00014a90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00014aa0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00014ab0: 3d3d 3d3d 3d3d 3d0a 2020 2020 2320 3d3d  =======.    # ==
-00014ac0: 3d3d 3d3d 3d3d 3d3d 3d3d 2020 5065 726d  ==========  Perm
-00014ad0: 6973 7369 6f6e 7320 203d 3d3d 3d3d 3d3d  issions  =======
-00014ae0: 3d3d 3d3d 3d0a 2020 2020 2320 3d3d 3d3d  =====.    # ====
-00014af0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00014b00: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00014b10: 3d3d 3d0a 0a20 2020 2040 6861 6e64 6c65  ===..    @handle
-00014b20: 7228 2241 6464 5065 726d 6973 7369 6f6e  r("AddPermission
-00014b30: 222c 2065 7870 616e 643d 4661 6c73 6529  ", expand=False)
-00014b40: 0a20 2020 2064 6566 2061 6464 5f70 6572  .    def add_per
-00014b50: 6d69 7373 696f 6e28 0a20 2020 2020 2020  mission(.       
-00014b60: 2073 656c 662c 0a20 2020 2020 2020 2063   self,.        c
-00014b70: 6f6e 7465 7874 3a20 5265 7175 6573 7443  ontext: RequestC
-00014b80: 6f6e 7465 7874 2c0a 2020 2020 2020 2020  ontext,.        
-00014b90: 7265 7175 6573 743a 2041 6464 5065 726d  request: AddPerm
-00014ba0: 6973 7369 6f6e 5265 7175 6573 742c 0a20  issionRequest,. 
-00014bb0: 2020 2029 202d 3e20 4164 6450 6572 6d69     ) -> AddPermi
-00014bc0: 7373 696f 6e52 6573 706f 6e73 653a 0a20  ssionResponse:. 
-00014bd0: 2020 2020 2020 2066 756e 6374 696f 6e5f         function_
-00014be0: 6e61 6d65 2c20 7175 616c 6966 6965 7220  name, qualifier 
-00014bf0: 3d20 6170 695f 7574 696c 732e 6765 745f  = api_utils.get_
-00014c00: 6e61 6d65 5f61 6e64 5f71 7561 6c69 6669  name_and_qualifi
-00014c10: 6572 280a 2020 2020 2020 2020 2020 2020  er(.            
-00014c20: 7265 7175 6573 742e 6765 7428 2246 756e  request.get("Fun
-00014c30: 6374 696f 6e4e 616d 6522 292c 2072 6571  ctionName"), req
-00014c40: 7565 7374 2e67 6574 2822 5175 616c 6966  uest.get("Qualif
-00014c50: 6965 7222 292c 2063 6f6e 7465 7874 2e72  ier"), context.r
-00014c60: 6567 696f 6e0a 2020 2020 2020 2020 290a  egion.        ).
-00014c70: 0a20 2020 2020 2020 2023 2076 616c 6964  .        # valid
-00014c80: 6174 6520 7175 616c 6966 6965 720a 2020  ate qualifier.  
-00014c90: 2020 2020 2020 6966 2071 7561 6c69 6669        if qualifi
-00014ca0: 6572 2069 7320 6e6f 7420 4e6f 6e65 3a0a  er is not None:.
-00014cb0: 2020 2020 2020 2020 2020 2020 7365 6c66              self
-00014cc0: 2e5f 7661 6c69 6461 7465 5f71 7561 6c69  ._validate_quali
-00014cd0: 6669 6572 5f65 7870 7265 7373 696f 6e28  fier_expression(
-00014ce0: 7175 616c 6966 6965 7229 0a20 2020 2020  qualifier).     
-00014cf0: 2020 2020 2020 2069 6620 7175 616c 6966         if qualif
-00014d00: 6965 7220 3d3d 2022 244c 4154 4553 5422  ier == "$LATEST"
-00014d10: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00014d20: 2020 7261 6973 6520 496e 7661 6c69 6450    raise InvalidP
-00014d30: 6172 616d 6574 6572 5661 6c75 6545 7863  arameterValueExc
-00014d40: 6570 7469 6f6e 280a 2020 2020 2020 2020  eption(.        
-00014d50: 2020 2020 2020 2020 2020 2020 2257 6520              "We 
-00014d60: 6375 7272 656e 746c 7920 646f 206e 6f74  currently do not
-00014d70: 2073 7570 706f 7274 2061 6464 696e 6720   support adding 
-00014d80: 706f 6c69 6369 6573 2066 6f72 2024 4c41  policies for $LA
-00014d90: 5445 5354 2e22 2c20 5479 7065 3d22 5573  TEST.", Type="Us
-00014da0: 6572 220a 2020 2020 2020 2020 2020 2020  er".            
-00014db0: 2020 2020 290a 0a20 2020 2020 2020 2072      )..        r
-00014dc0: 6573 6f6c 7665 645f 666e 203d 2073 656c  esolved_fn = sel
-00014dd0: 662e 5f67 6574 5f66 756e 6374 696f 6e28  f._get_function(
-00014de0: 6675 6e63 7469 6f6e 5f6e 616d 652c 2063  function_name, c
-00014df0: 6f6e 7465 7874 2e61 6363 6f75 6e74 5f69  ontext.account_i
-00014e00: 642c 2063 6f6e 7465 7874 2e72 6567 696f  d, context.regio
-00014e10: 6e29 0a20 2020 2020 2020 2072 6573 6f6c  n).        resol
-00014e20: 7665 645f 7175 616c 6966 6965 722c 2066  ved_qualifier, f
-00014e30: 6e5f 6172 6e20 3d20 7365 6c66 2e5f 7265  n_arn = self._re
-00014e40: 736f 6c76 655f 666e 5f71 7561 6c69 6669  solve_fn_qualifi
-00014e50: 6572 2872 6573 6f6c 7665 645f 666e 2c20  er(resolved_fn, 
-00014e60: 7175 616c 6966 6965 7229 0a0a 2020 2020  qualifier)..    
-00014e70: 2020 2020 7265 7669 7369 6f6e 5f69 6420      revision_id 
-00014e80: 3d20 7265 7175 6573 742e 6765 7428 2252  = request.get("R
-00014e90: 6576 6973 696f 6e49 6422 290a 2020 2020  evisionId").    
-00014ea0: 2020 2020 6966 2072 6576 6973 696f 6e5f      if revision_
-00014eb0: 6964 3a0a 2020 2020 2020 2020 2020 2020  id:.            
-00014ec0: 666e 5f72 6576 6973 696f 6e5f 6964 203d  fn_revision_id =
-00014ed0: 2073 656c 662e 5f66 756e 6374 696f 6e5f   self._function_
-00014ee0: 7265 7669 7369 6f6e 5f69 6428 7265 736f  revision_id(reso
-00014ef0: 6c76 6564 5f66 6e2c 2072 6573 6f6c 7665  lved_fn, resolve
-00014f00: 645f 7175 616c 6966 6965 7229 0a20 2020  d_qualifier).   
-00014f10: 2020 2020 2020 2020 2069 6620 7265 7669           if revi
-00014f20: 7369 6f6e 5f69 6420 213d 2066 6e5f 7265  sion_id != fn_re
-00014f30: 7669 7369 6f6e 5f69 643a 0a20 2020 2020  vision_id:.     
-00014f40: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00014f50: 2050 7265 636f 6e64 6974 696f 6e46 6169   PreconditionFai
-00014f60: 6c65 6445 7863 6570 7469 6f6e 280a 2020  ledException(.  
-00014f70: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00014f80: 2020 2254 6865 2052 6576 6973 696f 6e20    "The Revision 
-00014f90: 4964 2070 726f 7669 6465 6420 646f 6573  Id provided does
-00014fa0: 206e 6f74 206d 6174 6368 2074 6865 206c   not match the l
-00014fb0: 6174 6573 7420 5265 7669 7369 6f6e 2049  atest Revision I
-00014fc0: 642e 2022 0a20 2020 2020 2020 2020 2020  d. ".           
-00014fd0: 2020 2020 2020 2020 2022 4361 6c6c 2074           "Call t
-00014fe0: 6865 2047 6574 4675 6e63 7469 6f6e 2f47  he GetFunction/G
-00014ff0: 6574 416c 6961 7320 4150 4920 746f 2072  etAlias API to r
-00015000: 6574 7269 6576 6520 7468 6520 6c61 7465  etrieve the late
-00015010: 7374 2052 6576 6973 696f 6e20 4964 222c  st Revision Id",
-00015020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015030: 2020 2020 2054 7970 653d 2255 7365 7222       Type="User"
-00015040: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00015050: 2020 290a 0a20 2020 2020 2020 2072 6571    )..        req
-00015060: 7565 7374 5f73 6964 203d 2072 6571 7565  uest_sid = reque
-00015070: 7374 5b22 5374 6174 656d 656e 7449 6422  st["StatementId"
-00015080: 5d0a 2020 2020 2020 2020 6966 206e 6f74  ].        if not
-00015090: 2062 6f6f 6c28 5354 4154 454d 454e 545f   bool(STATEMENT_
-000150a0: 4944 5f52 4547 4558 2e6d 6174 6368 2872  ID_REGEX.match(r
-000150b0: 6571 7565 7374 5f73 6964 2929 3a0a 2020  equest_sid)):.  
-000150c0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-000150d0: 5661 6c69 6461 7469 6f6e 4578 6365 7074  ValidationExcept
-000150e0: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
-000150f0: 2020 2020 2066 2231 2076 616c 6964 6174       f"1 validat
-00015100: 696f 6e20 6572 726f 7220 6465 7465 6374  ion error detect
-00015110: 6564 3a20 5661 6c75 6520 277b 7265 7175  ed: Value '{requ
-00015120: 6573 745f 7369 647d 2720 6174 2027 7374  est_sid}' at 'st
-00015130: 6174 656d 656e 7449 6427 2066 6169 6c65  atementId' faile
-00015140: 6420 746f 2073 6174 6973 6679 2063 6f6e  d to satisfy con
-00015150: 7374 7261 696e 743a 204d 656d 6265 7220  straint: Member 
-00015160: 6d75 7374 2073 6174 6973 6679 2072 6567  must satisfy reg
-00015170: 756c 6172 2065 7870 7265 7373 696f 6e20  ular expression 
-00015180: 7061 7474 6572 6e3a 2028 5b61 2d7a 412d  pattern: ([a-zA-
-00015190: 5a30 2d39 2d5f 5d2b 2922 0a20 2020 2020  Z0-9-_]+)".     
-000151a0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-000151b0: 2023 2063 6865 636b 2066 6f72 2061 6e20   # check for an 
-000151c0: 616c 7265 6164 7920 6578 6973 7469 6e67  already existing
-000151d0: 2070 6f6c 6963 7920 616e 6420 616e 7920   policy and any 
-000151e0: 636f 6e66 6c69 6374 7320 696e 2065 7869  conflicts in exi
-000151f0: 7374 696e 6720 7374 6174 656d 656e 7473  sting statements
-00015200: 0a20 2020 2020 2020 2065 7869 7374 696e  .        existin
-00015210: 675f 706f 6c69 6379 203d 2072 6573 6f6c  g_policy = resol
-00015220: 7665 645f 666e 2e70 6572 6d69 7373 696f  ved_fn.permissio
-00015230: 6e73 2e67 6574 2872 6573 6f6c 7665 645f  ns.get(resolved_
-00015240: 7175 616c 6966 6965 7229 0a20 2020 2020  qualifier).     
-00015250: 2020 2069 6620 6578 6973 7469 6e67 5f70     if existing_p
-00015260: 6f6c 6963 793a 0a20 2020 2020 2020 2020  olicy:.         
-00015270: 2020 2069 6620 7265 7175 6573 745f 7369     if request_si
-00015280: 6420 696e 205b 735b 2253 6964 225d 2066  d in [s["Sid"] f
-00015290: 6f72 2073 2069 6e20 6578 6973 7469 6e67  or s in existing
-000152a0: 5f70 6f6c 6963 792e 706f 6c69 6379 2e53  _policy.policy.S
-000152b0: 7461 7465 6d65 6e74 5d3a 0a20 2020 2020  tatement]:.     
-000152c0: 2020 2020 2020 2020 2020 2023 2075 6e69             # uni
-000152d0: 7175 656e 6573 7320 7363 6f70 653a 2073  queness scope: s
-000152e0: 7461 7465 6d65 6e74 2069 6420 6e65 6564  tatement id need
-000152f0: 7320 746f 2062 6520 756e 6971 7565 2070  s to be unique p
-00015300: 6572 2071 7561 6c69 6669 6564 2066 756e  er qualified fun
-00015310: 6374 696f 6e20 2824 4c41 5445 5354 2c20  ction ($LATEST, 
-00015320: 7665 7273 696f 6e2c 206f 7220 616c 6961  version, or alia
-00015330: 7329 0a20 2020 2020 2020 2020 2020 2020  s).             
-00015340: 2020 2023 2043 6f75 6e74 6572 6578 616d     # Counterexam
-00015350: 706c 653a 2074 6865 2073 616d 6520 7369  ple: the same si
-00015360: 6420 6361 6e20 6578 6973 7420 7769 7468  d can exist with
-00015370: 696e 2024 4c41 5445 5354 2c20 7665 7273  in $LATEST, vers
-00015380: 696f 6e2c 2061 6e64 2061 6c69 6173 0a20  ion, and alias. 
-00015390: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-000153a0: 6169 7365 2052 6573 6f75 7263 6543 6f6e  aise ResourceCon
-000153b0: 666c 6963 7445 7863 6570 7469 6f6e 280a  flictException(.
-000153c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000153d0: 2020 2020 6622 5468 6520 7374 6174 656d      f"The statem
-000153e0: 656e 7420 6964 2028 7b72 6571 7565 7374  ent id ({request
-000153f0: 5f73 6964 7d29 2070 726f 7669 6465 6420  _sid}) provided 
-00015400: 616c 7265 6164 7920 6578 6973 7473 2e20  already exists. 
-00015410: 506c 6561 7365 2070 726f 7669 6465 2061  Please provide a
-00015420: 206e 6577 2073 7461 7465 6d65 6e74 2069   new statement i
-00015430: 642c 206f 7220 7265 6d6f 7665 2074 6865  d, or remove the
-00015440: 2065 7869 7374 696e 6720 7374 6174 656d   existing statem
-00015450: 656e 742e 222c 0a20 2020 2020 2020 2020  ent.",.         
-00015460: 2020 2020 2020 2020 2020 2054 7970 653d             Type=
-00015470: 2255 7365 7222 2c0a 2020 2020 2020 2020  "User",.        
-00015480: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-00015490: 2020 2070 6572 6d69 7373 696f 6e5f 7374     permission_st
-000154a0: 6174 656d 656e 7420 3d20 6170 695f 7574  atement = api_ut
-000154b0: 696c 732e 6275 696c 645f 7374 6174 656d  ils.build_statem
-000154c0: 656e 7428 0a20 2020 2020 2020 2020 2020  ent(.           
-000154d0: 2066 6e5f 6172 6e2c 0a20 2020 2020 2020   fn_arn,.       
-000154e0: 2020 2020 2072 6571 7565 7374 5b22 5374       request["St
-000154f0: 6174 656d 656e 7449 6422 5d2c 0a20 2020  atementId"],.   
-00015500: 2020 2020 2020 2020 2072 6571 7565 7374           request
-00015510: 5b22 4163 7469 6f6e 225d 2c0a 2020 2020  ["Action"],.    
-00015520: 2020 2020 2020 2020 7265 7175 6573 745b          request[
-00015530: 2250 7269 6e63 6970 616c 225d 2c0a 2020  "Principal"],.  
-00015540: 2020 2020 2020 2020 2020 736f 7572 6365            source
-00015550: 5f61 726e 3d72 6571 7565 7374 2e67 6574  _arn=request.get
-00015560: 2822 536f 7572 6365 4172 6e22 292c 0a20  ("SourceArn"),. 
-00015570: 2020 2020 2020 2020 2020 2073 6f75 7263             sourc
-00015580: 655f 6163 636f 756e 743d 7265 7175 6573  e_account=reques
-00015590: 742e 6765 7428 2253 6f75 7263 6541 6363  t.get("SourceAcc
-000155a0: 6f75 6e74 2229 2c0a 2020 2020 2020 2020  ount"),.        
-000155b0: 2020 2020 7072 696e 6369 7061 6c5f 6f72      principal_or
-000155c0: 675f 6964 3d72 6571 7565 7374 2e67 6574  g_id=request.get
-000155d0: 2822 5072 696e 6369 7061 6c4f 7267 4944  ("PrincipalOrgID
-000155e0: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
-000155f0: 6576 656e 745f 736f 7572 6365 5f74 6f6b  event_source_tok
-00015600: 656e 3d72 6571 7565 7374 2e67 6574 2822  en=request.get("
-00015610: 4576 656e 7453 6f75 7263 6554 6f6b 656e  EventSourceToken
-00015620: 2229 2c0a 2020 2020 2020 2020 2020 2020  "),.            
-00015630: 6175 7468 5f74 7970 653d 7265 7175 6573  auth_type=reques
-00015640: 742e 6765 7428 2246 756e 6374 696f 6e55  t.get("FunctionU
-00015650: 726c 4175 7468 5479 7065 2229 2c0a 2020  rlAuthType"),.  
-00015660: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-00015670: 6e65 775f 706f 6c69 6379 203d 2065 7869  new_policy = exi
-00015680: 7374 696e 675f 706f 6c69 6379 0a20 2020  sting_policy.   
-00015690: 2020 2020 2069 6620 6e6f 7420 6578 6973       if not exis
-000156a0: 7469 6e67 5f70 6f6c 6963 793a 0a20 2020  ting_policy:.   
-000156b0: 2020 2020 2020 2020 206e 6577 5f70 6f6c           new_pol
-000156c0: 6963 7920 3d20 4675 6e63 7469 6f6e 5265  icy = FunctionRe
-000156d0: 736f 7572 6365 506f 6c69 6379 280a 2020  sourcePolicy(.  
-000156e0: 2020 2020 2020 2020 2020 2020 2020 706f                po
-000156f0: 6c69 6379 3d52 6573 6f75 7263 6550 6f6c  licy=ResourcePol
-00015700: 6963 7928 5665 7273 696f 6e3d 2232 3031  icy(Version="201
-00015710: 322d 3130 2d31 3722 2c20 4964 3d22 6465  2-10-17", Id="de
-00015720: 6661 756c 7422 2c20 5374 6174 656d 656e  fault", Statemen
-00015730: 743d 5b5d 290a 2020 2020 2020 2020 2020  t=[]).          
-00015740: 2020 290a 2020 2020 2020 2020 6e65 775f    ).        new_
-00015750: 706f 6c69 6379 2e70 6f6c 6963 792e 5374  policy.policy.St
-00015760: 6174 656d 656e 742e 6170 7065 6e64 2870  atement.append(p
-00015770: 6572 6d69 7373 696f 6e5f 7374 6174 656d  ermission_statem
-00015780: 656e 7429 0a20 2020 2020 2020 2069 6620  ent).        if 
-00015790: 6e6f 7420 6578 6973 7469 6e67 5f70 6f6c  not existing_pol
-000157a0: 6963 793a 0a20 2020 2020 2020 2020 2020  icy:.           
-000157b0: 2072 6573 6f6c 7665 645f 666e 2e70 6572   resolved_fn.per
-000157c0: 6d69 7373 696f 6e73 5b72 6573 6f6c 7665  missions[resolve
-000157d0: 645f 7175 616c 6966 6965 725d 203d 206e  d_qualifier] = n
-000157e0: 6577 5f70 6f6c 6963 790a 0a20 2020 2020  ew_policy..     
-000157f0: 2020 2023 2055 7064 6174 6520 7265 7669     # Update revi
-00015800: 7369 6f6e 2069 6420 6f66 2061 6c69 6173  sion id of alias
-00015810: 206f 7220 7665 7273 696f 6e0a 2020 2020   or version.    
-00015820: 2020 2020 2320 544f 444f 3a20 7265 2d65      # TODO: re-e
-00015830: 7661 6c75 6174 6520 6461 7461 206d 6f64  valuate data mod
-00015840: 656c 2074 6f20 7072 6576 656e 7420 7468  el to prevent th
-00015850: 6973 2064 6972 7479 2068 6163 6b20 6a75  is dirty hack ju
-00015860: 7374 2066 6f72 2062 756d 7069 6e67 2074  st for bumping t
-00015870: 6865 2072 6576 6973 696f 6e20 6964 0a20  he revision id. 
-00015880: 2020 2020 2020 2023 2054 4f44 4f3a 2064         # TODO: d
-00015890: 6f65 7320 7468 6174 206e 6565 6420 6120  oes that need a 
-000158a0: 6077 6974 6820 6675 6e63 7469 6f6e 2e6c  `with function.l
-000158b0: 6f63 6b60 2066 6f72 2061 746f 6d69 6320  ock` for atomic 
-000158c0: 7570 6461 7465 7320 6f66 2074 6865 2070  updates of the p
-000158d0: 6f6c 6963 7920 2b20 7265 7669 7369 6f6e  olicy + revision
-000158e0: 5f69 643f 0a20 2020 2020 2020 2069 6620  _id?.        if 
-000158f0: 6170 695f 7574 696c 732e 7175 616c 6966  api_utils.qualif
-00015900: 6965 725f 6973 5f61 6c69 6173 2872 6573  ier_is_alias(res
-00015910: 6f6c 7665 645f 7175 616c 6966 6965 7229  olved_qualifier)
-00015920: 3a0a 2020 2020 2020 2020 2020 2020 7265  :.            re
-00015930: 736f 6c76 6564 5f61 6c69 6173 203d 2072  solved_alias = r
-00015940: 6573 6f6c 7665 645f 666e 2e61 6c69 6173  esolved_fn.alias
-00015950: 6573 5b72 6573 6f6c 7665 645f 7175 616c  es[resolved_qual
-00015960: 6966 6965 725d 0a20 2020 2020 2020 2020  ifier].         
-00015970: 2020 2072 6573 6f6c 7665 645f 666e 2e61     resolved_fn.a
-00015980: 6c69 6173 6573 5b72 6573 6f6c 7665 645f  liases[resolved_
-00015990: 7175 616c 6966 6965 725d 203d 2064 6174  qualifier] = dat
-000159a0: 6163 6c61 7373 6573 2e72 6570 6c61 6365  aclasses.replace
-000159b0: 2872 6573 6f6c 7665 645f 616c 6961 7329  (resolved_alias)
-000159c0: 0a20 2020 2020 2020 2023 2041 7373 756d  .        # Assum
-000159d0: 6573 2074 6861 7420 6120 6e6f 6e2d 616c  es that a non-al
-000159e0: 6961 7320 6973 2061 2076 6572 7369 6f6e  ias is a version
-000159f0: 0a20 2020 2020 2020 2065 6c73 653a 0a20  .        else:. 
-00015a00: 2020 2020 2020 2020 2020 2072 6573 6f6c             resol
-00015a10: 7665 645f 7665 7273 696f 6e20 3d20 7265  ved_version = re
-00015a20: 736f 6c76 6564 5f66 6e2e 7665 7273 696f  solved_fn.versio
-00015a30: 6e73 5b72 6573 6f6c 7665 645f 7175 616c  ns[resolved_qual
-00015a40: 6966 6965 725d 0a20 2020 2020 2020 2020  ifier].         
-00015a50: 2020 2072 6573 6f6c 7665 645f 666e 2e76     resolved_fn.v
-00015a60: 6572 7369 6f6e 735b 7265 736f 6c76 6564  ersions[resolved
-00015a70: 5f71 7561 6c69 6669 6572 5d20 3d20 6461  _qualifier] = da
-00015a80: 7461 636c 6173 7365 732e 7265 706c 6163  taclasses.replac
-00015a90: 6528 0a20 2020 2020 2020 2020 2020 2020  e(.             
-00015aa0: 2020 2072 6573 6f6c 7665 645f 7665 7273     resolved_vers
-00015ab0: 696f 6e2c 2063 6f6e 6669 673d 6461 7461  ion, config=data
-00015ac0: 636c 6173 7365 732e 7265 706c 6163 6528  classes.replace(
-00015ad0: 7265 736f 6c76 6564 5f76 6572 7369 6f6e  resolved_version
-00015ae0: 2e63 6f6e 6669 6729 0a20 2020 2020 2020  .config).       
-00015af0: 2020 2020 2029 0a20 2020 2020 2020 2072       ).        r
-00015b00: 6574 7572 6e20 4164 6450 6572 6d69 7373  eturn AddPermiss
-00015b10: 696f 6e52 6573 706f 6e73 6528 5374 6174  ionResponse(Stat
-00015b20: 656d 656e 743d 6a73 6f6e 2e64 756d 7073  ement=json.dumps
-00015b30: 2870 6572 6d69 7373 696f 6e5f 7374 6174  (permission_stat
-00015b40: 656d 656e 7429 290a 0a20 2020 2064 6566  ement))..    def
-00015b50: 2072 656d 6f76 655f 7065 726d 6973 7369   remove_permissi
-00015b60: 6f6e 280a 2020 2020 2020 2020 7365 6c66  on(.        self
-00015b70: 2c0a 2020 2020 2020 2020 636f 6e74 6578  ,.        contex
-00015b80: 743a 2052 6571 7565 7374 436f 6e74 6578  t: RequestContex
-00015b90: 742c 0a20 2020 2020 2020 2066 756e 6374  t,.        funct
-00015ba0: 696f 6e5f 6e61 6d65 3a20 4675 6e63 7469  ion_name: Functi
-00015bb0: 6f6e 4e61 6d65 2c0a 2020 2020 2020 2020  onName,.        
-00015bc0: 7374 6174 656d 656e 745f 6964 3a20 4e61  statement_id: Na
-00015bd0: 6d65 7370 6163 6564 5374 6174 656d 656e  mespacedStatemen
-00015be0: 7449 642c 0a20 2020 2020 2020 2071 7561  tId,.        qua
-00015bf0: 6c69 6669 6572 3a20 5175 616c 6966 6965  lifier: Qualifie
-00015c00: 7220 3d20 4e6f 6e65 2c0a 2020 2020 2020  r = None,.      
-00015c10: 2020 7265 7669 7369 6f6e 5f69 643a 2053    revision_id: S
-00015c20: 7472 696e 6720 3d20 4e6f 6e65 2c0a 2020  tring = None,.  
-00015c30: 2020 2920 2d3e 204e 6f6e 653a 0a20 2020    ) -> None:.   
-00015c40: 2020 2020 2066 756e 6374 696f 6e5f 6e61       function_na
-00015c50: 6d65 2c20 7175 616c 6966 6965 7220 3d20  me, qualifier = 
-00015c60: 6170 695f 7574 696c 732e 6765 745f 6e61  api_utils.get_na
-00015c70: 6d65 5f61 6e64 5f71 7561 6c69 6669 6572  me_and_qualifier
-00015c80: 280a 2020 2020 2020 2020 2020 2020 6675  (.            fu
-00015c90: 6e63 7469 6f6e 5f6e 616d 652c 2071 7561  nction_name, qua
-00015ca0: 6c69 6669 6572 2c20 636f 6e74 6578 742e  lifier, context.
-00015cb0: 7265 6769 6f6e 0a20 2020 2020 2020 2029  region.        )
-00015cc0: 0a20 2020 2020 2020 2069 6620 7175 616c  .        if qual
-00015cd0: 6966 6965 7220 6973 206e 6f74 204e 6f6e  ifier is not Non
-00015ce0: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
-00015cf0: 656c 662e 5f76 616c 6964 6174 655f 7175  elf._validate_qu
-00015d00: 616c 6966 6965 725f 6578 7072 6573 7369  alifier_expressi
-00015d10: 6f6e 2871 7561 6c69 6669 6572 290a 0a20  on(qualifier).. 
-00015d20: 2020 2020 2020 2073 7461 7465 203d 206c         state = l
-00015d30: 616d 6264 615f 7374 6f72 6573 5b63 6f6e  ambda_stores[con
-00015d40: 7465 7874 2e61 6363 6f75 6e74 5f69 645d  text.account_id]
-00015d50: 5b63 6f6e 7465 7874 2e72 6567 696f 6e5d  [context.region]
-00015d60: 0a20 2020 2020 2020 2072 6573 6f6c 7665  .        resolve
-00015d70: 645f 666e 203d 2073 7461 7465 2e66 756e  d_fn = state.fun
-00015d80: 6374 696f 6e73 2e67 6574 2866 756e 6374  ctions.get(funct
-00015d90: 696f 6e5f 6e61 6d65 290a 2020 2020 2020  ion_name).      
-00015da0: 2020 6966 2072 6573 6f6c 7665 645f 666e    if resolved_fn
-00015db0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-00015dc0: 2020 2020 2020 666e 5f61 726e 203d 2061        fn_arn = a
-00015dd0: 7069 5f75 7469 6c73 2e75 6e71 7561 6c69  pi_utils.unquali
-00015de0: 6669 6564 5f6c 616d 6264 615f 6172 6e28  fied_lambda_arn(
-00015df0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00015e00: 2066 756e 6374 696f 6e5f 6e61 6d65 2c20   function_name, 
-00015e10: 636f 6e74 6578 742e 6163 636f 756e 745f  context.account_
-00015e20: 6964 2c20 636f 6e74 6578 742e 7265 6769  id, context.regi
-00015e30: 6f6e 0a20 2020 2020 2020 2020 2020 2029  on.            )
-00015e40: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00015e50: 7365 2052 6573 6f75 7263 654e 6f74 466f  se ResourceNotFo
-00015e60: 756e 6445 7863 6570 7469 6f6e 2866 224e  undException(f"N
-00015e70: 6f20 706f 6c69 6379 2066 6f75 6e64 2066  o policy found f
-00015e80: 6f72 3a20 7b66 6e5f 6172 6e7d 222c 2054  or: {fn_arn}", T
-00015e90: 7970 653d 2255 7365 7222 290a 0a20 2020  ype="User")..   
-00015ea0: 2020 2020 2072 6573 6f6c 7665 645f 7175       resolved_qu
-00015eb0: 616c 6966 6965 722c 205f 203d 2073 656c  alifier, _ = sel
-00015ec0: 662e 5f72 6573 6f6c 7665 5f66 6e5f 7175  f._resolve_fn_qu
-00015ed0: 616c 6966 6965 7228 7265 736f 6c76 6564  alifier(resolved
-00015ee0: 5f66 6e2c 2071 7561 6c69 6669 6572 290a  _fn, qualifier).
-00015ef0: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
-00015f00: 5f70 6572 6d69 7373 696f 6e20 3d20 7265  _permission = re
-00015f10: 736f 6c76 6564 5f66 6e2e 7065 726d 6973  solved_fn.permis
-00015f20: 7369 6f6e 732e 6765 7428 7265 736f 6c76  sions.get(resolv
-00015f30: 6564 5f71 7561 6c69 6669 6572 290a 2020  ed_qualifier).  
-00015f40: 2020 2020 2020 6966 206e 6f74 2066 756e        if not fun
-00015f50: 6374 696f 6e5f 7065 726d 6973 7369 6f6e  ction_permission
-00015f60: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-00015f70: 6973 6520 5265 736f 7572 6365 4e6f 7446  ise ResourceNotF
-00015f80: 6f75 6e64 4578 6365 7074 696f 6e28 0a20  oundException(. 
-00015f90: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00015fa0: 4e6f 2070 6f6c 6963 7920 6973 2061 7373  No policy is ass
-00015fb0: 6f63 6961 7465 6420 7769 7468 2074 6865  ociated with the
-00015fc0: 2067 6976 656e 2072 6573 6f75 7263 652e   given resource.
-00015fd0: 222c 2054 7970 653d 2255 7365 7222 0a20  ", Type="User". 
-00015fe0: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-00015ff0: 2020 2020 2020 2320 7472 7920 746f 2066        # try to f
-00016000: 696e 6420 7374 6174 656d 656e 7420 696e  ind statement in
-00016010: 2070 6f6c 6963 7920 616e 6420 6465 6c65   policy and dele
-00016020: 7465 2069 740a 2020 2020 2020 2020 7374  te it.        st
-00016030: 6174 656d 656e 7420 3d20 4e6f 6e65 0a20  atement = None. 
-00016040: 2020 2020 2020 2066 6f72 2073 2069 6e20         for s in 
-00016050: 6675 6e63 7469 6f6e 5f70 6572 6d69 7373  function_permiss
-00016060: 696f 6e2e 706f 6c69 6379 2e53 7461 7465  ion.policy.State
-00016070: 6d65 6e74 3a0a 2020 2020 2020 2020 2020  ment:.          
-00016080: 2020 6966 2073 5b22 5369 6422 5d20 3d3d    if s["Sid"] ==
-00016090: 2073 7461 7465 6d65 6e74 5f69 643a 0a20   statement_id:. 
-000160a0: 2020 2020 2020 2020 2020 2020 2020 2073                 s
-000160b0: 7461 7465 6d65 6e74 203d 2073 0a20 2020  tatement = s.   
-000160c0: 2020 2020 2020 2020 2020 2020 2062 7265               bre
-000160d0: 616b 0a0a 2020 2020 2020 2020 6966 206e  ak..        if n
-000160e0: 6f74 2073 7461 7465 6d65 6e74 3a0a 2020  ot statement:.  
-000160f0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00016100: 5265 736f 7572 6365 4e6f 7446 6f75 6e64  ResourceNotFound
-00016110: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
-00016120: 2020 2020 2020 2020 2020 2066 2253 7461             f"Sta
-00016130: 7465 6d65 6e74 207b 7374 6174 656d 656e  tement {statemen
-00016140: 745f 6964 7d20 6973 206e 6f74 2066 6f75  t_id} is not fou
-00016150: 6e64 2069 6e20 7265 736f 7572 6365 2070  nd in resource p
-00016160: 6f6c 6963 792e 222c 2054 7970 653d 2255  olicy.", Type="U
-00016170: 7365 7222 0a20 2020 2020 2020 2020 2020  ser".           
-00016180: 2029 0a20 2020 2020 2020 2066 6e5f 7265   ).        fn_re
-00016190: 7669 7369 6f6e 5f69 6420 3d20 7365 6c66  vision_id = self
-000161a0: 2e5f 6675 6e63 7469 6f6e 5f72 6576 6973  ._function_revis
-000161b0: 696f 6e5f 6964 2872 6573 6f6c 7665 645f  ion_id(resolved_
-000161c0: 666e 2c20 7265 736f 6c76 6564 5f71 7561  fn, resolved_qua
-000161d0: 6c69 6669 6572 290a 2020 2020 2020 2020  lifier).        
-000161e0: 6966 2072 6576 6973 696f 6e5f 6964 2061  if revision_id a
-000161f0: 6e64 2072 6576 6973 696f 6e5f 6964 2021  nd revision_id !
-00016200: 3d20 666e 5f72 6576 6973 696f 6e5f 6964  = fn_revision_id
-00016210: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-00016220: 6973 6520 5072 6563 6f6e 6469 7469 6f6e  ise Precondition
-00016230: 4661 696c 6564 4578 6365 7074 696f 6e28  FailedException(
-00016240: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00016250: 2022 5468 6520 5265 7669 7369 6f6e 2049   "The Revision I
-00016260: 6420 7072 6f76 6964 6564 2064 6f65 7320  d provided does 
-00016270: 6e6f 7420 6d61 7463 6820 7468 6520 6c61  not match the la
-00016280: 7465 7374 2052 6576 6973 696f 6e20 4964  test Revision Id
-00016290: 2e20 220a 2020 2020 2020 2020 2020 2020  . ".            
-000162a0: 2020 2020 2243 616c 6c20 7468 6520 4765      "Call the Ge
-000162b0: 7446 756e 6374 696f 6e2f 4765 7441 6c69  tFunction/GetAli
-000162c0: 6173 2041 5049 2074 6f20 7265 7472 6965  as API to retrie
-000162d0: 7665 2074 6865 206c 6174 6573 7420 5265  ve the latest Re
-000162e0: 7669 7369 6f6e 2049 6422 2c0a 2020 2020  vision Id",.    
-000162f0: 2020 2020 2020 2020 2020 2020 5479 7065              Type
-00016300: 3d22 5573 6572 222c 0a20 2020 2020 2020  ="User",.       
-00016310: 2020 2020 2029 0a20 2020 2020 2020 2066       ).        f
-00016320: 756e 6374 696f 6e5f 7065 726d 6973 7369  unction_permissi
-00016330: 6f6e 2e70 6f6c 6963 792e 5374 6174 656d  on.policy.Statem
-00016340: 656e 742e 7265 6d6f 7665 2873 7461 7465  ent.remove(state
-00016350: 6d65 6e74 290a 0a20 2020 2020 2020 2023  ment)..        #
-00016360: 2055 7064 6174 6520 7265 7669 7369 6f6e   Update revision
-00016370: 2069 6420 666f 7220 616c 6961 7320 6f72   id for alias or
-00016380: 2076 6572 7369 6f6e 0a20 2020 2020 2020   version.       
-00016390: 2023 2054 4f44 4f3a 2072 652d 6576 616c   # TODO: re-eval
-000163a0: 7561 7465 2064 6174 6120 6d6f 6465 6c20  uate data model 
-000163b0: 746f 2070 7265 7665 6e74 2074 6869 7320  to prevent this 
-000163c0: 6469 7274 7920 6861 636b 206a 7573 7420  dirty hack just 
-000163d0: 666f 7220 6275 6d70 696e 6720 7468 6520  for bumping the 
-000163e0: 7265 7669 7369 6f6e 2069 640a 2020 2020  revision id.    
-000163f0: 2020 2020 2320 544f 444f 3a20 646f 6573      # TODO: does
-00016400: 2074 6861 7420 6e65 6564 2061 2060 7769   that need a `wi
-00016410: 7468 2066 756e 6374 696f 6e2e 6c6f 636b  th function.lock
-00016420: 6020 666f 7220 6174 6f6d 6963 2075 7064  ` for atomic upd
-00016430: 6174 6573 206f 6620 7468 6520 706f 6c69  ates of the poli
-00016440: 6379 202b 2072 6576 6973 696f 6e5f 6964  cy + revision_id
-00016450: 3f0a 2020 2020 2020 2020 6966 2061 7069  ?.        if api
-00016460: 5f75 7469 6c73 2e71 7561 6c69 6669 6572  _utils.qualifier
-00016470: 5f69 735f 616c 6961 7328 7265 736f 6c76  _is_alias(resolv
-00016480: 6564 5f71 7561 6c69 6669 6572 293a 0a20  ed_qualifier):. 
-00016490: 2020 2020 2020 2020 2020 2072 6573 6f6c             resol
-000164a0: 7665 645f 616c 6961 7320 3d20 7265 736f  ved_alias = reso
-000164b0: 6c76 6564 5f66 6e2e 616c 6961 7365 735b  lved_fn.aliases[
-000164c0: 7265 736f 6c76 6564 5f71 7561 6c69 6669  resolved_qualifi
-000164d0: 6572 5d0a 2020 2020 2020 2020 2020 2020  er].            
-000164e0: 7265 736f 6c76 6564 5f66 6e2e 616c 6961  resolved_fn.alia
-000164f0: 7365 735b 7265 736f 6c76 6564 5f71 7561  ses[resolved_qua
-00016500: 6c69 6669 6572 5d20 3d20 6461 7461 636c  lifier] = datacl
-00016510: 6173 7365 732e 7265 706c 6163 6528 7265  asses.replace(re
-00016520: 736f 6c76 6564 5f61 6c69 6173 290a 2020  solved_alias).  
-00016530: 2020 2020 2020 2320 4173 7375 6d65 7320        # Assumes 
-00016540: 7468 6174 2061 206e 6f6e 2d61 6c69 6173  that a non-alias
-00016550: 2069 7320 6120 7665 7273 696f 6e0a 2020   is a version.  
-00016560: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
-00016570: 2020 2020 2020 2020 7265 736f 6c76 6564          resolved
-00016580: 5f76 6572 7369 6f6e 203d 2072 6573 6f6c  _version = resol
-00016590: 7665 645f 666e 2e76 6572 7369 6f6e 735b  ved_fn.versions[
-000165a0: 7265 736f 6c76 6564 5f71 7561 6c69 6669  resolved_qualifi
-000165b0: 6572 5d0a 2020 2020 2020 2020 2020 2020  er].            
-000165c0: 7265 736f 6c76 6564 5f66 6e2e 7665 7273  resolved_fn.vers
-000165d0: 696f 6e73 5b72 6573 6f6c 7665 645f 7175  ions[resolved_qu
-000165e0: 616c 6966 6965 725d 203d 2064 6174 6163  alifier] = datac
-000165f0: 6c61 7373 6573 2e72 6570 6c61 6365 280a  lasses.replace(.
-00016600: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00016610: 7265 736f 6c76 6564 5f76 6572 7369 6f6e  resolved_version
-00016620: 2c20 636f 6e66 6967 3d64 6174 6163 6c61  , config=datacla
-00016630: 7373 6573 2e72 6570 6c61 6365 2872 6573  sses.replace(res
-00016640: 6f6c 7665 645f 7665 7273 696f 6e2e 636f  olved_version.co
-00016650: 6e66 6967 290a 2020 2020 2020 2020 2020  nfig).          
-00016660: 2020 290a 0a20 2020 2020 2020 2023 2072    )..        # r
-00016670: 656d 6f76 6520 7468 6520 706f 6c69 6379  emove the policy
-00016680: 2061 7320 6120 7768 6f6c 6520 7768 656e   as a whole when
-00016690: 2074 6865 7265 2773 206e 6f20 7374 6174   there's no stat
-000166a0: 656d 656e 7420 6c65 6674 2069 6e20 6974  ement left in it
-000166b0: 0a20 2020 2020 2020 2069 6620 6c65 6e28  .        if len(
-000166c0: 6675 6e63 7469 6f6e 5f70 6572 6d69 7373  function_permiss
-000166d0: 696f 6e2e 706f 6c69 6379 2e53 7461 7465  ion.policy.State
-000166e0: 6d65 6e74 2920 3d3d 2030 3a0a 2020 2020  ment) == 0:.    
-000166f0: 2020 2020 2020 2020 6465 6c20 7265 736f          del reso
-00016700: 6c76 6564 5f66 6e2e 7065 726d 6973 7369  lved_fn.permissi
-00016710: 6f6e 735b 7265 736f 6c76 6564 5f71 7561  ons[resolved_qua
-00016720: 6c69 6669 6572 5d0a 0a20 2020 2064 6566  lifier]..    def
-00016730: 2067 6574 5f70 6f6c 6963 7928 0a20 2020   get_policy(.   
-00016740: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-00016750: 2020 2063 6f6e 7465 7874 3a20 5265 7175     context: Requ
-00016760: 6573 7443 6f6e 7465 7874 2c0a 2020 2020  estContext,.    
-00016770: 2020 2020 6675 6e63 7469 6f6e 5f6e 616d      function_nam
-00016780: 653a 204e 616d 6573 7061 6365 6446 756e  e: NamespacedFun
-00016790: 6374 696f 6e4e 616d 652c 0a20 2020 2020  ctionName,.     
-000167a0: 2020 2071 7561 6c69 6669 6572 3a20 5175     qualifier: Qu
-000167b0: 616c 6966 6965 7220 3d20 4e6f 6e65 2c0a  alifier = None,.
-000167c0: 2020 2020 2920 2d3e 2047 6574 506f 6c69      ) -> GetPoli
-000167d0: 6379 5265 7370 6f6e 7365 3a0a 2020 2020  cyResponse:.    
-000167e0: 2020 2020 6675 6e63 7469 6f6e 5f6e 616d      function_nam
-000167f0: 652c 2071 7561 6c69 6669 6572 203d 2061  e, qualifier = a
-00016800: 7069 5f75 7469 6c73 2e67 6574 5f6e 616d  pi_utils.get_nam
-00016810: 655f 616e 645f 7175 616c 6966 6965 7228  e_and_qualifier(
-00016820: 0a20 2020 2020 2020 2020 2020 2066 756e  .            fun
-00016830: 6374 696f 6e5f 6e61 6d65 2c20 7175 616c  ction_name, qual
-00016840: 6966 6965 722c 2063 6f6e 7465 7874 2e72  ifier, context.r
-00016850: 6567 696f 6e0a 2020 2020 2020 2020 290a  egion.        ).
-00016860: 0a20 2020 2020 2020 2069 6620 7175 616c  .        if qual
-00016870: 6966 6965 7220 6973 206e 6f74 204e 6f6e  ifier is not Non
-00016880: 653a 0a20 2020 2020 2020 2020 2020 2073  e:.            s
-00016890: 656c 662e 5f76 616c 6964 6174 655f 7175  elf._validate_qu
-000168a0: 616c 6966 6965 725f 6578 7072 6573 7369  alifier_expressi
-000168b0: 6f6e 2871 7561 6c69 6669 6572 290a 0a20  on(qualifier).. 
-000168c0: 2020 2020 2020 2072 6573 6f6c 7665 645f         resolved_
-000168d0: 666e 203d 2073 656c 662e 5f67 6574 5f66  fn = self._get_f
-000168e0: 756e 6374 696f 6e28 6675 6e63 7469 6f6e  unction(function
-000168f0: 5f6e 616d 652c 2063 6f6e 7465 7874 2e61  _name, context.a
-00016900: 6363 6f75 6e74 5f69 642c 2063 6f6e 7465  ccount_id, conte
-00016910: 7874 2e72 6567 696f 6e29 0a0a 2020 2020  xt.region)..    
-00016920: 2020 2020 7265 736f 6c76 6564 5f71 7561      resolved_qua
-00016930: 6c69 6669 6572 203d 2071 7561 6c69 6669  lifier = qualifi
-00016940: 6572 206f 7220 2224 4c41 5445 5354 220a  er or "$LATEST".
-00016950: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
-00016960: 5f70 6572 6d69 7373 696f 6e20 3d20 7265  _permission = re
-00016970: 736f 6c76 6564 5f66 6e2e 7065 726d 6973  solved_fn.permis
-00016980: 7369 6f6e 732e 6765 7428 7265 736f 6c76  sions.get(resolv
-00016990: 6564 5f71 7561 6c69 6669 6572 290a 2020  ed_qualifier).  
-000169a0: 2020 2020 2020 6966 206e 6f74 2066 756e        if not fun
-000169b0: 6374 696f 6e5f 7065 726d 6973 7369 6f6e  ction_permission
-000169c0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-000169d0: 6973 6520 5265 736f 7572 6365 4e6f 7446  ise ResourceNotF
-000169e0: 6f75 6e64 4578 6365 7074 696f 6e28 0a20  oundException(. 
-000169f0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00016a00: 5468 6520 7265 736f 7572 6365 2079 6f75  The resource you
-00016a10: 2072 6571 7565 7374 6564 2064 6f65 7320   requested does 
-00016a20: 6e6f 7420 6578 6973 742e 222c 2054 7970  not exist.", Typ
-00016a30: 653d 2255 7365 7222 0a20 2020 2020 2020  e="User".       
-00016a40: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-00016a50: 666e 5f72 6576 6973 696f 6e5f 6964 203d  fn_revision_id =
-00016a60: 204e 6f6e 650a 2020 2020 2020 2020 6966   None.        if
-00016a70: 2061 7069 5f75 7469 6c73 2e71 7561 6c69   api_utils.quali
-00016a80: 6669 6572 5f69 735f 616c 6961 7328 7265  fier_is_alias(re
-00016a90: 736f 6c76 6564 5f71 7561 6c69 6669 6572  solved_qualifier
-00016aa0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-00016ab0: 6573 6f6c 7665 645f 616c 6961 7320 3d20  esolved_alias = 
-00016ac0: 7265 736f 6c76 6564 5f66 6e2e 616c 6961  resolved_fn.alia
-00016ad0: 7365 735b 7265 736f 6c76 6564 5f71 7561  ses[resolved_qua
-00016ae0: 6c69 6669 6572 5d0a 2020 2020 2020 2020  lifier].        
-00016af0: 2020 2020 666e 5f72 6576 6973 696f 6e5f      fn_revision_
-00016b00: 6964 203d 2072 6573 6f6c 7665 645f 616c  id = resolved_al
-00016b10: 6961 732e 7265 7669 7369 6f6e 5f69 640a  ias.revision_id.
-00016b20: 2020 2020 2020 2020 2320 4173 7375 6d65          # Assume
-00016b30: 7320 7468 6174 2061 206e 6f6e 2d61 6c69  s that a non-ali
-00016b40: 6173 2069 7320 6120 7665 7273 696f 6e0a  as is a version.
-00016b50: 2020 2020 2020 2020 656c 7365 3a0a 2020          else:.  
-00016b60: 2020 2020 2020 2020 2020 7265 736f 6c76            resolv
-00016b70: 6564 5f76 6572 7369 6f6e 203d 2072 6573  ed_version = res
-00016b80: 6f6c 7665 645f 666e 2e76 6572 7369 6f6e  olved_fn.version
-00016b90: 735b 7265 736f 6c76 6564 5f71 7561 6c69  s[resolved_quali
-00016ba0: 6669 6572 5d0a 2020 2020 2020 2020 2020  fier].          
-00016bb0: 2020 666e 5f72 6576 6973 696f 6e5f 6964    fn_revision_id
-00016bc0: 203d 2072 6573 6f6c 7665 645f 7665 7273   = resolved_vers
-00016bd0: 696f 6e2e 636f 6e66 6967 2e72 6576 6973  ion.config.revis
-00016be0: 696f 6e5f 6964 0a0a 2020 2020 2020 2020  ion_id..        
-00016bf0: 7265 7475 726e 2047 6574 506f 6c69 6379  return GetPolicy
-00016c00: 5265 7370 6f6e 7365 280a 2020 2020 2020  Response(.      
-00016c10: 2020 2020 2020 506f 6c69 6379 3d6a 736f        Policy=jso
-00016c20: 6e2e 6475 6d70 7328 6461 7461 636c 6173  n.dumps(dataclas
-00016c30: 7365 732e 6173 6469 6374 2866 756e 6374  ses.asdict(funct
-00016c40: 696f 6e5f 7065 726d 6973 7369 6f6e 2e70  ion_permission.p
-00016c50: 6f6c 6963 7929 292c 0a20 2020 2020 2020  olicy)),.       
-00016c60: 2020 2020 2052 6576 6973 696f 6e49 643d       RevisionId=
-00016c70: 666e 5f72 6576 6973 696f 6e5f 6964 2c0a  fn_revision_id,.
-00016c80: 2020 2020 2020 2020 290a 0a20 2020 2023          )..    #
-00016c90: 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   ===============
-00016ca0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00016cb0: 3d3d 3d3d 3d3d 3d3d 0a20 2020 2023 203d  ========.    # =
-00016cc0: 3d3d 3d3d 3d3d 3d20 2043 6f64 6520 7369  =======  Code si
-00016cd0: 676e 696e 6720 636f 6e66 6967 2020 3d3d  gning config  ==
-00016ce0: 3d3d 3d3d 3d3d 0a20 2020 2023 203d 3d3d  ======.    # ===
-00016cf0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00016d00: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00016d10: 3d3d 3d3d 0a0a 2020 2020 6465 6620 6372  ====..    def cr
-00016d20: 6561 7465 5f63 6f64 655f 7369 676e 696e  eate_code_signin
-00016d30: 675f 636f 6e66 6967 280a 2020 2020 2020  g_config(.      
-00016d40: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-00016d50: 636f 6e74 6578 743a 2052 6571 7565 7374  context: Request
-00016d60: 436f 6e74 6578 742c 0a20 2020 2020 2020  Context,.       
-00016d70: 2061 6c6c 6f77 6564 5f70 7562 6c69 7368   allowed_publish
-00016d80: 6572 733a 2041 6c6c 6f77 6564 5075 626c  ers: AllowedPubl
-00016d90: 6973 6865 7273 2c0a 2020 2020 2020 2020  ishers,.        
-00016da0: 6465 7363 7269 7074 696f 6e3a 2044 6573  description: Des
-00016db0: 6372 6970 7469 6f6e 203d 204e 6f6e 652c  cription = None,
-00016dc0: 0a20 2020 2020 2020 2063 6f64 655f 7369  .        code_si
-00016dd0: 676e 696e 675f 706f 6c69 6369 6573 3a20  gning_policies: 
-00016de0: 436f 6465 5369 676e 696e 6750 6f6c 6963  CodeSigningPolic
-00016df0: 6965 7320 3d20 4e6f 6e65 2c0a 2020 2020  ies = None,.    
-00016e00: 2920 2d3e 2043 7265 6174 6543 6f64 6553  ) -> CreateCodeS
-00016e10: 6967 6e69 6e67 436f 6e66 6967 5265 7370  igningConfigResp
-00016e20: 6f6e 7365 3a0a 0a20 2020 2020 2020 2073  onse:..        s
-00016e30: 7461 7465 203d 206c 616d 6264 615f 7374  tate = lambda_st
-00016e40: 6f72 6573 5b63 6f6e 7465 7874 2e61 6363  ores[context.acc
-00016e50: 6f75 6e74 5f69 645d 5b63 6f6e 7465 7874  ount_id][context
-00016e60: 2e72 6567 696f 6e5d 0a20 2020 2020 2020  .region].       
-00016e70: 2023 2054 4f44 4f3a 2063 616e 2074 6865   # TODO: can the
-00016e80: 7265 2062 6520 6475 706c 6963 6174 6573  re be duplicates
-00016e90: 3f0a 2020 2020 2020 2020 6373 635f 6964  ?.        csc_id
-00016ea0: 203d 2066 2263 7363 2d7b 6765 745f 7261   = f"csc-{get_ra
-00016eb0: 6e64 6f6d 5f68 6578 2831 3729 7d22 2020  ndom_hex(17)}"  
-00016ec0: 2320 652e 672e 2027 6373 632d 3037 3763  # e.g. 'csc-077c
-00016ed0: 3333 6234 6331 3965 3236 3033 3627 0a20  33b4c19e26036'. 
-00016ee0: 2020 2020 2020 2063 7363 5f61 726e 203d         csc_arn =
-00016ef0: 2028 0a20 2020 2020 2020 2020 2020 2066   (.            f
-00016f00: 2261 726e 3a61 7773 3a6c 616d 6264 613a  "arn:aws:lambda:
-00016f10: 7b63 6f6e 7465 7874 2e72 6567 696f 6e7d  {context.region}
-00016f20: 3a7b 636f 6e74 6578 742e 6163 636f 756e  :{context.accoun
-00016f30: 745f 6964 7d3a 636f 6465 2d73 6967 6e69  t_id}:code-signi
-00016f40: 6e67 2d63 6f6e 6669 673a 7b63 7363 5f69  ng-config:{csc_i
-00016f50: 647d 220a 2020 2020 2020 2020 290a 2020  d}".        ).  
-00016f60: 2020 2020 2020 6373 6320 3d20 436f 6465        csc = Code
-00016f70: 5369 676e 696e 6743 6f6e 6669 6728 0a20  SigningConfig(. 
-00016f80: 2020 2020 2020 2020 2020 2063 7363 5f69             csc_i
-00016f90: 643d 6373 635f 6964 2c0a 2020 2020 2020  d=csc_id,.      
-00016fa0: 2020 2020 2020 6172 6e3d 6373 635f 6172        arn=csc_ar
-00016fb0: 6e2c 0a20 2020 2020 2020 2020 2020 2061  n,.            a
-00016fc0: 6c6c 6f77 6564 5f70 7562 6c69 7368 6572  llowed_publisher
-00016fd0: 733d 616c 6c6f 7765 645f 7075 626c 6973  s=allowed_publis
-00016fe0: 6865 7273 2c0a 2020 2020 2020 2020 2020  hers,.          
-00016ff0: 2020 706f 6c69 6369 6573 3d63 6f64 655f    policies=code_
-00017000: 7369 676e 696e 675f 706f 6c69 6369 6573  signing_policies
-00017010: 2c0a 2020 2020 2020 2020 2020 2020 6c61  ,.            la
-00017020: 7374 5f6d 6f64 6966 6965 643d 6170 695f  st_modified=api_
-00017030: 7574 696c 732e 6765 6e65 7261 7465 5f6c  utils.generate_l
-00017040: 616d 6264 615f 6461 7465 2829 2c0a 2020  ambda_date(),.  
-00017050: 2020 2020 2020 2020 2020 6465 7363 7269            descri
-00017060: 7074 696f 6e3d 6465 7363 7269 7074 696f  ption=descriptio
-00017070: 6e2c 0a20 2020 2020 2020 2029 0a20 2020  n,.        ).   
-00017080: 2020 2020 2073 7461 7465 2e63 6f64 655f       state.code_
-00017090: 7369 676e 696e 675f 636f 6e66 6967 735b  signing_configs[
-000170a0: 6373 635f 6172 6e5d 203d 2063 7363 0a20  csc_arn] = csc. 
-000170b0: 2020 2020 2020 2072 6574 7572 6e20 4372         return Cr
-000170c0: 6561 7465 436f 6465 5369 676e 696e 6743  eateCodeSigningC
-000170d0: 6f6e 6669 6752 6573 706f 6e73 6528 436f  onfigResponse(Co
-000170e0: 6465 5369 676e 696e 6743 6f6e 6669 673d  deSigningConfig=
-000170f0: 6170 695f 7574 696c 732e 6d61 705f 6373  api_utils.map_cs
-00017100: 6328 6373 6329 290a 0a20 2020 2064 6566  c(csc))..    def
-00017110: 2070 7574 5f66 756e 6374 696f 6e5f 636f   put_function_co
-00017120: 6465 5f73 6967 6e69 6e67 5f63 6f6e 6669  de_signing_confi
-00017130: 6728 0a20 2020 2020 2020 2073 656c 662c  g(.        self,
-00017140: 0a20 2020 2020 2020 2063 6f6e 7465 7874  .        context
-00017150: 3a20 5265 7175 6573 7443 6f6e 7465 7874  : RequestContext
-00017160: 2c0a 2020 2020 2020 2020 636f 6465 5f73  ,.        code_s
-00017170: 6967 6e69 6e67 5f63 6f6e 6669 675f 6172  igning_config_ar
-00017180: 6e3a 2043 6f64 6553 6967 6e69 6e67 436f  n: CodeSigningCo
-00017190: 6e66 6967 4172 6e2c 0a20 2020 2020 2020  nfigArn,.       
-000171a0: 2066 756e 6374 696f 6e5f 6e61 6d65 3a20   function_name: 
-000171b0: 4675 6e63 7469 6f6e 4e61 6d65 2c0a 2020  FunctionName,.  
-000171c0: 2020 2920 2d3e 2050 7574 4675 6e63 7469    ) -> PutFuncti
-000171d0: 6f6e 436f 6465 5369 676e 696e 6743 6f6e  onCodeSigningCon
-000171e0: 6669 6752 6573 706f 6e73 653a 0a20 2020  figResponse:.   
-000171f0: 2020 2020 2073 7461 7465 203d 206c 616d       state = lam
-00017200: 6264 615f 7374 6f72 6573 5b63 6f6e 7465  bda_stores[conte
-00017210: 7874 2e61 6363 6f75 6e74 5f69 645d 5b63  xt.account_id][c
-00017220: 6f6e 7465 7874 2e72 6567 696f 6e5d 0a20  ontext.region]. 
-00017230: 2020 2020 2020 2066 756e 6374 696f 6e5f         function_
-00017240: 6e61 6d65 203d 2061 7069 5f75 7469 6c73  name = api_utils
-00017250: 2e67 6574 5f66 756e 6374 696f 6e5f 6e61  .get_function_na
-00017260: 6d65 2866 756e 6374 696f 6e5f 6e61 6d65  me(function_name
-00017270: 2c20 636f 6e74 6578 742e 7265 6769 6f6e  , context.region
-00017280: 290a 0a20 2020 2020 2020 2063 7363 203d  )..        csc =
-00017290: 2073 7461 7465 2e63 6f64 655f 7369 676e   state.code_sign
-000172a0: 696e 675f 636f 6e66 6967 732e 6765 7428  ing_configs.get(
-000172b0: 636f 6465 5f73 6967 6e69 6e67 5f63 6f6e  code_signing_con
-000172c0: 6669 675f 6172 6e29 0a20 2020 2020 2020  fig_arn).       
-000172d0: 2069 6620 6e6f 7420 6373 633a 0a20 2020   if not csc:.   
-000172e0: 2020 2020 2020 2020 2072 6169 7365 2043           raise C
-000172f0: 6f64 6553 6967 6e69 6e67 436f 6e66 6967  odeSigningConfig
-00017300: 4e6f 7446 6f75 6e64 4578 6365 7074 696f  NotFoundExceptio
-00017310: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
-00017320: 2020 2066 2254 6865 2063 6f64 6520 7369     f"The code si
-00017330: 676e 696e 6720 636f 6e66 6967 7572 6174  gning configurat
-00017340: 696f 6e20 6361 6e6e 6f74 2062 6520 666f  ion cannot be fo
-00017350: 756e 642e 2043 6865 636b 2074 6861 7420  und. Check that 
-00017360: 7468 6520 7072 6f76 6964 6564 2063 6f6e  the provided con
-00017370: 6669 6775 7261 7469 6f6e 2069 7320 6e6f  figuration is no
-00017380: 7420 6465 6c65 7465 643a 207b 636f 6465  t deleted: {code
-00017390: 5f73 6967 6e69 6e67 5f63 6f6e 6669 675f  _signing_config_
-000173a0: 6172 6e7d 2e22 2c0a 2020 2020 2020 2020  arn}.",.        
-000173b0: 2020 2020 2020 2020 5479 7065 3d22 5573          Type="Us
-000173c0: 6572 222c 0a20 2020 2020 2020 2020 2020  er",.           
-000173d0: 2029 0a0a 2020 2020 2020 2020 666e 203d   )..        fn =
-000173e0: 2073 7461 7465 2e66 756e 6374 696f 6e73   state.functions
-000173f0: 2e67 6574 2866 756e 6374 696f 6e5f 6e61  .get(function_na
-00017400: 6d65 290a 2020 2020 2020 2020 666e 5f61  me).        fn_a
-00017410: 726e 203d 2061 7069 5f75 7469 6c73 2e75  rn = api_utils.u
-00017420: 6e71 7561 6c69 6669 6564 5f6c 616d 6264  nqualified_lambd
-00017430: 615f 6172 6e28 6675 6e63 7469 6f6e 5f6e  a_arn(function_n
-00017440: 616d 652c 2063 6f6e 7465 7874 2e61 6363  ame, context.acc
-00017450: 6f75 6e74 5f69 642c 2063 6f6e 7465 7874  ount_id, context
-00017460: 2e72 6567 696f 6e29 0a20 2020 2020 2020  .region).       
-00017470: 2069 6620 6e6f 7420 666e 3a0a 2020 2020   if not fn:.    
-00017480: 2020 2020 2020 2020 7261 6973 6520 5265          raise Re
-00017490: 736f 7572 6365 4e6f 7446 6f75 6e64 4578  sourceNotFoundEx
-000174a0: 6365 7074 696f 6e28 6622 4675 6e63 7469  ception(f"Functi
-000174b0: 6f6e 206e 6f74 2066 6f75 6e64 3a20 7b66  on not found: {f
-000174c0: 6e5f 6172 6e7d 222c 2054 7970 653d 2255  n_arn}", Type="U
-000174d0: 7365 7222 290a 0a20 2020 2020 2020 2066  ser")..        f
-000174e0: 6e2e 636f 6465 5f73 6967 6e69 6e67 5f63  n.code_signing_c
-000174f0: 6f6e 6669 675f 6172 6e20 3d20 636f 6465  onfig_arn = code
-00017500: 5f73 6967 6e69 6e67 5f63 6f6e 6669 675f  _signing_config_
-00017510: 6172 6e0a 2020 2020 2020 2020 7265 7475  arn.        retu
-00017520: 726e 2050 7574 4675 6e63 7469 6f6e 436f  rn PutFunctionCo
-00017530: 6465 5369 676e 696e 6743 6f6e 6669 6752  deSigningConfigR
-00017540: 6573 706f 6e73 6528 0a20 2020 2020 2020  esponse(.       
-00017550: 2020 2020 2043 6f64 6553 6967 6e69 6e67       CodeSigning
-00017560: 436f 6e66 6967 4172 6e3d 636f 6465 5f73  ConfigArn=code_s
-00017570: 6967 6e69 6e67 5f63 6f6e 6669 675f 6172  igning_config_ar
-00017580: 6e2c 2046 756e 6374 696f 6e4e 616d 653d  n, FunctionName=
-00017590: 6675 6e63 7469 6f6e 5f6e 616d 650a 2020  function_name.  
-000175a0: 2020 2020 2020 290a 0a20 2020 2064 6566        )..    def
-000175b0: 2075 7064 6174 655f 636f 6465 5f73 6967   update_code_sig
-000175c0: 6e69 6e67 5f63 6f6e 6669 6728 0a20 2020  ning_config(.   
-000175d0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
-000175e0: 2020 2063 6f6e 7465 7874 3a20 5265 7175     context: Requ
-000175f0: 6573 7443 6f6e 7465 7874 2c0a 2020 2020  estContext,.    
-00017600: 2020 2020 636f 6465 5f73 6967 6e69 6e67      code_signing
-00017610: 5f63 6f6e 6669 675f 6172 6e3a 2043 6f64  _config_arn: Cod
-00017620: 6553 6967 6e69 6e67 436f 6e66 6967 4172  eSigningConfigAr
-00017630: 6e2c 0a20 2020 2020 2020 2064 6573 6372  n,.        descr
-00017640: 6970 7469 6f6e 3a20 4465 7363 7269 7074  iption: Descript
-00017650: 696f 6e20 3d20 4e6f 6e65 2c0a 2020 2020  ion = None,.    
-00017660: 2020 2020 616c 6c6f 7765 645f 7075 626c      allowed_publ
-00017670: 6973 6865 7273 3a20 416c 6c6f 7765 6450  ishers: AllowedP
-00017680: 7562 6c69 7368 6572 7320 3d20 4e6f 6e65  ublishers = None
-00017690: 2c0a 2020 2020 2020 2020 636f 6465 5f73  ,.        code_s
-000176a0: 6967 6e69 6e67 5f70 6f6c 6963 6965 733a  igning_policies:
-000176b0: 2043 6f64 6553 6967 6e69 6e67 506f 6c69   CodeSigningPoli
-000176c0: 6369 6573 203d 204e 6f6e 652c 0a20 2020  cies = None,.   
-000176d0: 2029 202d 3e20 5570 6461 7465 436f 6465   ) -> UpdateCode
-000176e0: 5369 676e 696e 6743 6f6e 6669 6752 6573  SigningConfigRes
-000176f0: 706f 6e73 653a 0a20 2020 2020 2020 2073  ponse:.        s
-00017700: 7461 7465 203d 206c 616d 6264 615f 7374  tate = lambda_st
-00017710: 6f72 6573 5b63 6f6e 7465 7874 2e61 6363  ores[context.acc
-00017720: 6f75 6e74 5f69 645d 5b63 6f6e 7465 7874  ount_id][context
-00017730: 2e72 6567 696f 6e5d 0a20 2020 2020 2020  .region].       
-00017740: 2063 7363 203d 2073 7461 7465 2e63 6f64   csc = state.cod
-00017750: 655f 7369 676e 696e 675f 636f 6e66 6967  e_signing_config
-00017760: 732e 6765 7428 636f 6465 5f73 6967 6e69  s.get(code_signi
-00017770: 6e67 5f63 6f6e 6669 675f 6172 6e29 0a20  ng_config_arn). 
-00017780: 2020 2020 2020 2069 6620 6e6f 7420 6373         if not cs
-00017790: 633a 0a20 2020 2020 2020 2020 2020 2072  c:.            r
-000177a0: 6169 7365 2052 6573 6f75 7263 654e 6f74  aise ResourceNot
-000177b0: 466f 756e 6445 7863 6570 7469 6f6e 280a  FoundException(.
-000177c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000177d0: 6622 5468 6520 4c61 6d62 6461 2063 6f64  f"The Lambda cod
-000177e0: 6520 7369 676e 696e 6720 636f 6e66 6967  e signing config
-000177f0: 7572 6174 696f 6e20 7b63 6f64 655f 7369  uration {code_si
-00017800: 676e 696e 675f 636f 6e66 6967 5f61 726e  gning_config_arn
-00017810: 7d20 6361 6e20 6e6f 7420 6265 2066 6f75  } can not be fou
-00017820: 6e64 2e22 0a20 2020 2020 2020 2020 2020  nd.".           
-00017830: 2029 0a0a 2020 2020 2020 2020 6368 616e   )..        chan
-00017840: 6765 7320 3d20 7b0a 2020 2020 2020 2020  ges = {.        
-00017850: 2020 2020 2a2a 280a 2020 2020 2020 2020      **(.        
-00017860: 2020 2020 2020 2020 7b22 616c 6c6f 7765          {"allowe
-00017870: 645f 7075 626c 6973 6865 7273 223a 2061  d_publishers": a
-00017880: 6c6c 6f77 6564 5f70 7562 6c69 7368 6572  llowed_publisher
-00017890: 737d 2069 6620 616c 6c6f 7765 645f 7075  s} if allowed_pu
-000178a0: 626c 6973 6865 7273 2069 7320 6e6f 7420  blishers is not 
-000178b0: 4e6f 6e65 2065 6c73 6520 7b7d 0a20 2020  None else {}.   
-000178c0: 2020 2020 2020 2020 2029 2c0a 2020 2020           ),.    
-000178d0: 2020 2020 2020 2020 2a2a 287b 2270 6f6c          **({"pol
-000178e0: 6963 6965 7322 3a20 636f 6465 5f73 6967  icies": code_sig
-000178f0: 6e69 6e67 5f70 6f6c 6963 6965 737d 2069  ning_policies} i
-00017900: 6620 636f 6465 5f73 6967 6e69 6e67 5f70  f code_signing_p
-00017910: 6f6c 6963 6965 7320 6973 206e 6f74 204e  olicies is not N
-00017920: 6f6e 6520 656c 7365 207b 7d29 2c0a 2020  one else {}),.  
-00017930: 2020 2020 2020 2020 2020 2a2a 287b 2264            **({"d
-00017940: 6573 6372 6970 7469 6f6e 223a 2064 6573  escription": des
-00017950: 6372 6970 7469 6f6e 7d20 6966 2064 6573  cription} if des
-00017960: 6372 6970 7469 6f6e 2069 7320 6e6f 7420  cription is not 
-00017970: 4e6f 6e65 2065 6c73 6520 7b7d 292c 0a20  None else {}),. 
-00017980: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00017990: 206e 6577 5f63 7363 203d 2064 6174 6163   new_csc = datac
-000179a0: 6c61 7373 6573 2e72 6570 6c61 6365 280a  lasses.replace(.
-000179b0: 2020 2020 2020 2020 2020 2020 6373 632c              csc,
-000179c0: 206c 6173 745f 6d6f 6469 6669 6564 3d61   last_modified=a
-000179d0: 7069 5f75 7469 6c73 2e67 656e 6572 6174  pi_utils.generat
-000179e0: 655f 6c61 6d62 6461 5f64 6174 6528 292c  e_lambda_date(),
-000179f0: 202a 2a63 6861 6e67 6573 0a20 2020 2020   **changes.     
-00017a00: 2020 2029 0a20 2020 2020 2020 2073 7461     ).        sta
-00017a10: 7465 2e63 6f64 655f 7369 676e 696e 675f  te.code_signing_
-00017a20: 636f 6e66 6967 735b 636f 6465 5f73 6967  configs[code_sig
-00017a30: 6e69 6e67 5f63 6f6e 6669 675f 6172 6e5d  ning_config_arn]
-00017a40: 203d 206e 6577 5f63 7363 0a0a 2020 2020   = new_csc..    
-00017a50: 2020 2020 7265 7475 726e 2055 7064 6174      return Updat
-00017a60: 6543 6f64 6553 6967 6e69 6e67 436f 6e66  eCodeSigningConf
-00017a70: 6967 5265 7370 6f6e 7365 2843 6f64 6553  igResponse(CodeS
-00017a80: 6967 6e69 6e67 436f 6e66 6967 3d61 7069  igningConfig=api
-00017a90: 5f75 7469 6c73 2e6d 6170 5f63 7363 286e  _utils.map_csc(n
-00017aa0: 6577 5f63 7363 2929 0a0a 2020 2020 6465  ew_csc))..    de
-00017ab0: 6620 6765 745f 636f 6465 5f73 6967 6e69  f get_code_signi
-00017ac0: 6e67 5f63 6f6e 6669 6728 0a20 2020 2020  ng_config(.     
-00017ad0: 2020 2073 656c 662c 2063 6f6e 7465 7874     self, context
-00017ae0: 3a20 5265 7175 6573 7443 6f6e 7465 7874  : RequestContext
-00017af0: 2c20 636f 6465 5f73 6967 6e69 6e67 5f63  , code_signing_c
-00017b00: 6f6e 6669 675f 6172 6e3a 2043 6f64 6553  onfig_arn: CodeS
-00017b10: 6967 6e69 6e67 436f 6e66 6967 4172 6e0a  igningConfigArn.
-00017b20: 2020 2020 2920 2d3e 2047 6574 436f 6465      ) -> GetCode
-00017b30: 5369 676e 696e 6743 6f6e 6669 6752 6573  SigningConfigRes
-00017b40: 706f 6e73 653a 0a20 2020 2020 2020 2073  ponse:.        s
-00017b50: 7461 7465 203d 206c 616d 6264 615f 7374  tate = lambda_st
-00017b60: 6f72 6573 5b63 6f6e 7465 7874 2e61 6363  ores[context.acc
-00017b70: 6f75 6e74 5f69 645d 5b63 6f6e 7465 7874  ount_id][context
-00017b80: 2e72 6567 696f 6e5d 0a20 2020 2020 2020  .region].       
-00017b90: 2063 7363 203d 2073 7461 7465 2e63 6f64   csc = state.cod
-00017ba0: 655f 7369 676e 696e 675f 636f 6e66 6967  e_signing_config
-00017bb0: 732e 6765 7428 636f 6465 5f73 6967 6e69  s.get(code_signi
-00017bc0: 6e67 5f63 6f6e 6669 675f 6172 6e29 0a20  ng_config_arn). 
-00017bd0: 2020 2020 2020 2069 6620 6e6f 7420 6373         if not cs
-00017be0: 633a 0a20 2020 2020 2020 2020 2020 2072  c:.            r
-00017bf0: 6169 7365 2052 6573 6f75 7263 654e 6f74  aise ResourceNot
-00017c00: 466f 756e 6445 7863 6570 7469 6f6e 280a  FoundException(.
-00017c10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00017c20: 6622 5468 6520 4c61 6d62 6461 2063 6f64  f"The Lambda cod
-00017c30: 6520 7369 676e 696e 6720 636f 6e66 6967  e signing config
-00017c40: 7572 6174 696f 6e20 7b63 6f64 655f 7369  uration {code_si
-00017c50: 676e 696e 675f 636f 6e66 6967 5f61 726e  gning_config_arn
-00017c60: 7d20 6361 6e20 6e6f 7420 6265 2066 6f75  } can not be fou
-00017c70: 6e64 2e22 0a20 2020 2020 2020 2020 2020  nd.".           
-00017c80: 2029 0a0a 2020 2020 2020 2020 7265 7475   )..        retu
-00017c90: 726e 2047 6574 436f 6465 5369 676e 696e  rn GetCodeSignin
-00017ca0: 6743 6f6e 6669 6752 6573 706f 6e73 6528  gConfigResponse(
-00017cb0: 436f 6465 5369 676e 696e 6743 6f6e 6669  CodeSigningConfi
-00017cc0: 673d 6170 695f 7574 696c 732e 6d61 705f  g=api_utils.map_
-00017cd0: 6373 6328 6373 6329 290a 0a20 2020 2064  csc(csc))..    d
-00017ce0: 6566 2067 6574 5f66 756e 6374 696f 6e5f  ef get_function_
-00017cf0: 636f 6465 5f73 6967 6e69 6e67 5f63 6f6e  code_signing_con
-00017d00: 6669 6728 0a20 2020 2020 2020 2073 656c  fig(.        sel
-00017d10: 662c 2063 6f6e 7465 7874 3a20 5265 7175  f, context: Requ
-00017d20: 6573 7443 6f6e 7465 7874 2c20 6675 6e63  estContext, func
-00017d30: 7469 6f6e 5f6e 616d 653a 2046 756e 6374  tion_name: Funct
-00017d40: 696f 6e4e 616d 650a 2020 2020 2920 2d3e  ionName.    ) ->
-00017d50: 2047 6574 4675 6e63 7469 6f6e 436f 6465   GetFunctionCode
-00017d60: 5369 676e 696e 6743 6f6e 6669 6752 6573  SigningConfigRes
-00017d70: 706f 6e73 653a 0a20 2020 2020 2020 2073  ponse:.        s
-00017d80: 7461 7465 203d 206c 616d 6264 615f 7374  tate = lambda_st
-00017d90: 6f72 6573 5b63 6f6e 7465 7874 2e61 6363  ores[context.acc
-00017da0: 6f75 6e74 5f69 645d 5b63 6f6e 7465 7874  ount_id][context
-00017db0: 2e72 6567 696f 6e5d 0a20 2020 2020 2020  .region].       
-00017dc0: 2066 756e 6374 696f 6e5f 6e61 6d65 203d   function_name =
-00017dd0: 2061 7069 5f75 7469 6c73 2e67 6574 5f66   api_utils.get_f
-00017de0: 756e 6374 696f 6e5f 6e61 6d65 2866 756e  unction_name(fun
-00017df0: 6374 696f 6e5f 6e61 6d65 2c20 636f 6e74  ction_name, cont
-00017e00: 6578 742e 7265 6769 6f6e 290a 2020 2020  ext.region).    
-00017e10: 2020 2020 666e 203d 2073 7461 7465 2e66      fn = state.f
-00017e20: 756e 6374 696f 6e73 2e67 6574 2866 756e  unctions.get(fun
-00017e30: 6374 696f 6e5f 6e61 6d65 290a 2020 2020  ction_name).    
-00017e40: 2020 2020 666e 5f61 726e 203d 2061 7069      fn_arn = api
-00017e50: 5f75 7469 6c73 2e75 6e71 7561 6c69 6669  _utils.unqualifi
-00017e60: 6564 5f6c 616d 6264 615f 6172 6e28 6675  ed_lambda_arn(fu
-00017e70: 6e63 7469 6f6e 5f6e 616d 652c 2063 6f6e  nction_name, con
-00017e80: 7465 7874 2e61 6363 6f75 6e74 5f69 642c  text.account_id,
-00017e90: 2063 6f6e 7465 7874 2e72 6567 696f 6e29   context.region)
-00017ea0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
-00017eb0: 666e 3a0a 2020 2020 2020 2020 2020 2020  fn:.            
-00017ec0: 7261 6973 6520 5265 736f 7572 6365 4e6f  raise ResourceNo
-00017ed0: 7446 6f75 6e64 4578 6365 7074 696f 6e28  tFoundException(
-00017ee0: 6622 4675 6e63 7469 6f6e 206e 6f74 2066  f"Function not f
-00017ef0: 6f75 6e64 3a20 7b66 6e5f 6172 6e7d 222c  ound: {fn_arn}",
-00017f00: 2054 7970 653d 2255 7365 7222 290a 0a20   Type="User").. 
-00017f10: 2020 2020 2020 2069 6620 666e 2e63 6f64         if fn.cod
-00017f20: 655f 7369 676e 696e 675f 636f 6e66 6967  e_signing_config
-00017f30: 5f61 726e 3a0a 2020 2020 2020 2020 2020  _arn:.          
-00017f40: 2020 7265 7475 726e 2047 6574 4675 6e63    return GetFunc
-00017f50: 7469 6f6e 436f 6465 5369 676e 696e 6743  tionCodeSigningC
-00017f60: 6f6e 6669 6752 6573 706f 6e73 6528 0a20  onfigResponse(. 
-00017f70: 2020 2020 2020 2020 2020 2020 2020 2043                 C
+00010d90: 6473 225d 203d 2072 6571 7565 7374 2e67  ds"] = request.g
+00010da0: 6574 2822 4d61 7869 6d75 6d52 6563 6f72  et("MaximumRecor
+00010db0: 6441 6765 496e 5365 636f 6e64 7322 2c20  dAgeInSeconds", 
+00010dc0: 2d31 290a 2020 2020 2020 2020 2020 2020  -1).            
+00010dd0: 7061 7261 6d73 5b22 5475 6d62 6c69 6e67  params["Tumbling
+00010de0: 5769 6e64 6f77 496e 5365 636f 6e64 7322  WindowInSeconds"
+00010df0: 5d20 3d20 7265 7175 6573 742e 6765 7428  ] = request.get(
+00010e00: 2254 756d 626c 696e 6757 696e 646f 7749  "TumblingWindowI
+00010e10: 6e53 6563 6f6e 6473 222c 2030 290a 2020  nSeconds", 0).  
+00010e20: 2020 2020 2020 2020 2020 6465 7374 696e            destin
+00010e30: 6174 696f 6e5f 636f 6e66 6967 203d 2072  ation_config = r
+00010e40: 6571 7565 7374 2e67 6574 2822 4465 7374  equest.get("Dest
+00010e50: 696e 6174 696f 6e43 6f6e 6669 6722 2c20  inationConfig", 
+00010e60: 7b22 4f6e 4661 696c 7572 6522 3a20 7b7d  {"OnFailure": {}
+00010e70: 7d29 0a20 2020 2020 2020 2020 2020 2073  }).            s
+00010e80: 656c 662e 5f76 616c 6964 6174 655f 6465  elf._validate_de
+00010e90: 7374 696e 6174 696f 6e5f 636f 6e66 6967  stination_config
+00010ea0: 2873 7461 7465 2c20 6675 6e63 7469 6f6e  (state, function
+00010eb0: 5f6e 616d 652c 2064 6573 7469 6e61 7469  _name, destinati
+00010ec0: 6f6e 5f63 6f6e 6669 6729 0a20 2020 2020  on_config).     
+00010ed0: 2020 2020 2020 2070 6172 616d 735b 2244         params["D
+00010ee0: 6573 7469 6e61 7469 6f6e 436f 6e66 6967  estinationConfig
+00010ef0: 225d 203d 2064 6573 7469 6e61 7469 6f6e  "] = destination
+00010f00: 5f63 6f6e 6669 670a 0a20 2020 2020 2020  _config..       
+00010f10: 2023 2054 4f44 4f3a 2063 7265 6174 6520   # TODO: create 
+00010f20: 646f 6d61 696e 206d 6f64 656c 7320 616e  domain models an
+00010f30: 6420 6d61 7020 6163 636f 7264 696e 676c  d map accordingl
+00010f40: 790a 0a20 2020 2020 2020 2065 736d 5f63  y..        esm_c
+00010f50: 6f6e 6669 6720 3d20 4576 656e 7453 6f75  onfig = EventSou
+00010f60: 7263 654d 6170 7069 6e67 436f 6e66 6967  rceMappingConfig
+00010f70: 7572 6174 696f 6e28 2a2a 7061 7261 6d73  uration(**params
+00010f80: 290a 2020 2020 2020 2020 6669 6c74 6572  ).        filter
+00010f90: 5f63 7269 7465 7269 6120 3d20 6573 6d5f  _criteria = esm_
+00010fa0: 636f 6e66 6967 2e67 6574 2822 4669 6c74  config.get("Filt
+00010fb0: 6572 4372 6974 6572 6961 2229 0a20 2020  erCriteria").   
+00010fc0: 2020 2020 2069 6620 6669 6c74 6572 5f63       if filter_c
+00010fd0: 7269 7465 7269 613a 0a20 2020 2020 2020  riteria:.       
+00010fe0: 2020 2020 2023 2076 616c 6964 6174 6520       # validate 
+00010ff0: 666f 7220 7661 6c69 6420 6a73 6f6e 0a20  for valid json. 
+00011000: 2020 2020 2020 2020 2020 2069 6620 6e6f             if no
+00011010: 7420 7661 6c69 6461 7465 5f66 696c 7465  t validate_filte
+00011020: 7273 2866 696c 7465 725f 6372 6974 6572  rs(filter_criter
+00011030: 6961 293a 0a20 2020 2020 2020 2020 2020  ia):.           
+00011040: 2020 2020 2072 6169 7365 2049 6e76 616c       raise Inval
+00011050: 6964 5061 7261 6d65 7465 7256 616c 7565  idParameterValue
+00011060: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
+00011070: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00011080: 496e 7661 6c69 6420 6669 6c74 6572 2070  Invalid filter p
+00011090: 6174 7465 726e 2064 6566 696e 6974 696f  attern definitio
+000110a0: 6e2e 222c 2054 7970 653d 2255 7365 7222  n.", Type="User"
+000110b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000110c0: 2029 2020 2320 544f 444f 3a20 7665 7269   )  # TODO: veri
+000110d0: 6679 0a0a 2020 2020 2020 2020 7374 6174  fy..        stat
+000110e0: 652e 6576 656e 745f 736f 7572 6365 5f6d  e.event_source_m
+000110f0: 6170 7069 6e67 735b 6e65 775f 7575 6964  appings[new_uuid
+00011100: 5d20 3d20 6573 6d5f 636f 6e66 6967 0a0a  ] = esm_config..
+00011110: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
+00011120: 6576 616c 7561 7465 2061 6674 6572 2074  evaluate after t
+00011130: 656d 7020 6d69 6772 6174 696f 6e0a 2020  emp migration.  
+00011140: 2020 2020 2020 4576 656e 7453 6f75 7263        EventSourc
+00011150: 654c 6973 7465 6e65 722e 7374 6172 745f  eListener.start_
+00011160: 6c69 7374 656e 6572 735f 666f 725f 6173  listeners_for_as
+00011170: 6628 7265 7175 6573 742c 2073 656c 662e  f(request, self.
+00011180: 6c61 6d62 6461 5f73 6572 7669 6365 290a  lambda_service).
+00011190: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+000111a0: 7b2a 2a65 736d 5f63 6f6e 6669 672c 2022  {**esm_config, "
+000111b0: 5374 6174 6522 3a20 2243 7265 6174 696e  State": "Creatin
+000111c0: 6722 7d20 2023 2054 4f44 4f3a 2073 686f  g"}  # TODO: sho
+000111d0: 756c 6420 6265 2073 6574 2061 7379 6e63  uld be set async
+000111e0: 6872 6f6e 6f75 736c 790a 0a20 2020 2040  hronously..    @
+000111f0: 6861 6e64 6c65 7228 2255 7064 6174 6545  handler("UpdateE
+00011200: 7665 6e74 536f 7572 6365 4d61 7070 696e  ventSourceMappin
+00011210: 6722 2c20 6578 7061 6e64 3d46 616c 7365  g", expand=False
+00011220: 290a 2020 2020 6465 6620 7570 6461 7465  ).    def update
+00011230: 5f65 7665 6e74 5f73 6f75 7263 655f 6d61  _event_source_ma
+00011240: 7070 696e 6728 0a20 2020 2020 2020 2073  pping(.        s
+00011250: 656c 662c 0a20 2020 2020 2020 2063 6f6e  elf,.        con
+00011260: 7465 7874 3a20 5265 7175 6573 7443 6f6e  text: RequestCon
+00011270: 7465 7874 2c0a 2020 2020 2020 2020 7265  text,.        re
+00011280: 7175 6573 743a 2055 7064 6174 6545 7665  quest: UpdateEve
+00011290: 6e74 536f 7572 6365 4d61 7070 696e 6752  ntSourceMappingR
+000112a0: 6571 7565 7374 2c0a 2020 2020 2920 2d3e  equest,.    ) ->
+000112b0: 2045 7665 6e74 536f 7572 6365 4d61 7070   EventSourceMapp
+000112c0: 696e 6743 6f6e 6669 6775 7261 7469 6f6e  ingConfiguration
+000112d0: 3a0a 2020 2020 2020 2020 7374 6174 6520  :.        state 
+000112e0: 3d20 6c61 6d62 6461 5f73 746f 7265 735b  = lambda_stores[
+000112f0: 636f 6e74 6578 742e 6163 636f 756e 745f  context.account_
+00011300: 6964 5d5b 636f 6e74 6578 742e 7265 6769  id][context.regi
+00011310: 6f6e 5d0a 2020 2020 2020 2020 7265 7175  on].        requ
+00011320: 6573 745f 6461 7461 203d 207b 2a2a 7265  est_data = {**re
+00011330: 7175 6573 747d 0a20 2020 2020 2020 2075  quest}.        u
+00011340: 7569 6420 3d20 7265 7175 6573 745f 6461  uid = request_da
+00011350: 7461 2e70 6f70 2822 5555 4944 222c 204e  ta.pop("UUID", N
+00011360: 6f6e 6529 0a20 2020 2020 2020 2069 6620  one).        if 
+00011370: 6e6f 7420 7575 6964 3a0a 2020 2020 2020  not uuid:.      
+00011380: 2020 2020 2020 7261 6973 6520 5265 736f        raise Reso
+00011390: 7572 6365 4e6f 7446 6f75 6e64 4578 6365  urceNotFoundExce
+000113a0: 7074 696f 6e28 0a20 2020 2020 2020 2020  ption(.         
+000113b0: 2020 2020 2020 2022 5468 6520 7265 736f         "The reso
+000113c0: 7572 6365 2079 6f75 2072 6571 7565 7374  urce you request
+000113d0: 6564 2064 6f65 7320 6e6f 7420 6578 6973  ed does not exis
+000113e0: 742e 222c 2054 7970 653d 2255 7365 7222  t.", Type="User"
+000113f0: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+00011400: 2020 2020 2020 206f 6c64 5f65 7665 6e74         old_event
+00011410: 5f73 6f75 7263 655f 6d61 7070 696e 6720  _source_mapping 
+00011420: 3d20 7374 6174 652e 6576 656e 745f 736f  = state.event_so
+00011430: 7572 6365 5f6d 6170 7069 6e67 732e 6765  urce_mappings.ge
+00011440: 7428 7575 6964 290a 2020 2020 2020 2020  t(uuid).        
+00011450: 6966 206f 6c64 5f65 7665 6e74 5f73 6f75  if old_event_sou
+00011460: 7263 655f 6d61 7070 696e 6720 6973 204e  rce_mapping is N
+00011470: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00011480: 2072 6169 7365 2052 6573 6f75 7263 654e   raise ResourceN
+00011490: 6f74 466f 756e 6445 7863 6570 7469 6f6e  otFoundException
+000114a0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000114b0: 2020 2254 6865 2072 6573 6f75 7263 6520    "The resource 
+000114c0: 796f 7520 7265 7175 6573 7465 6420 646f  you requested do
+000114d0: 6573 206e 6f74 2065 7869 7374 2e22 2c20  es not exist.", 
+000114e0: 5479 7065 3d22 5573 6572 220a 2020 2020  Type="User".    
+000114f0: 2020 2020 2020 2020 2920 2023 2054 4f44          )  # TOD
+00011500: 4f3a 2074 6573 743f 0a20 2020 2020 2020  O: test?.       
+00011510: 2065 7665 6e74 5f73 6f75 7263 655f 6d61   event_source_ma
+00011520: 7070 696e 6720 3d20 7b2a 2a6f 6c64 5f65  pping = {**old_e
+00011530: 7665 6e74 5f73 6f75 7263 655f 6d61 7070  vent_source_mapp
+00011540: 696e 672c 202a 2a72 6571 7565 7374 5f64  ing, **request_d
+00011550: 6174 617d 0a0a 2020 2020 2020 2020 7465  ata}..        te
+00011560: 6d70 5f70 6172 616d 7320 3d20 280a 2020  mp_params = (.  
+00011570: 2020 2020 2020 2020 2020 7b7d 0a20 2020            {}.   
+00011580: 2020 2020 2029 2020 2320 7661 6c75 6573       )  # values
+00011590: 206f 6e6c 7920 7365 7420 666f 7220 7468   only set for th
+000115a0: 6520 7265 7475 726e 6564 2072 6573 706f  e returned respo
+000115b0: 6e73 652c 206e 6f74 2073 6176 6564 2069  nse, not saved i
+000115c0: 6e74 6572 6e61 6c6c 7920 2865 2e67 2e20  nternally (e.g. 
+000115d0: 7472 616e 7369 656e 7420 7374 6174 6529  transient state)
+000115e0: 0a0a 2020 2020 2020 2020 6966 2072 6571  ..        if req
+000115f0: 7565 7374 2e67 6574 2822 456e 6162 6c65  uest.get("Enable
+00011600: 6422 2920 6973 206e 6f74 204e 6f6e 653a  d") is not None:
+00011610: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+00011620: 7265 7175 6573 745b 2245 6e61 626c 6564  request["Enabled
+00011630: 225d 3a0a 2020 2020 2020 2020 2020 2020  "]:.            
+00011640: 2020 2020 6573 6d5f 7374 6174 6520 3d20      esm_state = 
+00011650: 2245 6e61 626c 6564 220a 2020 2020 2020  "Enabled".      
+00011660: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+00011670: 2020 2020 2020 2020 2020 2020 6573 6d5f              esm_
+00011680: 7374 6174 6520 3d20 2244 6973 6162 6c65  state = "Disable
+00011690: 6422 0a20 2020 2020 2020 2020 2020 2020  d".             
+000116a0: 2020 2074 656d 705f 7061 7261 6d73 5b22     temp_params["
+000116b0: 5374 6174 6522 5d20 3d20 2244 6973 6162  State"] = "Disab
+000116c0: 6c69 6e67 2220 2023 2054 4f44 4f3a 206d  ling"  # TODO: m
+000116d0: 616b 6520 7468 6973 2070 726f 7065 726c  ake this properl
+000116e0: 7920 6173 796e 630a 2020 2020 2020 2020  y async.        
+000116f0: 2020 2020 6576 656e 745f 736f 7572 6365      event_source
+00011700: 5f6d 6170 7069 6e67 5b22 5374 6174 6522  _mapping["State"
+00011710: 5d20 3d20 6573 6d5f 7374 6174 650a 0a20  ] = esm_state.. 
+00011720: 2020 2020 2020 2069 6620 7265 7175 6573         if reques
+00011730: 742e 6765 7428 2242 6174 6368 5369 7a65  t.get("BatchSize
+00011740: 2229 3a0a 2020 2020 2020 2020 2020 2020  "):.            
+00011750: 6261 7463 685f 7369 7a65 203d 2061 7069  batch_size = api
+00011760: 5f75 7469 6c73 2e76 616c 6964 6174 655f  _utils.validate_
+00011770: 616e 645f 7365 745f 6261 7463 685f 7369  and_set_batch_si
+00011780: 7a65 280a 2020 2020 2020 2020 2020 2020  ze(.            
+00011790: 2020 2020 6576 656e 745f 736f 7572 6365      event_source
+000117a0: 5f6d 6170 7069 6e67 5b22 4576 656e 7453  _mapping["EventS
+000117b0: 6f75 7263 6541 726e 225d 2c20 7265 7175  ourceArn"], requ
+000117c0: 6573 745b 2242 6174 6368 5369 7a65 225d  est["BatchSize"]
+000117d0: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+000117e0: 2020 2020 2020 2020 2020 2069 6620 6261             if ba
+000117f0: 7463 685f 7369 7a65 203e 2031 3020 616e  tch_size > 10 an
+00011800: 6420 7265 7175 6573 742e 6765 7428 224d  d request.get("M
+00011810: 6178 696d 756d 4261 7463 6869 6e67 5769  aximumBatchingWi
+00011820: 6e64 6f77 496e 5365 636f 6e64 7322 2c20  ndowInSeconds", 
+00011830: 3029 203d 3d20 303a 0a20 2020 2020 2020  0) == 0:.       
+00011840: 2020 2020 2020 2020 2072 6169 7365 2049           raise I
+00011850: 6e76 616c 6964 5061 7261 6d65 7465 7256  nvalidParameterV
+00011860: 616c 7565 4578 6365 7074 696f 6e28 0a20  alueException(. 
+00011870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00011880: 2020 2022 4d61 7869 6d75 6d20 6261 7463     "Maximum batc
+00011890: 6820 7769 6e64 6f77 2069 6e20 7365 636f  h window in seco
+000118a0: 6e64 7320 6d75 7374 2062 6520 6772 6561  nds must be grea
+000118b0: 7465 7220 7468 616e 2030 2069 6620 6d61  ter than 0 if ma
+000118c0: 7869 6d75 6d20 6261 7463 6820 7369 7a65  ximum batch size
+000118d0: 2069 7320 6772 6561 7465 7220 7468 616e   is greater than
+000118e0: 2031 3022 2c0a 2020 2020 2020 2020 2020   10",.          
+000118f0: 2020 2020 2020 2020 2020 5479 7065 3d22            Type="
+00011900: 5573 6572 222c 0a20 2020 2020 2020 2020  User",.         
+00011910: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00011920: 2069 6620 7265 7175 6573 742e 6765 7428   if request.get(
+00011930: 2244 6573 7469 6e61 7469 6f6e 436f 6e66  "DestinationConf
+00011940: 6967 2229 3a0a 2020 2020 2020 2020 2020  ig"):.          
+00011950: 2020 6465 7374 696e 6174 696f 6e5f 636f    destination_co
+00011960: 6e66 6967 203d 2072 6571 7565 7374 5b22  nfig = request["
+00011970: 4465 7374 696e 6174 696f 6e43 6f6e 6669  DestinationConfi
+00011980: 6722 5d0a 2020 2020 2020 2020 2020 2020  g"].            
+00011990: 7365 6c66 2e5f 7661 6c69 6461 7465 5f64  self._validate_d
+000119a0: 6573 7469 6e61 7469 6f6e 5f63 6f6e 6669  estination_confi
+000119b0: 6728 0a20 2020 2020 2020 2020 2020 2020  g(.             
+000119c0: 2020 2073 7461 7465 2c20 6576 656e 745f     state, event_
+000119d0: 736f 7572 6365 5f6d 6170 7069 6e67 5b22  source_mapping["
+000119e0: 4675 6e63 7469 6f6e 4e61 6d65 225d 2c20  FunctionName"], 
+000119f0: 6465 7374 696e 6174 696f 6e5f 636f 6e66  destination_conf
+00011a00: 6967 0a20 2020 2020 2020 2020 2020 2029  ig.            )
+00011a10: 0a20 2020 2020 2020 2020 2020 2065 7665  .            eve
+00011a20: 6e74 5f73 6f75 7263 655f 6d61 7070 696e  nt_source_mappin
+00011a30: 675b 2244 6573 7469 6e61 7469 6f6e 436f  g["DestinationCo
+00011a40: 6e66 6967 225d 203d 2064 6573 7469 6e61  nfig"] = destina
+00011a50: 7469 6f6e 5f63 6f6e 6669 670a 2020 2020  tion_config.    
+00011a60: 2020 2020 6576 656e 745f 736f 7572 6365      event_source
+00011a70: 5f6d 6170 7069 6e67 5b22 4c61 7374 5072  _mapping["LastPr
+00011a80: 6f63 6573 7369 6e67 5265 7375 6c74 225d  ocessingResult"]
+00011a90: 203d 2022 4f4b 220a 2020 2020 2020 2020   = "OK".        
+00011aa0: 7374 6174 652e 6576 656e 745f 736f 7572  state.event_sour
+00011ab0: 6365 5f6d 6170 7069 6e67 735b 7575 6964  ce_mappings[uuid
+00011ac0: 5d20 3d20 6576 656e 745f 736f 7572 6365  ] = event_source
+00011ad0: 5f6d 6170 7069 6e67 0a20 2020 2020 2020  _mapping.       
+00011ae0: 2072 6574 7572 6e20 7b2a 2a65 7665 6e74   return {**event
+00011af0: 5f73 6f75 7263 655f 6d61 7070 696e 672c  _source_mapping,
+00011b00: 202a 2a74 656d 705f 7061 7261 6d73 7d0a   **temp_params}.
+00011b10: 0a20 2020 2064 6566 2064 656c 6574 655f  .    def delete_
+00011b20: 6576 656e 745f 736f 7572 6365 5f6d 6170  event_source_map
+00011b30: 7069 6e67 280a 2020 2020 2020 2020 7365  ping(.        se
+00011b40: 6c66 2c20 636f 6e74 6578 743a 2052 6571  lf, context: Req
+00011b50: 7565 7374 436f 6e74 6578 742c 2075 7569  uestContext, uui
+00011b60: 643a 2053 7472 696e 670a 2020 2020 2920  d: String.    ) 
+00011b70: 2d3e 2045 7665 6e74 536f 7572 6365 4d61  -> EventSourceMa
+00011b80: 7070 696e 6743 6f6e 6669 6775 7261 7469  ppingConfigurati
+00011b90: 6f6e 3a0a 2020 2020 2020 2020 7374 6174  on:.        stat
+00011ba0: 6520 3d20 6c61 6d62 6461 5f73 746f 7265  e = lambda_store
+00011bb0: 735b 636f 6e74 6578 742e 6163 636f 756e  s[context.accoun
+00011bc0: 745f 6964 5d5b 636f 6e74 6578 742e 7265  t_id][context.re
+00011bd0: 6769 6f6e 5d0a 2020 2020 2020 2020 6576  gion].        ev
+00011be0: 656e 745f 736f 7572 6365 5f6d 6170 7069  ent_source_mappi
+00011bf0: 6e67 203d 2073 7461 7465 2e65 7665 6e74  ng = state.event
+00011c00: 5f73 6f75 7263 655f 6d61 7070 696e 6773  _source_mappings
+00011c10: 2e67 6574 2875 7569 6429 0a20 2020 2020  .get(uuid).     
+00011c20: 2020 2069 6620 6e6f 7420 6576 656e 745f     if not event_
+00011c30: 736f 7572 6365 5f6d 6170 7069 6e67 3a0a  source_mapping:.
+00011c40: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00011c50: 6520 5265 736f 7572 6365 4e6f 7446 6f75  e ResourceNotFou
+00011c60: 6e64 4578 6365 7074 696f 6e28 0a20 2020  ndException(.   
+00011c70: 2020 2020 2020 2020 2020 2020 2022 5468               "Th
+00011c80: 6520 7265 736f 7572 6365 2079 6f75 2072  e resource you r
+00011c90: 6571 7565 7374 6564 2064 6f65 7320 6e6f  equested does no
+00011ca0: 7420 6578 6973 742e 222c 2054 7970 653d  t exist.", Type=
+00011cb0: 2255 7365 7222 0a20 2020 2020 2020 2020  "User".         
+00011cc0: 2020 2029 0a20 2020 2020 2020 2065 736d     ).        esm
+00011cd0: 203d 2073 7461 7465 2e65 7665 6e74 5f73   = state.event_s
+00011ce0: 6f75 7263 655f 6d61 7070 696e 6773 2e70  ource_mappings.p
+00011cf0: 6f70 2875 7569 6429 0a20 2020 2020 2020  op(uuid).       
+00011d00: 2072 6574 7572 6e20 7b2a 2a65 736d 2c20   return {**esm, 
+00011d10: 2253 7461 7465 223a 2022 4465 6c65 7469  "State": "Deleti
+00011d20: 6e67 227d 0a0a 2020 2020 6465 6620 6765  ng"}..    def ge
+00011d30: 745f 6576 656e 745f 736f 7572 6365 5f6d  t_event_source_m
+00011d40: 6170 7069 6e67 280a 2020 2020 2020 2020  apping(.        
+00011d50: 7365 6c66 2c20 636f 6e74 6578 743a 2052  self, context: R
+00011d60: 6571 7565 7374 436f 6e74 6578 742c 2075  equestContext, u
+00011d70: 7569 643a 2053 7472 696e 670a 2020 2020  uid: String.    
+00011d80: 2920 2d3e 2045 7665 6e74 536f 7572 6365  ) -> EventSource
+00011d90: 4d61 7070 696e 6743 6f6e 6669 6775 7261  MappingConfigura
+00011da0: 7469 6f6e 3a0a 2020 2020 2020 2020 7374  tion:.        st
+00011db0: 6174 6520 3d20 6c61 6d62 6461 5f73 746f  ate = lambda_sto
+00011dc0: 7265 735b 636f 6e74 6578 742e 6163 636f  res[context.acco
+00011dd0: 756e 745f 6964 5d5b 636f 6e74 6578 742e  unt_id][context.
+00011de0: 7265 6769 6f6e 5d0a 2020 2020 2020 2020  region].        
+00011df0: 6576 656e 745f 736f 7572 6365 5f6d 6170  event_source_map
+00011e00: 7069 6e67 203d 2073 7461 7465 2e65 7665  ping = state.eve
+00011e10: 6e74 5f73 6f75 7263 655f 6d61 7070 696e  nt_source_mappin
+00011e20: 6773 2e67 6574 2875 7569 6429 0a20 2020  gs.get(uuid).   
+00011e30: 2020 2020 2069 6620 6e6f 7420 6576 656e       if not even
+00011e40: 745f 736f 7572 6365 5f6d 6170 7069 6e67  t_source_mapping
+00011e50: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+00011e60: 6973 6520 5265 736f 7572 6365 4e6f 7446  ise ResourceNotF
+00011e70: 6f75 6e64 4578 6365 7074 696f 6e28 0a20  oundException(. 
+00011e80: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+00011e90: 5468 6520 7265 736f 7572 6365 2079 6f75  The resource you
+00011ea0: 2072 6571 7565 7374 6564 2064 6f65 7320   requested does 
+00011eb0: 6e6f 7420 6578 6973 742e 222c 2054 7970  not exist.", Typ
+00011ec0: 653d 2255 7365 7222 0a20 2020 2020 2020  e="User".       
+00011ed0: 2020 2020 2029 0a20 2020 2020 2020 2072       ).        r
+00011ee0: 6574 7572 6e20 6576 656e 745f 736f 7572  eturn event_sour
+00011ef0: 6365 5f6d 6170 7069 6e67 0a0a 2020 2020  ce_mapping..    
+00011f00: 6465 6620 6c69 7374 5f65 7665 6e74 5f73  def list_event_s
+00011f10: 6f75 7263 655f 6d61 7070 696e 6773 280a  ource_mappings(.
+00011f20: 2020 2020 2020 2020 7365 6c66 2c0a 2020          self,.  
+00011f30: 2020 2020 2020 636f 6e74 6578 743a 2052        context: R
+00011f40: 6571 7565 7374 436f 6e74 6578 742c 0a20  equestContext,. 
+00011f50: 2020 2020 2020 2065 7665 6e74 5f73 6f75         event_sou
+00011f60: 7263 655f 6172 6e3a 2041 726e 203d 204e  rce_arn: Arn = N
+00011f70: 6f6e 652c 0a20 2020 2020 2020 2066 756e  one,.        fun
+00011f80: 6374 696f 6e5f 6e61 6d65 3a20 4675 6e63  ction_name: Func
+00011f90: 7469 6f6e 4e61 6d65 203d 204e 6f6e 652c  tionName = None,
+00011fa0: 0a20 2020 2020 2020 206d 6172 6b65 723a  .        marker:
+00011fb0: 2053 7472 696e 6720 3d20 4e6f 6e65 2c0a   String = None,.
+00011fc0: 2020 2020 2020 2020 6d61 785f 6974 656d          max_item
+00011fd0: 733a 204d 6178 4c69 7374 4974 656d 7320  s: MaxListItems 
+00011fe0: 3d20 4e6f 6e65 2c0a 2020 2020 2920 2d3e  = None,.    ) ->
+00011ff0: 204c 6973 7445 7665 6e74 536f 7572 6365   ListEventSource
+00012000: 4d61 7070 696e 6773 5265 7370 6f6e 7365  MappingsResponse
+00012010: 3a0a 2020 2020 2020 2020 7374 6174 6520  :.        state 
+00012020: 3d20 6c61 6d62 6461 5f73 746f 7265 735b  = lambda_stores[
+00012030: 636f 6e74 6578 742e 6163 636f 756e 745f  context.account_
+00012040: 6964 5d5b 636f 6e74 6578 742e 7265 6769  id][context.regi
+00012050: 6f6e 5d0a 0a20 2020 2020 2020 2065 736d  on]..        esm
+00012060: 7320 3d20 7374 6174 652e 6576 656e 745f  s = state.event_
+00012070: 736f 7572 6365 5f6d 6170 7069 6e67 732e  source_mappings.
+00012080: 7661 6c75 6573 2829 0a0a 2020 2020 2020  values()..      
+00012090: 2020 6966 2065 7665 6e74 5f73 6f75 7263    if event_sourc
+000120a0: 655f 6172 6e3a 2020 2320 544f 444f 3a20  e_arn:  # TODO: 
+000120b0: 7661 6c69 6461 7465 2070 6174 7465 726e  validate pattern
+000120c0: 0a20 2020 2020 2020 2020 2020 2065 736d  .            esm
+000120d0: 7320 3d20 5b65 2066 6f72 2065 2069 6e20  s = [e for e in 
+000120e0: 6573 6d73 2069 6620 655b 2245 7665 6e74  esms if e["Event
+000120f0: 536f 7572 6365 4172 6e22 5d20 3d3d 2065  SourceArn"] == e
+00012100: 7665 6e74 5f73 6f75 7263 655f 6172 6e5d  vent_source_arn]
+00012110: 0a0a 2020 2020 2020 2020 6966 2066 756e  ..        if fun
+00012120: 6374 696f 6e5f 6e61 6d65 3a0a 2020 2020  ction_name:.    
+00012130: 2020 2020 2020 2020 6573 6d73 203d 205b          esms = [
+00012140: 6520 666f 7220 6520 696e 2065 736d 7320  e for e in esms 
+00012150: 6966 2066 756e 6374 696f 6e5f 6e61 6d65  if function_name
+00012160: 2069 6e20 655b 2246 756e 6374 696f 6e41   in e["FunctionA
+00012170: 726e 225d 5d0a 0a20 2020 2020 2020 2065  rn"]]..        e
+00012180: 736d 7320 3d20 5061 6769 6e61 7465 644c  sms = PaginatedL
+00012190: 6973 7428 6573 6d73 290a 2020 2020 2020  ist(esms).      
+000121a0: 2020 7061 6765 2c20 746f 6b65 6e20 3d20    page, token = 
+000121b0: 6573 6d73 2e67 6574 5f70 6167 6528 0a20  esms.get_page(. 
+000121c0: 2020 2020 2020 2020 2020 206c 616d 6264             lambd
+000121d0: 6120 783a 2078 5b22 5555 4944 225d 2c0a  a x: x["UUID"],.
+000121e0: 2020 2020 2020 2020 2020 2020 6d61 726b              mark
+000121f0: 6572 2c0a 2020 2020 2020 2020 2020 2020  er,.            
+00012200: 6d61 785f 6974 656d 732c 0a20 2020 2020  max_items,.     
+00012210: 2020 2029 0a20 2020 2020 2020 2072 6574     ).        ret
+00012220: 7572 6e20 4c69 7374 4576 656e 7453 6f75  urn ListEventSou
+00012230: 7263 654d 6170 7069 6e67 7352 6573 706f  rceMappingsRespo
+00012240: 6e73 6528 4576 656e 7453 6f75 7263 654d  nse(EventSourceM
+00012250: 6170 7069 6e67 733d 7061 6765 2c20 4e65  appings=page, Ne
+00012260: 7874 4d61 726b 6572 3d74 6f6b 656e 290a  xtMarker=token).
+00012270: 0a20 2020 2023 203d 3d3d 3d3d 3d3d 3d3d  .    # =========
+00012280: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00012290: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a20  ==============. 
+000122a0: 2020 2023 203d 3d3d 3d3d 3d3d 3d3d 3d3d     # ===========
+000122b0: 3d20 4655 4e43 5449 4f4e 2055 524c 5320  = FUNCTION URLS 
+000122c0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a20 2020  ============.   
+000122d0: 2023 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   # =============
+000122e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000122f0: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 2020 2020  ==========..    
+00012300: 2320 544f 444f 3a20 7768 6174 2068 6170  # TODO: what hap
+00012310: 7065 6e73 2069 6620 6675 6e63 7469 6f6e  pens if function
+00012320: 2073 7461 7465 2069 7320 6e6f 7420 6163   state is not ac
+00012330: 7469 7665 3f0a 2020 2020 6465 6620 6372  tive?.    def cr
+00012340: 6561 7465 5f66 756e 6374 696f 6e5f 7572  eate_function_ur
+00012350: 6c5f 636f 6e66 6967 280a 2020 2020 2020  l_config(.      
+00012360: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
+00012370: 636f 6e74 6578 743a 2052 6571 7565 7374  context: Request
+00012380: 436f 6e74 6578 742c 0a20 2020 2020 2020  Context,.       
+00012390: 2066 756e 6374 696f 6e5f 6e61 6d65 3a20   function_name: 
+000123a0: 4675 6e63 7469 6f6e 4e61 6d65 2c0a 2020  FunctionName,.  
+000123b0: 2020 2020 2020 6175 7468 5f74 7970 653a        auth_type:
+000123c0: 2046 756e 6374 696f 6e55 726c 4175 7468   FunctionUrlAuth
+000123d0: 5479 7065 2c0a 2020 2020 2020 2020 7175  Type,.        qu
+000123e0: 616c 6966 6965 723a 2046 756e 6374 696f  alifier: Functio
+000123f0: 6e55 726c 5175 616c 6966 6965 7220 3d20  nUrlQualifier = 
+00012400: 4e6f 6e65 2c0a 2020 2020 2020 2020 636f  None,.        co
+00012410: 7273 3a20 436f 7273 203d 204e 6f6e 652c  rs: Cors = None,
+00012420: 0a20 2020 2020 2020 2069 6e76 6f6b 655f  .        invoke_
+00012430: 6d6f 6465 3a20 496e 766f 6b65 4d6f 6465  mode: InvokeMode
+00012440: 203d 204e 6f6e 652c 0a20 2020 2029 202d   = None,.    ) -
+00012450: 3e20 4372 6561 7465 4675 6e63 7469 6f6e  > CreateFunction
+00012460: 5572 6c43 6f6e 6669 6752 6573 706f 6e73  UrlConfigRespons
+00012470: 653a 0a20 2020 2020 2020 2073 7461 7465  e:.        state
+00012480: 203d 206c 616d 6264 615f 7374 6f72 6573   = lambda_stores
+00012490: 5b63 6f6e 7465 7874 2e61 6363 6f75 6e74  [context.account
+000124a0: 5f69 645d 5b63 6f6e 7465 7874 2e72 6567  _id][context.reg
+000124b0: 696f 6e5d 0a0a 2020 2020 2020 2020 6675  ion]..        fu
+000124c0: 6e63 7469 6f6e 5f6e 616d 652c 2071 7561  nction_name, qua
+000124d0: 6c69 6669 6572 203d 2061 7069 5f75 7469  lifier = api_uti
+000124e0: 6c73 2e67 6574 5f6e 616d 655f 616e 645f  ls.get_name_and_
+000124f0: 7175 616c 6966 6965 7228 0a20 2020 2020  qualifier(.     
+00012500: 2020 2020 2020 2066 756e 6374 696f 6e5f         function_
+00012510: 6e61 6d65 2c20 7175 616c 6966 6965 722c  name, qualifier,
+00012520: 2063 6f6e 7465 7874 2e72 6567 696f 6e0a   context.region.
+00012530: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00012540: 2020 6966 2071 7561 6c69 6669 6572 203d    if qualifier =
+00012550: 3d20 2224 4c41 5445 5354 223a 0a20 2020  = "$LATEST":.   
+00012560: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
+00012570: 616c 6964 6174 696f 6e45 7863 6570 7469  alidationExcepti
+00012580: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
+00012590: 2020 2020 2231 2076 616c 6964 6174 696f      "1 validatio
+000125a0: 6e20 6572 726f 7220 6465 7465 6374 6564  n error detected
+000125b0: 3a20 5661 6c75 6520 2724 4c41 5445 5354  : Value '$LATEST
+000125c0: 2720 6174 2027 7175 616c 6966 6965 7227  ' at 'qualifier'
+000125d0: 2066 6169 6c65 6420 746f 2073 6174 6973   failed to satis
+000125e0: 6679 2063 6f6e 7374 7261 696e 743a 204d  fy constraint: M
+000125f0: 656d 6265 7220 6d75 7374 2073 6174 6973  ember must satis
+00012600: 6679 2072 6567 756c 6172 2065 7870 7265  fy regular expre
+00012610: 7373 696f 6e20 7061 7474 6572 6e3a 2028  ssion pattern: (
+00012620: 283f 215e 5c5c 642b 2429 5e5b 302d 3961  (?!^\\d+$)^[0-9a
+00012630: 2d7a 412d 5a2d 5f5d 2b24 2922 0a20 2020  -zA-Z-_]+$)".   
+00012640: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+00012650: 2020 2069 6620 7175 616c 6966 6965 7220     if qualifier 
+00012660: 616e 6420 6170 695f 7574 696c 732e 7175  and api_utils.qu
+00012670: 616c 6966 6965 725f 6973 5f76 6572 7369  alifier_is_versi
+00012680: 6f6e 2871 7561 6c69 6669 6572 293a 0a20  on(qualifier):. 
+00012690: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+000126a0: 2056 616c 6964 6174 696f 6e45 7863 6570   ValidationExcep
+000126b0: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
+000126c0: 2020 2020 2020 6622 3120 7661 6c69 6461        f"1 valida
+000126d0: 7469 6f6e 2065 7272 6f72 2064 6574 6563  tion error detec
+000126e0: 7465 643a 2056 616c 7565 2027 7b71 7561  ted: Value '{qua
+000126f0: 6c69 6669 6572 7d27 2061 7420 2771 7561  lifier}' at 'qua
+00012700: 6c69 6669 6572 2720 6661 696c 6564 2074  lifier' failed t
+00012710: 6f20 7361 7469 7366 7920 636f 6e73 7472  o satisfy constr
+00012720: 6169 6e74 3a20 4d65 6d62 6572 206d 7573  aint: Member mus
+00012730: 7420 7361 7469 7366 7920 7265 6775 6c61  t satisfy regula
+00012740: 7220 6578 7072 6573 7369 6f6e 2070 6174  r expression pat
+00012750: 7465 726e 3a20 285e 5c5c 244c 4154 4553  tern: (^\\$LATES
+00012760: 5424 297c 2828 3f21 5e5b 302d 395d 2b24  T$)|((?!^[0-9]+$
+00012770: 2928 5b61 2d7a 412d 5a30 2d39 2d5f 5d2b  )([a-zA-Z0-9-_]+
+00012780: 2929 220a 2020 2020 2020 2020 2020 2020  ))".            
+00012790: 290a 2020 2020 2020 2020 666e 203d 2073  ).        fn = s
+000127a0: 7461 7465 2e66 756e 6374 696f 6e73 2e67  tate.functions.g
+000127b0: 6574 2866 756e 6374 696f 6e5f 6e61 6d65  et(function_name
+000127c0: 290a 2020 2020 2020 2020 6966 2066 6e20  ).        if fn 
+000127d0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+000127e0: 2020 2020 2072 6169 7365 2052 6573 6f75       raise Resou
+000127f0: 7263 654e 6f74 466f 756e 6445 7863 6570  rceNotFoundExcep
+00012800: 7469 6f6e 2822 4675 6e63 7469 6f6e 2064  tion("Function d
+00012810: 6f65 7320 6e6f 7420 6578 6973 7422 2c20  oes not exist", 
+00012820: 5479 7065 3d22 5573 6572 2229 0a0a 2020  Type="User")..  
+00012830: 2020 2020 2020 7572 6c5f 636f 6e66 6967        url_config
+00012840: 203d 2066 6e2e 6675 6e63 7469 6f6e 5f75   = fn.function_u
+00012850: 726c 5f63 6f6e 6669 6773 2e67 6574 2871  rl_configs.get(q
+00012860: 7561 6c69 6669 6572 206f 7220 2224 4c41  ualifier or "$LA
+00012870: 5445 5354 2229 0a20 2020 2020 2020 2069  TEST").        i
+00012880: 6620 7572 6c5f 636f 6e66 6967 3a0a 2020  f url_config:.  
+00012890: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000128a0: 5265 736f 7572 6365 436f 6e66 6c69 6374  ResourceConflict
+000128b0: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
+000128c0: 2020 2020 2020 2020 2020 2066 2246 6169             f"Fai
+000128d0: 6c65 6420 746f 2063 7265 6174 6520 6675  led to create fu
+000128e0: 6e63 7469 6f6e 2075 726c 2063 6f6e 6669  nction url confi
+000128f0: 6720 666f 7220 5b66 756e 6374 696f 6e41  g for [functionA
+00012900: 726e 203d 207b 7572 6c5f 636f 6e66 6967  rn = {url_config
+00012910: 2e66 756e 6374 696f 6e5f 6172 6e7d 5d2e  .function_arn}].
+00012920: 2045 7272 6f72 206d 6573 7361 6765 3a20   Error message: 
+00012930: 2046 756e 6374 696f 6e55 726c 436f 6e66   FunctionUrlConf
+00012940: 6967 2065 7869 7374 7320 666f 7220 7468  ig exists for th
+00012950: 6973 204c 616d 6264 6120 6675 6e63 7469  is Lambda functi
+00012960: 6f6e 222c 0a20 2020 2020 2020 2020 2020  on",.           
+00012970: 2020 2020 2054 7970 653d 2255 7365 7222       Type="User"
+00012980: 2c0a 2020 2020 2020 2020 2020 2020 290a  ,.            ).
+00012990: 0a20 2020 2020 2020 2069 6620 7175 616c  .        if qual
+000129a0: 6966 6965 7220 616e 6420 7175 616c 6966  ifier and qualif
+000129b0: 6965 7220 213d 2022 244c 4154 4553 5422  ier != "$LATEST"
+000129c0: 2061 6e64 2071 7561 6c69 6669 6572 206e   and qualifier n
+000129d0: 6f74 2069 6e20 666e 2e61 6c69 6173 6573  ot in fn.aliases
+000129e0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+000129f0: 6973 6520 5265 736f 7572 6365 4e6f 7446  ise ResourceNotF
+00012a00: 6f75 6e64 4578 6365 7074 696f 6e28 2246  oundException("F
+00012a10: 756e 6374 696f 6e20 646f 6573 206e 6f74  unction does not
+00012a20: 2065 7869 7374 222c 2054 7970 653d 2255   exist", Type="U
+00012a30: 7365 7222 290a 0a20 2020 2020 2020 206e  ser")..        n
+00012a40: 6f72 6d61 6c69 7a65 645f 7175 616c 6966  ormalized_qualif
+00012a50: 6965 7220 3d20 7175 616c 6966 6965 7220  ier = qualifier 
+00012a60: 6f72 2022 244c 4154 4553 5422 0a0a 2020  or "$LATEST"..  
+00012a70: 2020 2020 2020 6675 6e63 7469 6f6e 5f61        function_a
+00012a80: 726e 203d 2028 0a20 2020 2020 2020 2020  rn = (.         
+00012a90: 2020 2061 7069 5f75 7469 6c73 2e71 7561     api_utils.qua
+00012aa0: 6c69 6669 6564 5f6c 616d 6264 615f 6172  lified_lambda_ar
+00012ab0: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+00012ac0: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
+00012ad0: 2c20 7175 616c 6966 6965 722c 2063 6f6e  , qualifier, con
+00012ae0: 7465 7874 2e61 6363 6f75 6e74 5f69 642c  text.account_id,
+00012af0: 2063 6f6e 7465 7874 2e72 6567 696f 6e0a   context.region.
+00012b00: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+00012b10: 2020 2020 2020 2020 2020 6966 2071 7561            if qua
+00012b20: 6c69 6669 6572 0a20 2020 2020 2020 2020  lifier.         
+00012b30: 2020 2065 6c73 6520 6170 695f 7574 696c     else api_util
+00012b40: 732e 756e 7175 616c 6966 6965 645f 6c61  s.unqualified_la
+00012b50: 6d62 6461 5f61 726e 2866 756e 6374 696f  mbda_arn(functio
+00012b60: 6e5f 6e61 6d65 2c20 636f 6e74 6578 742e  n_name, context.
+00012b70: 6163 636f 756e 745f 6964 2c20 636f 6e74  account_id, cont
+00012b80: 6578 742e 7265 6769 6f6e 290a 2020 2020  ext.region).    
+00012b90: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
+00012ba0: 2063 7265 6174 6520 6675 6e63 7469 6f6e   create function
+00012bb0: 2055 524c 2063 6f6e 6669 670a 2020 2020   URL config.    
+00012bc0: 2020 2020 7572 6c5f 6964 203d 2061 7069      url_id = api
+00012bd0: 5f75 7469 6c73 2e67 656e 6572 6174 655f  _utils.generate_
+00012be0: 7261 6e64 6f6d 5f75 726c 5f69 6428 290a  random_url_id().
+00012bf0: 0a20 2020 2020 2020 2068 6f73 745f 6465  .        host_de
+00012c00: 6669 6e69 7469 6f6e 203d 206c 6f63 616c  finition = local
+00012c10: 7374 6163 6b5f 686f 7374 280a 2020 2020  stack_host(.    
+00012c20: 2020 2020 2020 2020 7573 655f 6c6f 6361          use_loca
+00012c30: 6c68 6f73 745f 636c 6f75 643d 5472 7565  lhost_cloud=True
+00012c40: 2c20 6375 7374 6f6d 5f70 6f72 743d 636f  , custom_port=co
+00012c50: 6e66 6967 2e45 4447 455f 504f 5254 5f48  nfig.EDGE_PORT_H
+00012c60: 5454 5020 6f72 2063 6f6e 6669 672e 4544  TTP or config.ED
+00012c70: 4745 5f50 4f52 540a 2020 2020 2020 2020  GE_PORT.        
+00012c80: 290a 2020 2020 2020 2020 666e 2e66 756e  ).        fn.fun
+00012c90: 6374 696f 6e5f 7572 6c5f 636f 6e66 6967  ction_url_config
+00012ca0: 735b 6e6f 726d 616c 697a 6564 5f71 7561  s[normalized_qua
+00012cb0: 6c69 6669 6572 5d20 3d20 4675 6e63 7469  lifier] = Functi
+00012cc0: 6f6e 5572 6c43 6f6e 6669 6728 0a20 2020  onUrlConfig(.   
+00012cd0: 2020 2020 2020 2020 2066 756e 6374 696f           functio
+00012ce0: 6e5f 6172 6e3d 6675 6e63 7469 6f6e 5f61  n_arn=function_a
+00012cf0: 726e 2c0a 2020 2020 2020 2020 2020 2020  rn,.            
+00012d00: 6675 6e63 7469 6f6e 5f6e 616d 653d 6675  function_name=fu
+00012d10: 6e63 7469 6f6e 5f6e 616d 652c 0a20 2020  nction_name,.   
+00012d20: 2020 2020 2020 2020 2063 6f72 733d 636f           cors=co
+00012d30: 7273 2c0a 2020 2020 2020 2020 2020 2020  rs,.            
+00012d40: 7572 6c5f 6964 3d75 726c 5f69 642c 0a20  url_id=url_id,. 
+00012d50: 2020 2020 2020 2020 2020 2075 726c 3d66             url=f
+00012d60: 2268 7474 703a 2f2f 7b75 726c 5f69 647d  "http://{url_id}
+00012d70: 2e6c 616d 6264 612d 7572 6c2e 7b63 6f6e  .lambda-url.{con
+00012d80: 7465 7874 2e72 6567 696f 6e7d 2e7b 686f  text.region}.{ho
+00012d90: 7374 5f64 6566 696e 6974 696f 6e2e 686f  st_definition.ho
+00012da0: 7374 5f61 6e64 5f70 6f72 7428 297d 2f22  st_and_port()}/"
+00012db0: 2c20 2023 2054 4f44 4f3a 2068 7474 7073  ,  # TODO: https
+00012dc0: 2073 7570 706f 7274 0a20 2020 2020 2020   support.       
+00012dd0: 2020 2020 2061 7574 685f 7479 7065 3d61       auth_type=a
+00012de0: 7574 685f 7479 7065 2c0a 2020 2020 2020  uth_type,.      
+00012df0: 2020 2020 2020 6372 6561 7469 6f6e 5f74        creation_t
+00012e00: 696d 653d 6170 695f 7574 696c 732e 6765  ime=api_utils.ge
+00012e10: 6e65 7261 7465 5f6c 616d 6264 615f 6461  nerate_lambda_da
+00012e20: 7465 2829 2c0a 2020 2020 2020 2020 2020  te(),.          
+00012e30: 2020 6c61 7374 5f6d 6f64 6966 6965 645f    last_modified_
+00012e40: 7469 6d65 3d61 7069 5f75 7469 6c73 2e67  time=api_utils.g
+00012e50: 656e 6572 6174 655f 6c61 6d62 6461 5f64  enerate_lambda_d
+00012e60: 6174 6528 292c 0a20 2020 2020 2020 2029  ate(),.        )
+00012e70: 0a0a 2020 2020 2020 2020 2320 7065 7273  ..        # pers
+00012e80: 6973 7420 616e 6420 7374 6172 7420 5552  ist and start UR
+00012e90: 4c0a 2020 2020 2020 2020 2320 544f 444f  L.        # TODO
+00012ea0: 3a20 696d 706c 656d 656e 7420 5552 4c20  : implement URL 
+00012eb0: 696e 766f 6b65 0a20 2020 2020 2020 2061  invoke.        a
+00012ec0: 7069 5f75 726c 5f63 6f6e 6669 6720 3d20  pi_url_config = 
+00012ed0: 6170 695f 7574 696c 732e 6d61 705f 6675  api_utils.map_fu
+00012ee0: 6e63 7469 6f6e 5f75 726c 5f63 6f6e 6669  nction_url_confi
+00012ef0: 6728 0a20 2020 2020 2020 2020 2020 2066  g(.            f
+00012f00: 6e2e 6675 6e63 7469 6f6e 5f75 726c 5f63  n.function_url_c
+00012f10: 6f6e 6669 6773 5b6e 6f72 6d61 6c69 7a65  onfigs[normalize
+00012f20: 645f 7175 616c 6966 6965 725d 0a20 2020  d_qualifier].   
+00012f30: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00012f40: 7265 7475 726e 2043 7265 6174 6546 756e  return CreateFun
+00012f50: 6374 696f 6e55 726c 436f 6e66 6967 5265  ctionUrlConfigRe
+00012f60: 7370 6f6e 7365 280a 2020 2020 2020 2020  sponse(.        
+00012f70: 2020 2020 4675 6e63 7469 6f6e 5572 6c3d      FunctionUrl=
+00012f80: 6170 695f 7572 6c5f 636f 6e66 6967 5b22  api_url_config["
+00012f90: 4675 6e63 7469 6f6e 5572 6c22 5d2c 0a20  FunctionUrl"],. 
+00012fa0: 2020 2020 2020 2020 2020 2046 756e 6374             Funct
+00012fb0: 696f 6e41 726e 3d61 7069 5f75 726c 5f63  ionArn=api_url_c
+00012fc0: 6f6e 6669 675b 2246 756e 6374 696f 6e41  onfig["FunctionA
+00012fd0: 726e 225d 2c0a 2020 2020 2020 2020 2020  rn"],.          
+00012fe0: 2020 4175 7468 5479 7065 3d61 7069 5f75    AuthType=api_u
+00012ff0: 726c 5f63 6f6e 6669 675b 2241 7574 6854  rl_config["AuthT
+00013000: 7970 6522 5d2c 0a20 2020 2020 2020 2020  ype"],.         
+00013010: 2020 2043 6f72 733d 6170 695f 7572 6c5f     Cors=api_url_
+00013020: 636f 6e66 6967 5b22 436f 7273 225d 2c0a  config["Cors"],.
+00013030: 2020 2020 2020 2020 2020 2020 4372 6561              Crea
+00013040: 7469 6f6e 5469 6d65 3d61 7069 5f75 726c  tionTime=api_url
+00013050: 5f63 6f6e 6669 675b 2243 7265 6174 696f  _config["Creatio
+00013060: 6e54 696d 6522 5d2c 0a20 2020 2020 2020  nTime"],.       
+00013070: 2029 0a0a 2020 2020 6465 6620 6765 745f   )..    def get_
+00013080: 6675 6e63 7469 6f6e 5f75 726c 5f63 6f6e  function_url_con
+00013090: 6669 6728 0a20 2020 2020 2020 2073 656c  fig(.        sel
+000130a0: 662c 0a20 2020 2020 2020 2063 6f6e 7465  f,.        conte
+000130b0: 7874 3a20 5265 7175 6573 7443 6f6e 7465  xt: RequestConte
+000130c0: 7874 2c0a 2020 2020 2020 2020 6675 6e63  xt,.        func
+000130d0: 7469 6f6e 5f6e 616d 653a 2046 756e 6374  tion_name: Funct
+000130e0: 696f 6e4e 616d 652c 0a20 2020 2020 2020  ionName,.       
+000130f0: 2071 7561 6c69 6669 6572 3a20 4675 6e63   qualifier: Func
+00013100: 7469 6f6e 5572 6c51 7561 6c69 6669 6572  tionUrlQualifier
+00013110: 203d 204e 6f6e 652c 0a20 2020 2029 202d   = None,.    ) -
+00013120: 3e20 4765 7446 756e 6374 696f 6e55 726c  > GetFunctionUrl
+00013130: 436f 6e66 6967 5265 7370 6f6e 7365 3a0a  ConfigResponse:.
+00013140: 2020 2020 2020 2020 7374 6174 6520 3d20          state = 
+00013150: 6c61 6d62 6461 5f73 746f 7265 735b 636f  lambda_stores[co
+00013160: 6e74 6578 742e 6163 636f 756e 745f 6964  ntext.account_id
+00013170: 5d5b 636f 6e74 6578 742e 7265 6769 6f6e  ][context.region
+00013180: 5d0a 0a20 2020 2020 2020 2066 6e5f 6e61  ]..        fn_na
+00013190: 6d65 2c20 7175 616c 6966 6965 7220 3d20  me, qualifier = 
+000131a0: 6170 695f 7574 696c 732e 6765 745f 6e61  api_utils.get_na
+000131b0: 6d65 5f61 6e64 5f71 7561 6c69 6669 6572  me_and_qualifier
+000131c0: 280a 2020 2020 2020 2020 2020 2020 6675  (.            fu
+000131d0: 6e63 7469 6f6e 5f6e 616d 652c 2071 7561  nction_name, qua
+000131e0: 6c69 6669 6572 2c20 636f 6e74 6578 742e  lifier, context.
+000131f0: 7265 6769 6f6e 0a20 2020 2020 2020 2029  region.        )
+00013200: 0a0a 2020 2020 2020 2020 6966 2071 7561  ..        if qua
+00013210: 6c69 6669 6572 203d 3d20 2224 4c41 5445  lifier == "$LATE
+00013220: 5354 223a 0a20 2020 2020 2020 2020 2020  ST":.           
+00013230: 2072 6169 7365 2056 616c 6964 6174 696f   raise Validatio
+00013240: 6e45 7863 6570 7469 6f6e 280a 2020 2020  nException(.    
+00013250: 2020 2020 2020 2020 2020 2020 2231 2076              "1 v
+00013260: 616c 6964 6174 696f 6e20 6572 726f 7220  alidation error 
+00013270: 6465 7465 6374 6564 3a20 5661 6c75 6520  detected: Value 
+00013280: 2724 4c41 5445 5354 2720 6174 2027 7175  '$LATEST' at 'qu
+00013290: 616c 6966 6965 7227 2066 6169 6c65 6420  alifier' failed 
+000132a0: 746f 2073 6174 6973 6679 2063 6f6e 7374  to satisfy const
+000132b0: 7261 696e 743a 204d 656d 6265 7220 6d75  raint: Member mu
+000132c0: 7374 2073 6174 6973 6679 2072 6567 756c  st satisfy regul
+000132d0: 6172 2065 7870 7265 7373 696f 6e20 7061  ar expression pa
+000132e0: 7474 6572 6e3a 2028 283f 215e 5c5c 642b  ttern: ((?!^\\d+
+000132f0: 2429 5e5b 302d 3961 2d7a 412d 5a2d 5f5d  $)^[0-9a-zA-Z-_]
+00013300: 2b24 2922 0a20 2020 2020 2020 2020 2020  +$)".           
+00013310: 2029 0a20 2020 2020 2020 2069 6620 7175   ).        if qu
+00013320: 616c 6966 6965 7220 616e 6420 6170 695f  alifier and api_
+00013330: 7574 696c 732e 7175 616c 6966 6965 725f  utils.qualifier_
+00013340: 6973 5f76 6572 7369 6f6e 2871 7561 6c69  is_version(quali
+00013350: 6669 6572 293a 0a20 2020 2020 2020 2020  fier):.         
+00013360: 2020 2072 6169 7365 2056 616c 6964 6174     raise Validat
+00013370: 696f 6e45 7863 6570 7469 6f6e 280a 2020  ionException(.  
+00013380: 2020 2020 2020 2020 2020 2020 2020 6622                f"
+00013390: 3120 7661 6c69 6461 7469 6f6e 2065 7272  1 validation err
+000133a0: 6f72 2064 6574 6563 7465 643a 2056 616c  or detected: Val
+000133b0: 7565 2027 7b71 7561 6c69 6669 6572 7d27  ue '{qualifier}'
+000133c0: 2061 7420 2771 7561 6c69 6669 6572 2720   at 'qualifier' 
+000133d0: 6661 696c 6564 2074 6f20 7361 7469 7366  failed to satisf
+000133e0: 7920 636f 6e73 7472 6169 6e74 3a20 4d65  y constraint: Me
+000133f0: 6d62 6572 206d 7573 7420 7361 7469 7366  mber must satisf
+00013400: 7920 7265 6775 6c61 7220 6578 7072 6573  y regular expres
+00013410: 7369 6f6e 2070 6174 7465 726e 3a20 285e  sion pattern: (^
+00013420: 5c5c 244c 4154 4553 5424 297c 2828 3f21  \\$LATEST$)|((?!
+00013430: 5e5b 302d 395d 2b24 2928 5b61 2d7a 412d  ^[0-9]+$)([a-zA-
+00013440: 5a30 2d39 2d5f 5d2b 2929 220a 2020 2020  Z0-9-_]+))".    
+00013450: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+00013460: 2020 2072 6573 6f6c 7665 645f 666e 203d     resolved_fn =
+00013470: 2073 7461 7465 2e66 756e 6374 696f 6e73   state.functions
+00013480: 2e67 6574 2866 6e5f 6e61 6d65 290a 2020  .get(fn_name).  
+00013490: 2020 2020 2020 6966 206e 6f74 2072 6573        if not res
+000134a0: 6f6c 7665 645f 666e 3a0a 2020 2020 2020  olved_fn:.      
+000134b0: 2020 2020 2020 7261 6973 6520 5265 736f        raise Reso
+000134c0: 7572 6365 4e6f 7446 6f75 6e64 4578 6365  urceNotFoundExce
+000134d0: 7074 696f 6e28 0a20 2020 2020 2020 2020  ption(.         
+000134e0: 2020 2020 2020 2022 5468 6520 7265 736f         "The reso
+000134f0: 7572 6365 2079 6f75 2072 6571 7565 7374  urce you request
+00013500: 6564 2064 6f65 7320 6e6f 7420 6578 6973  ed does not exis
+00013510: 742e 222c 2054 7970 653d 2255 7365 7222  t.", Type="User"
+00013520: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
+00013530: 2020 2020 2020 2020 7175 616c 6966 6965          qualifie
+00013540: 7220 3d20 7175 616c 6966 6965 7220 6f72  r = qualifier or
+00013550: 2022 244c 4154 4553 5422 0a20 2020 2020   "$LATEST".     
+00013560: 2020 2075 726c 5f63 6f6e 6669 6720 3d20     url_config = 
+00013570: 7265 736f 6c76 6564 5f66 6e2e 6675 6e63  resolved_fn.func
+00013580: 7469 6f6e 5f75 726c 5f63 6f6e 6669 6773  tion_url_configs
+00013590: 2e67 6574 2871 7561 6c69 6669 6572 290a  .get(qualifier).
+000135a0: 2020 2020 2020 2020 6966 206e 6f74 2075          if not u
+000135b0: 726c 5f63 6f6e 6669 673a 0a20 2020 2020  rl_config:.     
+000135c0: 2020 2020 2020 2072 6169 7365 2052 6573         raise Res
+000135d0: 6f75 7263 654e 6f74 466f 756e 6445 7863  ourceNotFoundExc
+000135e0: 6570 7469 6f6e 280a 2020 2020 2020 2020  eption(.        
+000135f0: 2020 2020 2020 2020 2254 6865 2072 6573          "The res
+00013600: 6f75 7263 6520 796f 7520 7265 7175 6573  ource you reques
+00013610: 7465 6420 646f 6573 206e 6f74 2065 7869  ted does not exi
+00013620: 7374 2e22 2c20 5479 7065 3d22 5573 6572  st.", Type="User
+00013630: 220a 2020 2020 2020 2020 2020 2020 290a  ".            ).
+00013640: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
+00013650: 6170 695f 7574 696c 732e 6d61 705f 6675  api_utils.map_fu
+00013660: 6e63 7469 6f6e 5f75 726c 5f63 6f6e 6669  nction_url_confi
+00013670: 6728 7572 6c5f 636f 6e66 6967 290a 0a20  g(url_config).. 
+00013680: 2020 2064 6566 2075 7064 6174 655f 6675     def update_fu
+00013690: 6e63 7469 6f6e 5f75 726c 5f63 6f6e 6669  nction_url_confi
+000136a0: 6728 0a20 2020 2020 2020 2073 656c 662c  g(.        self,
+000136b0: 0a20 2020 2020 2020 2063 6f6e 7465 7874  .        context
+000136c0: 3a20 5265 7175 6573 7443 6f6e 7465 7874  : RequestContext
+000136d0: 2c0a 2020 2020 2020 2020 6675 6e63 7469  ,.        functi
+000136e0: 6f6e 5f6e 616d 653a 2046 756e 6374 696f  on_name: Functio
+000136f0: 6e4e 616d 652c 0a20 2020 2020 2020 2071  nName,.        q
+00013700: 7561 6c69 6669 6572 3a20 4675 6e63 7469  ualifier: Functi
+00013710: 6f6e 5572 6c51 7561 6c69 6669 6572 203d  onUrlQualifier =
+00013720: 204e 6f6e 652c 0a20 2020 2020 2020 2061   None,.        a
+00013730: 7574 685f 7479 7065 3a20 4675 6e63 7469  uth_type: Functi
+00013740: 6f6e 5572 6c41 7574 6854 7970 6520 3d20  onUrlAuthType = 
+00013750: 4e6f 6e65 2c0a 2020 2020 2020 2020 636f  None,.        co
+00013760: 7273 3a20 436f 7273 203d 204e 6f6e 652c  rs: Cors = None,
+00013770: 0a20 2020 2020 2020 2069 6e76 6f6b 655f  .        invoke_
+00013780: 6d6f 6465 3a20 496e 766f 6b65 4d6f 6465  mode: InvokeMode
+00013790: 203d 204e 6f6e 652c 0a20 2020 2029 202d   = None,.    ) -
+000137a0: 3e20 5570 6461 7465 4675 6e63 7469 6f6e  > UpdateFunction
+000137b0: 5572 6c43 6f6e 6669 6752 6573 706f 6e73  UrlConfigRespons
+000137c0: 653a 0a20 2020 2020 2020 2073 7461 7465  e:.        state
+000137d0: 203d 206c 616d 6264 615f 7374 6f72 6573   = lambda_stores
+000137e0: 5b63 6f6e 7465 7874 2e61 6363 6f75 6e74  [context.account
+000137f0: 5f69 645d 5b63 6f6e 7465 7874 2e72 6567  _id][context.reg
+00013800: 696f 6e5d 0a0a 2020 2020 2020 2020 6675  ion]..        fu
+00013810: 6e63 7469 6f6e 5f6e 616d 652c 2071 7561  nction_name, qua
+00013820: 6c69 6669 6572 203d 2061 7069 5f75 7469  lifier = api_uti
+00013830: 6c73 2e67 6574 5f6e 616d 655f 616e 645f  ls.get_name_and_
+00013840: 7175 616c 6966 6965 7228 0a20 2020 2020  qualifier(.     
+00013850: 2020 2020 2020 2066 756e 6374 696f 6e5f         function_
+00013860: 6e61 6d65 2c20 7175 616c 6966 6965 722c  name, qualifier,
+00013870: 2063 6f6e 7465 7874 2e72 6567 696f 6e0a   context.region.
+00013880: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00013890: 2020 6966 2071 7561 6c69 6669 6572 203d    if qualifier =
+000138a0: 3d20 2224 4c41 5445 5354 223a 0a20 2020  = "$LATEST":.   
+000138b0: 2020 2020 2020 2020 2072 6169 7365 2056           raise V
+000138c0: 616c 6964 6174 696f 6e45 7863 6570 7469  alidationExcepti
+000138d0: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
+000138e0: 2020 2020 2231 2076 616c 6964 6174 696f      "1 validatio
+000138f0: 6e20 6572 726f 7220 6465 7465 6374 6564  n error detected
+00013900: 3a20 5661 6c75 6520 2724 4c41 5445 5354  : Value '$LATEST
+00013910: 2720 6174 2027 7175 616c 6966 6965 7227  ' at 'qualifier'
+00013920: 2066 6169 6c65 6420 746f 2073 6174 6973   failed to satis
+00013930: 6679 2063 6f6e 7374 7261 696e 743a 204d  fy constraint: M
+00013940: 656d 6265 7220 6d75 7374 2073 6174 6973  ember must satis
+00013950: 6679 2072 6567 756c 6172 2065 7870 7265  fy regular expre
+00013960: 7373 696f 6e20 7061 7474 6572 6e3a 2028  ssion pattern: (
+00013970: 283f 215e 5c5c 642b 2429 5e5b 302d 3961  (?!^\\d+$)^[0-9a
+00013980: 2d7a 412d 5a2d 5f5d 2b24 2922 0a20 2020  -zA-Z-_]+$)".   
+00013990: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+000139a0: 2020 2069 6620 7175 616c 6966 6965 7220     if qualifier 
+000139b0: 616e 6420 6170 695f 7574 696c 732e 7175  and api_utils.qu
+000139c0: 616c 6966 6965 725f 6973 5f76 6572 7369  alifier_is_versi
+000139d0: 6f6e 2871 7561 6c69 6669 6572 293a 0a20  on(qualifier):. 
+000139e0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+000139f0: 2056 616c 6964 6174 696f 6e45 7863 6570   ValidationExcep
+00013a00: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
+00013a10: 2020 2020 2020 6622 3120 7661 6c69 6461        f"1 valida
+00013a20: 7469 6f6e 2065 7272 6f72 2064 6574 6563  tion error detec
+00013a30: 7465 643a 2056 616c 7565 2027 7b71 7561  ted: Value '{qua
+00013a40: 6c69 6669 6572 7d27 2061 7420 2771 7561  lifier}' at 'qua
+00013a50: 6c69 6669 6572 2720 6661 696c 6564 2074  lifier' failed t
+00013a60: 6f20 7361 7469 7366 7920 636f 6e73 7472  o satisfy constr
+00013a70: 6169 6e74 3a20 4d65 6d62 6572 206d 7573  aint: Member mus
+00013a80: 7420 7361 7469 7366 7920 7265 6775 6c61  t satisfy regula
+00013a90: 7220 6578 7072 6573 7369 6f6e 2070 6174  r expression pat
+00013aa0: 7465 726e 3a20 285e 5c5c 244c 4154 4553  tern: (^\\$LATES
+00013ab0: 5424 297c 2828 3f21 5e5b 302d 395d 2b24  T$)|((?!^[0-9]+$
+00013ac0: 2928 5b61 2d7a 412d 5a30 2d39 2d5f 5d2b  )([a-zA-Z0-9-_]+
+00013ad0: 2929 220a 2020 2020 2020 2020 2020 2020  ))".            
+00013ae0: 290a 0a20 2020 2020 2020 2066 6e20 3d20  )..        fn = 
+00013af0: 7374 6174 652e 6675 6e63 7469 6f6e 732e  state.functions.
+00013b00: 6765 7428 6675 6e63 7469 6f6e 5f6e 616d  get(function_nam
+00013b10: 6529 0a20 2020 2020 2020 2069 6620 6e6f  e).        if no
+00013b20: 7420 666e 3a0a 2020 2020 2020 2020 2020  t fn:.          
+00013b30: 2020 7261 6973 6520 5265 736f 7572 6365    raise Resource
+00013b40: 4e6f 7446 6f75 6e64 4578 6365 7074 696f  NotFoundExceptio
+00013b50: 6e28 2246 756e 6374 696f 6e20 646f 6573  n("Function does
+00013b60: 206e 6f74 2065 7869 7374 222c 2054 7970   not exist", Typ
+00013b70: 653d 2255 7365 7222 290a 0a20 2020 2020  e="User")..     
+00013b80: 2020 206e 6f72 6d61 6c69 7a65 645f 7175     normalized_qu
+00013b90: 616c 6966 6965 7220 3d20 7175 616c 6966  alifier = qualif
+00013ba0: 6965 7220 6f72 2022 244c 4154 4553 5422  ier or "$LATEST"
+00013bb0: 0a0a 2020 2020 2020 2020 6966 2028 0a20  ..        if (. 
+00013bc0: 2020 2020 2020 2020 2020 2061 7069 5f75             api_u
+00013bd0: 7469 6c73 2e71 7561 6c69 6669 6572 5f69  tils.qualifier_i
+00013be0: 735f 616c 6961 7328 6e6f 726d 616c 697a  s_alias(normaliz
+00013bf0: 6564 5f71 7561 6c69 6669 6572 290a 2020  ed_qualifier).  
+00013c00: 2020 2020 2020 2020 2020 616e 6420 6e6f            and no
+00013c10: 726d 616c 697a 6564 5f71 7561 6c69 6669  rmalized_qualifi
+00013c20: 6572 206e 6f74 2069 6e20 666e 2e61 6c69  er not in fn.ali
+00013c30: 6173 6573 0a20 2020 2020 2020 2029 3a0a  ases.        ):.
+00013c40: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00013c50: 6520 5265 736f 7572 6365 4e6f 7446 6f75  e ResourceNotFou
+00013c60: 6e64 4578 6365 7074 696f 6e28 2246 756e  ndException("Fun
+00013c70: 6374 696f 6e20 646f 6573 206e 6f74 2065  ction does not e
+00013c80: 7869 7374 222c 2054 7970 653d 2255 7365  xist", Type="Use
+00013c90: 7222 290a 0a20 2020 2020 2020 2075 726c  r")..        url
+00013ca0: 5f63 6f6e 6669 6720 3d20 666e 2e66 756e  _config = fn.fun
+00013cb0: 6374 696f 6e5f 7572 6c5f 636f 6e66 6967  ction_url_config
+00013cc0: 732e 6765 7428 6e6f 726d 616c 697a 6564  s.get(normalized
+00013cd0: 5f71 7561 6c69 6669 6572 290a 2020 2020  _qualifier).    
+00013ce0: 2020 2020 6966 206e 6f74 2075 726c 5f63      if not url_c
+00013cf0: 6f6e 6669 673a 0a20 2020 2020 2020 2020  onfig:.         
+00013d00: 2020 2072 6169 7365 2052 6573 6f75 7263     raise Resourc
+00013d10: 654e 6f74 466f 756e 6445 7863 6570 7469  eNotFoundExcepti
+00013d20: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
+00013d30: 2020 2020 2254 6865 2072 6573 6f75 7263      "The resourc
+00013d40: 6520 796f 7520 7265 7175 6573 7465 6420  e you requested 
+00013d50: 646f 6573 206e 6f74 2065 7869 7374 2e22  does not exist."
+00013d60: 2c20 5479 7065 3d22 5573 6572 220a 2020  , Type="User".  
+00013d70: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
+00013d80: 2020 2020 2063 6861 6e67 6573 203d 207b       changes = {
+00013d90: 0a20 2020 2020 2020 2020 2020 2022 6c61  .            "la
+00013da0: 7374 5f6d 6f64 6966 6965 645f 7469 6d65  st_modified_time
+00013db0: 223a 2061 7069 5f75 7469 6c73 2e67 656e  ": api_utils.gen
+00013dc0: 6572 6174 655f 6c61 6d62 6461 5f64 6174  erate_lambda_dat
+00013dd0: 6528 292c 0a20 2020 2020 2020 2020 2020  e(),.           
+00013de0: 202a 2a28 7b22 636f 7273 223a 2063 6f72   **({"cors": cor
+00013df0: 737d 2069 6620 636f 7273 2069 7320 6e6f  s} if cors is no
+00013e00: 7420 4e6f 6e65 2065 6c73 6520 7b7d 292c  t None else {}),
+00013e10: 0a20 2020 2020 2020 2020 2020 202a 2a28  .            **(
+00013e20: 7b22 6175 7468 5f74 7970 6522 3a20 6175  {"auth_type": au
+00013e30: 7468 5f74 7970 657d 2069 6620 6175 7468  th_type} if auth
+00013e40: 5f74 7970 6520 6973 206e 6f74 204e 6f6e  _type is not Non
+00013e50: 6520 656c 7365 207b 7d29 2c0a 2020 2020  e else {}),.    
+00013e60: 2020 2020 7d0a 2020 2020 2020 2020 6e65      }.        ne
+00013e70: 775f 7572 6c5f 636f 6e66 6967 203d 2064  w_url_config = d
+00013e80: 6174 6163 6c61 7373 6573 2e72 6570 6c61  ataclasses.repla
+00013e90: 6365 2875 726c 5f63 6f6e 6669 672c 202a  ce(url_config, *
+00013ea0: 2a63 6861 6e67 6573 290a 2020 2020 2020  *changes).      
+00013eb0: 2020 666e 2e66 756e 6374 696f 6e5f 7572    fn.function_ur
+00013ec0: 6c5f 636f 6e66 6967 735b 6e6f 726d 616c  l_configs[normal
+00013ed0: 697a 6564 5f71 7561 6c69 6669 6572 5d20  ized_qualifier] 
+00013ee0: 3d20 6e65 775f 7572 6c5f 636f 6e66 6967  = new_url_config
+00013ef0: 0a0a 2020 2020 2020 2020 7265 7475 726e  ..        return
+00013f00: 2055 7064 6174 6546 756e 6374 696f 6e55   UpdateFunctionU
+00013f10: 726c 436f 6e66 6967 5265 7370 6f6e 7365  rlConfigResponse
+00013f20: 280a 2020 2020 2020 2020 2020 2020 4675  (.            Fu
+00013f30: 6e63 7469 6f6e 5572 6c3d 6e65 775f 7572  nctionUrl=new_ur
+00013f40: 6c5f 636f 6e66 6967 2e75 726c 2c0a 2020  l_config.url,.  
+00013f50: 2020 2020 2020 2020 2020 4675 6e63 7469            Functi
+00013f60: 6f6e 4172 6e3d 6e65 775f 7572 6c5f 636f  onArn=new_url_co
+00013f70: 6e66 6967 2e66 756e 6374 696f 6e5f 6172  nfig.function_ar
+00013f80: 6e2c 0a20 2020 2020 2020 2020 2020 2041  n,.            A
+00013f90: 7574 6854 7970 653d 6e65 775f 7572 6c5f  uthType=new_url_
+00013fa0: 636f 6e66 6967 2e61 7574 685f 7479 7065  config.auth_type
+00013fb0: 2c0a 2020 2020 2020 2020 2020 2020 436f  ,.            Co
+00013fc0: 7273 3d6e 6577 5f75 726c 5f63 6f6e 6669  rs=new_url_confi
+00013fd0: 672e 636f 7273 2c0a 2020 2020 2020 2020  g.cors,.        
+00013fe0: 2020 2020 4372 6561 7469 6f6e 5469 6d65      CreationTime
+00013ff0: 3d6e 6577 5f75 726c 5f63 6f6e 6669 672e  =new_url_config.
+00014000: 6372 6561 7469 6f6e 5f74 696d 652c 0a20  creation_time,. 
+00014010: 2020 2020 2020 2020 2020 204c 6173 744d             LastM
+00014020: 6f64 6966 6965 6454 696d 653d 6e65 775f  odifiedTime=new_
+00014030: 7572 6c5f 636f 6e66 6967 2e6c 6173 745f  url_config.last_
+00014040: 6d6f 6469 6669 6564 5f74 696d 652c 0a20  modified_time,. 
+00014050: 2020 2020 2020 2029 0a0a 2020 2020 2320         )..    # 
+00014060: 544f 444f 3a20 646f 6573 206f 6e6c 7920  TODO: does only 
+00014070: 7370 6563 6966 7969 6e67 2074 6865 2066  specifying the f
+00014080: 756e 6374 696f 6e20 6e61 6d65 2c20 616c  unction name, al
+00014090: 736f 2064 656c 6574 6520 7468 6520 6f6e  so delete the on
+000140a0: 6573 2066 726f 6d20 616c 6c20 7265 6c61  es from all rela
+000140b0: 7465 6420 616c 6961 7365 733f 0a20 2020  ted aliases?.   
+000140c0: 2064 6566 2064 656c 6574 655f 6675 6e63   def delete_func
+000140d0: 7469 6f6e 5f75 726c 5f63 6f6e 6669 6728  tion_url_config(
+000140e0: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
+000140f0: 2020 2020 2020 2063 6f6e 7465 7874 3a20         context: 
+00014100: 5265 7175 6573 7443 6f6e 7465 7874 2c0a  RequestContext,.
+00014110: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
+00014120: 5f6e 616d 653a 2046 756e 6374 696f 6e4e  _name: FunctionN
+00014130: 616d 652c 0a20 2020 2020 2020 2071 7561  ame,.        qua
+00014140: 6c69 6669 6572 3a20 4675 6e63 7469 6f6e  lifier: Function
+00014150: 5572 6c51 7561 6c69 6669 6572 203d 204e  UrlQualifier = N
+00014160: 6f6e 652c 0a20 2020 2029 202d 3e20 4e6f  one,.    ) -> No
+00014170: 6e65 3a0a 2020 2020 2020 2020 7374 6174  ne:.        stat
+00014180: 6520 3d20 6c61 6d62 6461 5f73 746f 7265  e = lambda_store
+00014190: 735b 636f 6e74 6578 742e 6163 636f 756e  s[context.accoun
+000141a0: 745f 6964 5d5b 636f 6e74 6578 742e 7265  t_id][context.re
+000141b0: 6769 6f6e 5d0a 0a20 2020 2020 2020 2066  gion]..        f
+000141c0: 756e 6374 696f 6e5f 6e61 6d65 2c20 7175  unction_name, qu
+000141d0: 616c 6966 6965 7220 3d20 6170 695f 7574  alifier = api_ut
+000141e0: 696c 732e 6765 745f 6e61 6d65 5f61 6e64  ils.get_name_and
+000141f0: 5f71 7561 6c69 6669 6572 280a 2020 2020  _qualifier(.    
+00014200: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
+00014210: 5f6e 616d 652c 2071 7561 6c69 6669 6572  _name, qualifier
+00014220: 2c20 636f 6e74 6578 742e 7265 6769 6f6e  , context.region
+00014230: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
+00014240: 2020 2069 6620 7175 616c 6966 6965 7220     if qualifier 
+00014250: 3d3d 2022 244c 4154 4553 5422 3a0a 2020  == "$LATEST":.  
+00014260: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00014270: 5661 6c69 6461 7469 6f6e 4578 6365 7074  ValidationExcept
+00014280: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
+00014290: 2020 2020 2022 3120 7661 6c69 6461 7469       "1 validati
+000142a0: 6f6e 2065 7272 6f72 2064 6574 6563 7465  on error detecte
+000142b0: 643a 2056 616c 7565 2027 244c 4154 4553  d: Value '$LATES
+000142c0: 5427 2061 7420 2771 7561 6c69 6669 6572  T' at 'qualifier
+000142d0: 2720 6661 696c 6564 2074 6f20 7361 7469  ' failed to sati
+000142e0: 7366 7920 636f 6e73 7472 6169 6e74 3a20  sfy constraint: 
+000142f0: 4d65 6d62 6572 206d 7573 7420 7361 7469  Member must sati
+00014300: 7366 7920 7265 6775 6c61 7220 6578 7072  sfy regular expr
+00014310: 6573 7369 6f6e 2070 6174 7465 726e 3a20  ession pattern: 
+00014320: 2828 3f21 5e5c 5c64 2b24 295e 5b30 2d39  ((?!^\\d+$)^[0-9
+00014330: 612d 7a41 2d5a 2d5f 5d2b 2429 220a 2020  a-zA-Z-_]+$)".  
+00014340: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00014350: 2020 2020 6966 2071 7561 6c69 6669 6572      if qualifier
+00014360: 2061 6e64 2061 7069 5f75 7469 6c73 2e71   and api_utils.q
+00014370: 7561 6c69 6669 6572 5f69 735f 7665 7273  ualifier_is_vers
+00014380: 696f 6e28 7175 616c 6966 6965 7229 3a0a  ion(qualifier):.
+00014390: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+000143a0: 6520 5661 6c69 6461 7469 6f6e 4578 6365  e ValidationExce
+000143b0: 7074 696f 6e28 0a20 2020 2020 2020 2020  ption(.         
+000143c0: 2020 2020 2020 2066 2231 2076 616c 6964         f"1 valid
+000143d0: 6174 696f 6e20 6572 726f 7220 6465 7465  ation error dete
+000143e0: 6374 6564 3a20 5661 6c75 6520 277b 7175  cted: Value '{qu
+000143f0: 616c 6966 6965 727d 2720 6174 2027 7175  alifier}' at 'qu
+00014400: 616c 6966 6965 7227 2066 6169 6c65 6420  alifier' failed 
+00014410: 746f 2073 6174 6973 6679 2063 6f6e 7374  to satisfy const
+00014420: 7261 696e 743a 204d 656d 6265 7220 6d75  raint: Member mu
+00014430: 7374 2073 6174 6973 6679 2072 6567 756c  st satisfy regul
+00014440: 6172 2065 7870 7265 7373 696f 6e20 7061  ar expression pa
+00014450: 7474 6572 6e3a 2028 5e5c 5c24 4c41 5445  ttern: (^\\$LATE
+00014460: 5354 2429 7c28 283f 215e 5b30 2d39 5d2b  ST$)|((?!^[0-9]+
+00014470: 2429 285b 612d 7a41 2d5a 302d 392d 5f5d  $)([a-zA-Z0-9-_]
+00014480: 2b29 2922 0a20 2020 2020 2020 2020 2020  +))".           
+00014490: 2029 0a20 2020 2020 2020 2072 6573 6f6c   ).        resol
+000144a0: 7665 645f 666e 203d 2073 7461 7465 2e66  ved_fn = state.f
+000144b0: 756e 6374 696f 6e73 2e67 6574 2866 756e  unctions.get(fun
+000144c0: 6374 696f 6e5f 6e61 6d65 290a 2020 2020  ction_name).    
+000144d0: 2020 2020 6966 206e 6f74 2072 6573 6f6c      if not resol
+000144e0: 7665 645f 666e 3a0a 2020 2020 2020 2020  ved_fn:.        
+000144f0: 2020 2020 7261 6973 6520 5265 736f 7572      raise Resour
+00014500: 6365 4e6f 7446 6f75 6e64 4578 6365 7074  ceNotFoundExcept
+00014510: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
+00014520: 2020 2020 2022 5468 6520 7265 736f 7572       "The resour
+00014530: 6365 2079 6f75 2072 6571 7565 7374 6564  ce you requested
+00014540: 2064 6f65 7320 6e6f 7420 6578 6973 742e   does not exist.
+00014550: 222c 2054 7970 653d 2255 7365 7222 0a20  ", Type="User". 
+00014560: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
+00014570: 2020 2020 2020 7175 616c 6966 6965 7220        qualifier 
+00014580: 3d20 7175 616c 6966 6965 7220 6f72 2022  = qualifier or "
+00014590: 244c 4154 4553 5422 0a20 2020 2020 2020  $LATEST".       
+000145a0: 2075 726c 5f63 6f6e 6669 6720 3d20 7265   url_config = re
+000145b0: 736f 6c76 6564 5f66 6e2e 6675 6e63 7469  solved_fn.functi
+000145c0: 6f6e 5f75 726c 5f63 6f6e 6669 6773 2e67  on_url_configs.g
+000145d0: 6574 2871 7561 6c69 6669 6572 290a 2020  et(qualifier).  
+000145e0: 2020 2020 2020 6966 206e 6f74 2075 726c        if not url
+000145f0: 5f63 6f6e 6669 673a 0a20 2020 2020 2020  _config:.       
+00014600: 2020 2020 2072 6169 7365 2052 6573 6f75       raise Resou
+00014610: 7263 654e 6f74 466f 756e 6445 7863 6570  rceNotFoundExcep
+00014620: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
+00014630: 2020 2020 2020 2254 6865 2072 6573 6f75        "The resou
+00014640: 7263 6520 796f 7520 7265 7175 6573 7465  rce you requeste
+00014650: 6420 646f 6573 206e 6f74 2065 7869 7374  d does not exist
+00014660: 2e22 2c20 5479 7065 3d22 5573 6572 220a  .", Type="User".
+00014670: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
+00014680: 2020 2020 2020 2064 656c 2072 6573 6f6c         del resol
+00014690: 7665 645f 666e 2e66 756e 6374 696f 6e5f  ved_fn.function_
+000146a0: 7572 6c5f 636f 6e66 6967 735b 7175 616c  url_configs[qual
+000146b0: 6966 6965 725d 0a0a 2020 2020 6465 6620  ifier]..    def 
+000146c0: 6c69 7374 5f66 756e 6374 696f 6e5f 7572  list_function_ur
+000146d0: 6c5f 636f 6e66 6967 7328 0a20 2020 2020  l_configs(.     
+000146e0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
+000146f0: 2063 6f6e 7465 7874 3a20 5265 7175 6573   context: Reques
+00014700: 7443 6f6e 7465 7874 2c0a 2020 2020 2020  tContext,.      
+00014710: 2020 6675 6e63 7469 6f6e 5f6e 616d 653a    function_name:
+00014720: 2046 756e 6374 696f 6e4e 616d 652c 0a20   FunctionName,. 
+00014730: 2020 2020 2020 206d 6172 6b65 723a 2053         marker: S
+00014740: 7472 696e 6720 3d20 4e6f 6e65 2c0a 2020  tring = None,.  
+00014750: 2020 2020 2020 6d61 785f 6974 656d 733a        max_items:
+00014760: 204d 6178 4974 656d 7320 3d20 4e6f 6e65   MaxItems = None
+00014770: 2c0a 2020 2020 2920 2d3e 204c 6973 7446  ,.    ) -> ListF
+00014780: 756e 6374 696f 6e55 726c 436f 6e66 6967  unctionUrlConfig
+00014790: 7352 6573 706f 6e73 653a 0a20 2020 2020  sResponse:.     
+000147a0: 2020 2073 7461 7465 203d 206c 616d 6264     state = lambd
+000147b0: 615f 7374 6f72 6573 5b63 6f6e 7465 7874  a_stores[context
+000147c0: 2e61 6363 6f75 6e74 5f69 645d 5b63 6f6e  .account_id][con
+000147d0: 7465 7874 2e72 6567 696f 6e5d 0a0a 2020  text.region]..  
+000147e0: 2020 2020 2020 666e 5f6e 616d 6520 3d20        fn_name = 
+000147f0: 6170 695f 7574 696c 732e 6765 745f 6675  api_utils.get_fu
+00014800: 6e63 7469 6f6e 5f6e 616d 6528 6675 6e63  nction_name(func
+00014810: 7469 6f6e 5f6e 616d 652c 2063 6f6e 7465  tion_name, conte
+00014820: 7874 2e72 6567 696f 6e29 0a20 2020 2020  xt.region).     
+00014830: 2020 2072 6573 6f6c 7665 645f 666e 203d     resolved_fn =
+00014840: 2073 7461 7465 2e66 756e 6374 696f 6e73   state.functions
+00014850: 2e67 6574 2866 6e5f 6e61 6d65 290a 2020  .get(fn_name).  
+00014860: 2020 2020 2020 6966 206e 6f74 2072 6573        if not res
+00014870: 6f6c 7665 645f 666e 3a0a 2020 2020 2020  olved_fn:.      
+00014880: 2020 2020 2020 7261 6973 6520 5265 736f        raise Reso
+00014890: 7572 6365 4e6f 7446 6f75 6e64 4578 6365  urceNotFoundExce
+000148a0: 7074 696f 6e28 2246 756e 6374 696f 6e20  ption("Function 
+000148b0: 646f 6573 206e 6f74 2065 7869 7374 222c  does not exist",
+000148c0: 2054 7970 653d 2255 7365 7222 290a 0a20   Type="User").. 
+000148d0: 2020 2020 2020 2075 726c 5f63 6f6e 6669         url_confi
+000148e0: 6773 203d 205b 0a20 2020 2020 2020 2020  gs = [.         
+000148f0: 2020 2061 7069 5f75 7469 6c73 2e6d 6170     api_utils.map
+00014900: 5f66 756e 6374 696f 6e5f 7572 6c5f 636f  _function_url_co
+00014910: 6e66 6967 2866 6e5f 636f 6e66 290a 2020  nfig(fn_conf).  
+00014920: 2020 2020 2020 2020 2020 666f 7220 666e            for fn
+00014930: 5f63 6f6e 6620 696e 2072 6573 6f6c 7665  _conf in resolve
+00014940: 645f 666e 2e66 756e 6374 696f 6e5f 7572  d_fn.function_ur
+00014950: 6c5f 636f 6e66 6967 732e 7661 6c75 6573  l_configs.values
+00014960: 2829 0a20 2020 2020 2020 205d 0a20 2020  ().        ].   
+00014970: 2020 2020 2075 726c 5f63 6f6e 6669 6773       url_configs
+00014980: 203d 2050 6167 696e 6174 6564 4c69 7374   = PaginatedList
+00014990: 2875 726c 5f63 6f6e 6669 6773 290a 2020  (url_configs).  
+000149a0: 2020 2020 2020 7061 6765 2c20 746f 6b65        page, toke
+000149b0: 6e20 3d20 7572 6c5f 636f 6e66 6967 732e  n = url_configs.
+000149c0: 6765 745f 7061 6765 280a 2020 2020 2020  get_page(.      
+000149d0: 2020 2020 2020 6c61 6d62 6461 2075 726c        lambda url
+000149e0: 5f63 6f6e 6669 673a 2075 726c 5f63 6f6e  _config: url_con
+000149f0: 6669 675b 2246 756e 6374 696f 6e41 726e  fig["FunctionArn
+00014a00: 225d 2c0a 2020 2020 2020 2020 2020 2020  "],.            
+00014a10: 6d61 726b 6572 2c0a 2020 2020 2020 2020  marker,.        
+00014a20: 2020 2020 6d61 785f 6974 656d 732c 0a20      max_items,. 
+00014a30: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00014a40: 2075 726c 5f63 6f6e 6669 6773 203d 2070   url_configs = p
+00014a50: 6167 650a 2020 2020 2020 2020 7265 7475  age.        retu
+00014a60: 726e 204c 6973 7446 756e 6374 696f 6e55  rn ListFunctionU
+00014a70: 726c 436f 6e66 6967 7352 6573 706f 6e73  rlConfigsRespons
+00014a80: 6528 4675 6e63 7469 6f6e 5572 6c43 6f6e  e(FunctionUrlCon
+00014a90: 6669 6773 3d75 726c 5f63 6f6e 6669 6773  figs=url_configs
+00014aa0: 2c20 4e65 7874 4d61 726b 6572 3d74 6f6b  , NextMarker=tok
+00014ab0: 656e 290a 0a20 2020 2023 203d 3d3d 3d3d  en)..    # =====
+00014ac0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00014ad0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00014ae0: 3d3d 0a20 2020 2023 203d 3d3d 3d3d 3d3d  ==.    # =======
+00014af0: 3d3d 3d3d 3d20 2050 6572 6d69 7373 696f  =====  Permissio
+00014b00: 6e73 2020 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ns  ============
+00014b10: 0a20 2020 2023 203d 3d3d 3d3d 3d3d 3d3d  .    # =========
+00014b20: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00014b30: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a  ==============..
+00014b40: 2020 2020 4068 616e 646c 6572 2822 4164      @handler("Ad
+00014b50: 6450 6572 6d69 7373 696f 6e22 2c20 6578  dPermission", ex
+00014b60: 7061 6e64 3d46 616c 7365 290a 2020 2020  pand=False).    
+00014b70: 6465 6620 6164 645f 7065 726d 6973 7369  def add_permissi
+00014b80: 6f6e 280a 2020 2020 2020 2020 7365 6c66  on(.        self
+00014b90: 2c0a 2020 2020 2020 2020 636f 6e74 6578  ,.        contex
+00014ba0: 743a 2052 6571 7565 7374 436f 6e74 6578  t: RequestContex
+00014bb0: 742c 0a20 2020 2020 2020 2072 6571 7565  t,.        reque
+00014bc0: 7374 3a20 4164 6450 6572 6d69 7373 696f  st: AddPermissio
+00014bd0: 6e52 6571 7565 7374 2c0a 2020 2020 2920  nRequest,.    ) 
+00014be0: 2d3e 2041 6464 5065 726d 6973 7369 6f6e  -> AddPermission
+00014bf0: 5265 7370 6f6e 7365 3a0a 2020 2020 2020  Response:.      
+00014c00: 2020 6675 6e63 7469 6f6e 5f6e 616d 652c    function_name,
+00014c10: 2071 7561 6c69 6669 6572 203d 2061 7069   qualifier = api
+00014c20: 5f75 7469 6c73 2e67 6574 5f6e 616d 655f  _utils.get_name_
+00014c30: 616e 645f 7175 616c 6966 6965 7228 0a20  and_qualifier(. 
+00014c40: 2020 2020 2020 2020 2020 2072 6571 7565             reque
+00014c50: 7374 2e67 6574 2822 4675 6e63 7469 6f6e  st.get("Function
+00014c60: 4e61 6d65 2229 2c20 7265 7175 6573 742e  Name"), request.
+00014c70: 6765 7428 2251 7561 6c69 6669 6572 2229  get("Qualifier")
+00014c80: 2c20 636f 6e74 6578 742e 7265 6769 6f6e  , context.region
+00014c90: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+00014ca0: 2020 2020 2320 7661 6c69 6461 7465 2071      # validate q
+00014cb0: 7561 6c69 6669 6572 0a20 2020 2020 2020  ualifier.       
+00014cc0: 2069 6620 7175 616c 6966 6965 7220 6973   if qualifier is
+00014cd0: 206e 6f74 204e 6f6e 653a 0a20 2020 2020   not None:.     
+00014ce0: 2020 2020 2020 2073 656c 662e 5f76 616c         self._val
+00014cf0: 6964 6174 655f 7175 616c 6966 6965 725f  idate_qualifier_
+00014d00: 6578 7072 6573 7369 6f6e 2871 7561 6c69  expression(quali
+00014d10: 6669 6572 290a 2020 2020 2020 2020 2020  fier).          
+00014d20: 2020 6966 2071 7561 6c69 6669 6572 203d    if qualifier =
+00014d30: 3d20 2224 4c41 5445 5354 223a 0a20 2020  = "$LATEST":.   
+00014d40: 2020 2020 2020 2020 2020 2020 2072 6169               rai
+00014d50: 7365 2049 6e76 616c 6964 5061 7261 6d65  se InvalidParame
+00014d60: 7465 7256 616c 7565 4578 6365 7074 696f  terValueExceptio
+00014d70: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+00014d80: 2020 2020 2020 2022 5765 2063 7572 7265         "We curre
+00014d90: 6e74 6c79 2064 6f20 6e6f 7420 7375 7070  ntly do not supp
+00014da0: 6f72 7420 6164 6469 6e67 2070 6f6c 6963  ort adding polic
+00014db0: 6965 7320 666f 7220 244c 4154 4553 542e  ies for $LATEST.
+00014dc0: 222c 2054 7970 653d 2255 7365 7222 0a20  ", Type="User". 
+00014dd0: 2020 2020 2020 2020 2020 2020 2020 2029                 )
+00014de0: 0a0a 2020 2020 2020 2020 7265 736f 6c76  ..        resolv
+00014df0: 6564 5f66 6e20 3d20 7365 6c66 2e5f 6765  ed_fn = self._ge
+00014e00: 745f 6675 6e63 7469 6f6e 2866 756e 6374  t_function(funct
+00014e10: 696f 6e5f 6e61 6d65 2c20 636f 6e74 6578  ion_name, contex
+00014e20: 742e 6163 636f 756e 745f 6964 2c20 636f  t.account_id, co
+00014e30: 6e74 6578 742e 7265 6769 6f6e 290a 2020  ntext.region).  
+00014e40: 2020 2020 2020 7265 736f 6c76 6564 5f71        resolved_q
+00014e50: 7561 6c69 6669 6572 2c20 666e 5f61 726e  ualifier, fn_arn
+00014e60: 203d 2073 656c 662e 5f72 6573 6f6c 7665   = self._resolve
+00014e70: 5f66 6e5f 7175 616c 6966 6965 7228 7265  _fn_qualifier(re
+00014e80: 736f 6c76 6564 5f66 6e2c 2071 7561 6c69  solved_fn, quali
+00014e90: 6669 6572 290a 0a20 2020 2020 2020 2072  fier)..        r
+00014ea0: 6576 6973 696f 6e5f 6964 203d 2072 6571  evision_id = req
+00014eb0: 7565 7374 2e67 6574 2822 5265 7669 7369  uest.get("Revisi
+00014ec0: 6f6e 4964 2229 0a20 2020 2020 2020 2069  onId").        i
+00014ed0: 6620 7265 7669 7369 6f6e 5f69 643a 0a20  f revision_id:. 
+00014ee0: 2020 2020 2020 2020 2020 2066 6e5f 7265             fn_re
+00014ef0: 7669 7369 6f6e 5f69 6420 3d20 7365 6c66  vision_id = self
+00014f00: 2e5f 6675 6e63 7469 6f6e 5f72 6576 6973  ._function_revis
+00014f10: 696f 6e5f 6964 2872 6573 6f6c 7665 645f  ion_id(resolved_
+00014f20: 666e 2c20 7265 736f 6c76 6564 5f71 7561  fn, resolved_qua
+00014f30: 6c69 6669 6572 290a 2020 2020 2020 2020  lifier).        
+00014f40: 2020 2020 6966 2072 6576 6973 696f 6e5f      if revision_
+00014f50: 6964 2021 3d20 666e 5f72 6576 6973 696f  id != fn_revisio
+00014f60: 6e5f 6964 3a0a 2020 2020 2020 2020 2020  n_id:.          
+00014f70: 2020 2020 2020 7261 6973 6520 5072 6563        raise Prec
+00014f80: 6f6e 6469 7469 6f6e 4661 696c 6564 4578  onditionFailedEx
+00014f90: 6365 7074 696f 6e28 0a20 2020 2020 2020  ception(.       
+00014fa0: 2020 2020 2020 2020 2020 2020 2022 5468               "Th
+00014fb0: 6520 5265 7669 7369 6f6e 2049 6420 7072  e Revision Id pr
+00014fc0: 6f76 6964 6564 2064 6f65 7320 6e6f 7420  ovided does not 
+00014fd0: 6d61 7463 6820 7468 6520 6c61 7465 7374  match the latest
+00014fe0: 2052 6576 6973 696f 6e20 4964 2e20 220a   Revision Id. ".
+00014ff0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015000: 2020 2020 2243 616c 6c20 7468 6520 4765      "Call the Ge
+00015010: 7446 756e 6374 696f 6e2f 4765 7441 6c69  tFunction/GetAli
+00015020: 6173 2041 5049 2074 6f20 7265 7472 6965  as API to retrie
+00015030: 7665 2074 6865 206c 6174 6573 7420 5265  ve the latest Re
+00015040: 7669 7369 6f6e 2049 6422 2c0a 2020 2020  vision Id",.    
+00015050: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015060: 5479 7065 3d22 5573 6572 222c 0a20 2020  Type="User",.   
+00015070: 2020 2020 2020 2020 2020 2020 2029 0a0a               )..
+00015080: 2020 2020 2020 2020 7265 7175 6573 745f          request_
+00015090: 7369 6420 3d20 7265 7175 6573 745b 2253  sid = request["S
+000150a0: 7461 7465 6d65 6e74 4964 225d 0a20 2020  tatementId"].   
+000150b0: 2020 2020 2069 6620 6e6f 7420 626f 6f6c       if not bool
+000150c0: 2853 5441 5445 4d45 4e54 5f49 445f 5245  (STATEMENT_ID_RE
+000150d0: 4745 582e 6d61 7463 6828 7265 7175 6573  GEX.match(reques
+000150e0: 745f 7369 6429 293a 0a20 2020 2020 2020  t_sid)):.       
+000150f0: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
+00015100: 6174 696f 6e45 7863 6570 7469 6f6e 280a  ationException(.
+00015110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00015120: 6622 3120 7661 6c69 6461 7469 6f6e 2065  f"1 validation e
+00015130: 7272 6f72 2064 6574 6563 7465 643a 2056  rror detected: V
+00015140: 616c 7565 2027 7b72 6571 7565 7374 5f73  alue '{request_s
+00015150: 6964 7d27 2061 7420 2773 7461 7465 6d65  id}' at 'stateme
+00015160: 6e74 4964 2720 6661 696c 6564 2074 6f20  ntId' failed to 
+00015170: 7361 7469 7366 7920 636f 6e73 7472 6169  satisfy constrai
+00015180: 6e74 3a20 4d65 6d62 6572 206d 7573 7420  nt: Member must 
+00015190: 7361 7469 7366 7920 7265 6775 6c61 7220  satisfy regular 
+000151a0: 6578 7072 6573 7369 6f6e 2070 6174 7465  expression patte
+000151b0: 726e 3a20 285b 612d 7a41 2d5a 302d 392d  rn: ([a-zA-Z0-9-
+000151c0: 5f5d 2b29 220a 2020 2020 2020 2020 2020  _]+)".          
+000151d0: 2020 290a 2020 2020 2020 2020 2320 6368    ).        # ch
+000151e0: 6563 6b20 666f 7220 616e 2061 6c72 6561  eck for an alrea
+000151f0: 6479 2065 7869 7374 696e 6720 706f 6c69  dy existing poli
+00015200: 6379 2061 6e64 2061 6e79 2063 6f6e 666c  cy and any confl
+00015210: 6963 7473 2069 6e20 6578 6973 7469 6e67  icts in existing
+00015220: 2073 7461 7465 6d65 6e74 730a 2020 2020   statements.    
+00015230: 2020 2020 6578 6973 7469 6e67 5f70 6f6c      existing_pol
+00015240: 6963 7920 3d20 7265 736f 6c76 6564 5f66  icy = resolved_f
+00015250: 6e2e 7065 726d 6973 7369 6f6e 732e 6765  n.permissions.ge
+00015260: 7428 7265 736f 6c76 6564 5f71 7561 6c69  t(resolved_quali
+00015270: 6669 6572 290a 2020 2020 2020 2020 6966  fier).        if
+00015280: 2065 7869 7374 696e 675f 706f 6c69 6379   existing_policy
+00015290: 3a0a 2020 2020 2020 2020 2020 2020 6966  :.            if
+000152a0: 2072 6571 7565 7374 5f73 6964 2069 6e20   request_sid in 
+000152b0: 5b73 5b22 5369 6422 5d20 666f 7220 7320  [s["Sid"] for s 
+000152c0: 696e 2065 7869 7374 696e 675f 706f 6c69  in existing_poli
+000152d0: 6379 2e70 6f6c 6963 792e 5374 6174 656d  cy.policy.Statem
+000152e0: 656e 745d 3a0a 2020 2020 2020 2020 2020  ent]:.          
+000152f0: 2020 2020 2020 2320 756e 6971 7565 6e65        # uniquene
+00015300: 7373 2073 636f 7065 3a20 7374 6174 656d  ss scope: statem
+00015310: 656e 7420 6964 206e 6565 6473 2074 6f20  ent id needs to 
+00015320: 6265 2075 6e69 7175 6520 7065 7220 7175  be unique per qu
+00015330: 616c 6966 6965 6420 6675 6e63 7469 6f6e  alified function
+00015340: 2028 244c 4154 4553 542c 2076 6572 7369   ($LATEST, versi
+00015350: 6f6e 2c20 6f72 2061 6c69 6173 290a 2020  on, or alias).  
+00015360: 2020 2020 2020 2020 2020 2020 2020 2320                # 
+00015370: 436f 756e 7465 7265 7861 6d70 6c65 3a20  Counterexample: 
+00015380: 7468 6520 7361 6d65 2073 6964 2063 616e  the same sid can
+00015390: 2065 7869 7374 2077 6974 6869 6e20 244c   exist within $L
+000153a0: 4154 4553 542c 2076 6572 7369 6f6e 2c20  ATEST, version, 
+000153b0: 616e 6420 616c 6961 730a 2020 2020 2020  and alias.      
+000153c0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000153d0: 5265 736f 7572 6365 436f 6e66 6c69 6374  ResourceConflict
+000153e0: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
+000153f0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00015400: 2254 6865 2073 7461 7465 6d65 6e74 2069  "The statement i
+00015410: 6420 287b 7265 7175 6573 745f 7369 647d  d ({request_sid}
+00015420: 2920 7072 6f76 6964 6564 2061 6c72 6561  ) provided alrea
+00015430: 6479 2065 7869 7374 732e 2050 6c65 6173  dy exists. Pleas
+00015440: 6520 7072 6f76 6964 6520 6120 6e65 7720  e provide a new 
+00015450: 7374 6174 656d 656e 7420 6964 2c20 6f72  statement id, or
+00015460: 2072 656d 6f76 6520 7468 6520 6578 6973   remove the exis
+00015470: 7469 6e67 2073 7461 7465 6d65 6e74 2e22  ting statement."
+00015480: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00015490: 2020 2020 2020 5479 7065 3d22 5573 6572        Type="User
+000154a0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+000154b0: 2020 2029 0a0a 2020 2020 2020 2020 7065     )..        pe
+000154c0: 726d 6973 7369 6f6e 5f73 7461 7465 6d65  rmission_stateme
+000154d0: 6e74 203d 2061 7069 5f75 7469 6c73 2e62  nt = api_utils.b
+000154e0: 7569 6c64 5f73 7461 7465 6d65 6e74 280a  uild_statement(.
+000154f0: 2020 2020 2020 2020 2020 2020 666e 5f61              fn_a
+00015500: 726e 2c0a 2020 2020 2020 2020 2020 2020  rn,.            
+00015510: 7265 7175 6573 745b 2253 7461 7465 6d65  request["Stateme
+00015520: 6e74 4964 225d 2c0a 2020 2020 2020 2020  ntId"],.        
+00015530: 2020 2020 7265 7175 6573 745b 2241 6374      request["Act
+00015540: 696f 6e22 5d2c 0a20 2020 2020 2020 2020  ion"],.         
+00015550: 2020 2072 6571 7565 7374 5b22 5072 696e     request["Prin
+00015560: 6369 7061 6c22 5d2c 0a20 2020 2020 2020  cipal"],.       
+00015570: 2020 2020 2073 6f75 7263 655f 6172 6e3d       source_arn=
+00015580: 7265 7175 6573 742e 6765 7428 2253 6f75  request.get("Sou
+00015590: 7263 6541 726e 2229 2c0a 2020 2020 2020  rceArn"),.      
+000155a0: 2020 2020 2020 736f 7572 6365 5f61 6363        source_acc
+000155b0: 6f75 6e74 3d72 6571 7565 7374 2e67 6574  ount=request.get
+000155c0: 2822 536f 7572 6365 4163 636f 756e 7422  ("SourceAccount"
+000155d0: 292c 0a20 2020 2020 2020 2020 2020 2070  ),.            p
+000155e0: 7269 6e63 6970 616c 5f6f 7267 5f69 643d  rincipal_org_id=
+000155f0: 7265 7175 6573 742e 6765 7428 2250 7269  request.get("Pri
+00015600: 6e63 6970 616c 4f72 6749 4422 292c 0a20  ncipalOrgID"),. 
+00015610: 2020 2020 2020 2020 2020 2065 7665 6e74             event
+00015620: 5f73 6f75 7263 655f 746f 6b65 6e3d 7265  _source_token=re
+00015630: 7175 6573 742e 6765 7428 2245 7665 6e74  quest.get("Event
+00015640: 536f 7572 6365 546f 6b65 6e22 292c 0a20  SourceToken"),. 
+00015650: 2020 2020 2020 2020 2020 2061 7574 685f             auth_
+00015660: 7479 7065 3d72 6571 7565 7374 2e67 6574  type=request.get
+00015670: 2822 4675 6e63 7469 6f6e 5572 6c41 7574  ("FunctionUrlAut
+00015680: 6854 7970 6522 292c 0a20 2020 2020 2020  hType"),.       
+00015690: 2029 0a20 2020 2020 2020 206e 6577 5f70   ).        new_p
+000156a0: 6f6c 6963 7920 3d20 6578 6973 7469 6e67  olicy = existing
+000156b0: 5f70 6f6c 6963 790a 2020 2020 2020 2020  _policy.        
+000156c0: 6966 206e 6f74 2065 7869 7374 696e 675f  if not existing_
+000156d0: 706f 6c69 6379 3a0a 2020 2020 2020 2020  policy:.        
+000156e0: 2020 2020 6e65 775f 706f 6c69 6379 203d      new_policy =
+000156f0: 2046 756e 6374 696f 6e52 6573 6f75 7263   FunctionResourc
+00015700: 6550 6f6c 6963 7928 0a20 2020 2020 2020  ePolicy(.       
+00015710: 2020 2020 2020 2020 2070 6f6c 6963 793d           policy=
+00015720: 5265 736f 7572 6365 506f 6c69 6379 2856  ResourcePolicy(V
+00015730: 6572 7369 6f6e 3d22 3230 3132 2d31 302d  ersion="2012-10-
+00015740: 3137 222c 2049 643d 2264 6566 6175 6c74  17", Id="default
+00015750: 222c 2053 7461 7465 6d65 6e74 3d5b 5d29  ", Statement=[])
+00015760: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+00015770: 2020 2020 2020 206e 6577 5f70 6f6c 6963         new_polic
+00015780: 792e 706f 6c69 6379 2e53 7461 7465 6d65  y.policy.Stateme
+00015790: 6e74 2e61 7070 656e 6428 7065 726d 6973  nt.append(permis
+000157a0: 7369 6f6e 5f73 7461 7465 6d65 6e74 290a  sion_statement).
+000157b0: 2020 2020 2020 2020 6966 206e 6f74 2065          if not e
+000157c0: 7869 7374 696e 675f 706f 6c69 6379 3a0a  xisting_policy:.
+000157d0: 2020 2020 2020 2020 2020 2020 7265 736f              reso
+000157e0: 6c76 6564 5f66 6e2e 7065 726d 6973 7369  lved_fn.permissi
+000157f0: 6f6e 735b 7265 736f 6c76 6564 5f71 7561  ons[resolved_qua
+00015800: 6c69 6669 6572 5d20 3d20 6e65 775f 706f  lifier] = new_po
+00015810: 6c69 6379 0a0a 2020 2020 2020 2020 2320  licy..        # 
+00015820: 5570 6461 7465 2072 6576 6973 696f 6e20  Update revision 
+00015830: 6964 206f 6620 616c 6961 7320 6f72 2076  id of alias or v
+00015840: 6572 7369 6f6e 0a20 2020 2020 2020 2023  ersion.        #
+00015850: 2054 4f44 4f3a 2072 652d 6576 616c 7561   TODO: re-evalua
+00015860: 7465 2064 6174 6120 6d6f 6465 6c20 746f  te data model to
+00015870: 2070 7265 7665 6e74 2074 6869 7320 6469   prevent this di
+00015880: 7274 7920 6861 636b 206a 7573 7420 666f  rty hack just fo
+00015890: 7220 6275 6d70 696e 6720 7468 6520 7265  r bumping the re
+000158a0: 7669 7369 6f6e 2069 640a 2020 2020 2020  vision id.      
+000158b0: 2020 2320 544f 444f 3a20 646f 6573 2074    # TODO: does t
+000158c0: 6861 7420 6e65 6564 2061 2060 7769 7468  hat need a `with
+000158d0: 2066 756e 6374 696f 6e2e 6c6f 636b 6020   function.lock` 
+000158e0: 666f 7220 6174 6f6d 6963 2075 7064 6174  for atomic updat
+000158f0: 6573 206f 6620 7468 6520 706f 6c69 6379  es of the policy
+00015900: 202b 2072 6576 6973 696f 6e5f 6964 3f0a   + revision_id?.
+00015910: 2020 2020 2020 2020 6966 2061 7069 5f75          if api_u
+00015920: 7469 6c73 2e71 7561 6c69 6669 6572 5f69  tils.qualifier_i
+00015930: 735f 616c 6961 7328 7265 736f 6c76 6564  s_alias(resolved
+00015940: 5f71 7561 6c69 6669 6572 293a 0a20 2020  _qualifier):.   
+00015950: 2020 2020 2020 2020 2072 6573 6f6c 7665           resolve
+00015960: 645f 616c 6961 7320 3d20 7265 736f 6c76  d_alias = resolv
+00015970: 6564 5f66 6e2e 616c 6961 7365 735b 7265  ed_fn.aliases[re
+00015980: 736f 6c76 6564 5f71 7561 6c69 6669 6572  solved_qualifier
+00015990: 5d0a 2020 2020 2020 2020 2020 2020 7265  ].            re
+000159a0: 736f 6c76 6564 5f66 6e2e 616c 6961 7365  solved_fn.aliase
+000159b0: 735b 7265 736f 6c76 6564 5f71 7561 6c69  s[resolved_quali
+000159c0: 6669 6572 5d20 3d20 6461 7461 636c 6173  fier] = dataclas
+000159d0: 7365 732e 7265 706c 6163 6528 7265 736f  ses.replace(reso
+000159e0: 6c76 6564 5f61 6c69 6173 290a 2020 2020  lved_alias).    
+000159f0: 2020 2020 2320 4173 7375 6d65 7320 7468      # Assumes th
+00015a00: 6174 2061 206e 6f6e 2d61 6c69 6173 2069  at a non-alias i
+00015a10: 7320 6120 7665 7273 696f 6e0a 2020 2020  s a version.    
+00015a20: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
+00015a30: 2020 2020 2020 7265 736f 6c76 6564 5f76        resolved_v
+00015a40: 6572 7369 6f6e 203d 2072 6573 6f6c 7665  ersion = resolve
+00015a50: 645f 666e 2e76 6572 7369 6f6e 735b 7265  d_fn.versions[re
+00015a60: 736f 6c76 6564 5f71 7561 6c69 6669 6572  solved_qualifier
+00015a70: 5d0a 2020 2020 2020 2020 2020 2020 7265  ].            re
+00015a80: 736f 6c76 6564 5f66 6e2e 7665 7273 696f  solved_fn.versio
+00015a90: 6e73 5b72 6573 6f6c 7665 645f 7175 616c  ns[resolved_qual
+00015aa0: 6966 6965 725d 203d 2064 6174 6163 6c61  ifier] = datacla
+00015ab0: 7373 6573 2e72 6570 6c61 6365 280a 2020  sses.replace(.  
+00015ac0: 2020 2020 2020 2020 2020 2020 2020 7265                re
+00015ad0: 736f 6c76 6564 5f76 6572 7369 6f6e 2c20  solved_version, 
+00015ae0: 636f 6e66 6967 3d64 6174 6163 6c61 7373  config=dataclass
+00015af0: 6573 2e72 6570 6c61 6365 2872 6573 6f6c  es.replace(resol
+00015b00: 7665 645f 7665 7273 696f 6e2e 636f 6e66  ved_version.conf
+00015b10: 6967 290a 2020 2020 2020 2020 2020 2020  ig).            
+00015b20: 290a 2020 2020 2020 2020 7265 7475 726e  ).        return
+00015b30: 2041 6464 5065 726d 6973 7369 6f6e 5265   AddPermissionRe
+00015b40: 7370 6f6e 7365 2853 7461 7465 6d65 6e74  sponse(Statement
+00015b50: 3d6a 736f 6e2e 6475 6d70 7328 7065 726d  =json.dumps(perm
+00015b60: 6973 7369 6f6e 5f73 7461 7465 6d65 6e74  ission_statement
+00015b70: 2929 0a0a 2020 2020 6465 6620 7265 6d6f  ))..    def remo
+00015b80: 7665 5f70 6572 6d69 7373 696f 6e28 0a20  ve_permission(. 
+00015b90: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
+00015ba0: 2020 2020 2063 6f6e 7465 7874 3a20 5265       context: Re
+00015bb0: 7175 6573 7443 6f6e 7465 7874 2c0a 2020  questContext,.  
+00015bc0: 2020 2020 2020 6675 6e63 7469 6f6e 5f6e        function_n
+00015bd0: 616d 653a 2046 756e 6374 696f 6e4e 616d  ame: FunctionNam
+00015be0: 652c 0a20 2020 2020 2020 2073 7461 7465  e,.        state
+00015bf0: 6d65 6e74 5f69 643a 204e 616d 6573 7061  ment_id: Namespa
+00015c00: 6365 6453 7461 7465 6d65 6e74 4964 2c0a  cedStatementId,.
+00015c10: 2020 2020 2020 2020 7175 616c 6966 6965          qualifie
+00015c20: 723a 2051 7561 6c69 6669 6572 203d 204e  r: Qualifier = N
+00015c30: 6f6e 652c 0a20 2020 2020 2020 2072 6576  one,.        rev
+00015c40: 6973 696f 6e5f 6964 3a20 5374 7269 6e67  ision_id: String
+00015c50: 203d 204e 6f6e 652c 0a20 2020 2029 202d   = None,.    ) -
+00015c60: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
+00015c70: 6675 6e63 7469 6f6e 5f6e 616d 652c 2071  function_name, q
+00015c80: 7561 6c69 6669 6572 203d 2061 7069 5f75  ualifier = api_u
+00015c90: 7469 6c73 2e67 6574 5f6e 616d 655f 616e  tils.get_name_an
+00015ca0: 645f 7175 616c 6966 6965 7228 0a20 2020  d_qualifier(.   
+00015cb0: 2020 2020 2020 2020 2066 756e 6374 696f           functio
+00015cc0: 6e5f 6e61 6d65 2c20 7175 616c 6966 6965  n_name, qualifie
+00015cd0: 722c 2063 6f6e 7465 7874 2e72 6567 696f  r, context.regio
+00015ce0: 6e0a 2020 2020 2020 2020 290a 2020 2020  n.        ).    
+00015cf0: 2020 2020 6966 2071 7561 6c69 6669 6572      if qualifier
+00015d00: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+00015d10: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+00015d20: 7661 6c69 6461 7465 5f71 7561 6c69 6669  validate_qualifi
+00015d30: 6572 5f65 7870 7265 7373 696f 6e28 7175  er_expression(qu
+00015d40: 616c 6966 6965 7229 0a0a 2020 2020 2020  alifier)..      
+00015d50: 2020 7374 6174 6520 3d20 6c61 6d62 6461    state = lambda
+00015d60: 5f73 746f 7265 735b 636f 6e74 6578 742e  _stores[context.
+00015d70: 6163 636f 756e 745f 6964 5d5b 636f 6e74  account_id][cont
+00015d80: 6578 742e 7265 6769 6f6e 5d0a 2020 2020  ext.region].    
+00015d90: 2020 2020 7265 736f 6c76 6564 5f66 6e20      resolved_fn 
+00015da0: 3d20 7374 6174 652e 6675 6e63 7469 6f6e  = state.function
+00015db0: 732e 6765 7428 6675 6e63 7469 6f6e 5f6e  s.get(function_n
+00015dc0: 616d 6529 0a20 2020 2020 2020 2069 6620  ame).        if 
+00015dd0: 7265 736f 6c76 6564 5f66 6e20 6973 204e  resolved_fn is N
+00015de0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+00015df0: 2066 6e5f 6172 6e20 3d20 6170 695f 7574   fn_arn = api_ut
+00015e00: 696c 732e 756e 7175 616c 6966 6965 645f  ils.unqualified_
+00015e10: 6c61 6d62 6461 5f61 726e 280a 2020 2020  lambda_arn(.    
+00015e20: 2020 2020 2020 2020 2020 2020 6675 6e63              func
+00015e30: 7469 6f6e 5f6e 616d 652c 2063 6f6e 7465  tion_name, conte
+00015e40: 7874 2e61 6363 6f75 6e74 5f69 642c 2063  xt.account_id, c
+00015e50: 6f6e 7465 7874 2e72 6567 696f 6e0a 2020  ontext.region.  
+00015e60: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
+00015e70: 2020 2020 2020 2020 7261 6973 6520 5265          raise Re
+00015e80: 736f 7572 6365 4e6f 7446 6f75 6e64 4578  sourceNotFoundEx
+00015e90: 6365 7074 696f 6e28 6622 4e6f 2070 6f6c  ception(f"No pol
+00015ea0: 6963 7920 666f 756e 6420 666f 723a 207b  icy found for: {
+00015eb0: 666e 5f61 726e 7d22 2c20 5479 7065 3d22  fn_arn}", Type="
+00015ec0: 5573 6572 2229 0a0a 2020 2020 2020 2020  User")..        
+00015ed0: 7265 736f 6c76 6564 5f71 7561 6c69 6669  resolved_qualifi
+00015ee0: 6572 2c20 5f20 3d20 7365 6c66 2e5f 7265  er, _ = self._re
+00015ef0: 736f 6c76 655f 666e 5f71 7561 6c69 6669  solve_fn_qualifi
+00015f00: 6572 2872 6573 6f6c 7665 645f 666e 2c20  er(resolved_fn, 
+00015f10: 7175 616c 6966 6965 7229 0a20 2020 2020  qualifier).     
+00015f20: 2020 2066 756e 6374 696f 6e5f 7065 726d     function_perm
+00015f30: 6973 7369 6f6e 203d 2072 6573 6f6c 7665  ission = resolve
+00015f40: 645f 666e 2e70 6572 6d69 7373 696f 6e73  d_fn.permissions
+00015f50: 2e67 6574 2872 6573 6f6c 7665 645f 7175  .get(resolved_qu
+00015f60: 616c 6966 6965 7229 0a20 2020 2020 2020  alifier).       
+00015f70: 2069 6620 6e6f 7420 6675 6e63 7469 6f6e   if not function
+00015f80: 5f70 6572 6d69 7373 696f 6e3a 0a20 2020  _permission:.   
+00015f90: 2020 2020 2020 2020 2072 6169 7365 2052           raise R
+00015fa0: 6573 6f75 7263 654e 6f74 466f 756e 6445  esourceNotFoundE
+00015fb0: 7863 6570 7469 6f6e 280a 2020 2020 2020  xception(.      
+00015fc0: 2020 2020 2020 2020 2020 224e 6f20 706f            "No po
+00015fd0: 6c69 6379 2069 7320 6173 736f 6369 6174  licy is associat
+00015fe0: 6564 2077 6974 6820 7468 6520 6769 7665  ed with the give
+00015ff0: 6e20 7265 736f 7572 6365 2e22 2c20 5479  n resource.", Ty
+00016000: 7065 3d22 5573 6572 220a 2020 2020 2020  pe="User".      
+00016010: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+00016020: 2023 2074 7279 2074 6f20 6669 6e64 2073   # try to find s
+00016030: 7461 7465 6d65 6e74 2069 6e20 706f 6c69  tatement in poli
+00016040: 6379 2061 6e64 2064 656c 6574 6520 6974  cy and delete it
+00016050: 0a20 2020 2020 2020 2073 7461 7465 6d65  .        stateme
+00016060: 6e74 203d 204e 6f6e 650a 2020 2020 2020  nt = None.      
+00016070: 2020 666f 7220 7320 696e 2066 756e 6374    for s in funct
+00016080: 696f 6e5f 7065 726d 6973 7369 6f6e 2e70  ion_permission.p
+00016090: 6f6c 6963 792e 5374 6174 656d 656e 743a  olicy.Statement:
+000160a0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000160b0: 735b 2253 6964 225d 203d 3d20 7374 6174  s["Sid"] == stat
+000160c0: 656d 656e 745f 6964 3a0a 2020 2020 2020  ement_id:.      
+000160d0: 2020 2020 2020 2020 2020 7374 6174 656d            statem
+000160e0: 656e 7420 3d20 730a 2020 2020 2020 2020  ent = s.        
+000160f0: 2020 2020 2020 2020 6272 6561 6b0a 0a20          break.. 
+00016100: 2020 2020 2020 2069 6620 6e6f 7420 7374         if not st
+00016110: 6174 656d 656e 743a 0a20 2020 2020 2020  atement:.       
+00016120: 2020 2020 2072 6169 7365 2052 6573 6f75       raise Resou
+00016130: 7263 654e 6f74 466f 756e 6445 7863 6570  rceNotFoundExcep
+00016140: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
+00016150: 2020 2020 2020 6622 5374 6174 656d 656e        f"Statemen
+00016160: 7420 7b73 7461 7465 6d65 6e74 5f69 647d  t {statement_id}
+00016170: 2069 7320 6e6f 7420 666f 756e 6420 696e   is not found in
+00016180: 2072 6573 6f75 7263 6520 706f 6c69 6379   resource policy
+00016190: 2e22 2c20 5479 7065 3d22 5573 6572 220a  .", Type="User".
+000161a0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+000161b0: 2020 2020 2020 666e 5f72 6576 6973 696f        fn_revisio
+000161c0: 6e5f 6964 203d 2073 656c 662e 5f66 756e  n_id = self._fun
+000161d0: 6374 696f 6e5f 7265 7669 7369 6f6e 5f69  ction_revision_i
+000161e0: 6428 7265 736f 6c76 6564 5f66 6e2c 2072  d(resolved_fn, r
+000161f0: 6573 6f6c 7665 645f 7175 616c 6966 6965  esolved_qualifie
+00016200: 7229 0a20 2020 2020 2020 2069 6620 7265  r).        if re
+00016210: 7669 7369 6f6e 5f69 6420 616e 6420 7265  vision_id and re
+00016220: 7669 7369 6f6e 5f69 6420 213d 2066 6e5f  vision_id != fn_
+00016230: 7265 7669 7369 6f6e 5f69 643a 0a20 2020  revision_id:.   
+00016240: 2020 2020 2020 2020 2072 6169 7365 2050           raise P
+00016250: 7265 636f 6e64 6974 696f 6e46 6169 6c65  reconditionFaile
+00016260: 6445 7863 6570 7469 6f6e 280a 2020 2020  dException(.    
+00016270: 2020 2020 2020 2020 2020 2020 2254 6865              "The
+00016280: 2052 6576 6973 696f 6e20 4964 2070 726f   Revision Id pro
+00016290: 7669 6465 6420 646f 6573 206e 6f74 206d  vided does not m
+000162a0: 6174 6368 2074 6865 206c 6174 6573 7420  atch the latest 
+000162b0: 5265 7669 7369 6f6e 2049 642e 2022 0a20  Revision Id. ". 
+000162c0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+000162d0: 4361 6c6c 2074 6865 2047 6574 4675 6e63  Call the GetFunc
+000162e0: 7469 6f6e 2f47 6574 416c 6961 7320 4150  tion/GetAlias AP
+000162f0: 4920 746f 2072 6574 7269 6576 6520 7468  I to retrieve th
+00016300: 6520 6c61 7465 7374 2052 6576 6973 696f  e latest Revisio
+00016310: 6e20 4964 222c 0a20 2020 2020 2020 2020  n Id",.         
+00016320: 2020 2020 2020 2054 7970 653d 2255 7365         Type="Use
+00016330: 7222 2c0a 2020 2020 2020 2020 2020 2020  r",.            
+00016340: 290a 2020 2020 2020 2020 6675 6e63 7469  ).        functi
+00016350: 6f6e 5f70 6572 6d69 7373 696f 6e2e 706f  on_permission.po
+00016360: 6c69 6379 2e53 7461 7465 6d65 6e74 2e72  licy.Statement.r
+00016370: 656d 6f76 6528 7374 6174 656d 656e 7429  emove(statement)
+00016380: 0a0a 2020 2020 2020 2020 2320 5570 6461  ..        # Upda
+00016390: 7465 2072 6576 6973 696f 6e20 6964 2066  te revision id f
+000163a0: 6f72 2061 6c69 6173 206f 7220 7665 7273  or alias or vers
+000163b0: 696f 6e0a 2020 2020 2020 2020 2320 544f  ion.        # TO
+000163c0: 444f 3a20 7265 2d65 7661 6c75 6174 6520  DO: re-evaluate 
+000163d0: 6461 7461 206d 6f64 656c 2074 6f20 7072  data model to pr
+000163e0: 6576 656e 7420 7468 6973 2064 6972 7479  event this dirty
+000163f0: 2068 6163 6b20 6a75 7374 2066 6f72 2062   hack just for b
+00016400: 756d 7069 6e67 2074 6865 2072 6576 6973  umping the revis
+00016410: 696f 6e20 6964 0a20 2020 2020 2020 2023  ion id.        #
+00016420: 2054 4f44 4f3a 2064 6f65 7320 7468 6174   TODO: does that
+00016430: 206e 6565 6420 6120 6077 6974 6820 6675   need a `with fu
+00016440: 6e63 7469 6f6e 2e6c 6f63 6b60 2066 6f72  nction.lock` for
+00016450: 2061 746f 6d69 6320 7570 6461 7465 7320   atomic updates 
+00016460: 6f66 2074 6865 2070 6f6c 6963 7920 2b20  of the policy + 
+00016470: 7265 7669 7369 6f6e 5f69 643f 0a20 2020  revision_id?.   
+00016480: 2020 2020 2069 6620 6170 695f 7574 696c       if api_util
+00016490: 732e 7175 616c 6966 6965 725f 6973 5f61  s.qualifier_is_a
+000164a0: 6c69 6173 2872 6573 6f6c 7665 645f 7175  lias(resolved_qu
+000164b0: 616c 6966 6965 7229 3a0a 2020 2020 2020  alifier):.      
+000164c0: 2020 2020 2020 7265 736f 6c76 6564 5f61        resolved_a
+000164d0: 6c69 6173 203d 2072 6573 6f6c 7665 645f  lias = resolved_
+000164e0: 666e 2e61 6c69 6173 6573 5b72 6573 6f6c  fn.aliases[resol
+000164f0: 7665 645f 7175 616c 6966 6965 725d 0a20  ved_qualifier]. 
+00016500: 2020 2020 2020 2020 2020 2072 6573 6f6c             resol
+00016510: 7665 645f 666e 2e61 6c69 6173 6573 5b72  ved_fn.aliases[r
+00016520: 6573 6f6c 7665 645f 7175 616c 6966 6965  esolved_qualifie
+00016530: 725d 203d 2064 6174 6163 6c61 7373 6573  r] = dataclasses
+00016540: 2e72 6570 6c61 6365 2872 6573 6f6c 7665  .replace(resolve
+00016550: 645f 616c 6961 7329 0a20 2020 2020 2020  d_alias).       
+00016560: 2023 2041 7373 756d 6573 2074 6861 7420   # Assumes that 
+00016570: 6120 6e6f 6e2d 616c 6961 7320 6973 2061  a non-alias is a
+00016580: 2076 6572 7369 6f6e 0a20 2020 2020 2020   version.       
+00016590: 2065 6c73 653a 0a20 2020 2020 2020 2020   else:.         
+000165a0: 2020 2072 6573 6f6c 7665 645f 7665 7273     resolved_vers
+000165b0: 696f 6e20 3d20 7265 736f 6c76 6564 5f66  ion = resolved_f
+000165c0: 6e2e 7665 7273 696f 6e73 5b72 6573 6f6c  n.versions[resol
+000165d0: 7665 645f 7175 616c 6966 6965 725d 0a20  ved_qualifier]. 
+000165e0: 2020 2020 2020 2020 2020 2072 6573 6f6c             resol
+000165f0: 7665 645f 666e 2e76 6572 7369 6f6e 735b  ved_fn.versions[
+00016600: 7265 736f 6c76 6564 5f71 7561 6c69 6669  resolved_qualifi
+00016610: 6572 5d20 3d20 6461 7461 636c 6173 7365  er] = dataclasse
+00016620: 732e 7265 706c 6163 6528 0a20 2020 2020  s.replace(.     
+00016630: 2020 2020 2020 2020 2020 2072 6573 6f6c             resol
+00016640: 7665 645f 7665 7273 696f 6e2c 2063 6f6e  ved_version, con
+00016650: 6669 673d 6461 7461 636c 6173 7365 732e  fig=dataclasses.
+00016660: 7265 706c 6163 6528 7265 736f 6c76 6564  replace(resolved
+00016670: 5f76 6572 7369 6f6e 2e63 6f6e 6669 6729  _version.config)
+00016680: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
+00016690: 2020 2020 2020 2020 2320 7265 6d6f 7665          # remove
+000166a0: 2074 6865 2070 6f6c 6963 7920 6173 2061   the policy as a
+000166b0: 2077 686f 6c65 2077 6865 6e20 7468 6572   whole when ther
+000166c0: 6527 7320 6e6f 2073 7461 7465 6d65 6e74  e's no statement
+000166d0: 206c 6566 7420 696e 2069 740a 2020 2020   left in it.    
+000166e0: 2020 2020 6966 206c 656e 2866 756e 6374      if len(funct
+000166f0: 696f 6e5f 7065 726d 6973 7369 6f6e 2e70  ion_permission.p
+00016700: 6f6c 6963 792e 5374 6174 656d 656e 7429  olicy.Statement)
+00016710: 203d 3d20 303a 0a20 2020 2020 2020 2020   == 0:.         
+00016720: 2020 2064 656c 2072 6573 6f6c 7665 645f     del resolved_
+00016730: 666e 2e70 6572 6d69 7373 696f 6e73 5b72  fn.permissions[r
+00016740: 6573 6f6c 7665 645f 7175 616c 6966 6965  esolved_qualifie
+00016750: 725d 0a0a 2020 2020 6465 6620 6765 745f  r]..    def get_
+00016760: 706f 6c69 6379 280a 2020 2020 2020 2020  policy(.        
+00016770: 7365 6c66 2c0a 2020 2020 2020 2020 636f  self,.        co
+00016780: 6e74 6578 743a 2052 6571 7565 7374 436f  ntext: RequestCo
+00016790: 6e74 6578 742c 0a20 2020 2020 2020 2066  ntext,.        f
+000167a0: 756e 6374 696f 6e5f 6e61 6d65 3a20 4e61  unction_name: Na
+000167b0: 6d65 7370 6163 6564 4675 6e63 7469 6f6e  mespacedFunction
+000167c0: 4e61 6d65 2c0a 2020 2020 2020 2020 7175  Name,.        qu
+000167d0: 616c 6966 6965 723a 2051 7561 6c69 6669  alifier: Qualifi
+000167e0: 6572 203d 204e 6f6e 652c 0a20 2020 2029  er = None,.    )
+000167f0: 202d 3e20 4765 7450 6f6c 6963 7952 6573   -> GetPolicyRes
+00016800: 706f 6e73 653a 0a20 2020 2020 2020 2066  ponse:.        f
+00016810: 756e 6374 696f 6e5f 6e61 6d65 2c20 7175  unction_name, qu
+00016820: 616c 6966 6965 7220 3d20 6170 695f 7574  alifier = api_ut
+00016830: 696c 732e 6765 745f 6e61 6d65 5f61 6e64  ils.get_name_and
+00016840: 5f71 7561 6c69 6669 6572 280a 2020 2020  _qualifier(.    
+00016850: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
+00016860: 5f6e 616d 652c 2071 7561 6c69 6669 6572  _name, qualifier
+00016870: 2c20 636f 6e74 6578 742e 7265 6769 6f6e  , context.region
+00016880: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+00016890: 2020 2020 6966 2071 7561 6c69 6669 6572      if qualifier
+000168a0: 2069 7320 6e6f 7420 4e6f 6e65 3a0a 2020   is not None:.  
+000168b0: 2020 2020 2020 2020 2020 7365 6c66 2e5f            self._
+000168c0: 7661 6c69 6461 7465 5f71 7561 6c69 6669  validate_qualifi
+000168d0: 6572 5f65 7870 7265 7373 696f 6e28 7175  er_expression(qu
+000168e0: 616c 6966 6965 7229 0a0a 2020 2020 2020  alifier)..      
+000168f0: 2020 7265 736f 6c76 6564 5f66 6e20 3d20    resolved_fn = 
+00016900: 7365 6c66 2e5f 6765 745f 6675 6e63 7469  self._get_functi
+00016910: 6f6e 2866 756e 6374 696f 6e5f 6e61 6d65  on(function_name
+00016920: 2c20 636f 6e74 6578 742e 6163 636f 756e  , context.accoun
+00016930: 745f 6964 2c20 636f 6e74 6578 742e 7265  t_id, context.re
+00016940: 6769 6f6e 290a 0a20 2020 2020 2020 2072  gion)..        r
+00016950: 6573 6f6c 7665 645f 7175 616c 6966 6965  esolved_qualifie
+00016960: 7220 3d20 7175 616c 6966 6965 7220 6f72  r = qualifier or
+00016970: 2022 244c 4154 4553 5422 0a20 2020 2020   "$LATEST".     
+00016980: 2020 2066 756e 6374 696f 6e5f 7065 726d     function_perm
+00016990: 6973 7369 6f6e 203d 2072 6573 6f6c 7665  ission = resolve
+000169a0: 645f 666e 2e70 6572 6d69 7373 696f 6e73  d_fn.permissions
+000169b0: 2e67 6574 2872 6573 6f6c 7665 645f 7175  .get(resolved_qu
+000169c0: 616c 6966 6965 7229 0a20 2020 2020 2020  alifier).       
+000169d0: 2069 6620 6e6f 7420 6675 6e63 7469 6f6e   if not function
+000169e0: 5f70 6572 6d69 7373 696f 6e3a 0a20 2020  _permission:.   
+000169f0: 2020 2020 2020 2020 2072 6169 7365 2052           raise R
+00016a00: 6573 6f75 7263 654e 6f74 466f 756e 6445  esourceNotFoundE
+00016a10: 7863 6570 7469 6f6e 280a 2020 2020 2020  xception(.      
+00016a20: 2020 2020 2020 2020 2020 2254 6865 2072            "The r
+00016a30: 6573 6f75 7263 6520 796f 7520 7265 7175  esource you requ
+00016a40: 6573 7465 6420 646f 6573 206e 6f74 2065  ested does not e
+00016a50: 7869 7374 2e22 2c20 5479 7065 3d22 5573  xist.", Type="Us
+00016a60: 6572 220a 2020 2020 2020 2020 2020 2020  er".            
+00016a70: 290a 0a20 2020 2020 2020 2066 6e5f 7265  )..        fn_re
+00016a80: 7669 7369 6f6e 5f69 6420 3d20 4e6f 6e65  vision_id = None
+00016a90: 0a20 2020 2020 2020 2069 6620 6170 695f  .        if api_
+00016aa0: 7574 696c 732e 7175 616c 6966 6965 725f  utils.qualifier_
+00016ab0: 6973 5f61 6c69 6173 2872 6573 6f6c 7665  is_alias(resolve
+00016ac0: 645f 7175 616c 6966 6965 7229 3a0a 2020  d_qualifier):.  
+00016ad0: 2020 2020 2020 2020 2020 7265 736f 6c76            resolv
+00016ae0: 6564 5f61 6c69 6173 203d 2072 6573 6f6c  ed_alias = resol
+00016af0: 7665 645f 666e 2e61 6c69 6173 6573 5b72  ved_fn.aliases[r
+00016b00: 6573 6f6c 7665 645f 7175 616c 6966 6965  esolved_qualifie
+00016b10: 725d 0a20 2020 2020 2020 2020 2020 2066  r].            f
+00016b20: 6e5f 7265 7669 7369 6f6e 5f69 6420 3d20  n_revision_id = 
+00016b30: 7265 736f 6c76 6564 5f61 6c69 6173 2e72  resolved_alias.r
+00016b40: 6576 6973 696f 6e5f 6964 0a20 2020 2020  evision_id.     
+00016b50: 2020 2023 2041 7373 756d 6573 2074 6861     # Assumes tha
+00016b60: 7420 6120 6e6f 6e2d 616c 6961 7320 6973  t a non-alias is
+00016b70: 2061 2076 6572 7369 6f6e 0a20 2020 2020   a version.     
+00016b80: 2020 2065 6c73 653a 0a20 2020 2020 2020     else:.       
+00016b90: 2020 2020 2072 6573 6f6c 7665 645f 7665       resolved_ve
+00016ba0: 7273 696f 6e20 3d20 7265 736f 6c76 6564  rsion = resolved
+00016bb0: 5f66 6e2e 7665 7273 696f 6e73 5b72 6573  _fn.versions[res
+00016bc0: 6f6c 7665 645f 7175 616c 6966 6965 725d  olved_qualifier]
+00016bd0: 0a20 2020 2020 2020 2020 2020 2066 6e5f  .            fn_
+00016be0: 7265 7669 7369 6f6e 5f69 6420 3d20 7265  revision_id = re
+00016bf0: 736f 6c76 6564 5f76 6572 7369 6f6e 2e63  solved_version.c
+00016c00: 6f6e 6669 672e 7265 7669 7369 6f6e 5f69  onfig.revision_i
+00016c10: 640a 0a20 2020 2020 2020 2072 6574 7572  d..        retur
+00016c20: 6e20 4765 7450 6f6c 6963 7952 6573 706f  n GetPolicyRespo
+00016c30: 6e73 6528 0a20 2020 2020 2020 2020 2020  nse(.           
+00016c40: 2050 6f6c 6963 793d 6a73 6f6e 2e64 756d   Policy=json.dum
+00016c50: 7073 2864 6174 6163 6c61 7373 6573 2e61  ps(dataclasses.a
+00016c60: 7364 6963 7428 6675 6e63 7469 6f6e 5f70  sdict(function_p
+00016c70: 6572 6d69 7373 696f 6e2e 706f 6c69 6379  ermission.policy
+00016c80: 2929 2c0a 2020 2020 2020 2020 2020 2020  )),.            
+00016c90: 5265 7669 7369 6f6e 4964 3d66 6e5f 7265  RevisionId=fn_re
+00016ca0: 7669 7369 6f6e 5f69 642c 0a20 2020 2020  vision_id,.     
+00016cb0: 2020 2029 0a0a 2020 2020 2320 3d3d 3d3d     )..    # ====
+00016cc0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00016cd0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00016ce0: 3d3d 3d0a 2020 2020 2320 3d3d 3d3d 3d3d  ===.    # ======
+00016cf0: 3d3d 2020 436f 6465 2073 6967 6e69 6e67  ==  Code signing
+00016d00: 2063 6f6e 6669 6720 203d 3d3d 3d3d 3d3d   config  =======
+00016d10: 3d0a 2020 2020 2320 3d3d 3d3d 3d3d 3d3d  =.    # ========
+00016d20: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00016d30: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a  ===============.
+00016d40: 0a20 2020 2064 6566 2063 7265 6174 655f  .    def create_
+00016d50: 636f 6465 5f73 6967 6e69 6e67 5f63 6f6e  code_signing_con
+00016d60: 6669 6728 0a20 2020 2020 2020 2073 656c  fig(.        sel
+00016d70: 662c 0a20 2020 2020 2020 2063 6f6e 7465  f,.        conte
+00016d80: 7874 3a20 5265 7175 6573 7443 6f6e 7465  xt: RequestConte
+00016d90: 7874 2c0a 2020 2020 2020 2020 616c 6c6f  xt,.        allo
+00016da0: 7765 645f 7075 626c 6973 6865 7273 3a20  wed_publishers: 
+00016db0: 416c 6c6f 7765 6450 7562 6c69 7368 6572  AllowedPublisher
+00016dc0: 732c 0a20 2020 2020 2020 2064 6573 6372  s,.        descr
+00016dd0: 6970 7469 6f6e 3a20 4465 7363 7269 7074  iption: Descript
+00016de0: 696f 6e20 3d20 4e6f 6e65 2c0a 2020 2020  ion = None,.    
+00016df0: 2020 2020 636f 6465 5f73 6967 6e69 6e67      code_signing
+00016e00: 5f70 6f6c 6963 6965 733a 2043 6f64 6553  _policies: CodeS
+00016e10: 6967 6e69 6e67 506f 6c69 6369 6573 203d  igningPolicies =
+00016e20: 204e 6f6e 652c 0a20 2020 2029 202d 3e20   None,.    ) -> 
+00016e30: 4372 6561 7465 436f 6465 5369 676e 696e  CreateCodeSignin
+00016e40: 6743 6f6e 6669 6752 6573 706f 6e73 653a  gConfigResponse:
+00016e50: 0a0a 2020 2020 2020 2020 7374 6174 6520  ..        state 
+00016e60: 3d20 6c61 6d62 6461 5f73 746f 7265 735b  = lambda_stores[
+00016e70: 636f 6e74 6578 742e 6163 636f 756e 745f  context.account_
+00016e80: 6964 5d5b 636f 6e74 6578 742e 7265 6769  id][context.regi
+00016e90: 6f6e 5d0a 2020 2020 2020 2020 2320 544f  on].        # TO
+00016ea0: 444f 3a20 6361 6e20 7468 6572 6520 6265  DO: can there be
+00016eb0: 2064 7570 6c69 6361 7465 733f 0a20 2020   duplicates?.   
+00016ec0: 2020 2020 2063 7363 5f69 6420 3d20 6622       csc_id = f"
+00016ed0: 6373 632d 7b67 6574 5f72 616e 646f 6d5f  csc-{get_random_
+00016ee0: 6865 7828 3137 297d 2220 2023 2065 2e67  hex(17)}"  # e.g
+00016ef0: 2e20 2763 7363 2d30 3737 6333 3362 3463  . 'csc-077c33b4c
+00016f00: 3139 6532 3630 3336 270a 2020 2020 2020  19e26036'.      
+00016f10: 2020 6373 635f 6172 6e20 3d20 280a 2020    csc_arn = (.  
+00016f20: 2020 2020 2020 2020 2020 6622 6172 6e3a            f"arn:
+00016f30: 6177 733a 6c61 6d62 6461 3a7b 636f 6e74  aws:lambda:{cont
+00016f40: 6578 742e 7265 6769 6f6e 7d3a 7b63 6f6e  ext.region}:{con
+00016f50: 7465 7874 2e61 6363 6f75 6e74 5f69 647d  text.account_id}
+00016f60: 3a63 6f64 652d 7369 676e 696e 672d 636f  :code-signing-co
+00016f70: 6e66 6967 3a7b 6373 635f 6964 7d22 0a20  nfig:{csc_id}". 
+00016f80: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00016f90: 2063 7363 203d 2043 6f64 6553 6967 6e69   csc = CodeSigni
+00016fa0: 6e67 436f 6e66 6967 280a 2020 2020 2020  ngConfig(.      
+00016fb0: 2020 2020 2020 6373 635f 6964 3d63 7363        csc_id=csc
+00016fc0: 5f69 642c 0a20 2020 2020 2020 2020 2020  _id,.           
+00016fd0: 2061 726e 3d63 7363 5f61 726e 2c0a 2020   arn=csc_arn,.  
+00016fe0: 2020 2020 2020 2020 2020 616c 6c6f 7765            allowe
+00016ff0: 645f 7075 626c 6973 6865 7273 3d61 6c6c  d_publishers=all
+00017000: 6f77 6564 5f70 7562 6c69 7368 6572 732c  owed_publishers,
+00017010: 0a20 2020 2020 2020 2020 2020 2070 6f6c  .            pol
+00017020: 6963 6965 733d 636f 6465 5f73 6967 6e69  icies=code_signi
+00017030: 6e67 5f70 6f6c 6963 6965 732c 0a20 2020  ng_policies,.   
+00017040: 2020 2020 2020 2020 206c 6173 745f 6d6f           last_mo
+00017050: 6469 6669 6564 3d61 7069 5f75 7469 6c73  dified=api_utils
+00017060: 2e67 656e 6572 6174 655f 6c61 6d62 6461  .generate_lambda
+00017070: 5f64 6174 6528 292c 0a20 2020 2020 2020  _date(),.       
+00017080: 2020 2020 2064 6573 6372 6970 7469 6f6e       description
+00017090: 3d64 6573 6372 6970 7469 6f6e 2c0a 2020  =description,.  
+000170a0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+000170b0: 7374 6174 652e 636f 6465 5f73 6967 6e69  state.code_signi
+000170c0: 6e67 5f63 6f6e 6669 6773 5b63 7363 5f61  ng_configs[csc_a
+000170d0: 726e 5d20 3d20 6373 630a 2020 2020 2020  rn] = csc.      
+000170e0: 2020 7265 7475 726e 2043 7265 6174 6543    return CreateC
+000170f0: 6f64 6553 6967 6e69 6e67 436f 6e66 6967  odeSigningConfig
+00017100: 5265 7370 6f6e 7365 2843 6f64 6553 6967  Response(CodeSig
+00017110: 6e69 6e67 436f 6e66 6967 3d61 7069 5f75  ningConfig=api_u
+00017120: 7469 6c73 2e6d 6170 5f63 7363 2863 7363  tils.map_csc(csc
+00017130: 2929 0a0a 2020 2020 6465 6620 7075 745f  ))..    def put_
+00017140: 6675 6e63 7469 6f6e 5f63 6f64 655f 7369  function_code_si
+00017150: 676e 696e 675f 636f 6e66 6967 280a 2020  gning_config(.  
+00017160: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
+00017170: 2020 2020 636f 6e74 6578 743a 2052 6571      context: Req
+00017180: 7565 7374 436f 6e74 6578 742c 0a20 2020  uestContext,.   
+00017190: 2020 2020 2063 6f64 655f 7369 676e 696e       code_signin
+000171a0: 675f 636f 6e66 6967 5f61 726e 3a20 436f  g_config_arn: Co
+000171b0: 6465 5369 676e 696e 6743 6f6e 6669 6741  deSigningConfigA
+000171c0: 726e 2c0a 2020 2020 2020 2020 6675 6e63  rn,.        func
+000171d0: 7469 6f6e 5f6e 616d 653a 2046 756e 6374  tion_name: Funct
+000171e0: 696f 6e4e 616d 652c 0a20 2020 2029 202d  ionName,.    ) -
+000171f0: 3e20 5075 7446 756e 6374 696f 6e43 6f64  > PutFunctionCod
+00017200: 6553 6967 6e69 6e67 436f 6e66 6967 5265  eSigningConfigRe
+00017210: 7370 6f6e 7365 3a0a 2020 2020 2020 2020  sponse:.        
+00017220: 7374 6174 6520 3d20 6c61 6d62 6461 5f73  state = lambda_s
+00017230: 746f 7265 735b 636f 6e74 6578 742e 6163  tores[context.ac
+00017240: 636f 756e 745f 6964 5d5b 636f 6e74 6578  count_id][contex
+00017250: 742e 7265 6769 6f6e 5d0a 2020 2020 2020  t.region].      
+00017260: 2020 6675 6e63 7469 6f6e 5f6e 616d 6520    function_name 
+00017270: 3d20 6170 695f 7574 696c 732e 6765 745f  = api_utils.get_
+00017280: 6675 6e63 7469 6f6e 5f6e 616d 6528 6675  function_name(fu
+00017290: 6e63 7469 6f6e 5f6e 616d 652c 2063 6f6e  nction_name, con
+000172a0: 7465 7874 2e72 6567 696f 6e29 0a0a 2020  text.region)..  
+000172b0: 2020 2020 2020 6373 6320 3d20 7374 6174        csc = stat
+000172c0: 652e 636f 6465 5f73 6967 6e69 6e67 5f63  e.code_signing_c
+000172d0: 6f6e 6669 6773 2e67 6574 2863 6f64 655f  onfigs.get(code_
+000172e0: 7369 676e 696e 675f 636f 6e66 6967 5f61  signing_config_a
+000172f0: 726e 290a 2020 2020 2020 2020 6966 206e  rn).        if n
+00017300: 6f74 2063 7363 3a0a 2020 2020 2020 2020  ot csc:.        
+00017310: 2020 2020 7261 6973 6520 436f 6465 5369      raise CodeSi
+00017320: 676e 696e 6743 6f6e 6669 674e 6f74 466f  gningConfigNotFo
+00017330: 756e 6445 7863 6570 7469 6f6e 280a 2020  undException(.  
+00017340: 2020 2020 2020 2020 2020 2020 2020 6622                f"
+00017350: 5468 6520 636f 6465 2073 6967 6e69 6e67  The code signing
+00017360: 2063 6f6e 6669 6775 7261 7469 6f6e 2063   configuration c
+00017370: 616e 6e6f 7420 6265 2066 6f75 6e64 2e20  annot be found. 
+00017380: 4368 6563 6b20 7468 6174 2074 6865 2070  Check that the p
+00017390: 726f 7669 6465 6420 636f 6e66 6967 7572  rovided configur
+000173a0: 6174 696f 6e20 6973 206e 6f74 2064 656c  ation is not del
+000173b0: 6574 6564 3a20 7b63 6f64 655f 7369 676e  eted: {code_sign
+000173c0: 696e 675f 636f 6e66 6967 5f61 726e 7d2e  ing_config_arn}.
+000173d0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+000173e0: 2020 2054 7970 653d 2255 7365 7222 2c0a     Type="User",.
+000173f0: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
+00017400: 2020 2020 2020 2066 6e20 3d20 7374 6174         fn = stat
+00017410: 652e 6675 6e63 7469 6f6e 732e 6765 7428  e.functions.get(
+00017420: 6675 6e63 7469 6f6e 5f6e 616d 6529 0a20  function_name). 
+00017430: 2020 2020 2020 2066 6e5f 6172 6e20 3d20         fn_arn = 
+00017440: 6170 695f 7574 696c 732e 756e 7175 616c  api_utils.unqual
+00017450: 6966 6965 645f 6c61 6d62 6461 5f61 726e  ified_lambda_arn
+00017460: 2866 756e 6374 696f 6e5f 6e61 6d65 2c20  (function_name, 
+00017470: 636f 6e74 6578 742e 6163 636f 756e 745f  context.account_
+00017480: 6964 2c20 636f 6e74 6578 742e 7265 6769  id, context.regi
+00017490: 6f6e 290a 2020 2020 2020 2020 6966 206e  on).        if n
+000174a0: 6f74 2066 6e3a 0a20 2020 2020 2020 2020  ot fn:.         
+000174b0: 2020 2072 6169 7365 2052 6573 6f75 7263     raise Resourc
+000174c0: 654e 6f74 466f 756e 6445 7863 6570 7469  eNotFoundExcepti
+000174d0: 6f6e 2866 2246 756e 6374 696f 6e20 6e6f  on(f"Function no
+000174e0: 7420 666f 756e 643a 207b 666e 5f61 726e  t found: {fn_arn
+000174f0: 7d22 2c20 5479 7065 3d22 5573 6572 2229  }", Type="User")
+00017500: 0a0a 2020 2020 2020 2020 666e 2e63 6f64  ..        fn.cod
+00017510: 655f 7369 676e 696e 675f 636f 6e66 6967  e_signing_config
+00017520: 5f61 726e 203d 2063 6f64 655f 7369 676e  _arn = code_sign
+00017530: 696e 675f 636f 6e66 6967 5f61 726e 0a20  ing_config_arn. 
+00017540: 2020 2020 2020 2072 6574 7572 6e20 5075         return Pu
+00017550: 7446 756e 6374 696f 6e43 6f64 6553 6967  tFunctionCodeSig
+00017560: 6e69 6e67 436f 6e66 6967 5265 7370 6f6e  ningConfigRespon
+00017570: 7365 280a 2020 2020 2020 2020 2020 2020  se(.            
+00017580: 436f 6465 5369 676e 696e 6743 6f6e 6669  CodeSigningConfi
+00017590: 6741 726e 3d63 6f64 655f 7369 676e 696e  gArn=code_signin
+000175a0: 675f 636f 6e66 6967 5f61 726e 2c20 4675  g_config_arn, Fu
+000175b0: 6e63 7469 6f6e 4e61 6d65 3d66 756e 6374  nctionName=funct
+000175c0: 696f 6e5f 6e61 6d65 0a20 2020 2020 2020  ion_name.       
+000175d0: 2029 0a0a 2020 2020 6465 6620 7570 6461   )..    def upda
+000175e0: 7465 5f63 6f64 655f 7369 676e 696e 675f  te_code_signing_
+000175f0: 636f 6e66 6967 280a 2020 2020 2020 2020  config(.        
+00017600: 7365 6c66 2c0a 2020 2020 2020 2020 636f  self,.        co
+00017610: 6e74 6578 743a 2052 6571 7565 7374 436f  ntext: RequestCo
+00017620: 6e74 6578 742c 0a20 2020 2020 2020 2063  ntext,.        c
+00017630: 6f64 655f 7369 676e 696e 675f 636f 6e66  ode_signing_conf
+00017640: 6967 5f61 726e 3a20 436f 6465 5369 676e  ig_arn: CodeSign
+00017650: 696e 6743 6f6e 6669 6741 726e 2c0a 2020  ingConfigArn,.  
+00017660: 2020 2020 2020 6465 7363 7269 7074 696f        descriptio
+00017670: 6e3a 2044 6573 6372 6970 7469 6f6e 203d  n: Description =
+00017680: 204e 6f6e 652c 0a20 2020 2020 2020 2061   None,.        a
+00017690: 6c6c 6f77 6564 5f70 7562 6c69 7368 6572  llowed_publisher
+000176a0: 733a 2041 6c6c 6f77 6564 5075 626c 6973  s: AllowedPublis
+000176b0: 6865 7273 203d 204e 6f6e 652c 0a20 2020  hers = None,.   
+000176c0: 2020 2020 2063 6f64 655f 7369 676e 696e       code_signin
+000176d0: 675f 706f 6c69 6369 6573 3a20 436f 6465  g_policies: Code
+000176e0: 5369 676e 696e 6750 6f6c 6963 6965 7320  SigningPolicies 
+000176f0: 3d20 4e6f 6e65 2c0a 2020 2020 2920 2d3e  = None,.    ) ->
+00017700: 2055 7064 6174 6543 6f64 6553 6967 6e69   UpdateCodeSigni
+00017710: 6e67 436f 6e66 6967 5265 7370 6f6e 7365  ngConfigResponse
+00017720: 3a0a 2020 2020 2020 2020 7374 6174 6520  :.        state 
+00017730: 3d20 6c61 6d62 6461 5f73 746f 7265 735b  = lambda_stores[
+00017740: 636f 6e74 6578 742e 6163 636f 756e 745f  context.account_
+00017750: 6964 5d5b 636f 6e74 6578 742e 7265 6769  id][context.regi
+00017760: 6f6e 5d0a 2020 2020 2020 2020 6373 6320  on].        csc 
+00017770: 3d20 7374 6174 652e 636f 6465 5f73 6967  = state.code_sig
+00017780: 6e69 6e67 5f63 6f6e 6669 6773 2e67 6574  ning_configs.get
+00017790: 2863 6f64 655f 7369 676e 696e 675f 636f  (code_signing_co
+000177a0: 6e66 6967 5f61 726e 290a 2020 2020 2020  nfig_arn).      
+000177b0: 2020 6966 206e 6f74 2063 7363 3a0a 2020    if not csc:.  
+000177c0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000177d0: 5265 736f 7572 6365 4e6f 7446 6f75 6e64  ResourceNotFound
+000177e0: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
+000177f0: 2020 2020 2020 2020 2020 2066 2254 6865             f"The
+00017800: 204c 616d 6264 6120 636f 6465 2073 6967   Lambda code sig
+00017810: 6e69 6e67 2063 6f6e 6669 6775 7261 7469  ning configurati
+00017820: 6f6e 207b 636f 6465 5f73 6967 6e69 6e67  on {code_signing
+00017830: 5f63 6f6e 6669 675f 6172 6e7d 2063 616e  _config_arn} can
+00017840: 206e 6f74 2062 6520 666f 756e 642e 220a   not be found.".
+00017850: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
+00017860: 2020 2020 2020 2063 6861 6e67 6573 203d         changes =
+00017870: 207b 0a20 2020 2020 2020 2020 2020 202a   {.            *
+00017880: 2a28 0a20 2020 2020 2020 2020 2020 2020  *(.             
+00017890: 2020 207b 2261 6c6c 6f77 6564 5f70 7562     {"allowed_pub
+000178a0: 6c69 7368 6572 7322 3a20 616c 6c6f 7765  lishers": allowe
+000178b0: 645f 7075 626c 6973 6865 7273 7d20 6966  d_publishers} if
+000178c0: 2061 6c6c 6f77 6564 5f70 7562 6c69 7368   allowed_publish
+000178d0: 6572 7320 6973 206e 6f74 204e 6f6e 6520  ers is not None 
+000178e0: 656c 7365 207b 7d0a 2020 2020 2020 2020  else {}.        
+000178f0: 2020 2020 292c 0a20 2020 2020 2020 2020      ),.         
+00017900: 2020 202a 2a28 7b22 706f 6c69 6369 6573     **({"policies
+00017910: 223a 2063 6f64 655f 7369 676e 696e 675f  ": code_signing_
+00017920: 706f 6c69 6369 6573 7d20 6966 2063 6f64  policies} if cod
+00017930: 655f 7369 676e 696e 675f 706f 6c69 6369  e_signing_polici
+00017940: 6573 2069 7320 6e6f 7420 4e6f 6e65 2065  es is not None e
+00017950: 6c73 6520 7b7d 292c 0a20 2020 2020 2020  lse {}),.       
+00017960: 2020 2020 202a 2a28 7b22 6465 7363 7269       **({"descri
+00017970: 7074 696f 6e22 3a20 6465 7363 7269 7074  ption": descript
+00017980: 696f 6e7d 2069 6620 6465 7363 7269 7074  ion} if descript
+00017990: 696f 6e20 6973 206e 6f74 204e 6f6e 6520  ion is not None 
+000179a0: 656c 7365 207b 7d29 2c0a 2020 2020 2020  else {}),.      
+000179b0: 2020 7d0a 2020 2020 2020 2020 6e65 775f    }.        new_
+000179c0: 6373 6320 3d20 6461 7461 636c 6173 7365  csc = dataclasse
+000179d0: 732e 7265 706c 6163 6528 0a20 2020 2020  s.replace(.     
+000179e0: 2020 2020 2020 2063 7363 2c20 6c61 7374         csc, last
+000179f0: 5f6d 6f64 6966 6965 643d 6170 695f 7574  _modified=api_ut
+00017a00: 696c 732e 6765 6e65 7261 7465 5f6c 616d  ils.generate_lam
+00017a10: 6264 615f 6461 7465 2829 2c20 2a2a 6368  bda_date(), **ch
+00017a20: 616e 6765 730a 2020 2020 2020 2020 290a  anges.        ).
+00017a30: 2020 2020 2020 2020 7374 6174 652e 636f          state.co
+00017a40: 6465 5f73 6967 6e69 6e67 5f63 6f6e 6669  de_signing_confi
+00017a50: 6773 5b63 6f64 655f 7369 676e 696e 675f  gs[code_signing_
+00017a60: 636f 6e66 6967 5f61 726e 5d20 3d20 6e65  config_arn] = ne
+00017a70: 775f 6373 630a 0a20 2020 2020 2020 2072  w_csc..        r
+00017a80: 6574 7572 6e20 5570 6461 7465 436f 6465  eturn UpdateCode
+00017a90: 5369 676e 696e 6743 6f6e 6669 6752 6573  SigningConfigRes
+00017aa0: 706f 6e73 6528 436f 6465 5369 676e 696e  ponse(CodeSignin
+00017ab0: 6743 6f6e 6669 673d 6170 695f 7574 696c  gConfig=api_util
+00017ac0: 732e 6d61 705f 6373 6328 6e65 775f 6373  s.map_csc(new_cs
+00017ad0: 6329 290a 0a20 2020 2064 6566 2067 6574  c))..    def get
+00017ae0: 5f63 6f64 655f 7369 676e 696e 675f 636f  _code_signing_co
+00017af0: 6e66 6967 280a 2020 2020 2020 2020 7365  nfig(.        se
+00017b00: 6c66 2c20 636f 6e74 6578 743a 2052 6571  lf, context: Req
+00017b10: 7565 7374 436f 6e74 6578 742c 2063 6f64  uestContext, cod
+00017b20: 655f 7369 676e 696e 675f 636f 6e66 6967  e_signing_config
+00017b30: 5f61 726e 3a20 436f 6465 5369 676e 696e  _arn: CodeSignin
+00017b40: 6743 6f6e 6669 6741 726e 0a20 2020 2029  gConfigArn.    )
+00017b50: 202d 3e20 4765 7443 6f64 6553 6967 6e69   -> GetCodeSigni
+00017b60: 6e67 436f 6e66 6967 5265 7370 6f6e 7365  ngConfigResponse
+00017b70: 3a0a 2020 2020 2020 2020 7374 6174 6520  :.        state 
+00017b80: 3d20 6c61 6d62 6461 5f73 746f 7265 735b  = lambda_stores[
+00017b90: 636f 6e74 6578 742e 6163 636f 756e 745f  context.account_
+00017ba0: 6964 5d5b 636f 6e74 6578 742e 7265 6769  id][context.regi
+00017bb0: 6f6e 5d0a 2020 2020 2020 2020 6373 6320  on].        csc 
+00017bc0: 3d20 7374 6174 652e 636f 6465 5f73 6967  = state.code_sig
+00017bd0: 6e69 6e67 5f63 6f6e 6669 6773 2e67 6574  ning_configs.get
+00017be0: 2863 6f64 655f 7369 676e 696e 675f 636f  (code_signing_co
+00017bf0: 6e66 6967 5f61 726e 290a 2020 2020 2020  nfig_arn).      
+00017c00: 2020 6966 206e 6f74 2063 7363 3a0a 2020    if not csc:.  
+00017c10: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00017c20: 5265 736f 7572 6365 4e6f 7446 6f75 6e64  ResourceNotFound
+00017c30: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
+00017c40: 2020 2020 2020 2020 2020 2066 2254 6865             f"The
+00017c50: 204c 616d 6264 6120 636f 6465 2073 6967   Lambda code sig
+00017c60: 6e69 6e67 2063 6f6e 6669 6775 7261 7469  ning configurati
+00017c70: 6f6e 207b 636f 6465 5f73 6967 6e69 6e67  on {code_signing
+00017c80: 5f63 6f6e 6669 675f 6172 6e7d 2063 616e  _config_arn} can
+00017c90: 206e 6f74 2062 6520 666f 756e 642e 220a   not be found.".
+00017ca0: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
+00017cb0: 2020 2020 2020 2072 6574 7572 6e20 4765         return Ge
+00017cc0: 7443 6f64 6553 6967 6e69 6e67 436f 6e66  tCodeSigningConf
+00017cd0: 6967 5265 7370 6f6e 7365 2843 6f64 6553  igResponse(CodeS
+00017ce0: 6967 6e69 6e67 436f 6e66 6967 3d61 7069  igningConfig=api
+00017cf0: 5f75 7469 6c73 2e6d 6170 5f63 7363 2863  _utils.map_csc(c
+00017d00: 7363 2929 0a0a 2020 2020 6465 6620 6765  sc))..    def ge
+00017d10: 745f 6675 6e63 7469 6f6e 5f63 6f64 655f  t_function_code_
+00017d20: 7369 676e 696e 675f 636f 6e66 6967 280a  signing_config(.
+00017d30: 2020 2020 2020 2020 7365 6c66 2c20 636f          self, co
+00017d40: 6e74 6578 743a 2052 6571 7565 7374 436f  ntext: RequestCo
+00017d50: 6e74 6578 742c 2066 756e 6374 696f 6e5f  ntext, function_
+00017d60: 6e61 6d65 3a20 4675 6e63 7469 6f6e 4e61  name: FunctionNa
+00017d70: 6d65 0a20 2020 2029 202d 3e20 4765 7446  me.    ) -> GetF
+00017d80: 756e 6374 696f 6e43 6f64 6553 6967 6e69  unctionCodeSigni
+00017d90: 6e67 436f 6e66 6967 5265 7370 6f6e 7365  ngConfigResponse
+00017da0: 3a0a 2020 2020 2020 2020 7374 6174 6520  :.        state 
+00017db0: 3d20 6c61 6d62 6461 5f73 746f 7265 735b  = lambda_stores[
+00017dc0: 636f 6e74 6578 742e 6163 636f 756e 745f  context.account_
+00017dd0: 6964 5d5b 636f 6e74 6578 742e 7265 6769  id][context.regi
+00017de0: 6f6e 5d0a 2020 2020 2020 2020 6675 6e63  on].        func
+00017df0: 7469 6f6e 5f6e 616d 6520 3d20 6170 695f  tion_name = api_
+00017e00: 7574 696c 732e 6765 745f 6675 6e63 7469  utils.get_functi
+00017e10: 6f6e 5f6e 616d 6528 6675 6e63 7469 6f6e  on_name(function
+00017e20: 5f6e 616d 652c 2063 6f6e 7465 7874 2e72  _name, context.r
+00017e30: 6567 696f 6e29 0a20 2020 2020 2020 2066  egion).        f
+00017e40: 6e20 3d20 7374 6174 652e 6675 6e63 7469  n = state.functi
+00017e50: 6f6e 732e 6765 7428 6675 6e63 7469 6f6e  ons.get(function
+00017e60: 5f6e 616d 6529 0a20 2020 2020 2020 2066  _name).        f
+00017e70: 6e5f 6172 6e20 3d20 6170 695f 7574 696c  n_arn = api_util
+00017e80: 732e 756e 7175 616c 6966 6965 645f 6c61  s.unqualified_la
+00017e90: 6d62 6461 5f61 726e 2866 756e 6374 696f  mbda_arn(functio
+00017ea0: 6e5f 6e61 6d65 2c20 636f 6e74 6578 742e  n_name, context.
+00017eb0: 6163 636f 756e 745f 6964 2c20 636f 6e74  account_id, cont
+00017ec0: 6578 742e 7265 6769 6f6e 290a 2020 2020  ext.region).    
+00017ed0: 2020 2020 6966 206e 6f74 2066 6e3a 0a20      if not fn:. 
+00017ee0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00017ef0: 2052 6573 6f75 7263 654e 6f74 466f 756e   ResourceNotFoun
+00017f00: 6445 7863 6570 7469 6f6e 2866 2246 756e  dException(f"Fun
+00017f10: 6374 696f 6e20 6e6f 7420 666f 756e 643a  ction not found:
+00017f20: 207b 666e 5f61 726e 7d22 2c20 5479 7065   {fn_arn}", Type
+00017f30: 3d22 5573 6572 2229 0a0a 2020 2020 2020  ="User")..      
+00017f40: 2020 6966 2066 6e2e 636f 6465 5f73 6967    if fn.code_sig
+00017f50: 6e69 6e67 5f63 6f6e 6669 675f 6172 6e3a  ning_config_arn:
+00017f60: 0a20 2020 2020 2020 2020 2020 2072 6574  .            ret
+00017f70: 7572 6e20 4765 7446 756e 6374 696f 6e43  urn GetFunctionC
 00017f80: 6f64 6553 6967 6e69 6e67 436f 6e66 6967  odeSigningConfig
-00017f90: 4172 6e3d 666e 2e63 6f64 655f 7369 676e  Arn=fn.code_sign
-00017fa0: 696e 675f 636f 6e66 6967 5f61 726e 2c20  ing_config_arn, 
-00017fb0: 4675 6e63 7469 6f6e 4e61 6d65 3d66 756e  FunctionName=fun
-00017fc0: 6374 696f 6e5f 6e61 6d65 0a20 2020 2020  ction_name.     
-00017fd0: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-00017fe0: 2020 7265 7475 726e 2047 6574 4675 6e63    return GetFunc
-00017ff0: 7469 6f6e 436f 6465 5369 676e 696e 6743  tionCodeSigningC
-00018000: 6f6e 6669 6752 6573 706f 6e73 6528 290a  onfigResponse().
-00018010: 0a20 2020 2064 6566 2064 656c 6574 655f  .    def delete_
-00018020: 6675 6e63 7469 6f6e 5f63 6f64 655f 7369  function_code_si
-00018030: 676e 696e 675f 636f 6e66 6967 280a 2020  gning_config(.  
-00018040: 2020 2020 2020 7365 6c66 2c20 636f 6e74        self, cont
-00018050: 6578 743a 2052 6571 7565 7374 436f 6e74  ext: RequestCont
-00018060: 6578 742c 2066 756e 6374 696f 6e5f 6e61  ext, function_na
-00018070: 6d65 3a20 4675 6e63 7469 6f6e 4e61 6d65  me: FunctionName
-00018080: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-00018090: 2020 2020 2020 2020 7374 6174 6520 3d20          state = 
-000180a0: 6c61 6d62 6461 5f73 746f 7265 735b 636f  lambda_stores[co
-000180b0: 6e74 6578 742e 6163 636f 756e 745f 6964  ntext.account_id
-000180c0: 5d5b 636f 6e74 6578 742e 7265 6769 6f6e  ][context.region
-000180d0: 5d0a 2020 2020 2020 2020 6675 6e63 7469  ].        functi
-000180e0: 6f6e 5f6e 616d 6520 3d20 6170 695f 7574  on_name = api_ut
-000180f0: 696c 732e 6765 745f 6675 6e63 7469 6f6e  ils.get_function
-00018100: 5f6e 616d 6528 6675 6e63 7469 6f6e 5f6e  _name(function_n
-00018110: 616d 652c 2063 6f6e 7465 7874 2e72 6567  ame, context.reg
-00018120: 696f 6e29 0a20 2020 2020 2020 2066 6e20  ion).        fn 
-00018130: 3d20 7374 6174 652e 6675 6e63 7469 6f6e  = state.function
-00018140: 732e 6765 7428 6675 6e63 7469 6f6e 5f6e  s.get(function_n
-00018150: 616d 6529 0a20 2020 2020 2020 2066 6e5f  ame).        fn_
-00018160: 6172 6e20 3d20 6170 695f 7574 696c 732e  arn = api_utils.
-00018170: 756e 7175 616c 6966 6965 645f 6c61 6d62  unqualified_lamb
-00018180: 6461 5f61 726e 2866 756e 6374 696f 6e5f  da_arn(function_
-00018190: 6e61 6d65 2c20 636f 6e74 6578 742e 6163  name, context.ac
-000181a0: 636f 756e 745f 6964 2c20 636f 6e74 6578  count_id, contex
-000181b0: 742e 7265 6769 6f6e 290a 2020 2020 2020  t.region).      
-000181c0: 2020 6966 206e 6f74 2066 6e3a 0a20 2020    if not fn:.   
-000181d0: 2020 2020 2020 2020 2072 6169 7365 2052           raise R
-000181e0: 6573 6f75 7263 654e 6f74 466f 756e 6445  esourceNotFoundE
-000181f0: 7863 6570 7469 6f6e 2866 2246 756e 6374  xception(f"Funct
-00018200: 696f 6e20 6e6f 7420 666f 756e 643a 207b  ion not found: {
-00018210: 666e 5f61 726e 7d22 2c20 5479 7065 3d22  fn_arn}", Type="
-00018220: 5573 6572 2229 0a0a 2020 2020 2020 2020  User")..        
-00018230: 666e 2e63 6f64 655f 7369 676e 696e 675f  fn.code_signing_
-00018240: 636f 6e66 6967 5f61 726e 203d 204e 6f6e  config_arn = Non
-00018250: 650a 0a20 2020 2064 6566 2064 656c 6574  e..    def delet
-00018260: 655f 636f 6465 5f73 6967 6e69 6e67 5f63  e_code_signing_c
-00018270: 6f6e 6669 6728 0a20 2020 2020 2020 2073  onfig(.        s
-00018280: 656c 662c 2063 6f6e 7465 7874 3a20 5265  elf, context: Re
-00018290: 7175 6573 7443 6f6e 7465 7874 2c20 636f  questContext, co
-000182a0: 6465 5f73 6967 6e69 6e67 5f63 6f6e 6669  de_signing_confi
-000182b0: 675f 6172 6e3a 2043 6f64 6553 6967 6e69  g_arn: CodeSigni
-000182c0: 6e67 436f 6e66 6967 4172 6e0a 2020 2020  ngConfigArn.    
-000182d0: 2920 2d3e 2044 656c 6574 6543 6f64 6553  ) -> DeleteCodeS
-000182e0: 6967 6e69 6e67 436f 6e66 6967 5265 7370  igningConfigResp
-000182f0: 6f6e 7365 3a0a 2020 2020 2020 2020 7374  onse:.        st
-00018300: 6174 6520 3d20 6c61 6d62 6461 5f73 746f  ate = lambda_sto
-00018310: 7265 735b 636f 6e74 6578 742e 6163 636f  res[context.acco
-00018320: 756e 745f 6964 5d5b 636f 6e74 6578 742e  unt_id][context.
-00018330: 7265 6769 6f6e 5d0a 0a20 2020 2020 2020  region]..       
-00018340: 2063 7363 203d 2073 7461 7465 2e63 6f64   csc = state.cod
-00018350: 655f 7369 676e 696e 675f 636f 6e66 6967  e_signing_config
-00018360: 732e 6765 7428 636f 6465 5f73 6967 6e69  s.get(code_signi
-00018370: 6e67 5f63 6f6e 6669 675f 6172 6e29 0a20  ng_config_arn). 
-00018380: 2020 2020 2020 2069 6620 6e6f 7420 6373         if not cs
-00018390: 633a 0a20 2020 2020 2020 2020 2020 2072  c:.            r
-000183a0: 6169 7365 2052 6573 6f75 7263 654e 6f74  aise ResourceNot
-000183b0: 466f 756e 6445 7863 6570 7469 6f6e 280a  FoundException(.
-000183c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000183d0: 6622 5468 6520 4c61 6d62 6461 2063 6f64  f"The Lambda cod
-000183e0: 6520 7369 676e 696e 6720 636f 6e66 6967  e signing config
-000183f0: 7572 6174 696f 6e20 7b63 6f64 655f 7369  uration {code_si
-00018400: 676e 696e 675f 636f 6e66 6967 5f61 726e  gning_config_arn
-00018410: 7d20 6361 6e20 6e6f 7420 6265 2066 6f75  } can not be fou
-00018420: 6e64 2e22 0a20 2020 2020 2020 2020 2020  nd.".           
-00018430: 2029 0a0a 2020 2020 2020 2020 6465 6c20   )..        del 
-00018440: 7374 6174 652e 636f 6465 5f73 6967 6e69  state.code_signi
-00018450: 6e67 5f63 6f6e 6669 6773 5b63 6f64 655f  ng_configs[code_
-00018460: 7369 676e 696e 675f 636f 6e66 6967 5f61  signing_config_a
-00018470: 726e 5d0a 0a20 2020 2020 2020 2072 6574  rn]..        ret
-00018480: 7572 6e20 4465 6c65 7465 436f 6465 5369  urn DeleteCodeSi
-00018490: 676e 696e 6743 6f6e 6669 6752 6573 706f  gningConfigRespo
-000184a0: 6e73 6528 290a 0a20 2020 2064 6566 206c  nse()..    def l
-000184b0: 6973 745f 636f 6465 5f73 6967 6e69 6e67  ist_code_signing
-000184c0: 5f63 6f6e 6669 6773 280a 2020 2020 2020  _configs(.      
-000184d0: 2020 7365 6c66 2c20 636f 6e74 6578 743a    self, context:
-000184e0: 2052 6571 7565 7374 436f 6e74 6578 742c   RequestContext,
-000184f0: 206d 6172 6b65 723a 2053 7472 696e 6720   marker: String 
-00018500: 3d20 4e6f 6e65 2c20 6d61 785f 6974 656d  = None, max_item
-00018510: 733a 204d 6178 4c69 7374 4974 656d 7320  s: MaxListItems 
-00018520: 3d20 4e6f 6e65 0a20 2020 2029 202d 3e20  = None.    ) -> 
-00018530: 4c69 7374 436f 6465 5369 676e 696e 6743  ListCodeSigningC
-00018540: 6f6e 6669 6773 5265 7370 6f6e 7365 3a0a  onfigsResponse:.
-00018550: 2020 2020 2020 2020 7374 6174 6520 3d20          state = 
-00018560: 6c61 6d62 6461 5f73 746f 7265 735b 636f  lambda_stores[co
-00018570: 6e74 6578 742e 6163 636f 756e 745f 6964  ntext.account_id
-00018580: 5d5b 636f 6e74 6578 742e 7265 6769 6f6e  ][context.region
-00018590: 5d0a 0a20 2020 2020 2020 2063 7363 7320  ]..        cscs 
-000185a0: 3d20 5b61 7069 5f75 7469 6c73 2e6d 6170  = [api_utils.map
-000185b0: 5f63 7363 2863 7363 2920 666f 7220 6373  _csc(csc) for cs
-000185c0: 6320 696e 2073 7461 7465 2e63 6f64 655f  c in state.code_
-000185d0: 7369 676e 696e 675f 636f 6e66 6967 732e  signing_configs.
-000185e0: 7661 6c75 6573 2829 5d0a 2020 2020 2020  values()].      
-000185f0: 2020 6373 6373 203d 2050 6167 696e 6174    cscs = Paginat
-00018600: 6564 4c69 7374 2863 7363 7329 0a20 2020  edList(cscs).   
-00018610: 2020 2020 2070 6167 652c 2074 6f6b 656e       page, token
-00018620: 203d 2063 7363 732e 6765 745f 7061 6765   = cscs.get_page
-00018630: 280a 2020 2020 2020 2020 2020 2020 6c61  (.            la
-00018640: 6d62 6461 2063 7363 3a20 6373 635b 2243  mbda csc: csc["C
-00018650: 6f64 6553 6967 6e69 6e67 436f 6e66 6967  odeSigningConfig
-00018660: 4964 225d 2c0a 2020 2020 2020 2020 2020  Id"],.          
-00018670: 2020 6d61 726b 6572 2c0a 2020 2020 2020    marker,.      
-00018680: 2020 2020 2020 6d61 785f 6974 656d 732c        max_items,
-00018690: 0a20 2020 2020 2020 2029 0a20 2020 2020  .        ).     
-000186a0: 2020 2072 6574 7572 6e20 4c69 7374 436f     return ListCo
-000186b0: 6465 5369 676e 696e 6743 6f6e 6669 6773  deSigningConfigs
-000186c0: 5265 7370 6f6e 7365 2843 6f64 6553 6967  Response(CodeSig
-000186d0: 6e69 6e67 436f 6e66 6967 733d 7061 6765  ningConfigs=page
-000186e0: 2c20 4e65 7874 4d61 726b 6572 3d74 6f6b  , NextMarker=tok
-000186f0: 656e 290a 0a20 2020 2064 6566 206c 6973  en)..    def lis
-00018700: 745f 6675 6e63 7469 6f6e 735f 6279 5f63  t_functions_by_c
-00018710: 6f64 655f 7369 676e 696e 675f 636f 6e66  ode_signing_conf
-00018720: 6967 280a 2020 2020 2020 2020 7365 6c66  ig(.        self
-00018730: 2c0a 2020 2020 2020 2020 636f 6e74 6578  ,.        contex
-00018740: 743a 2052 6571 7565 7374 436f 6e74 6578  t: RequestContex
-00018750: 742c 0a20 2020 2020 2020 2063 6f64 655f  t,.        code_
-00018760: 7369 676e 696e 675f 636f 6e66 6967 5f61  signing_config_a
-00018770: 726e 3a20 436f 6465 5369 676e 696e 6743  rn: CodeSigningC
-00018780: 6f6e 6669 6741 726e 2c0a 2020 2020 2020  onfigArn,.      
-00018790: 2020 6d61 726b 6572 3a20 5374 7269 6e67    marker: String
-000187a0: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
-000187b0: 206d 6178 5f69 7465 6d73 3a20 4d61 784c   max_items: MaxL
-000187c0: 6973 7449 7465 6d73 203d 204e 6f6e 652c  istItems = None,
-000187d0: 0a20 2020 2029 202d 3e20 4c69 7374 4675  .    ) -> ListFu
-000187e0: 6e63 7469 6f6e 7342 7943 6f64 6553 6967  nctionsByCodeSig
-000187f0: 6e69 6e67 436f 6e66 6967 5265 7370 6f6e  ningConfigRespon
-00018800: 7365 3a0a 2020 2020 2020 2020 7374 6174  se:.        stat
-00018810: 6520 3d20 6c61 6d62 6461 5f73 746f 7265  e = lambda_store
-00018820: 735b 636f 6e74 6578 742e 6163 636f 756e  s[context.accoun
-00018830: 745f 6964 5d5b 636f 6e74 6578 742e 7265  t_id][context.re
-00018840: 6769 6f6e 5d0a 0a20 2020 2020 2020 2069  gion]..        i
-00018850: 6620 636f 6465 5f73 6967 6e69 6e67 5f63  f code_signing_c
-00018860: 6f6e 6669 675f 6172 6e20 6e6f 7420 696e  onfig_arn not in
-00018870: 2073 7461 7465 2e63 6f64 655f 7369 676e   state.code_sign
-00018880: 696e 675f 636f 6e66 6967 733a 0a20 2020  ing_configs:.   
-00018890: 2020 2020 2020 2020 2072 6169 7365 2052           raise R
-000188a0: 6573 6f75 7263 654e 6f74 466f 756e 6445  esourceNotFoundE
-000188b0: 7863 6570 7469 6f6e 280a 2020 2020 2020  xception(.      
-000188c0: 2020 2020 2020 2020 2020 6622 5468 6520            f"The 
-000188d0: 4c61 6d62 6461 2063 6f64 6520 7369 676e  Lambda code sign
-000188e0: 696e 6720 636f 6e66 6967 7572 6174 696f  ing configuratio
-000188f0: 6e20 7b63 6f64 655f 7369 676e 696e 675f  n {code_signing_
-00018900: 636f 6e66 6967 5f61 726e 7d20 6361 6e20  config_arn} can 
-00018910: 6e6f 7420 6265 2066 6f75 6e64 2e22 0a20  not be found.". 
-00018920: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-00018930: 2020 2020 2020 666e 5f61 726e 7320 3d20        fn_arns = 
-00018940: 5b0a 2020 2020 2020 2020 2020 2020 6170  [.            ap
-00018950: 695f 7574 696c 732e 756e 7175 616c 6966  i_utils.unqualif
-00018960: 6965 645f 6c61 6d62 6461 5f61 726e 2866  ied_lambda_arn(f
-00018970: 6e2e 6675 6e63 7469 6f6e 5f6e 616d 652c  n.function_name,
-00018980: 2063 6f6e 7465 7874 2e61 6363 6f75 6e74   context.account
-00018990: 5f69 642c 2063 6f6e 7465 7874 2e72 6567  _id, context.reg
-000189a0: 696f 6e29 0a20 2020 2020 2020 2020 2020  ion).           
-000189b0: 2066 6f72 2066 6e20 696e 2073 7461 7465   for fn in state
-000189c0: 2e66 756e 6374 696f 6e73 2e76 616c 7565  .functions.value
-000189d0: 7328 290a 2020 2020 2020 2020 2020 2020  s().            
-000189e0: 6966 2066 6e2e 636f 6465 5f73 6967 6e69  if fn.code_signi
-000189f0: 6e67 5f63 6f6e 6669 675f 6172 6e20 3d3d  ng_config_arn ==
-00018a00: 2063 6f64 655f 7369 676e 696e 675f 636f   code_signing_co
-00018a10: 6e66 6967 5f61 726e 0a20 2020 2020 2020  nfig_arn.       
-00018a20: 205d 0a0a 2020 2020 2020 2020 6373 6373   ]..        cscs
-00018a30: 203d 2050 6167 696e 6174 6564 4c69 7374   = PaginatedList
-00018a40: 2866 6e5f 6172 6e73 290a 2020 2020 2020  (fn_arns).      
-00018a50: 2020 7061 6765 2c20 746f 6b65 6e20 3d20    page, token = 
-00018a60: 6373 6373 2e67 6574 5f70 6167 6528 0a20  cscs.get_page(. 
-00018a70: 2020 2020 2020 2020 2020 206c 616d 6264             lambd
-00018a80: 6120 783a 2078 2c0a 2020 2020 2020 2020  a x: x,.        
-00018a90: 2020 2020 6d61 726b 6572 2c0a 2020 2020      marker,.    
-00018aa0: 2020 2020 2020 2020 6d61 785f 6974 656d          max_item
-00018ab0: 732c 0a20 2020 2020 2020 2029 0a20 2020  s,.        ).   
-00018ac0: 2020 2020 2072 6574 7572 6e20 4c69 7374       return List
-00018ad0: 4675 6e63 7469 6f6e 7342 7943 6f64 6553  FunctionsByCodeS
-00018ae0: 6967 6e69 6e67 436f 6e66 6967 5265 7370  igningConfigResp
-00018af0: 6f6e 7365 2846 756e 6374 696f 6e41 726e  onse(FunctionArn
-00018b00: 733d 7061 6765 2c20 4e65 7874 4d61 726b  s=page, NextMark
-00018b10: 6572 3d74 6f6b 656e 290a 0a20 2020 2023  er=token)..    #
-00018b20: 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   ===============
-00018b30: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00018b40: 3d3d 3d3d 3d3d 3d3d 0a20 2020 2023 203d  ========.    # =
-00018b50: 3d3d 3d3d 3d3d 3d3d 2020 4163 636f 756e  ========  Accoun
-00018b60: 7420 5365 7474 696e 6773 2020 203d 3d3d  t Settings   ===
-00018b70: 3d3d 3d3d 3d3d 0a20 2020 2023 203d 3d3d  ======.    # ===
-00018b80: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00018b90: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00018ba0: 3d3d 3d3d 0a0a 2020 2020 2320 4341 5645  ====..    # CAVE
-00018bb0: 3a20 7468 6573 6520 7365 7474 696e 6773  : these settings
-00018bc0: 2026 2075 7361 6765 7320 6172 6520 2a70   & usages are *p
-00018bd0: 6572 2a20 7265 6769 6f6e 210a 2020 2020  er* region!.    
-00018be0: 6465 6620 6765 745f 6163 636f 756e 745f  def get_account_
-00018bf0: 7365 7474 696e 6773 280a 2020 2020 2020  settings(.      
-00018c00: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
-00018c10: 636f 6e74 6578 743a 2052 6571 7565 7374  context: Request
-00018c20: 436f 6e74 6578 742c 0a20 2020 2029 202d  Context,.    ) -
-00018c30: 3e20 4765 7441 6363 6f75 6e74 5365 7474  > GetAccountSett
-00018c40: 696e 6773 5265 7370 6f6e 7365 3a0a 2020  ingsResponse:.  
-00018c50: 2020 2020 2020 7374 6174 6520 3d20 6c61        state = la
-00018c60: 6d62 6461 5f73 746f 7265 735b 636f 6e74  mbda_stores[cont
-00018c70: 6578 742e 6163 636f 756e 745f 6964 5d5b  ext.account_id][
-00018c80: 636f 6e74 6578 742e 7265 6769 6f6e 5d0a  context.region].
-00018c90: 0a20 2020 2020 2020 2066 6e5f 636f 756e  .        fn_coun
-00018ca0: 7420 3d20 300a 2020 2020 2020 2020 636f  t = 0.        co
-00018cb0: 6465 5f73 697a 655f 7375 6d20 3d20 300a  de_size_sum = 0.
-00018cc0: 2020 2020 2020 2020 7265 7365 7276 6564          reserved
-00018cd0: 5f63 6f6e 6375 7272 656e 6379 5f73 756d  _concurrency_sum
-00018ce0: 203d 2030 0a20 2020 2020 2020 2023 2054   = 0.        # T
-00018cf0: 4f44 4f3a 2066 6978 2063 616c 6375 6c61  ODO: fix calcula
-00018d00: 7469 6f6e 2028 7365 6520 6c61 6d62 6461  tion (see lambda
-00018d10: 2073 6572 7669 6365 2067 6574 5f61 7661   service get_ava
-00018d20: 696c 6162 6c65 5f66 6e5f 636f 6e63 7572  ilable_fn_concur
-00018d30: 7265 6e63 7920 6574 6329 0a20 2020 2020  rency etc).     
-00018d40: 2020 2066 6f72 2066 6e20 696e 2073 7461     for fn in sta
-00018d50: 7465 2e66 756e 6374 696f 6e73 2e76 616c  te.functions.val
-00018d60: 7565 7328 293a 0a20 2020 2020 2020 2020  ues():.         
-00018d70: 2020 2066 6e5f 636f 756e 7420 2b3d 2031     fn_count += 1
-00018d80: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00018d90: 2066 6e5f 7665 7273 696f 6e20 696e 2066   fn_version in f
-00018da0: 6e2e 7665 7273 696f 6e73 2e76 616c 7565  n.versions.value
-00018db0: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
-00018dc0: 2020 2020 2063 6f64 655f 7369 7a65 5f73       code_size_s
-00018dd0: 756d 202b 3d20 666e 5f76 6572 7369 6f6e  um += fn_version
-00018de0: 2e63 6f6e 6669 672e 636f 6465 2e63 6f64  .config.code.cod
-00018df0: 655f 7369 7a65 0a20 2020 2020 2020 2020  e_size.         
-00018e00: 2020 2069 6620 666e 2e72 6573 6572 7665     if fn.reserve
-00018e10: 645f 636f 6e63 7572 7265 6e74 5f65 7865  d_concurrent_exe
-00018e20: 6375 7469 6f6e 7320 6973 206e 6f74 204e  cutions is not N
-00018e30: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00018e40: 2020 2020 2072 6573 6572 7665 645f 636f       reserved_co
-00018e50: 6e63 7572 7265 6e63 795f 7375 6d20 2b3d  ncurrency_sum +=
-00018e60: 2066 6e2e 7265 7365 7276 6564 5f63 6f6e   fn.reserved_con
-00018e70: 6375 7272 656e 745f 6578 6563 7574 696f  current_executio
-00018e80: 6e73 0a20 2020 2020 2020 2020 2020 2066  ns.            f
-00018e90: 6f72 2063 2069 6e20 666e 2e70 726f 7669  or c in fn.provi
-00018ea0: 7369 6f6e 6564 5f63 6f6e 6375 7272 656e  sioned_concurren
-00018eb0: 6379 5f63 6f6e 6669 6773 2e76 616c 7565  cy_configs.value
-00018ec0: 7328 293a 0a20 2020 2020 2020 2020 2020  s():.           
-00018ed0: 2020 2020 2072 6573 6572 7665 645f 636f       reserved_co
-00018ee0: 6e63 7572 7265 6e63 795f 7375 6d20 2b3d  ncurrency_sum +=
-00018ef0: 2063 2e70 726f 7669 7369 6f6e 6564 5f63   c.provisioned_c
-00018f00: 6f6e 6375 7272 656e 745f 6578 6563 7574  oncurrent_execut
-00018f10: 696f 6e73 0a20 2020 2020 2020 2066 6f72  ions.        for
-00018f20: 206c 6179 6572 2069 6e20 7374 6174 652e   layer in state.
-00018f30: 6c61 7965 7273 2e76 616c 7565 7328 293a  layers.values():
-00018f40: 0a20 2020 2020 2020 2020 2020 2066 6f72  .            for
-00018f50: 206c 6179 6572 5f76 6572 7369 6f6e 2069   layer_version i
-00018f60: 6e20 6c61 7965 722e 6c61 7965 725f 7665  n layer.layer_ve
-00018f70: 7273 696f 6e73 2e76 616c 7565 7328 293a  rsions.values():
-00018f80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00018f90: 2063 6f64 655f 7369 7a65 5f73 756d 202b   code_size_sum +
-00018fa0: 3d20 6c61 7965 725f 7665 7273 696f 6e2e  = layer_version.
-00018fb0: 636f 6465 2e63 6f64 655f 7369 7a65 0a20  code.code_size. 
-00018fc0: 2020 2020 2020 2072 6574 7572 6e20 4765         return Ge
-00018fd0: 7441 6363 6f75 6e74 5365 7474 696e 6773  tAccountSettings
-00018fe0: 5265 7370 6f6e 7365 280a 2020 2020 2020  Response(.      
-00018ff0: 2020 2020 2020 4163 636f 756e 744c 696d        AccountLim
-00019000: 6974 3d41 6363 6f75 6e74 4c69 6d69 7428  it=AccountLimit(
-00019010: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019020: 2054 6f74 616c 436f 6465 5369 7a65 3d63   TotalCodeSize=c
-00019030: 6f6e 6669 672e 4c41 4d42 4441 5f4c 494d  onfig.LAMBDA_LIM
-00019040: 4954 535f 544f 5441 4c5f 434f 4445 5f53  ITS_TOTAL_CODE_S
-00019050: 495a 452c 0a20 2020 2020 2020 2020 2020  IZE,.           
-00019060: 2020 2020 2043 6f64 6553 697a 655a 6970       CodeSizeZip
-00019070: 7065 643d 636f 6e66 6967 2e4c 414d 4244  ped=config.LAMBD
-00019080: 415f 4c49 4d49 5453 5f43 4f44 455f 5349  A_LIMITS_CODE_SI
-00019090: 5a45 5f5a 4950 5045 442c 0a20 2020 2020  ZE_ZIPPED,.     
-000190a0: 2020 2020 2020 2020 2020 2043 6f64 6553             CodeS
-000190b0: 697a 6555 6e7a 6970 7065 643d 636f 6e66  izeUnzipped=conf
-000190c0: 6967 2e4c 414d 4244 415f 4c49 4d49 5453  ig.LAMBDA_LIMITS
-000190d0: 5f43 4f44 455f 5349 5a45 5f55 4e5a 4950  _CODE_SIZE_UNZIP
-000190e0: 5045 442c 0a20 2020 2020 2020 2020 2020  PED,.           
-000190f0: 2020 2020 2043 6f6e 6375 7272 656e 7445       ConcurrentE
-00019100: 7865 6375 7469 6f6e 733d 636f 6e66 6967  xecutions=config
-00019110: 2e4c 414d 4244 415f 4c49 4d49 5453 5f43  .LAMBDA_LIMITS_C
-00019120: 4f4e 4355 5252 454e 545f 4558 4543 5554  ONCURRENT_EXECUT
-00019130: 494f 4e53 2c0a 2020 2020 2020 2020 2020  IONS,.          
-00019140: 2020 2020 2020 556e 7265 7365 7276 6564        Unreserved
-00019150: 436f 6e63 7572 7265 6e74 4578 6563 7574  ConcurrentExecut
-00019160: 696f 6e73 3d63 6f6e 6669 672e 4c41 4d42  ions=config.LAMB
-00019170: 4441 5f4c 494d 4954 535f 434f 4e43 5552  DA_LIMITS_CONCUR
-00019180: 5245 4e54 5f45 5845 4355 5449 4f4e 530a  RENT_EXECUTIONS.
-00019190: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000191a0: 2d20 7265 7365 7276 6564 5f63 6f6e 6375  - reserved_concu
-000191b0: 7272 656e 6379 5f73 756d 2c0a 2020 2020  rrency_sum,.    
-000191c0: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
-000191d0: 2020 2020 2020 2041 6363 6f75 6e74 5573         AccountUs
-000191e0: 6167 653d 4163 636f 756e 7455 7361 6765  age=AccountUsage
-000191f0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00019200: 2020 546f 7461 6c43 6f64 6553 697a 653d    TotalCodeSize=
-00019210: 636f 6465 5f73 697a 655f 7375 6d2c 0a20  code_size_sum,. 
-00019220: 2020 2020 2020 2020 2020 2020 2020 2046                 F
-00019230: 756e 6374 696f 6e43 6f75 6e74 3d66 6e5f  unctionCount=fn_
-00019240: 636f 756e 742c 0a20 2020 2020 2020 2020  count,.         
-00019250: 2020 2029 2c0a 2020 2020 2020 2020 290a     ),.        ).
-00019260: 0a20 2020 2023 203d 3d3d 3d3d 3d3d 3d3d  .    # =========
-00019270: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00019280: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a20  ==============. 
-00019290: 2020 2023 203d 3d20 2050 726f 7669 7369     # ==  Provisi
-000192a0: 6f6e 6564 2043 6f6e 6375 7272 656e 6379  oned Concurrency
-000192b0: 2043 6f6e 6669 6720 2020 3d3d 0a20 2020   Config   ==.   
-000192c0: 2023 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   # =============
-000192d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000192e0: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 2020 2020  ==========..    
-000192f0: 6465 6620 5f67 6574 5f70 726f 7669 7369  def _get_provisi
-00019300: 6f6e 6564 5f63 6f6e 6669 6728 0a20 2020  oned_config(.   
-00019310: 2020 2020 2073 656c 662c 2063 6f6e 7465       self, conte
-00019320: 7874 3a20 5265 7175 6573 7443 6f6e 7465  xt: RequestConte
-00019330: 7874 2c20 6675 6e63 7469 6f6e 5f6e 616d  xt, function_nam
-00019340: 653a 2073 7472 2c20 7175 616c 6966 6965  e: str, qualifie
-00019350: 723a 2073 7472 0a20 2020 2029 202d 3e20  r: str.    ) -> 
-00019360: 5072 6f76 6973 696f 6e65 6443 6f6e 6375  ProvisionedConcu
-00019370: 7272 656e 6379 436f 6e66 6967 7572 6174  rrencyConfigurat
-00019380: 696f 6e20 7c20 4e6f 6e65 3a0a 2020 2020  ion | None:.    
-00019390: 2020 2020 7374 6174 6520 3d20 6c61 6d62      state = lamb
-000193a0: 6461 5f73 746f 7265 735b 636f 6e74 6578  da_stores[contex
-000193b0: 742e 6163 636f 756e 745f 6964 5d5b 636f  t.account_id][co
-000193c0: 6e74 6578 742e 7265 6769 6f6e 5d0a 2020  ntext.region].  
-000193d0: 2020 2020 2020 666e 203d 2073 7461 7465        fn = state
-000193e0: 2e66 756e 6374 696f 6e73 2e67 6574 2866  .functions.get(f
-000193f0: 756e 6374 696f 6e5f 6e61 6d65 290a 2020  unction_name).  
-00019400: 2020 2020 2020 6966 2061 7069 5f75 7469        if api_uti
-00019410: 6c73 2e71 7561 6c69 6669 6572 5f69 735f  ls.qualifier_is_
-00019420: 616c 6961 7328 7175 616c 6966 6965 7229  alias(qualifier)
-00019430: 3a0a 2020 2020 2020 2020 2020 2020 666e  :.            fn
-00019440: 5f61 6c69 6173 203d 204e 6f6e 650a 2020  _alias = None.  
-00019450: 2020 2020 2020 2020 2020 6966 2066 6e3a            if fn:
-00019460: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019470: 2066 6e5f 616c 6961 7320 3d20 666e 2e61   fn_alias = fn.a
-00019480: 6c69 6173 6573 2e67 6574 2871 7561 6c69  liases.get(quali
-00019490: 6669 6572 290a 2020 2020 2020 2020 2020  fier).          
-000194a0: 2020 6966 2066 6e5f 616c 6961 7320 6973    if fn_alias is
-000194b0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
-000194c0: 2020 2020 2020 2072 6169 7365 2052 6573         raise Res
-000194d0: 6f75 7263 654e 6f74 466f 756e 6445 7863  ourceNotFoundExc
-000194e0: 6570 7469 6f6e 280a 2020 2020 2020 2020  eption(.        
-000194f0: 2020 2020 2020 2020 2020 2020 6622 4361              f"Ca
-00019500: 6e6e 6f74 2066 696e 6420 616c 6961 7320  nnot find alias 
-00019510: 6172 6e3a 207b 6170 695f 7574 696c 732e  arn: {api_utils.
-00019520: 7175 616c 6966 6965 645f 6c61 6d62 6461  qualified_lambda
-00019530: 5f61 726e 2866 756e 6374 696f 6e5f 6e61  _arn(function_na
-00019540: 6d65 2c20 7175 616c 6966 6965 722c 2063  me, qualifier, c
-00019550: 6f6e 7465 7874 2e61 6363 6f75 6e74 5f69  ontext.account_i
-00019560: 642c 2063 6f6e 7465 7874 2e72 6567 696f  d, context.regio
-00019570: 6e29 7d22 2c0a 2020 2020 2020 2020 2020  n)}",.          
-00019580: 2020 2020 2020 2020 2020 5479 7065 3d22            Type="
-00019590: 5573 6572 222c 0a20 2020 2020 2020 2020  User",.         
-000195a0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-000195b0: 2065 6c69 6620 6170 695f 7574 696c 732e   elif api_utils.
-000195c0: 7175 616c 6966 6965 725f 6973 5f76 6572  qualifier_is_ver
-000195d0: 7369 6f6e 2871 7561 6c69 6669 6572 293a  sion(qualifier):
-000195e0: 0a20 2020 2020 2020 2020 2020 2066 6e5f  .            fn_
-000195f0: 7665 7273 696f 6e20 3d20 4e6f 6e65 0a20  version = None. 
-00019600: 2020 2020 2020 2020 2020 2069 6620 666e             if fn
-00019610: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-00019620: 2020 666e 5f76 6572 7369 6f6e 203d 2066    fn_version = f
-00019630: 6e2e 7665 7273 696f 6e73 2e67 6574 2871  n.versions.get(q
-00019640: 7561 6c69 6669 6572 290a 2020 2020 2020  ualifier).      
-00019650: 2020 2020 2020 6966 2066 6e5f 7665 7273        if fn_vers
-00019660: 696f 6e20 6973 204e 6f6e 653a 0a20 2020  ion is None:.   
-00019670: 2020 2020 2020 2020 2020 2020 2072 6169               rai
-00019680: 7365 2052 6573 6f75 7263 654e 6f74 466f  se ResourceNotFo
-00019690: 756e 6445 7863 6570 7469 6f6e 280a 2020  undException(.  
-000196a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000196b0: 2020 6622 4675 6e63 7469 6f6e 206e 6f74    f"Function not
-000196c0: 2066 6f75 6e64 3a20 7b61 7069 5f75 7469   found: {api_uti
-000196d0: 6c73 2e71 7561 6c69 6669 6564 5f6c 616d  ls.qualified_lam
-000196e0: 6264 615f 6172 6e28 6675 6e63 7469 6f6e  bda_arn(function
-000196f0: 5f6e 616d 652c 2071 7561 6c69 6669 6572  _name, qualifier
-00019700: 2c20 636f 6e74 6578 742e 6163 636f 756e  , context.accoun
-00019710: 745f 6964 2c20 636f 6e74 6578 742e 7265  t_id, context.re
-00019720: 6769 6f6e 297d 222c 0a20 2020 2020 2020  gion)}",.       
-00019730: 2020 2020 2020 2020 2020 2020 2054 7970               Typ
-00019740: 653d 2255 7365 7222 2c0a 2020 2020 2020  e="User",.      
-00019750: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
-00019760: 2020 2020 2072 6574 7572 6e20 666e 2e70       return fn.p
-00019770: 726f 7669 7369 6f6e 6564 5f63 6f6e 6375  rovisioned_concu
-00019780: 7272 656e 6379 5f63 6f6e 6669 6773 2e67  rrency_configs.g
-00019790: 6574 2871 7561 6c69 6669 6572 290a 0a20  et(qualifier).. 
-000197a0: 2020 2064 6566 2070 7574 5f70 726f 7669     def put_provi
-000197b0: 7369 6f6e 6564 5f63 6f6e 6375 7272 656e  sioned_concurren
-000197c0: 6379 5f63 6f6e 6669 6728 0a20 2020 2020  cy_config(.     
-000197d0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-000197e0: 2063 6f6e 7465 7874 3a20 5265 7175 6573   context: Reques
-000197f0: 7443 6f6e 7465 7874 2c0a 2020 2020 2020  tContext,.      
-00019800: 2020 6675 6e63 7469 6f6e 5f6e 616d 653a    function_name:
-00019810: 2046 756e 6374 696f 6e4e 616d 652c 0a20   FunctionName,. 
-00019820: 2020 2020 2020 2071 7561 6c69 6669 6572         qualifier
-00019830: 3a20 5175 616c 6966 6965 722c 0a20 2020  : Qualifier,.   
-00019840: 2020 2020 2070 726f 7669 7369 6f6e 6564       provisioned
-00019850: 5f63 6f6e 6375 7272 656e 745f 6578 6563  _concurrent_exec
-00019860: 7574 696f 6e73 3a20 506f 7369 7469 7665  utions: Positive
-00019870: 496e 7465 6765 722c 0a20 2020 2029 202d  Integer,.    ) -
-00019880: 3e20 5075 7450 726f 7669 7369 6f6e 6564  > PutProvisioned
-00019890: 436f 6e63 7572 7265 6e63 7943 6f6e 6669  ConcurrencyConfi
-000198a0: 6752 6573 706f 6e73 653a 0a20 2020 2020  gResponse:.     
-000198b0: 2020 2069 6620 7072 6f76 6973 696f 6e65     if provisione
-000198c0: 645f 636f 6e63 7572 7265 6e74 5f65 7865  d_concurrent_exe
-000198d0: 6375 7469 6f6e 7320 3c3d 2030 3a0a 2020  cutions <= 0:.  
-000198e0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-000198f0: 5661 6c69 6461 7469 6f6e 4578 6365 7074  ValidationExcept
-00019900: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
-00019910: 2020 2020 2066 2231 2076 616c 6964 6174       f"1 validat
-00019920: 696f 6e20 6572 726f 7220 6465 7465 6374  ion error detect
-00019930: 6564 3a20 5661 6c75 6520 277b 7072 6f76  ed: Value '{prov
-00019940: 6973 696f 6e65 645f 636f 6e63 7572 7265  isioned_concurre
-00019950: 6e74 5f65 7865 6375 7469 6f6e 737d 2720  nt_executions}' 
-00019960: 6174 2027 7072 6f76 6973 696f 6e65 6443  at 'provisionedC
-00019970: 6f6e 6375 7272 656e 7445 7865 6375 7469  oncurrentExecuti
-00019980: 6f6e 7327 2066 6169 6c65 6420 746f 2073  ons' failed to s
-00019990: 6174 6973 6679 2063 6f6e 7374 7261 696e  atisfy constrain
-000199a0: 743a 204d 656d 6265 7220 6d75 7374 2068  t: Member must h
-000199b0: 6176 6520 7661 6c75 6520 6772 6561 7465  ave value greate
-000199c0: 7220 7468 616e 206f 7220 6571 7561 6c20  r than or equal 
-000199d0: 746f 2031 220a 2020 2020 2020 2020 2020  to 1".          
-000199e0: 2020 290a 0a20 2020 2020 2020 2069 6620    )..        if 
-000199f0: 7175 616c 6966 6965 7220 3d3d 2022 244c  qualifier == "$L
-00019a00: 4154 4553 5422 3a0a 2020 2020 2020 2020  ATEST":.        
-00019a10: 2020 2020 7261 6973 6520 496e 7661 6c69      raise Invali
-00019a20: 6450 6172 616d 6574 6572 5661 6c75 6545  dParameterValueE
-00019a30: 7863 6570 7469 6f6e 280a 2020 2020 2020  xception(.      
-00019a40: 2020 2020 2020 2020 2020 2250 726f 7669            "Provi
-00019a50: 7369 6f6e 6564 2043 6f6e 6375 7272 656e  sioned Concurren
-00019a60: 6379 2043 6f6e 6669 6773 2063 616e 6e6f  cy Configs canno
-00019a70: 7420 6265 2061 7070 6c69 6564 2074 6f20  t be applied to 
-00019a80: 756e 7075 626c 6973 6865 6420 6675 6e63  unpublished func
-00019a90: 7469 6f6e 2076 6572 7369 6f6e 732e 222c  tion versions.",
-00019aa0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00019ab0: 2054 7970 653d 2255 7365 7222 2c0a 2020   Type="User",.  
-00019ac0: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
-00019ad0: 2020 2020 2066 756e 6374 696f 6e5f 6e61       function_na
-00019ae0: 6d65 2c20 7175 616c 6966 6965 7220 3d20  me, qualifier = 
-00019af0: 6170 695f 7574 696c 732e 6765 745f 6e61  api_utils.get_na
-00019b00: 6d65 5f61 6e64 5f71 7561 6c69 6669 6572  me_and_qualifier
-00019b10: 280a 2020 2020 2020 2020 2020 2020 6675  (.            fu
-00019b20: 6e63 7469 6f6e 5f6e 616d 652c 2071 7561  nction_name, qua
-00019b30: 6c69 6669 6572 2c20 636f 6e74 6578 742e  lifier, context.
-00019b40: 7265 6769 6f6e 0a20 2020 2020 2020 2029  region.        )
-00019b50: 0a20 2020 2020 2020 2073 7461 7465 203d  .        state =
-00019b60: 206c 616d 6264 615f 7374 6f72 6573 5b63   lambda_stores[c
-00019b70: 6f6e 7465 7874 2e61 6363 6f75 6e74 5f69  ontext.account_i
-00019b80: 645d 5b63 6f6e 7465 7874 2e72 6567 696f  d][context.regio
-00019b90: 6e5d 0a20 2020 2020 2020 2066 6e20 3d20  n].        fn = 
-00019ba0: 7374 6174 652e 6675 6e63 7469 6f6e 732e  state.functions.
-00019bb0: 6765 7428 6675 6e63 7469 6f6e 5f6e 616d  get(function_nam
-00019bc0: 6529 0a0a 2020 2020 2020 2020 7072 6f76  e)..        prov
-00019bd0: 6973 696f 6e65 645f 636f 6e66 6967 203d  isioned_config =
-00019be0: 2073 656c 662e 5f67 6574 5f70 726f 7669   self._get_provi
-00019bf0: 7369 6f6e 6564 5f63 6f6e 6669 6728 636f  sioned_config(co
-00019c00: 6e74 6578 742c 2066 756e 6374 696f 6e5f  ntext, function_
-00019c10: 6e61 6d65 2c20 7175 616c 6966 6965 7229  name, qualifier)
-00019c20: 0a0a 2020 2020 2020 2020 6966 2070 726f  ..        if pro
-00019c30: 7669 7369 6f6e 6564 5f63 6f6e 6669 673a  visioned_config:
-00019c40: 2020 2320 544f 444f 3a20 6d65 7267 653f    # TODO: merge?
-00019c50: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
-00019c60: 4f44 4f3a 2061 6464 2061 2074 6573 7420  ODO: add a test 
-00019c70: 666f 7220 7061 7274 6961 6c20 7570 6461  for partial upda
-00019c80: 7465 7320 2869 6620 706f 7373 6962 6c65  tes (if possible
-00019c90: 290a 2020 2020 2020 2020 2020 2020 4c4f  ).            LO
-00019ca0: 472e 7761 726e 696e 6728 0a20 2020 2020  G.warning(.     
-00019cb0: 2020 2020 2020 2020 2020 2022 5061 7274             "Part
-00019cc0: 6961 6c20 7570 6461 7465 206f 6620 7072  ial update of pr
-00019cd0: 6f76 6973 696f 6e65 6420 636f 6e63 7572  ovisioned concur
-00019ce0: 7265 6e63 7920 636f 6e66 6967 2069 7320  rency config is 
-00019cf0: 6375 7272 656e 746c 7920 6e6f 7420 7375  currently not su
-00019d00: 7070 6f72 7465 642e 220a 2020 2020 2020  pported.".      
-00019d10: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
-00019d20: 206f 7468 6572 5f70 726f 7669 7369 6f6e   other_provision
-00019d30: 6564 5f73 756d 203d 2073 756d 280a 2020  ed_sum = sum(.  
-00019d40: 2020 2020 2020 2020 2020 5b0a 2020 2020            [.    
-00019d50: 2020 2020 2020 2020 2020 2020 7072 6f76              prov
-00019d60: 6973 696f 6e65 645f 636f 6e66 6967 732e  isioned_configs.
-00019d70: 7072 6f76 6973 696f 6e65 645f 636f 6e63  provisioned_conc
-00019d80: 7572 7265 6e74 5f65 7865 6375 7469 6f6e  urrent_execution
-00019d90: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
-00019da0: 2020 666f 7220 7072 6f76 6973 696f 6e65    for provisione
-00019db0: 645f 7175 616c 6966 6965 722c 2070 726f  d_qualifier, pro
-00019dc0: 7669 7369 6f6e 6564 5f63 6f6e 6669 6773  visioned_configs
-00019dd0: 2069 6e20 666e 2e70 726f 7669 7369 6f6e   in fn.provision
-00019de0: 6564 5f63 6f6e 6375 7272 656e 6379 5f63  ed_concurrency_c
-00019df0: 6f6e 6669 6773 2e69 7465 6d73 2829 0a20  onfigs.items(). 
-00019e00: 2020 2020 2020 2020 2020 2020 2020 2069                 i
-00019e10: 6620 7072 6f76 6973 696f 6e65 645f 7175  f provisioned_qu
-00019e20: 616c 6966 6965 7220 213d 2071 7561 6c69  alifier != quali
-00019e30: 6669 6572 0a20 2020 2020 2020 2020 2020  fier.           
-00019e40: 205d 0a20 2020 2020 2020 2029 0a0a 2020   ].        )..  
-00019e50: 2020 2020 2020 6966 2028 0a20 2020 2020        if (.     
-00019e60: 2020 2020 2020 2066 6e2e 7265 7365 7276         fn.reserv
-00019e70: 6564 5f63 6f6e 6375 7272 656e 745f 6578  ed_concurrent_ex
-00019e80: 6563 7574 696f 6e73 2069 7320 6e6f 7420  ecutions is not 
-00019e90: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
-00019ea0: 2061 6e64 2066 6e2e 7265 7365 7276 6564   and fn.reserved
-00019eb0: 5f63 6f6e 6375 7272 656e 745f 6578 6563  _concurrent_exec
-00019ec0: 7574 696f 6e73 0a20 2020 2020 2020 2020  utions.         
-00019ed0: 2020 203c 206f 7468 6572 5f70 726f 7669     < other_provi
-00019ee0: 7369 6f6e 6564 5f73 756d 202b 2070 726f  sioned_sum + pro
-00019ef0: 7669 7369 6f6e 6564 5f63 6f6e 6375 7272  visioned_concurr
-00019f00: 656e 745f 6578 6563 7574 696f 6e73 0a20  ent_executions. 
-00019f10: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
-00019f20: 2020 2020 2020 7261 6973 6520 496e 7661        raise Inva
-00019f30: 6c69 6450 6172 616d 6574 6572 5661 6c75  lidParameterValu
-00019f40: 6545 7863 6570 7469 6f6e 280a 2020 2020  eException(.    
-00019f50: 2020 2020 2020 2020 2020 2020 2252 6571              "Req
-00019f60: 7565 7374 6564 2050 726f 7669 7369 6f6e  uested Provision
-00019f70: 6564 2043 6f6e 6375 7272 656e 6379 2073  ed Concurrency s
-00019f80: 686f 756c 6420 6e6f 7420 6265 2067 7265  hould not be gre
-00019f90: 6174 6572 2074 6861 6e20 7468 6520 7265  ater than the re
-00019fa0: 7365 7276 6564 436f 6e63 7572 7265 6e74  servedConcurrent
-00019fb0: 4578 6563 7574 696f 6e20 666f 7220 6675  Execution for fu
-00019fc0: 6e63 7469 6f6e 222c 0a20 2020 2020 2020  nction",.       
-00019fd0: 2020 2020 2020 2020 2054 7970 653d 2255           Type="U
-00019fe0: 7365 7222 2c0a 2020 2020 2020 2020 2020  ser",.          
-00019ff0: 2020 290a 0a20 2020 2020 2020 2070 726f    )..        pro
-0001a000: 7669 7369 6f6e 6564 5f63 6f6e 6669 6720  visioned_config 
-0001a010: 3d20 5072 6f76 6973 696f 6e65 6443 6f6e  = ProvisionedCon
-0001a020: 6375 7272 656e 6379 436f 6e66 6967 7572  currencyConfigur
-0001a030: 6174 696f 6e28 0a20 2020 2020 2020 2020  ation(.         
-0001a040: 2020 2070 726f 7669 7369 6f6e 6564 5f63     provisioned_c
-0001a050: 6f6e 6375 7272 656e 745f 6578 6563 7574  oncurrent_execut
-0001a060: 696f 6e73 2c20 6170 695f 7574 696c 732e  ions, api_utils.
-0001a070: 6765 6e65 7261 7465 5f6c 616d 6264 615f  generate_lambda_
-0001a080: 6461 7465 2829 0a20 2020 2020 2020 2029  date().        )
-0001a090: 0a20 2020 2020 2020 2066 6e5f 6172 6e20  .        fn_arn 
-0001a0a0: 3d20 6170 695f 7574 696c 732e 7175 616c  = api_utils.qual
-0001a0b0: 6966 6965 645f 6c61 6d62 6461 5f61 726e  ified_lambda_arn
-0001a0c0: 280a 2020 2020 2020 2020 2020 2020 6675  (.            fu
-0001a0d0: 6e63 7469 6f6e 5f6e 616d 652c 2071 7561  nction_name, qua
-0001a0e0: 6c69 6669 6572 2c20 636f 6e74 6578 742e  lifier, context.
-0001a0f0: 6163 636f 756e 745f 6964 2c20 636f 6e74  account_id, cont
-0001a100: 6578 742e 7265 6769 6f6e 0a20 2020 2020  ext.region.     
-0001a110: 2020 2029 0a0a 2020 2020 2020 2020 6966     )..        if
-0001a120: 2061 7069 5f75 7469 6c73 2e71 7561 6c69   api_utils.quali
-0001a130: 6669 6572 5f69 735f 616c 6961 7328 7175  fier_is_alias(qu
-0001a140: 616c 6966 6965 7229 3a0a 2020 2020 2020  alifier):.      
-0001a150: 2020 2020 2020 616c 6961 7320 3d20 666e        alias = fn
-0001a160: 2e61 6c69 6173 6573 2e67 6574 2871 7561  .aliases.get(qua
-0001a170: 6c69 6669 6572 290a 2020 2020 2020 2020  lifier).        
-0001a180: 2020 2020 7265 736f 6c76 6564 5f76 6572      resolved_ver
-0001a190: 7369 6f6e 203d 2066 6e2e 7665 7273 696f  sion = fn.versio
-0001a1a0: 6e73 2e67 6574 2861 6c69 6173 2e66 756e  ns.get(alias.fun
-0001a1b0: 6374 696f 6e5f 7665 7273 696f 6e29 0a0a  ction_version)..
-0001a1c0: 2020 2020 2020 2020 2020 2020 6966 2028              if (
-0001a1d0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a1e0: 2072 6573 6f6c 7665 645f 7665 7273 696f   resolved_versio
-0001a1f0: 6e0a 2020 2020 2020 2020 2020 2020 2020  n.              
-0001a200: 2020 616e 6420 666e 2e70 726f 7669 7369    and fn.provisi
-0001a210: 6f6e 6564 5f63 6f6e 6375 7272 656e 6379  oned_concurrency
-0001a220: 5f63 6f6e 6669 6773 2e67 6574 2861 6c69  _configs.get(ali
-0001a230: 6173 2e66 756e 6374 696f 6e5f 7665 7273  as.function_vers
-0001a240: 696f 6e29 2069 7320 6e6f 7420 4e6f 6e65  ion) is not None
-0001a250: 0a20 2020 2020 2020 2020 2020 2029 3a0a  .            ):.
-0001a260: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a270: 7261 6973 6520 5265 736f 7572 6365 436f  raise ResourceCo
-0001a280: 6e66 6c69 6374 4578 6365 7074 696f 6e28  nflictException(
-0001a290: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001a2a0: 2020 2020 2022 416c 6961 7320 6361 6e27       "Alias can'
-0001a2b0: 7420 6265 2075 7365 6420 666f 7220 5072  t be used for Pr
-0001a2c0: 6f76 6973 696f 6e65 6420 436f 6e63 7572  ovisioned Concur
-0001a2d0: 7265 6e63 7920 636f 6e66 6967 7572 6174  rency configurat
-0001a2e0: 696f 6e20 6f6e 2061 6e20 616c 7265 6164  ion on an alread
-0001a2f0: 7920 5072 6f76 6973 696f 6e65 6420 7665  y Provisioned ve
-0001a300: 7273 696f 6e22 2c0a 2020 2020 2020 2020  rsion",.        
-0001a310: 2020 2020 2020 2020 2020 2020 5479 7065              Type
-0001a320: 3d22 5573 6572 222c 0a20 2020 2020 2020  ="User",.       
-0001a330: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0001a340: 2020 2020 2020 2066 6e5f 6172 6e20 3d20         fn_arn = 
-0001a350: 7265 736f 6c76 6564 5f76 6572 7369 6f6e  resolved_version
-0001a360: 2e69 642e 7175 616c 6966 6965 645f 6172  .id.qualified_ar
-0001a370: 6e28 290a 2020 2020 2020 2020 656c 6966  n().        elif
-0001a380: 2061 7069 5f75 7469 6c73 2e71 7561 6c69   api_utils.quali
-0001a390: 6669 6572 5f69 735f 7665 7273 696f 6e28  fier_is_version(
-0001a3a0: 7175 616c 6966 6965 7229 3a0a 2020 2020  qualifier):.    
-0001a3b0: 2020 2020 2020 2020 666e 5f76 6572 7369          fn_versi
-0001a3c0: 6f6e 203d 2066 6e2e 7665 7273 696f 6e73  on = fn.versions
-0001a3d0: 2e67 6574 2871 7561 6c69 6669 6572 290a  .get(qualifier).
-0001a3e0: 0a20 2020 2020 2020 2020 2020 2023 2054  .            # T
-0001a3f0: 4f44 4f3a 206d 6967 6874 2062 6520 7573  ODO: might be us
-0001a400: 6566 756c 206f 7468 6572 2070 6c61 6365  eful other place
-0001a410: 732c 2075 7469 6c69 7a65 0a20 2020 2020  s, utilize.     
-0001a420: 2020 2020 2020 2070 6f69 6e74 696e 675f         pointing_
-0001a430: 616c 6961 7365 7320 3d20 5b5d 0a20 2020  aliases = [].   
-0001a440: 2020 2020 2020 2020 2066 6f72 2061 6c69           for ali
-0001a450: 6173 2069 6e20 666e 2e61 6c69 6173 6573  as in fn.aliases
-0001a460: 2e76 616c 7565 7328 293a 0a20 2020 2020  .values():.     
-0001a470: 2020 2020 2020 2020 2020 2069 6620 280a             if (.
-0001a480: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a490: 2020 2020 616c 6961 732e 6675 6e63 7469      alias.functi
-0001a4a0: 6f6e 5f76 6572 7369 6f6e 203d 3d20 7175  on_version == qu
-0001a4b0: 616c 6966 6965 720a 2020 2020 2020 2020  alifier.        
-0001a4c0: 2020 2020 2020 2020 2020 2020 616e 6420              and 
-0001a4d0: 666e 2e70 726f 7669 7369 6f6e 6564 5f63  fn.provisioned_c
-0001a4e0: 6f6e 6375 7272 656e 6379 5f63 6f6e 6669  oncurrency_confi
-0001a4f0: 6773 2e67 6574 2861 6c69 6173 2e6e 616d  gs.get(alias.nam
-0001a500: 6529 2069 7320 6e6f 7420 4e6f 6e65 0a20  e) is not None. 
-0001a510: 2020 2020 2020 2020 2020 2020 2020 2029                 )
-0001a520: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001a530: 2020 2020 2020 706f 696e 7469 6e67 5f61        pointing_a
-0001a540: 6c69 6173 6573 2e61 7070 656e 6428 616c  liases.append(al
-0001a550: 6961 732e 6e61 6d65 290a 2020 2020 2020  ias.name).      
-0001a560: 2020 2020 2020 6966 2070 6f69 6e74 696e        if pointin
-0001a570: 675f 616c 6961 7365 733a 0a20 2020 2020  g_aliases:.     
-0001a580: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0001a590: 2052 6573 6f75 7263 6543 6f6e 666c 6963   ResourceConflic
-0001a5a0: 7445 7863 6570 7469 6f6e 280a 2020 2020  tException(.    
-0001a5b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001a5c0: 2256 6572 7369 6f6e 2069 7320 706f 696e  "Version is poin
-0001a5d0: 7465 6420 6279 2061 2050 726f 7669 7369  ted by a Provisi
-0001a5e0: 6f6e 6564 2043 6f6e 6375 7272 656e 6379  oned Concurrency
-0001a5f0: 2061 6c69 6173 222c 2054 7970 653d 2255   alias", Type="U
-0001a600: 7365 7222 0a20 2020 2020 2020 2020 2020  ser".           
-0001a610: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-0001a620: 2020 2020 666e 5f61 726e 203d 2066 6e5f      fn_arn = fn_
-0001a630: 7665 7273 696f 6e2e 6964 2e71 7561 6c69  version.id.quali
-0001a640: 6669 6564 5f61 726e 2829 0a0a 2020 2020  fied_arn()..    
-0001a650: 2020 2020 6d61 6e61 6765 7220 3d20 7365      manager = se
-0001a660: 6c66 2e6c 616d 6264 615f 7365 7276 6963  lf.lambda_servic
-0001a670: 652e 6765 745f 6c61 6d62 6461 5f76 6572  e.get_lambda_ver
-0001a680: 7369 6f6e 5f6d 616e 6167 6572 2866 6e5f  sion_manager(fn_
-0001a690: 6172 6e29 0a0a 2020 2020 2020 2020 666e  arn)..        fn
-0001a6a0: 2e70 726f 7669 7369 6f6e 6564 5f63 6f6e  .provisioned_con
-0001a6b0: 6375 7272 656e 6379 5f63 6f6e 6669 6773  currency_configs
-0001a6c0: 5b71 7561 6c69 6669 6572 5d20 3d20 7072  [qualifier] = pr
-0001a6d0: 6f76 6973 696f 6e65 645f 636f 6e66 6967  ovisioned_config
-0001a6e0: 0a0a 2020 2020 2020 2020 6d61 6e61 6765  ..        manage
-0001a6f0: 722e 7570 6461 7465 5f70 726f 7669 7369  r.update_provisi
-0001a700: 6f6e 6564 5f63 6f6e 6375 7272 656e 6379  oned_concurrency
-0001a710: 5f63 6f6e 6669 6728 0a20 2020 2020 2020  _config(.       
-0001a720: 2020 2020 2070 726f 7669 7369 6f6e 6564       provisioned
-0001a730: 5f63 6f6e 6669 672e 7072 6f76 6973 696f  _config.provisio
-0001a740: 6e65 645f 636f 6e63 7572 7265 6e74 5f65  ned_concurrent_e
-0001a750: 7865 6375 7469 6f6e 730a 2020 2020 2020  xecutions.      
-0001a760: 2020 290a 0a20 2020 2020 2020 2072 6574    )..        ret
-0001a770: 7572 6e20 5075 7450 726f 7669 7369 6f6e  urn PutProvision
-0001a780: 6564 436f 6e63 7572 7265 6e63 7943 6f6e  edConcurrencyCon
-0001a790: 6669 6752 6573 706f 6e73 6528 0a20 2020  figResponse(.   
-0001a7a0: 2020 2020 2020 2020 2052 6571 7565 7374           Request
-0001a7b0: 6564 5072 6f76 6973 696f 6e65 6443 6f6e  edProvisionedCon
-0001a7c0: 6375 7272 656e 7445 7865 6375 7469 6f6e  currentExecution
-0001a7d0: 733d 7072 6f76 6973 696f 6e65 645f 636f  s=provisioned_co
-0001a7e0: 6e66 6967 2e70 726f 7669 7369 6f6e 6564  nfig.provisioned
-0001a7f0: 5f63 6f6e 6375 7272 656e 745f 6578 6563  _concurrent_exec
-0001a800: 7574 696f 6e73 2c0a 2020 2020 2020 2020  utions,.        
-0001a810: 2020 2020 4176 6169 6c61 626c 6550 726f      AvailablePro
-0001a820: 7669 7369 6f6e 6564 436f 6e63 7572 7265  visionedConcurre
-0001a830: 6e74 4578 6563 7574 696f 6e73 3d30 2c0a  ntExecutions=0,.
-0001a840: 2020 2020 2020 2020 2020 2020 416c 6c6f              Allo
-0001a850: 6361 7465 6450 726f 7669 7369 6f6e 6564  catedProvisioned
-0001a860: 436f 6e63 7572 7265 6e74 4578 6563 7574  ConcurrentExecut
-0001a870: 696f 6e73 3d30 2c0a 2020 2020 2020 2020  ions=0,.        
-0001a880: 2020 2020 5374 6174 7573 3d50 726f 7669      Status=Provi
-0001a890: 7369 6f6e 6564 436f 6e63 7572 7265 6e63  sionedConcurrenc
-0001a8a0: 7953 7461 7475 7345 6e75 6d2e 494e 5f50  yStatusEnum.IN_P
-0001a8b0: 524f 4752 4553 532c 0a20 2020 2020 2020  ROGRESS,.       
-0001a8c0: 2020 2020 2023 2053 7461 7475 7352 6561       # StatusRea
-0001a8d0: 736f 6e3d 6d61 6e61 6765 722e 7072 6f76  son=manager.prov
-0001a8e0: 6973 696f 6e65 645f 7374 6174 652e 7374  isioned_state.st
-0001a8f0: 6174 7573 5f72 6561 736f 6e2c 0a20 2020  atus_reason,.   
-0001a900: 2020 2020 2020 2020 204c 6173 744d 6f64           LastMod
-0001a910: 6966 6965 643d 7072 6f76 6973 696f 6e65  ified=provisione
-0001a920: 645f 636f 6e66 6967 2e6c 6173 745f 6d6f  d_config.last_mo
-0001a930: 6469 6669 6564 2c20 2023 2054 4f44 4f3a  dified,  # TODO:
-0001a940: 2064 6f65 7320 6368 616e 6765 2077 6974   does change wit
-0001a950: 6820 636f 6e66 6967 7572 6174 696f 6e20  h configuration 
-0001a960: 6f72 2061 6c73 6f20 7769 7468 2073 7461  or also with sta
-0001a970: 7465 2063 6861 6e67 6573 3f0a 2020 2020  te changes?.    
-0001a980: 2020 2020 290a 0a20 2020 2064 6566 2067      )..    def g
-0001a990: 6574 5f70 726f 7669 7369 6f6e 6564 5f63  et_provisioned_c
-0001a9a0: 6f6e 6375 7272 656e 6379 5f63 6f6e 6669  oncurrency_confi
-0001a9b0: 6728 0a20 2020 2020 2020 2073 656c 662c  g(.        self,
-0001a9c0: 2063 6f6e 7465 7874 3a20 5265 7175 6573   context: Reques
-0001a9d0: 7443 6f6e 7465 7874 2c20 6675 6e63 7469  tContext, functi
-0001a9e0: 6f6e 5f6e 616d 653a 2046 756e 6374 696f  on_name: Functio
-0001a9f0: 6e4e 616d 652c 2071 7561 6c69 6669 6572  nName, qualifier
-0001aa00: 3a20 5175 616c 6966 6965 720a 2020 2020  : Qualifier.    
-0001aa10: 2920 2d3e 2047 6574 5072 6f76 6973 696f  ) -> GetProvisio
-0001aa20: 6e65 6443 6f6e 6375 7272 656e 6379 436f  nedConcurrencyCo
-0001aa30: 6e66 6967 5265 7370 6f6e 7365 3a0a 2020  nfigResponse:.  
-0001aa40: 2020 2020 2020 6966 2071 7561 6c69 6669        if qualifi
-0001aa50: 6572 203d 3d20 2224 4c41 5445 5354 223a  er == "$LATEST":
-0001aa60: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-0001aa70: 7365 2049 6e76 616c 6964 5061 7261 6d65  se InvalidParame
-0001aa80: 7465 7256 616c 7565 4578 6365 7074 696f  terValueExceptio
-0001aa90: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
-0001aaa0: 2020 2022 5468 6520 6675 6e63 7469 6f6e     "The function
-0001aab0: 2072 6573 6f75 7263 6520 7072 6f76 6964   resource provid
-0001aac0: 6564 206d 7573 7420 6265 2061 6e20 616c  ed must be an al
-0001aad0: 6961 7320 6f72 2061 2070 7562 6c69 7368  ias or a publish
-0001aae0: 6564 2076 6572 7369 6f6e 2e22 2c0a 2020  ed version.",.  
-0001aaf0: 2020 2020 2020 2020 2020 2020 2020 5479                Ty
-0001ab00: 7065 3d22 5573 6572 222c 0a20 2020 2020  pe="User",.     
-0001ab10: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0001ab20: 2066 756e 6374 696f 6e5f 6e61 6d65 2c20   function_name, 
-0001ab30: 7175 616c 6966 6965 7220 3d20 6170 695f  qualifier = api_
-0001ab40: 7574 696c 732e 6765 745f 6e61 6d65 5f61  utils.get_name_a
-0001ab50: 6e64 5f71 7561 6c69 6669 6572 280a 2020  nd_qualifier(.  
-0001ab60: 2020 2020 2020 2020 2020 6675 6e63 7469            functi
-0001ab70: 6f6e 5f6e 616d 652c 2071 7561 6c69 6669  on_name, qualifi
-0001ab80: 6572 2c20 636f 6e74 6578 742e 7265 6769  er, context.regi
-0001ab90: 6f6e 0a20 2020 2020 2020 2029 0a0a 2020  on.        )..  
-0001aba0: 2020 2020 2020 7072 6f76 6973 696f 6e65        provisione
-0001abb0: 645f 636f 6e66 6967 203d 2073 656c 662e  d_config = self.
-0001abc0: 5f67 6574 5f70 726f 7669 7369 6f6e 6564  _get_provisioned
-0001abd0: 5f63 6f6e 6669 6728 636f 6e74 6578 742c  _config(context,
-0001abe0: 2066 756e 6374 696f 6e5f 6e61 6d65 2c20   function_name, 
-0001abf0: 7175 616c 6966 6965 7229 0a20 2020 2020  qualifier).     
-0001ac00: 2020 2069 6620 6e6f 7420 7072 6f76 6973     if not provis
-0001ac10: 696f 6e65 645f 636f 6e66 6967 3a0a 2020  ioned_config:.  
-0001ac20: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-0001ac30: 5072 6f76 6973 696f 6e65 6443 6f6e 6375  ProvisionedConcu
-0001ac40: 7272 656e 6379 436f 6e66 6967 4e6f 7446  rrencyConfigNotF
-0001ac50: 6f75 6e64 4578 6365 7074 696f 6e28 0a20  oundException(. 
-0001ac60: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001ac70: 4e6f 2050 726f 7669 7369 6f6e 6564 2043  No Provisioned C
-0001ac80: 6f6e 6375 7272 656e 6379 2043 6f6e 6669  oncurrency Confi
-0001ac90: 6720 666f 756e 6420 666f 7220 7468 6973  g found for this
-0001aca0: 2066 756e 6374 696f 6e22 2c20 5479 7065   function", Type
-0001acb0: 3d22 5573 6572 220a 2020 2020 2020 2020  ="User".        
-0001acc0: 2020 2020 290a 0a20 2020 2020 2020 2023      )..        #
-0001acd0: 2054 4f44 4f3a 206d 616b 6520 7468 6973   TODO: make this
-0001ace0: 2063 6f6d 7061 7469 626c 6520 7769 7468   compatible with
-0001acf0: 2061 6c69 6173 2070 6f69 6e74 6572 206d   alias pointer m
-0001ad00: 6967 7261 7469 6f6e 206f 6e20 7570 6461  igration on upda
-0001ad10: 7465 0a20 2020 2020 2020 2069 6620 6170  te.        if ap
-0001ad20: 695f 7574 696c 732e 7175 616c 6966 6965  i_utils.qualifie
-0001ad30: 725f 6973 5f61 6c69 6173 2871 7561 6c69  r_is_alias(quali
-0001ad40: 6669 6572 293a 0a20 2020 2020 2020 2020  fier):.         
-0001ad50: 2020 2073 7461 7465 203d 206c 616d 6264     state = lambd
-0001ad60: 615f 7374 6f72 6573 5b63 6f6e 7465 7874  a_stores[context
-0001ad70: 2e61 6363 6f75 6e74 5f69 645d 5b63 6f6e  .account_id][con
-0001ad80: 7465 7874 2e72 6567 696f 6e5d 0a20 2020  text.region].   
-0001ad90: 2020 2020 2020 2020 2066 6e20 3d20 7374           fn = st
-0001ada0: 6174 652e 6675 6e63 7469 6f6e 732e 6765  ate.functions.ge
-0001adb0: 7428 6675 6e63 7469 6f6e 5f6e 616d 6529  t(function_name)
-0001adc0: 0a20 2020 2020 2020 2020 2020 2061 6c69  .            ali
-0001add0: 6173 203d 2066 6e2e 616c 6961 7365 732e  as = fn.aliases.
-0001ade0: 6765 7428 7175 616c 6966 6965 7229 0a20  get(qualifier). 
-0001adf0: 2020 2020 2020 2020 2020 2066 6e5f 6172             fn_ar
-0001ae00: 6e20 3d20 6170 695f 7574 696c 732e 7175  n = api_utils.qu
-0001ae10: 616c 6966 6965 645f 6c61 6d62 6461 5f61  alified_lambda_a
-0001ae20: 726e 280a 2020 2020 2020 2020 2020 2020  rn(.            
-0001ae30: 2020 2020 6675 6e63 7469 6f6e 5f6e 616d      function_nam
-0001ae40: 652c 2061 6c69 6173 2e66 756e 6374 696f  e, alias.functio
-0001ae50: 6e5f 7665 7273 696f 6e2c 2063 6f6e 7465  n_version, conte
-0001ae60: 7874 2e61 6363 6f75 6e74 5f69 642c 2063  xt.account_id, c
-0001ae70: 6f6e 7465 7874 2e72 6567 696f 6e0a 2020  ontext.region.  
-0001ae80: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-0001ae90: 2020 2020 656c 7365 3a0a 2020 2020 2020      else:.      
-0001aea0: 2020 2020 2020 666e 5f61 726e 203d 2061        fn_arn = a
-0001aeb0: 7069 5f75 7469 6c73 2e71 7561 6c69 6669  pi_utils.qualifi
-0001aec0: 6564 5f6c 616d 6264 615f 6172 6e28 0a20  ed_lambda_arn(. 
-0001aed0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001aee0: 756e 6374 696f 6e5f 6e61 6d65 2c20 7175  unction_name, qu
-0001aef0: 616c 6966 6965 722c 2063 6f6e 7465 7874  alifier, context
-0001af00: 2e61 6363 6f75 6e74 5f69 642c 2063 6f6e  .account_id, con
-0001af10: 7465 7874 2e72 6567 696f 6e0a 2020 2020  text.region.    
-0001af20: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-0001af30: 2020 2076 6572 5f6d 616e 6167 6572 203d     ver_manager =
-0001af40: 2073 656c 662e 6c61 6d62 6461 5f73 6572   self.lambda_ser
-0001af50: 7669 6365 2e67 6574 5f6c 616d 6264 615f  vice.get_lambda_
-0001af60: 7665 7273 696f 6e5f 6d61 6e61 6765 7228  version_manager(
-0001af70: 666e 5f61 726e 290a 0a20 2020 2020 2020  fn_arn)..       
-0001af80: 2072 6574 7572 6e20 4765 7450 726f 7669   return GetProvi
-0001af90: 7369 6f6e 6564 436f 6e63 7572 7265 6e63  sionedConcurrenc
-0001afa0: 7943 6f6e 6669 6752 6573 706f 6e73 6528  yConfigResponse(
-0001afb0: 0a20 2020 2020 2020 2020 2020 2052 6571  .            Req
-0001afc0: 7565 7374 6564 5072 6f76 6973 696f 6e65  uestedProvisione
-0001afd0: 6443 6f6e 6375 7272 656e 7445 7865 6375  dConcurrentExecu
-0001afe0: 7469 6f6e 733d 7072 6f76 6973 696f 6e65  tions=provisione
-0001aff0: 645f 636f 6e66 6967 2e70 726f 7669 7369  d_config.provisi
-0001b000: 6f6e 6564 5f63 6f6e 6375 7272 656e 745f  oned_concurrent_
-0001b010: 6578 6563 7574 696f 6e73 2c0a 2020 2020  executions,.    
-0001b020: 2020 2020 2020 2020 4c61 7374 4d6f 6469          LastModi
-0001b030: 6669 6564 3d70 726f 7669 7369 6f6e 6564  fied=provisioned
-0001b040: 5f63 6f6e 6669 672e 6c61 7374 5f6d 6f64  _config.last_mod
-0001b050: 6966 6965 642c 0a20 2020 2020 2020 2020  ified,.         
-0001b060: 2020 2041 7661 696c 6162 6c65 5072 6f76     AvailableProv
-0001b070: 6973 696f 6e65 6443 6f6e 6375 7272 656e  isionedConcurren
-0001b080: 7445 7865 6375 7469 6f6e 733d 7665 725f  tExecutions=ver_
-0001b090: 6d61 6e61 6765 722e 7072 6f76 6973 696f  manager.provisio
-0001b0a0: 6e65 645f 7374 6174 652e 6176 6169 6c61  ned_state.availa
-0001b0b0: 626c 652c 0a20 2020 2020 2020 2020 2020  ble,.           
-0001b0c0: 2041 6c6c 6f63 6174 6564 5072 6f76 6973   AllocatedProvis
-0001b0d0: 696f 6e65 6443 6f6e 6375 7272 656e 7445  ionedConcurrentE
-0001b0e0: 7865 6375 7469 6f6e 733d 7665 725f 6d61  xecutions=ver_ma
-0001b0f0: 6e61 6765 722e 7072 6f76 6973 696f 6e65  nager.provisione
-0001b100: 645f 7374 6174 652e 616c 6c6f 6361 7465  d_state.allocate
-0001b110: 642c 0a20 2020 2020 2020 2020 2020 2053  d,.            S
-0001b120: 7461 7475 733d 7665 725f 6d61 6e61 6765  tatus=ver_manage
-0001b130: 722e 7072 6f76 6973 696f 6e65 645f 7374  r.provisioned_st
-0001b140: 6174 652e 7374 6174 7573 2c0a 2020 2020  ate.status,.    
-0001b150: 2020 2020 2020 2020 5374 6174 7573 5265          StatusRe
-0001b160: 6173 6f6e 3d76 6572 5f6d 616e 6167 6572  ason=ver_manager
-0001b170: 2e70 726f 7669 7369 6f6e 6564 5f73 7461  .provisioned_sta
-0001b180: 7465 2e73 7461 7475 735f 7265 6173 6f6e  te.status_reason
-0001b190: 2c0a 2020 2020 2020 2020 290a 0a20 2020  ,.        )..   
-0001b1a0: 2064 6566 206c 6973 745f 7072 6f76 6973   def list_provis
-0001b1b0: 696f 6e65 645f 636f 6e63 7572 7265 6e63  ioned_concurrenc
-0001b1c0: 795f 636f 6e66 6967 7328 0a20 2020 2020  y_configs(.     
-0001b1d0: 2020 2073 656c 662c 0a20 2020 2020 2020     self,.       
-0001b1e0: 2063 6f6e 7465 7874 3a20 5265 7175 6573   context: Reques
-0001b1f0: 7443 6f6e 7465 7874 2c0a 2020 2020 2020  tContext,.      
-0001b200: 2020 6675 6e63 7469 6f6e 5f6e 616d 653a    function_name:
-0001b210: 2046 756e 6374 696f 6e4e 616d 652c 0a20   FunctionName,. 
-0001b220: 2020 2020 2020 206d 6172 6b65 723a 2053         marker: S
-0001b230: 7472 696e 6720 3d20 4e6f 6e65 2c0a 2020  tring = None,.  
-0001b240: 2020 2020 2020 6d61 785f 6974 656d 733a        max_items:
-0001b250: 204d 6178 5072 6f76 6973 696f 6e65 6443   MaxProvisionedC
-0001b260: 6f6e 6375 7272 656e 6379 436f 6e66 6967  oncurrencyConfig
-0001b270: 4c69 7374 4974 656d 7320 3d20 4e6f 6e65  ListItems = None
-0001b280: 2c0a 2020 2020 2920 2d3e 204c 6973 7450  ,.    ) -> ListP
-0001b290: 726f 7669 7369 6f6e 6564 436f 6e63 7572  rovisionedConcur
-0001b2a0: 7265 6e63 7943 6f6e 6669 6773 5265 7370  rencyConfigsResp
-0001b2b0: 6f6e 7365 3a0a 2020 2020 2020 2020 7374  onse:.        st
-0001b2c0: 6174 6520 3d20 6c61 6d62 6461 5f73 746f  ate = lambda_sto
-0001b2d0: 7265 735b 636f 6e74 6578 742e 6163 636f  res[context.acco
-0001b2e0: 756e 745f 6964 5d5b 636f 6e74 6578 742e  unt_id][context.
-0001b2f0: 7265 6769 6f6e 5d0a 2020 2020 2020 2020  region].        
-0001b300: 666e 203d 2073 7461 7465 2e66 756e 6374  fn = state.funct
-0001b310: 696f 6e73 2e67 6574 2866 756e 6374 696f  ions.get(functio
-0001b320: 6e5f 6e61 6d65 290a 2020 2020 2020 2020  n_name).        
-0001b330: 6966 2066 6e20 6973 204e 6f6e 653a 0a20  if fn is None:. 
-0001b340: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0001b350: 2052 6573 6f75 7263 654e 6f74 466f 756e   ResourceNotFoun
-0001b360: 6445 7863 6570 7469 6f6e 280a 2020 2020  dException(.    
-0001b370: 2020 2020 2020 2020 2020 2020 6622 4675              f"Fu
-0001b380: 6e63 7469 6f6e 206e 6f74 2066 6f75 6e64  nction not found
-0001b390: 3a20 7b61 7069 5f75 7469 6c73 2e75 6e71  : {api_utils.unq
-0001b3a0: 7561 6c69 6669 6564 5f6c 616d 6264 615f  ualified_lambda_
-0001b3b0: 6172 6e28 6675 6e63 7469 6f6e 5f6e 616d  arn(function_nam
-0001b3c0: 652c 2063 6f6e 7465 7874 2e61 6363 6f75  e, context.accou
-0001b3d0: 6e74 5f69 642c 2063 6f6e 7465 7874 2e72  nt_id, context.r
-0001b3e0: 6567 696f 6e29 7d22 2c0a 2020 2020 2020  egion)}",.      
-0001b3f0: 2020 2020 2020 2020 2020 5479 7065 3d22            Type="
-0001b400: 5573 6572 222c 0a20 2020 2020 2020 2020  User",.         
-0001b410: 2020 2029 0a0a 2020 2020 2020 2020 636f     )..        co
-0001b420: 6e66 6967 7320 3d20 5b5d 0a20 2020 2020  nfigs = [].     
-0001b430: 2020 2066 6f72 2071 7561 6c69 6669 6572     for qualifier
-0001b440: 2c20 7063 5f63 6f6e 6669 6720 696e 2066  , pc_config in f
-0001b450: 6e2e 7072 6f76 6973 696f 6e65 645f 636f  n.provisioned_co
-0001b460: 6e63 7572 7265 6e63 795f 636f 6e66 6967  ncurrency_config
-0001b470: 732e 6974 656d 7328 293a 0a0a 2020 2020  s.items():..    
-0001b480: 2020 2020 2020 2020 6966 2061 7069 5f75          if api_u
-0001b490: 7469 6c73 2e71 7561 6c69 6669 6572 5f69  tils.qualifier_i
-0001b4a0: 735f 616c 6961 7328 7175 616c 6966 6965  s_alias(qualifie
-0001b4b0: 7229 3a0a 2020 2020 2020 2020 2020 2020  r):.            
-0001b4c0: 2020 2020 616c 6961 7320 3d20 666e 2e61      alias = fn.a
-0001b4d0: 6c69 6173 6573 2e67 6574 2871 7561 6c69  liases.get(quali
-0001b4e0: 6669 6572 290a 2020 2020 2020 2020 2020  fier).          
-0001b4f0: 2020 2020 2020 666e 5f61 726e 203d 2061        fn_arn = a
-0001b500: 7069 5f75 7469 6c73 2e71 7561 6c69 6669  pi_utils.qualifi
-0001b510: 6564 5f6c 616d 6264 615f 6172 6e28 0a20  ed_lambda_arn(. 
-0001b520: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b530: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
-0001b540: 2c20 616c 6961 732e 6675 6e63 7469 6f6e  , alias.function
-0001b550: 5f76 6572 7369 6f6e 2c20 636f 6e74 6578  _version, contex
-0001b560: 742e 6163 636f 756e 745f 6964 2c20 636f  t.account_id, co
-0001b570: 6e74 6578 742e 7265 6769 6f6e 0a20 2020  ntext.region.   
-0001b580: 2020 2020 2020 2020 2020 2020 2029 0a20               ). 
-0001b590: 2020 2020 2020 2020 2020 2065 6c73 653a             else:
-0001b5a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001b5b0: 2066 6e5f 6172 6e20 3d20 6170 695f 7574   fn_arn = api_ut
-0001b5c0: 696c 732e 7175 616c 6966 6965 645f 6c61  ils.qualified_la
-0001b5d0: 6d62 6461 5f61 726e 280a 2020 2020 2020  mbda_arn(.      
-0001b5e0: 2020 2020 2020 2020 2020 2020 2020 6675                fu
-0001b5f0: 6e63 7469 6f6e 5f6e 616d 652c 2071 7561  nction_name, qua
-0001b600: 6c69 6669 6572 2c20 636f 6e74 6578 742e  lifier, context.
-0001b610: 6163 636f 756e 745f 6964 2c20 636f 6e74  account_id, cont
-0001b620: 6578 742e 7265 6769 6f6e 0a20 2020 2020  ext.region.     
-0001b630: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-0001b640: 2020 2020 2020 2020 2020 6d61 6e61 6765            manage
-0001b650: 7220 3d20 7365 6c66 2e6c 616d 6264 615f  r = self.lambda_
-0001b660: 7365 7276 6963 652e 6765 745f 6c61 6d62  service.get_lamb
-0001b670: 6461 5f76 6572 7369 6f6e 5f6d 616e 6167  da_version_manag
-0001b680: 6572 2866 6e5f 6172 6e29 0a0a 2020 2020  er(fn_arn)..    
-0001b690: 2020 2020 2020 2020 636f 6e66 6967 732e          configs.
-0001b6a0: 6170 7065 6e64 280a 2020 2020 2020 2020  append(.        
-0001b6b0: 2020 2020 2020 2020 5072 6f76 6973 696f          Provisio
-0001b6c0: 6e65 6443 6f6e 6375 7272 656e 6379 436f  nedConcurrencyCo
-0001b6d0: 6e66 6967 4c69 7374 4974 656d 280a 2020  nfigListItem(.  
-0001b6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b6f0: 2020 4675 6e63 7469 6f6e 4172 6e3d 6170    FunctionArn=ap
-0001b700: 695f 7574 696c 732e 7175 616c 6966 6965  i_utils.qualifie
-0001b710: 645f 6c61 6d62 6461 5f61 726e 280a 2020  d_lambda_arn(.  
-0001b720: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b730: 2020 2020 2020 6675 6e63 7469 6f6e 5f6e        function_n
-0001b740: 616d 652c 2071 7561 6c69 6669 6572 2c20  ame, qualifier, 
-0001b750: 636f 6e74 6578 742e 6163 636f 756e 745f  context.account_
-0001b760: 6964 2c20 636f 6e74 6578 742e 7265 6769  id, context.regi
-0001b770: 6f6e 0a20 2020 2020 2020 2020 2020 2020  on.             
-0001b780: 2020 2020 2020 2029 2c0a 2020 2020 2020         ),.      
-0001b790: 2020 2020 2020 2020 2020 2020 2020 5265                Re
-0001b7a0: 7175 6573 7465 6450 726f 7669 7369 6f6e  questedProvision
-0001b7b0: 6564 436f 6e63 7572 7265 6e74 4578 6563  edConcurrentExec
-0001b7c0: 7574 696f 6e73 3d70 635f 636f 6e66 6967  utions=pc_config
-0001b7d0: 2e70 726f 7669 7369 6f6e 6564 5f63 6f6e  .provisioned_con
-0001b7e0: 6375 7272 656e 745f 6578 6563 7574 696f  current_executio
-0001b7f0: 6e73 2c0a 2020 2020 2020 2020 2020 2020  ns,.            
-0001b800: 2020 2020 2020 2020 4176 6169 6c61 626c          Availabl
-0001b810: 6550 726f 7669 7369 6f6e 6564 436f 6e63  eProvisionedConc
-0001b820: 7572 7265 6e74 4578 6563 7574 696f 6e73  urrentExecutions
-0001b830: 3d6d 616e 6167 6572 2e70 726f 7669 7369  =manager.provisi
-0001b840: 6f6e 6564 5f73 7461 7465 2e61 7661 696c  oned_state.avail
-0001b850: 6162 6c65 2c0a 2020 2020 2020 2020 2020  able,.          
-0001b860: 2020 2020 2020 2020 2020 416c 6c6f 6361            Alloca
-0001b870: 7465 6450 726f 7669 7369 6f6e 6564 436f  tedProvisionedCo
-0001b880: 6e63 7572 7265 6e74 4578 6563 7574 696f  ncurrentExecutio
-0001b890: 6e73 3d6d 616e 6167 6572 2e70 726f 7669  ns=manager.provi
-0001b8a0: 7369 6f6e 6564 5f73 7461 7465 2e61 6c6c  sioned_state.all
-0001b8b0: 6f63 6174 6564 2c0a 2020 2020 2020 2020  ocated,.        
-0001b8c0: 2020 2020 2020 2020 2020 2020 5374 6174              Stat
-0001b8d0: 7573 3d6d 616e 6167 6572 2e70 726f 7669  us=manager.provi
-0001b8e0: 7369 6f6e 6564 5f73 7461 7465 2e73 7461  sioned_state.sta
-0001b8f0: 7475 732c 0a20 2020 2020 2020 2020 2020  tus,.           
-0001b900: 2020 2020 2020 2020 2053 7461 7475 7352           StatusR
-0001b910: 6561 736f 6e3d 6d61 6e61 6765 722e 7072  eason=manager.pr
-0001b920: 6f76 6973 696f 6e65 645f 7374 6174 652e  ovisioned_state.
-0001b930: 7374 6174 7573 5f72 6561 736f 6e2c 0a20  status_reason,. 
-0001b940: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001b950: 2020 204c 6173 744d 6f64 6966 6965 643d     LastModified=
-0001b960: 7063 5f63 6f6e 6669 672e 6c61 7374 5f6d  pc_config.last_m
-0001b970: 6f64 6966 6965 642c 0a20 2020 2020 2020  odified,.       
-0001b980: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0001b990: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-0001b9a0: 2020 7072 6f76 6973 696f 6e65 645f 636f    provisioned_co
-0001b9b0: 6e63 7572 7265 6e63 795f 636f 6e66 6967  ncurrency_config
-0001b9c0: 7320 3d20 636f 6e66 6967 730a 2020 2020  s = configs.    
-0001b9d0: 2020 2020 7072 6f76 6973 696f 6e65 645f      provisioned_
-0001b9e0: 636f 6e63 7572 7265 6e63 795f 636f 6e66  concurrency_conf
-0001b9f0: 6967 7320 3d20 5061 6769 6e61 7465 644c  igs = PaginatedL
-0001ba00: 6973 7428 7072 6f76 6973 696f 6e65 645f  ist(provisioned_
-0001ba10: 636f 6e63 7572 7265 6e63 795f 636f 6e66  concurrency_conf
-0001ba20: 6967 7329 0a20 2020 2020 2020 2070 6167  igs).        pag
-0001ba30: 652c 2074 6f6b 656e 203d 2070 726f 7669  e, token = provi
-0001ba40: 7369 6f6e 6564 5f63 6f6e 6375 7272 656e  sioned_concurren
-0001ba50: 6379 5f63 6f6e 6669 6773 2e67 6574 5f70  cy_configs.get_p
-0001ba60: 6167 6528 0a20 2020 2020 2020 2020 2020  age(.           
-0001ba70: 206c 616d 6264 6120 783a 2078 2c0a 2020   lambda x: x,.  
-0001ba80: 2020 2020 2020 2020 2020 6d61 726b 6572            marker
-0001ba90: 2c0a 2020 2020 2020 2020 2020 2020 6d61  ,.            ma
-0001baa0: 785f 6974 656d 732c 0a20 2020 2020 2020  x_items,.       
-0001bab0: 2029 0a20 2020 2020 2020 2072 6574 7572   ).        retur
-0001bac0: 6e20 4c69 7374 5072 6f76 6973 696f 6e65  n ListProvisione
-0001bad0: 6443 6f6e 6375 7272 656e 6379 436f 6e66  dConcurrencyConf
-0001bae0: 6967 7352 6573 706f 6e73 6528 0a20 2020  igsResponse(.   
-0001baf0: 2020 2020 2020 2020 2050 726f 7669 7369           Provisi
-0001bb00: 6f6e 6564 436f 6e63 7572 7265 6e63 7943  onedConcurrencyC
-0001bb10: 6f6e 6669 6773 3d70 6167 652c 204e 6578  onfigs=page, Nex
-0001bb20: 744d 6172 6b65 723d 746f 6b65 6e0a 2020  tMarker=token.  
-0001bb30: 2020 2020 2020 290a 0a20 2020 2064 6566        )..    def
-0001bb40: 2064 656c 6574 655f 7072 6f76 6973 696f   delete_provisio
-0001bb50: 6e65 645f 636f 6e63 7572 7265 6e63 795f  ned_concurrency_
-0001bb60: 636f 6e66 6967 280a 2020 2020 2020 2020  config(.        
-0001bb70: 7365 6c66 2c20 636f 6e74 6578 743a 2052  self, context: R
-0001bb80: 6571 7565 7374 436f 6e74 6578 742c 2066  equestContext, f
-0001bb90: 756e 6374 696f 6e5f 6e61 6d65 3a20 4675  unction_name: Fu
-0001bba0: 6e63 7469 6f6e 4e61 6d65 2c20 7175 616c  nctionName, qual
-0001bbb0: 6966 6965 723a 2051 7561 6c69 6669 6572  ifier: Qualifier
-0001bbc0: 0a20 2020 2029 202d 3e20 4e6f 6e65 3a0a  .    ) -> None:.
-0001bbd0: 2020 2020 2020 2020 6966 2071 7561 6c69          if quali
-0001bbe0: 6669 6572 203d 3d20 2224 4c41 5445 5354  fier == "$LATEST
-0001bbf0: 223a 0a20 2020 2020 2020 2020 2020 2072  ":.            r
-0001bc00: 6169 7365 2049 6e76 616c 6964 5061 7261  aise InvalidPara
-0001bc10: 6d65 7465 7256 616c 7565 4578 6365 7074  meterValueExcept
-0001bc20: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
-0001bc30: 2020 2020 2022 5468 6520 6675 6e63 7469       "The functi
-0001bc40: 6f6e 2072 6573 6f75 7263 6520 7072 6f76  on resource prov
-0001bc50: 6964 6564 206d 7573 7420 6265 2061 6e20  ided must be an 
-0001bc60: 616c 6961 7320 6f72 2061 2070 7562 6c69  alias or a publi
-0001bc70: 7368 6564 2076 6572 7369 6f6e 2e22 2c0a  shed version.",.
-0001bc80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bc90: 5479 7065 3d22 5573 6572 222c 0a20 2020  Type="User",.   
-0001bca0: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0001bcb0: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
-0001bcc0: 2c20 7175 616c 6966 6965 7220 3d20 6170  , qualifier = ap
-0001bcd0: 695f 7574 696c 732e 6765 745f 6e61 6d65  i_utils.get_name
-0001bce0: 5f61 6e64 5f71 7561 6c69 6669 6572 280a  _and_qualifier(.
-0001bcf0: 2020 2020 2020 2020 2020 2020 6675 6e63              func
-0001bd00: 7469 6f6e 5f6e 616d 652c 2071 7561 6c69  tion_name, quali
-0001bd10: 6669 6572 2c20 636f 6e74 6578 742e 7265  fier, context.re
-0001bd20: 6769 6f6e 0a20 2020 2020 2020 2029 0a20  gion.        ). 
-0001bd30: 2020 2020 2020 2073 7461 7465 203d 206c         state = l
-0001bd40: 616d 6264 615f 7374 6f72 6573 5b63 6f6e  ambda_stores[con
-0001bd50: 7465 7874 2e61 6363 6f75 6e74 5f69 645d  text.account_id]
-0001bd60: 5b63 6f6e 7465 7874 2e72 6567 696f 6e5d  [context.region]
-0001bd70: 0a20 2020 2020 2020 2066 6e20 3d20 7374  .        fn = st
-0001bd80: 6174 652e 6675 6e63 7469 6f6e 732e 6765  ate.functions.ge
-0001bd90: 7428 6675 6e63 7469 6f6e 5f6e 616d 6529  t(function_name)
-0001bda0: 0a0a 2020 2020 2020 2020 7072 6f76 6973  ..        provis
-0001bdb0: 696f 6e65 645f 636f 6e66 6967 203d 2073  ioned_config = s
-0001bdc0: 656c 662e 5f67 6574 5f70 726f 7669 7369  elf._get_provisi
-0001bdd0: 6f6e 6564 5f63 6f6e 6669 6728 636f 6e74  oned_config(cont
-0001bde0: 6578 742c 2066 756e 6374 696f 6e5f 6e61  ext, function_na
-0001bdf0: 6d65 2c20 7175 616c 6966 6965 7229 0a20  me, qualifier). 
-0001be00: 2020 2020 2020 2023 2064 656c 6574 6520         # delete 
-0001be10: 6973 2069 6465 6d70 6f74 656e 7420 616e  is idempotent an
-0001be20: 6420 646f 6573 6e27 7420 6163 7475 616c  d doesn't actual
-0001be30: 6c79 2063 6172 6520 6162 6f75 7420 7468  ly care about th
-0001be40: 6520 7072 6f76 6973 696f 6e65 6420 636f  e provisioned co
-0001be50: 6e63 7572 7265 6e63 7920 636f 6e66 6967  ncurrency config
-0001be60: 206e 6f74 2065 7869 7374 696e 670a 2020   not existing.  
-0001be70: 2020 2020 2020 6966 2070 726f 7669 7369        if provisi
-0001be80: 6f6e 6564 5f63 6f6e 6669 673a 0a20 2020  oned_config:.   
-0001be90: 2020 2020 2020 2020 2066 6e2e 7072 6f76           fn.prov
-0001bea0: 6973 696f 6e65 645f 636f 6e63 7572 7265  isioned_concurre
-0001beb0: 6e63 795f 636f 6e66 6967 732e 706f 7028  ncy_configs.pop(
-0001bec0: 7175 616c 6966 6965 7229 0a20 2020 2020  qualifier).     
-0001bed0: 2020 2020 2020 2066 6e5f 6172 6e20 3d20         fn_arn = 
-0001bee0: 6170 695f 7574 696c 732e 7175 616c 6966  api_utils.qualif
-0001bef0: 6965 645f 6c61 6d62 6461 5f61 726e 280a  ied_lambda_arn(.
-0001bf00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001bf10: 6675 6e63 7469 6f6e 5f6e 616d 652c 2071  function_name, q
-0001bf20: 7561 6c69 6669 6572 2c20 636f 6e74 6578  ualifier, contex
-0001bf30: 742e 6163 636f 756e 745f 6964 2c20 636f  t.account_id, co
-0001bf40: 6e74 6578 742e 7265 6769 6f6e 0a20 2020  ntext.region.   
-0001bf50: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0001bf60: 2020 2020 2020 206d 616e 6167 6572 203d         manager =
-0001bf70: 2073 656c 662e 6c61 6d62 6461 5f73 6572   self.lambda_ser
-0001bf80: 7669 6365 2e67 6574 5f6c 616d 6264 615f  vice.get_lambda_
-0001bf90: 7665 7273 696f 6e5f 6d61 6e61 6765 7228  version_manager(
-0001bfa0: 666e 5f61 726e 290a 2020 2020 2020 2020  fn_arn).        
-0001bfb0: 2020 2020 6d61 6e61 6765 722e 7570 6461      manager.upda
-0001bfc0: 7465 5f70 726f 7669 7369 6f6e 6564 5f63  te_provisioned_c
-0001bfd0: 6f6e 6375 7272 656e 6379 5f63 6f6e 6669  oncurrency_confi
-0001bfe0: 6728 3029 0a0a 2020 2020 2320 3d3d 3d3d  g(0)..    # ====
-0001bff0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001c000: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001c010: 3d3d 3d0a 2020 2020 2320 3d3d 3d3d 3d3d  ===.    # ======
-0001c020: 3d20 2045 7665 6e74 2049 6e76 6f6b 6520  =  Event Invoke 
-0001c030: 436f 6e66 6967 2020 203d 3d3d 3d3d 3d3d  Config   =======
-0001c040: 3d0a 2020 2020 2320 3d3d 3d3d 3d3d 3d3d  =.    # ========
-0001c050: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001c060: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a  ===============.
-0001c070: 0a20 2020 2023 2022 3120 7661 6c69 6461  .    # "1 valida
-0001c080: 7469 6f6e 2065 7272 6f72 2064 6574 6563  tion error detec
-0001c090: 7465 643a 2056 616c 7565 2027 6172 6e3a  ted: Value 'arn:
-0001c0a0: 6177 733a 5f2d 2f21 6c61 6d62 6461 3a3c  aws:_-/!lambda:<
-0001c0b0: 7265 6769 6f6e 3e3a 3131 3131 3131 3131  region>:11111111
-0001c0c0: 3131 3131 3a66 756e 6374 696f 6e3a 3c66  1111:function:<f
-0001c0d0: 756e 6374 696f 6e2d 6e61 6d65 3a31 3e27  unction-name:1>'
-0001c0e0: 2061 7420 2764 6573 7469 6e61 7469 6f6e   at 'destination
-0001c0f0: 436f 6e66 6967 2e6f 6e46 6169 6c75 7265  Config.onFailure
-0001c100: 2e64 6573 7469 6e61 7469 6f6e 2720 6661  .destination' fa
-0001c110: 696c 6564 2074 6f20 7361 7469 7366 7920  iled to satisfy 
-0001c120: 636f 6e73 7472 6169 6e74 3a20 4d65 6d62  constraint: Memb
-0001c130: 6572 206d 7573 7420 7361 7469 7366 7920  er must satisfy 
-0001c140: 7265 6775 6c61 7220 6578 7072 6573 7369  regular expressi
-0001c150: 6f6e 2070 6174 7465 726e 3a20 5e24 7c61  on pattern: ^$|a
-0001c160: 726e 3a28 6177 735b 612d 7a41 2d5a 302d  rn:(aws[a-zA-Z0-
-0001c170: 392d 5d2a 293a 285b 612d 7a41 2d5a 302d  9-]*):([a-zA-Z0-
-0001c180: 395c 5c2d 5d29 2b3a 285b 612d 7a5d 7b32  9\\-])+:([a-z]{2
-0001c190: 7d28 282d 676f 7629 7c28 2d69 736f 2862  }((-gov)|(-iso(b
-0001c1a0: 3f29 2929 3f2d 5b61 2d7a 5d2b 2d5c 5c64  ?)))?-[a-z]+-\\d
-0001c1b0: 7b31 7d29 3f3a 285c 5c64 7b31 327d 293f  {1})?:(\\d{12})?
-0001c1c0: 3a28 2e2a 2922 0a20 2020 2023 2022 3120  :(.*)".    # "1 
-0001c1d0: 7661 6c69 6461 7469 6f6e 2065 7272 6f72  validation error
-0001c1e0: 2064 6574 6563 7465 643a 2056 616c 7565   detected: Value
-0001c1f0: 2027 6172 6e3a 6177 733a 5f2d 2f21 6c61   'arn:aws:_-/!la
-0001c200: 6d62 6461 3a3c 7265 6769 6f6e 3e3a 3131  mbda:<region>:11
-0001c210: 3131 3131 3131 3131 3131 3a66 756e 6374  1111111111:funct
-0001c220: 696f 6e3a 3c66 756e 6374 696f 6e2d 6e61  ion:<function-na
-0001c230: 6d65 3a31 3e27 2061 7420 2764 6573 7469  me:1>' at 'desti
-0001c240: 6e61 7469 6f6e 436f 6e66 6967 2e6f 6e46  nationConfig.onF
-0001c250: 6169 6c75 7265 2e64 6573 7469 6e61 7469  ailure.destinati
-0001c260: 6f6e 2720 6661 696c 6564 2074 6f20 7361  on' failed to sa
-0001c270: 7469 7366 7920 636f 6e73 7472 6169 6e74  tisfy constraint
-0001c280: 3a20 4d65 6d62 6572 206d 7573 7420 7361  : Member must sa
-0001c290: 7469 7366 7920 7265 6775 6c61 7220 6578  tisfy regular ex
-0001c2a0: 7072 6573 7369 6f6e 2070 6174 7465 726e  pression pattern
-0001c2b0: 3a20 5e24 7c61 726e 3a28 6177 735b 612d  : ^$|arn:(aws[a-
-0001c2c0: 7a41 2d5a 302d 392d 5d2a 293a 285b 612d  zA-Z0-9-]*):([a-
-0001c2d0: 7a41 2d5a 302d 395c 5c2d 5d29 2b3a 285b  zA-Z0-9\\-])+:([
-0001c2e0: 612d 7a5d 3228 282d 676f 7629 7c28 2d69  a-z]2((-gov)|(-i
-0001c2f0: 736f 2862 3f29 2929 3f2d 5b61 2d7a 5d2b  so(b?)))?-[a-z]+
-0001c300: 2d5c 5c64 3129 3f3a 285c 5c64 3132 293f  -\\d1)?:(\\d12)?
-0001c310: 3a28 2e2a 2922 202e 2e2e 2028 6578 7065  :(.*)" ... (expe
-0001c320: 6374 6564 20e2 8692 2061 6374 7561 6c29  cted ... actual)
-0001c330: 0a0a 2020 2020 6465 6620 5f76 616c 6964  ..    def _valid
-0001c340: 6174 655f 6465 7374 696e 6174 696f 6e5f  ate_destination_
-0001c350: 636f 6e66 6967 280a 2020 2020 2020 2020  config(.        
-0001c360: 7365 6c66 2c20 7374 6f72 653a 204c 616d  self, store: Lam
-0001c370: 6264 6153 746f 7265 2c20 6675 6e63 7469  bdaStore, functi
-0001c380: 6f6e 5f6e 616d 653a 2073 7472 2c20 6465  on_name: str, de
-0001c390: 7374 696e 6174 696f 6e5f 636f 6e66 6967  stination_config
-0001c3a0: 3a20 4465 7374 696e 6174 696f 6e43 6f6e  : DestinationCon
-0001c3b0: 6669 670a 2020 2020 293a 0a20 2020 2020  fig.    ):.     
-0001c3c0: 2020 2064 6566 205f 7661 6c69 6461 7465     def _validate
-0001c3d0: 5f64 6573 7469 6e61 7469 6f6e 5f61 726e  _destination_arn
-0001c3e0: 2864 6573 7469 6e61 7469 6f6e 5f61 726e  (destination_arn
-0001c3f0: 2920 2d3e 2062 6f6f 6c3a 0a20 2020 2020  ) -> bool:.     
-0001c400: 2020 2020 2020 2069 6620 6e6f 7420 6170         if not ap
-0001c410: 695f 7574 696c 732e 4445 5354 494e 4154  i_utils.DESTINAT
-0001c420: 494f 4e5f 4152 4e5f 5041 5454 4552 4e2e  ION_ARN_PATTERN.
-0001c430: 6d61 7463 6828 6465 7374 696e 6174 696f  match(destinatio
-0001c440: 6e5f 6172 6e29 3a0a 2020 2020 2020 2020  n_arn):.        
-0001c450: 2020 2020 2020 2020 2320 7465 6368 6e69          # techni
-0001c460: 6361 6c6c 7920 7765 2073 686f 756c 646e  cally we shouldn
-0001c470: 2774 2068 616e 646c 6520 7468 6973 2069  't handle this i
-0001c480: 6e20 7468 6520 7072 6f76 6964 6572 0a20  n the provider. 
-0001c490: 2020 2020 2020 2020 2020 2020 2020 2072                 r
-0001c4a0: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
-0001c4b0: 7863 6570 7469 6f6e 280a 2020 2020 2020  xception(.      
-0001c4c0: 2020 2020 2020 2020 2020 2020 2020 2231                "1
-0001c4d0: 2076 616c 6964 6174 696f 6e20 6572 726f   validation erro
-0001c4e0: 7220 6465 7465 6374 6564 3a20 5661 6c75  r detected: Valu
-0001c4f0: 6520 2722 0a20 2020 2020 2020 2020 2020  e '".           
-0001c500: 2020 2020 2020 2020 202b 2064 6573 7469           + desti
-0001c510: 6e61 7469 6f6e 5f61 726e 0a20 2020 2020  nation_arn.     
-0001c520: 2020 2020 2020 2020 2020 2020 2020 202b                 +
-0001c530: 2072 2227 2061 7420 2764 6573 7469 6e61   r"' at 'destina
-0001c540: 7469 6f6e 436f 6e66 6967 2e6f 6e46 6169  tionConfig.onFai
-0001c550: 6c75 7265 2e64 6573 7469 6e61 7469 6f6e  lure.destination
-0001c560: 2720 6661 696c 6564 2074 6f20 7361 7469  ' failed to sati
-0001c570: 7366 7920 636f 6e73 7472 6169 6e74 3a20  sfy constraint: 
-0001c580: 4d65 6d62 6572 206d 7573 7420 7361 7469  Member must sati
-0001c590: 7366 7920 7265 6775 6c61 7220 6578 7072  sfy regular expr
-0001c5a0: 6573 7369 6f6e 2070 6174 7465 726e 3a20  ession pattern: 
-0001c5b0: 5e24 7c61 726e 3a28 6177 735b 612d 7a41  ^$|arn:(aws[a-zA
-0001c5c0: 2d5a 302d 392d 5d2a 293a 285b 612d 7a41  -Z0-9-]*):([a-zA
-0001c5d0: 2d5a 302d 395c 2d5d 292b 3a28 5b61 2d7a  -Z0-9\-])+:([a-z
-0001c5e0: 5d7b 327d 2828 2d67 6f76 297c 282d 6973  ]{2}((-gov)|(-is
-0001c5f0: 6f28 623f 2929 293f 2d5b 612d 7a5d 2b2d  o(b?)))?-[a-z]+-
-0001c600: 5c64 7b31 7d29 3f3a 285c 647b 3132 7d29  \d{1})?:(\d{12})
-0001c610: 3f3a 282e 2a29 220a 2020 2020 2020 2020  ?:(.*)".        
-0001c620: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-0001c630: 2020 2020 2020 206d 6174 6368 2064 6573         match des
-0001c640: 7469 6e61 7469 6f6e 5f61 726e 2e73 706c  tination_arn.spl
-0001c650: 6974 2822 3a22 295b 325d 3a0a 2020 2020  it(":")[2]:.    
-0001c660: 2020 2020 2020 2020 2020 2020 6361 7365              case
-0001c670: 2022 6c61 6d62 6461 223a 0a20 2020 2020   "lambda":.     
-0001c680: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001c690: 6e5f 7061 7274 7320 3d20 6170 695f 7574  n_parts = api_ut
-0001c6a0: 696c 732e 4655 4c4c 5f46 4e5f 4152 4e5f  ils.FULL_FN_ARN_
-0001c6b0: 5041 5454 4552 4e2e 7365 6172 6368 2864  PATTERN.search(d
-0001c6c0: 6573 7469 6e61 7469 6f6e 5f61 726e 292e  estination_arn).
-0001c6d0: 6772 6f75 7064 6963 7428 290a 2020 2020  groupdict().    
-0001c6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c6f0: 6966 2066 6e5f 7061 7274 733a 0a20 2020  if fn_parts:.   
-0001c700: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c710: 2020 2020 2023 2063 6865 636b 2069 6620       # check if 
-0001c720: 6974 2065 7869 7374 730a 2020 2020 2020  it exists.      
+00017f90: 5265 7370 6f6e 7365 280a 2020 2020 2020  Response(.      
+00017fa0: 2020 2020 2020 2020 2020 436f 6465 5369            CodeSi
+00017fb0: 676e 696e 6743 6f6e 6669 6741 726e 3d66  gningConfigArn=f
+00017fc0: 6e2e 636f 6465 5f73 6967 6e69 6e67 5f63  n.code_signing_c
+00017fd0: 6f6e 6669 675f 6172 6e2c 2046 756e 6374  onfig_arn, Funct
+00017fe0: 696f 6e4e 616d 653d 6675 6e63 7469 6f6e  ionName=function
+00017ff0: 5f6e 616d 650a 2020 2020 2020 2020 2020  _name.          
+00018000: 2020 290a 0a20 2020 2020 2020 2072 6574    )..        ret
+00018010: 7572 6e20 4765 7446 756e 6374 696f 6e43  urn GetFunctionC
+00018020: 6f64 6553 6967 6e69 6e67 436f 6e66 6967  odeSigningConfig
+00018030: 5265 7370 6f6e 7365 2829 0a0a 2020 2020  Response()..    
+00018040: 6465 6620 6465 6c65 7465 5f66 756e 6374  def delete_funct
+00018050: 696f 6e5f 636f 6465 5f73 6967 6e69 6e67  ion_code_signing
+00018060: 5f63 6f6e 6669 6728 0a20 2020 2020 2020  _config(.       
+00018070: 2073 656c 662c 2063 6f6e 7465 7874 3a20   self, context: 
+00018080: 5265 7175 6573 7443 6f6e 7465 7874 2c20  RequestContext, 
+00018090: 6675 6e63 7469 6f6e 5f6e 616d 653a 2046  function_name: F
+000180a0: 756e 6374 696f 6e4e 616d 650a 2020 2020  unctionName.    
+000180b0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+000180c0: 2020 2073 7461 7465 203d 206c 616d 6264     state = lambd
+000180d0: 615f 7374 6f72 6573 5b63 6f6e 7465 7874  a_stores[context
+000180e0: 2e61 6363 6f75 6e74 5f69 645d 5b63 6f6e  .account_id][con
+000180f0: 7465 7874 2e72 6567 696f 6e5d 0a20 2020  text.region].   
+00018100: 2020 2020 2066 756e 6374 696f 6e5f 6e61       function_na
+00018110: 6d65 203d 2061 7069 5f75 7469 6c73 2e67  me = api_utils.g
+00018120: 6574 5f66 756e 6374 696f 6e5f 6e61 6d65  et_function_name
+00018130: 2866 756e 6374 696f 6e5f 6e61 6d65 2c20  (function_name, 
+00018140: 636f 6e74 6578 742e 7265 6769 6f6e 290a  context.region).
+00018150: 2020 2020 2020 2020 666e 203d 2073 7461          fn = sta
+00018160: 7465 2e66 756e 6374 696f 6e73 2e67 6574  te.functions.get
+00018170: 2866 756e 6374 696f 6e5f 6e61 6d65 290a  (function_name).
+00018180: 2020 2020 2020 2020 666e 5f61 726e 203d          fn_arn =
+00018190: 2061 7069 5f75 7469 6c73 2e75 6e71 7561   api_utils.unqua
+000181a0: 6c69 6669 6564 5f6c 616d 6264 615f 6172  lified_lambda_ar
+000181b0: 6e28 6675 6e63 7469 6f6e 5f6e 616d 652c  n(function_name,
+000181c0: 2063 6f6e 7465 7874 2e61 6363 6f75 6e74   context.account
+000181d0: 5f69 642c 2063 6f6e 7465 7874 2e72 6567  _id, context.reg
+000181e0: 696f 6e29 0a20 2020 2020 2020 2069 6620  ion).        if 
+000181f0: 6e6f 7420 666e 3a0a 2020 2020 2020 2020  not fn:.        
+00018200: 2020 2020 7261 6973 6520 5265 736f 7572      raise Resour
+00018210: 6365 4e6f 7446 6f75 6e64 4578 6365 7074  ceNotFoundExcept
+00018220: 696f 6e28 6622 4675 6e63 7469 6f6e 206e  ion(f"Function n
+00018230: 6f74 2066 6f75 6e64 3a20 7b66 6e5f 6172  ot found: {fn_ar
+00018240: 6e7d 222c 2054 7970 653d 2255 7365 7222  n}", Type="User"
+00018250: 290a 0a20 2020 2020 2020 2066 6e2e 636f  )..        fn.co
+00018260: 6465 5f73 6967 6e69 6e67 5f63 6f6e 6669  de_signing_confi
+00018270: 675f 6172 6e20 3d20 4e6f 6e65 0a0a 2020  g_arn = None..  
+00018280: 2020 6465 6620 6465 6c65 7465 5f63 6f64    def delete_cod
+00018290: 655f 7369 676e 696e 675f 636f 6e66 6967  e_signing_config
+000182a0: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+000182b0: 636f 6e74 6578 743a 2052 6571 7565 7374  context: Request
+000182c0: 436f 6e74 6578 742c 2063 6f64 655f 7369  Context, code_si
+000182d0: 676e 696e 675f 636f 6e66 6967 5f61 726e  gning_config_arn
+000182e0: 3a20 436f 6465 5369 676e 696e 6743 6f6e  : CodeSigningCon
+000182f0: 6669 6741 726e 0a20 2020 2029 202d 3e20  figArn.    ) -> 
+00018300: 4465 6c65 7465 436f 6465 5369 676e 696e  DeleteCodeSignin
+00018310: 6743 6f6e 6669 6752 6573 706f 6e73 653a  gConfigResponse:
+00018320: 0a20 2020 2020 2020 2073 7461 7465 203d  .        state =
+00018330: 206c 616d 6264 615f 7374 6f72 6573 5b63   lambda_stores[c
+00018340: 6f6e 7465 7874 2e61 6363 6f75 6e74 5f69  ontext.account_i
+00018350: 645d 5b63 6f6e 7465 7874 2e72 6567 696f  d][context.regio
+00018360: 6e5d 0a0a 2020 2020 2020 2020 6373 6320  n]..        csc 
+00018370: 3d20 7374 6174 652e 636f 6465 5f73 6967  = state.code_sig
+00018380: 6e69 6e67 5f63 6f6e 6669 6773 2e67 6574  ning_configs.get
+00018390: 2863 6f64 655f 7369 676e 696e 675f 636f  (code_signing_co
+000183a0: 6e66 6967 5f61 726e 290a 2020 2020 2020  nfig_arn).      
+000183b0: 2020 6966 206e 6f74 2063 7363 3a0a 2020    if not csc:.  
+000183c0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000183d0: 5265 736f 7572 6365 4e6f 7446 6f75 6e64  ResourceNotFound
+000183e0: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
+000183f0: 2020 2020 2020 2020 2020 2066 2254 6865             f"The
+00018400: 204c 616d 6264 6120 636f 6465 2073 6967   Lambda code sig
+00018410: 6e69 6e67 2063 6f6e 6669 6775 7261 7469  ning configurati
+00018420: 6f6e 207b 636f 6465 5f73 6967 6e69 6e67  on {code_signing
+00018430: 5f63 6f6e 6669 675f 6172 6e7d 2063 616e  _config_arn} can
+00018440: 206e 6f74 2062 6520 666f 756e 642e 220a   not be found.".
+00018450: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
+00018460: 2020 2020 2020 2064 656c 2073 7461 7465         del state
+00018470: 2e63 6f64 655f 7369 676e 696e 675f 636f  .code_signing_co
+00018480: 6e66 6967 735b 636f 6465 5f73 6967 6e69  nfigs[code_signi
+00018490: 6e67 5f63 6f6e 6669 675f 6172 6e5d 0a0a  ng_config_arn]..
+000184a0: 2020 2020 2020 2020 7265 7475 726e 2044          return D
+000184b0: 656c 6574 6543 6f64 6553 6967 6e69 6e67  eleteCodeSigning
+000184c0: 436f 6e66 6967 5265 7370 6f6e 7365 2829  ConfigResponse()
+000184d0: 0a0a 2020 2020 6465 6620 6c69 7374 5f63  ..    def list_c
+000184e0: 6f64 655f 7369 676e 696e 675f 636f 6e66  ode_signing_conf
+000184f0: 6967 7328 0a20 2020 2020 2020 2073 656c  igs(.        sel
+00018500: 662c 2063 6f6e 7465 7874 3a20 5265 7175  f, context: Requ
+00018510: 6573 7443 6f6e 7465 7874 2c20 6d61 726b  estContext, mark
+00018520: 6572 3a20 5374 7269 6e67 203d 204e 6f6e  er: String = Non
+00018530: 652c 206d 6178 5f69 7465 6d73 3a20 4d61  e, max_items: Ma
+00018540: 784c 6973 7449 7465 6d73 203d 204e 6f6e  xListItems = Non
+00018550: 650a 2020 2020 2920 2d3e 204c 6973 7443  e.    ) -> ListC
+00018560: 6f64 6553 6967 6e69 6e67 436f 6e66 6967  odeSigningConfig
+00018570: 7352 6573 706f 6e73 653a 0a20 2020 2020  sResponse:.     
+00018580: 2020 2073 7461 7465 203d 206c 616d 6264     state = lambd
+00018590: 615f 7374 6f72 6573 5b63 6f6e 7465 7874  a_stores[context
+000185a0: 2e61 6363 6f75 6e74 5f69 645d 5b63 6f6e  .account_id][con
+000185b0: 7465 7874 2e72 6567 696f 6e5d 0a0a 2020  text.region]..  
+000185c0: 2020 2020 2020 6373 6373 203d 205b 6170        cscs = [ap
+000185d0: 695f 7574 696c 732e 6d61 705f 6373 6328  i_utils.map_csc(
+000185e0: 6373 6329 2066 6f72 2063 7363 2069 6e20  csc) for csc in 
+000185f0: 7374 6174 652e 636f 6465 5f73 6967 6e69  state.code_signi
+00018600: 6e67 5f63 6f6e 6669 6773 2e76 616c 7565  ng_configs.value
+00018610: 7328 295d 0a20 2020 2020 2020 2063 7363  s()].        csc
+00018620: 7320 3d20 5061 6769 6e61 7465 644c 6973  s = PaginatedLis
+00018630: 7428 6373 6373 290a 2020 2020 2020 2020  t(cscs).        
+00018640: 7061 6765 2c20 746f 6b65 6e20 3d20 6373  page, token = cs
+00018650: 6373 2e67 6574 5f70 6167 6528 0a20 2020  cs.get_page(.   
+00018660: 2020 2020 2020 2020 206c 616d 6264 6120           lambda 
+00018670: 6373 633a 2063 7363 5b22 436f 6465 5369  csc: csc["CodeSi
+00018680: 676e 696e 6743 6f6e 6669 6749 6422 5d2c  gningConfigId"],
+00018690: 0a20 2020 2020 2020 2020 2020 206d 6172  .            mar
+000186a0: 6b65 722c 0a20 2020 2020 2020 2020 2020  ker,.           
+000186b0: 206d 6178 5f69 7465 6d73 2c0a 2020 2020   max_items,.    
+000186c0: 2020 2020 290a 2020 2020 2020 2020 7265      ).        re
+000186d0: 7475 726e 204c 6973 7443 6f64 6553 6967  turn ListCodeSig
+000186e0: 6e69 6e67 436f 6e66 6967 7352 6573 706f  ningConfigsRespo
+000186f0: 6e73 6528 436f 6465 5369 676e 696e 6743  nse(CodeSigningC
+00018700: 6f6e 6669 6773 3d70 6167 652c 204e 6578  onfigs=page, Nex
+00018710: 744d 6172 6b65 723d 746f 6b65 6e29 0a0a  tMarker=token)..
+00018720: 2020 2020 6465 6620 6c69 7374 5f66 756e      def list_fun
+00018730: 6374 696f 6e73 5f62 795f 636f 6465 5f73  ctions_by_code_s
+00018740: 6967 6e69 6e67 5f63 6f6e 6669 6728 0a20  igning_config(. 
+00018750: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
+00018760: 2020 2020 2063 6f6e 7465 7874 3a20 5265       context: Re
+00018770: 7175 6573 7443 6f6e 7465 7874 2c0a 2020  questContext,.  
+00018780: 2020 2020 2020 636f 6465 5f73 6967 6e69        code_signi
+00018790: 6e67 5f63 6f6e 6669 675f 6172 6e3a 2043  ng_config_arn: C
+000187a0: 6f64 6553 6967 6e69 6e67 436f 6e66 6967  odeSigningConfig
+000187b0: 4172 6e2c 0a20 2020 2020 2020 206d 6172  Arn,.        mar
+000187c0: 6b65 723a 2053 7472 696e 6720 3d20 4e6f  ker: String = No
+000187d0: 6e65 2c0a 2020 2020 2020 2020 6d61 785f  ne,.        max_
+000187e0: 6974 656d 733a 204d 6178 4c69 7374 4974  items: MaxListIt
+000187f0: 656d 7320 3d20 4e6f 6e65 2c0a 2020 2020  ems = None,.    
+00018800: 2920 2d3e 204c 6973 7446 756e 6374 696f  ) -> ListFunctio
+00018810: 6e73 4279 436f 6465 5369 676e 696e 6743  nsByCodeSigningC
+00018820: 6f6e 6669 6752 6573 706f 6e73 653a 0a20  onfigResponse:. 
+00018830: 2020 2020 2020 2073 7461 7465 203d 206c         state = l
+00018840: 616d 6264 615f 7374 6f72 6573 5b63 6f6e  ambda_stores[con
+00018850: 7465 7874 2e61 6363 6f75 6e74 5f69 645d  text.account_id]
+00018860: 5b63 6f6e 7465 7874 2e72 6567 696f 6e5d  [context.region]
+00018870: 0a0a 2020 2020 2020 2020 6966 2063 6f64  ..        if cod
+00018880: 655f 7369 676e 696e 675f 636f 6e66 6967  e_signing_config
+00018890: 5f61 726e 206e 6f74 2069 6e20 7374 6174  _arn not in stat
+000188a0: 652e 636f 6465 5f73 6967 6e69 6e67 5f63  e.code_signing_c
+000188b0: 6f6e 6669 6773 3a0a 2020 2020 2020 2020  onfigs:.        
+000188c0: 2020 2020 7261 6973 6520 5265 736f 7572      raise Resour
+000188d0: 6365 4e6f 7446 6f75 6e64 4578 6365 7074  ceNotFoundExcept
+000188e0: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
+000188f0: 2020 2020 2066 2254 6865 204c 616d 6264       f"The Lambd
+00018900: 6120 636f 6465 2073 6967 6e69 6e67 2063  a code signing c
+00018910: 6f6e 6669 6775 7261 7469 6f6e 207b 636f  onfiguration {co
+00018920: 6465 5f73 6967 6e69 6e67 5f63 6f6e 6669  de_signing_confi
+00018930: 675f 6172 6e7d 2063 616e 206e 6f74 2062  g_arn} can not b
+00018940: 6520 666f 756e 642e 220a 2020 2020 2020  e found.".      
+00018950: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+00018960: 2066 6e5f 6172 6e73 203d 205b 0a20 2020   fn_arns = [.   
+00018970: 2020 2020 2020 2020 2061 7069 5f75 7469           api_uti
+00018980: 6c73 2e75 6e71 7561 6c69 6669 6564 5f6c  ls.unqualified_l
+00018990: 616d 6264 615f 6172 6e28 666e 2e66 756e  ambda_arn(fn.fun
+000189a0: 6374 696f 6e5f 6e61 6d65 2c20 636f 6e74  ction_name, cont
+000189b0: 6578 742e 6163 636f 756e 745f 6964 2c20  ext.account_id, 
+000189c0: 636f 6e74 6578 742e 7265 6769 6f6e 290a  context.region).
+000189d0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+000189e0: 666e 2069 6e20 7374 6174 652e 6675 6e63  fn in state.func
+000189f0: 7469 6f6e 732e 7661 6c75 6573 2829 0a20  tions.values(). 
+00018a00: 2020 2020 2020 2020 2020 2069 6620 666e             if fn
+00018a10: 2e63 6f64 655f 7369 676e 696e 675f 636f  .code_signing_co
+00018a20: 6e66 6967 5f61 726e 203d 3d20 636f 6465  nfig_arn == code
+00018a30: 5f73 6967 6e69 6e67 5f63 6f6e 6669 675f  _signing_config_
+00018a40: 6172 6e0a 2020 2020 2020 2020 5d0a 0a20  arn.        ].. 
+00018a50: 2020 2020 2020 2063 7363 7320 3d20 5061         cscs = Pa
+00018a60: 6769 6e61 7465 644c 6973 7428 666e 5f61  ginatedList(fn_a
+00018a70: 726e 7329 0a20 2020 2020 2020 2070 6167  rns).        pag
+00018a80: 652c 2074 6f6b 656e 203d 2063 7363 732e  e, token = cscs.
+00018a90: 6765 745f 7061 6765 280a 2020 2020 2020  get_page(.      
+00018aa0: 2020 2020 2020 6c61 6d62 6461 2078 3a20        lambda x: 
+00018ab0: 782c 0a20 2020 2020 2020 2020 2020 206d  x,.            m
+00018ac0: 6172 6b65 722c 0a20 2020 2020 2020 2020  arker,.         
+00018ad0: 2020 206d 6178 5f69 7465 6d73 2c0a 2020     max_items,.  
+00018ae0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00018af0: 7265 7475 726e 204c 6973 7446 756e 6374  return ListFunct
+00018b00: 696f 6e73 4279 436f 6465 5369 676e 696e  ionsByCodeSignin
+00018b10: 6743 6f6e 6669 6752 6573 706f 6e73 6528  gConfigResponse(
+00018b20: 4675 6e63 7469 6f6e 4172 6e73 3d70 6167  FunctionArns=pag
+00018b30: 652c 204e 6578 744d 6172 6b65 723d 746f  e, NextMarker=to
+00018b40: 6b65 6e29 0a0a 2020 2020 2320 3d3d 3d3d  ken)..    # ====
+00018b50: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00018b60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00018b70: 3d3d 3d0a 2020 2020 2320 3d3d 3d3d 3d3d  ===.    # ======
+00018b80: 3d3d 3d20 2041 6363 6f75 6e74 2053 6574  ===  Account Set
+00018b90: 7469 6e67 7320 2020 3d3d 3d3d 3d3d 3d3d  tings   ========
+00018ba0: 3d0a 2020 2020 2320 3d3d 3d3d 3d3d 3d3d  =.    # ========
+00018bb0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00018bc0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a  ===============.
+00018bd0: 0a20 2020 2023 2043 4156 453a 2074 6865  .    # CAVE: the
+00018be0: 7365 2073 6574 7469 6e67 7320 2620 7573  se settings & us
+00018bf0: 6167 6573 2061 7265 202a 7065 722a 2072  ages are *per* r
+00018c00: 6567 696f 6e21 0a20 2020 2064 6566 2067  egion!.    def g
+00018c10: 6574 5f61 6363 6f75 6e74 5f73 6574 7469  et_account_setti
+00018c20: 6e67 7328 0a20 2020 2020 2020 2073 656c  ngs(.        sel
+00018c30: 662c 0a20 2020 2020 2020 2063 6f6e 7465  f,.        conte
+00018c40: 7874 3a20 5265 7175 6573 7443 6f6e 7465  xt: RequestConte
+00018c50: 7874 2c0a 2020 2020 2920 2d3e 2047 6574  xt,.    ) -> Get
+00018c60: 4163 636f 756e 7453 6574 7469 6e67 7352  AccountSettingsR
+00018c70: 6573 706f 6e73 653a 0a20 2020 2020 2020  esponse:.       
+00018c80: 2073 7461 7465 203d 206c 616d 6264 615f   state = lambda_
+00018c90: 7374 6f72 6573 5b63 6f6e 7465 7874 2e61  stores[context.a
+00018ca0: 6363 6f75 6e74 5f69 645d 5b63 6f6e 7465  ccount_id][conte
+00018cb0: 7874 2e72 6567 696f 6e5d 0a0a 2020 2020  xt.region]..    
+00018cc0: 2020 2020 666e 5f63 6f75 6e74 203d 2030      fn_count = 0
+00018cd0: 0a20 2020 2020 2020 2063 6f64 655f 7369  .        code_si
+00018ce0: 7a65 5f73 756d 203d 2030 0a20 2020 2020  ze_sum = 0.     
+00018cf0: 2020 2072 6573 6572 7665 645f 636f 6e63     reserved_conc
+00018d00: 7572 7265 6e63 795f 7375 6d20 3d20 300a  urrency_sum = 0.
+00018d10: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
+00018d20: 6669 7820 6361 6c63 756c 6174 696f 6e20  fix calculation 
+00018d30: 2873 6565 206c 616d 6264 6120 7365 7276  (see lambda serv
+00018d40: 6963 6520 6765 745f 6176 6169 6c61 626c  ice get_availabl
+00018d50: 655f 666e 5f63 6f6e 6375 7272 656e 6379  e_fn_concurrency
+00018d60: 2065 7463 290a 2020 2020 2020 2020 666f   etc).        fo
+00018d70: 7220 666e 2069 6e20 7374 6174 652e 6675  r fn in state.fu
+00018d80: 6e63 7469 6f6e 732e 7661 6c75 6573 2829  nctions.values()
+00018d90: 3a0a 2020 2020 2020 2020 2020 2020 666e  :.            fn
+00018da0: 5f63 6f75 6e74 202b 3d20 310a 2020 2020  _count += 1.    
+00018db0: 2020 2020 2020 2020 666f 7220 666e 5f76          for fn_v
+00018dc0: 6572 7369 6f6e 2069 6e20 666e 2e76 6572  ersion in fn.ver
+00018dd0: 7369 6f6e 732e 7661 6c75 6573 2829 3a0a  sions.values():.
+00018de0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018df0: 636f 6465 5f73 697a 655f 7375 6d20 2b3d  code_size_sum +=
+00018e00: 2066 6e5f 7665 7273 696f 6e2e 636f 6e66   fn_version.conf
+00018e10: 6967 2e63 6f64 652e 636f 6465 5f73 697a  ig.code.code_siz
+00018e20: 650a 2020 2020 2020 2020 2020 2020 6966  e.            if
+00018e30: 2066 6e2e 7265 7365 7276 6564 5f63 6f6e   fn.reserved_con
+00018e40: 6375 7272 656e 745f 6578 6563 7574 696f  current_executio
+00018e50: 6e73 2069 7320 6e6f 7420 4e6f 6e65 3a0a  ns is not None:.
+00018e60: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018e70: 7265 7365 7276 6564 5f63 6f6e 6375 7272  reserved_concurr
+00018e80: 656e 6379 5f73 756d 202b 3d20 666e 2e72  ency_sum += fn.r
+00018e90: 6573 6572 7665 645f 636f 6e63 7572 7265  eserved_concurre
+00018ea0: 6e74 5f65 7865 6375 7469 6f6e 730a 2020  nt_executions.  
+00018eb0: 2020 2020 2020 2020 2020 666f 7220 6320            for c 
+00018ec0: 696e 2066 6e2e 7072 6f76 6973 696f 6e65  in fn.provisione
+00018ed0: 645f 636f 6e63 7572 7265 6e63 795f 636f  d_concurrency_co
+00018ee0: 6e66 6967 732e 7661 6c75 6573 2829 3a0a  nfigs.values():.
+00018ef0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00018f00: 7265 7365 7276 6564 5f63 6f6e 6375 7272  reserved_concurr
+00018f10: 656e 6379 5f73 756d 202b 3d20 632e 7072  ency_sum += c.pr
+00018f20: 6f76 6973 696f 6e65 645f 636f 6e63 7572  ovisioned_concur
+00018f30: 7265 6e74 5f65 7865 6375 7469 6f6e 730a  rent_executions.
+00018f40: 2020 2020 2020 2020 666f 7220 6c61 7965          for laye
+00018f50: 7220 696e 2073 7461 7465 2e6c 6179 6572  r in state.layer
+00018f60: 732e 7661 6c75 6573 2829 3a0a 2020 2020  s.values():.    
+00018f70: 2020 2020 2020 2020 666f 7220 6c61 7965          for laye
+00018f80: 725f 7665 7273 696f 6e20 696e 206c 6179  r_version in lay
+00018f90: 6572 2e6c 6179 6572 5f76 6572 7369 6f6e  er.layer_version
+00018fa0: 732e 7661 6c75 6573 2829 3a0a 2020 2020  s.values():.    
+00018fb0: 2020 2020 2020 2020 2020 2020 636f 6465              code
+00018fc0: 5f73 697a 655f 7375 6d20 2b3d 206c 6179  _size_sum += lay
+00018fd0: 6572 5f76 6572 7369 6f6e 2e63 6f64 652e  er_version.code.
+00018fe0: 636f 6465 5f73 697a 650a 2020 2020 2020  code_size.      
+00018ff0: 2020 7265 7475 726e 2047 6574 4163 636f    return GetAcco
+00019000: 756e 7453 6574 7469 6e67 7352 6573 706f  untSettingsRespo
+00019010: 6e73 6528 0a20 2020 2020 2020 2020 2020  nse(.           
+00019020: 2041 6363 6f75 6e74 4c69 6d69 743d 4163   AccountLimit=Ac
+00019030: 636f 756e 744c 696d 6974 280a 2020 2020  countLimit(.    
+00019040: 2020 2020 2020 2020 2020 2020 546f 7461              Tota
+00019050: 6c43 6f64 6553 697a 653d 636f 6e66 6967  lCodeSize=config
+00019060: 2e4c 414d 4244 415f 4c49 4d49 5453 5f54  .LAMBDA_LIMITS_T
+00019070: 4f54 414c 5f43 4f44 455f 5349 5a45 2c0a  OTAL_CODE_SIZE,.
+00019080: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019090: 436f 6465 5369 7a65 5a69 7070 6564 3d63  CodeSizeZipped=c
+000190a0: 6f6e 6669 672e 4c41 4d42 4441 5f4c 494d  onfig.LAMBDA_LIM
+000190b0: 4954 535f 434f 4445 5f53 495a 455f 5a49  ITS_CODE_SIZE_ZI
+000190c0: 5050 4544 2c0a 2020 2020 2020 2020 2020  PPED,.          
+000190d0: 2020 2020 2020 436f 6465 5369 7a65 556e        CodeSizeUn
+000190e0: 7a69 7070 6564 3d63 6f6e 6669 672e 4c41  zipped=config.LA
+000190f0: 4d42 4441 5f4c 494d 4954 535f 434f 4445  MBDA_LIMITS_CODE
+00019100: 5f53 495a 455f 554e 5a49 5050 4544 2c0a  _SIZE_UNZIPPED,.
+00019110: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019120: 436f 6e63 7572 7265 6e74 4578 6563 7574  ConcurrentExecut
+00019130: 696f 6e73 3d63 6f6e 6669 672e 4c41 4d42  ions=config.LAMB
+00019140: 4441 5f4c 494d 4954 535f 434f 4e43 5552  DA_LIMITS_CONCUR
+00019150: 5245 4e54 5f45 5845 4355 5449 4f4e 532c  RENT_EXECUTIONS,
+00019160: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00019170: 2055 6e72 6573 6572 7665 6443 6f6e 6375   UnreservedConcu
+00019180: 7272 656e 7445 7865 6375 7469 6f6e 733d  rrentExecutions=
+00019190: 636f 6e66 6967 2e4c 414d 4244 415f 4c49  config.LAMBDA_LI
+000191a0: 4d49 5453 5f43 4f4e 4355 5252 454e 545f  MITS_CONCURRENT_
+000191b0: 4558 4543 5554 494f 4e53 0a20 2020 2020  EXECUTIONS.     
+000191c0: 2020 2020 2020 2020 2020 202d 2072 6573             - res
+000191d0: 6572 7665 645f 636f 6e63 7572 7265 6e63  erved_concurrenc
+000191e0: 795f 7375 6d2c 0a20 2020 2020 2020 2020  y_sum,.         
+000191f0: 2020 2029 2c0a 2020 2020 2020 2020 2020     ),.          
+00019200: 2020 4163 636f 756e 7455 7361 6765 3d41    AccountUsage=A
+00019210: 6363 6f75 6e74 5573 6167 6528 0a20 2020  ccountUsage(.   
+00019220: 2020 2020 2020 2020 2020 2020 2054 6f74               Tot
+00019230: 616c 436f 6465 5369 7a65 3d63 6f64 655f  alCodeSize=code_
+00019240: 7369 7a65 5f73 756d 2c0a 2020 2020 2020  size_sum,.      
+00019250: 2020 2020 2020 2020 2020 4675 6e63 7469            Functi
+00019260: 6f6e 436f 756e 743d 666e 5f63 6f75 6e74  onCount=fn_count
+00019270: 2c0a 2020 2020 2020 2020 2020 2020 292c  ,.            ),
+00019280: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+00019290: 2320 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  # ==============
+000192a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000192b0: 3d3d 3d3d 3d3d 3d3d 3d0a 2020 2020 2320  =========.    # 
+000192c0: 3d3d 2020 5072 6f76 6973 696f 6e65 6420  ==  Provisioned 
+000192d0: 436f 6e63 7572 7265 6e63 7920 436f 6e66  Concurrency Conf
+000192e0: 6967 2020 203d 3d0a 2020 2020 2320 3d3d  ig   ==.    # ==
+000192f0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00019300: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00019310: 3d3d 3d3d 3d0a 0a20 2020 2064 6566 205f  =====..    def _
+00019320: 6765 745f 7072 6f76 6973 696f 6e65 645f  get_provisioned_
+00019330: 636f 6e66 6967 280a 2020 2020 2020 2020  config(.        
+00019340: 7365 6c66 2c20 636f 6e74 6578 743a 2052  self, context: R
+00019350: 6571 7565 7374 436f 6e74 6578 742c 2066  equestContext, f
+00019360: 756e 6374 696f 6e5f 6e61 6d65 3a20 7374  unction_name: st
+00019370: 722c 2071 7561 6c69 6669 6572 3a20 7374  r, qualifier: st
+00019380: 720a 2020 2020 2920 2d3e 2050 726f 7669  r.    ) -> Provi
+00019390: 7369 6f6e 6564 436f 6e63 7572 7265 6e63  sionedConcurrenc
+000193a0: 7943 6f6e 6669 6775 7261 7469 6f6e 207c  yConfiguration |
+000193b0: 204e 6f6e 653a 0a20 2020 2020 2020 2073   None:.        s
+000193c0: 7461 7465 203d 206c 616d 6264 615f 7374  tate = lambda_st
+000193d0: 6f72 6573 5b63 6f6e 7465 7874 2e61 6363  ores[context.acc
+000193e0: 6f75 6e74 5f69 645d 5b63 6f6e 7465 7874  ount_id][context
+000193f0: 2e72 6567 696f 6e5d 0a20 2020 2020 2020  .region].       
+00019400: 2066 6e20 3d20 7374 6174 652e 6675 6e63   fn = state.func
+00019410: 7469 6f6e 732e 6765 7428 6675 6e63 7469  tions.get(functi
+00019420: 6f6e 5f6e 616d 6529 0a20 2020 2020 2020  on_name).       
+00019430: 2069 6620 6170 695f 7574 696c 732e 7175   if api_utils.qu
+00019440: 616c 6966 6965 725f 6973 5f61 6c69 6173  alifier_is_alias
+00019450: 2871 7561 6c69 6669 6572 293a 0a20 2020  (qualifier):.   
+00019460: 2020 2020 2020 2020 2066 6e5f 616c 6961           fn_alia
+00019470: 7320 3d20 4e6f 6e65 0a20 2020 2020 2020  s = None.       
+00019480: 2020 2020 2069 6620 666e 3a0a 2020 2020       if fn:.    
+00019490: 2020 2020 2020 2020 2020 2020 666e 5f61              fn_a
+000194a0: 6c69 6173 203d 2066 6e2e 616c 6961 7365  lias = fn.aliase
+000194b0: 732e 6765 7428 7175 616c 6966 6965 7229  s.get(qualifier)
+000194c0: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
+000194d0: 666e 5f61 6c69 6173 2069 7320 4e6f 6e65  fn_alias is None
+000194e0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
+000194f0: 2020 7261 6973 6520 5265 736f 7572 6365    raise Resource
+00019500: 4e6f 7446 6f75 6e64 4578 6365 7074 696f  NotFoundExceptio
+00019510: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+00019520: 2020 2020 2020 2066 2243 616e 6e6f 7420         f"Cannot 
+00019530: 6669 6e64 2061 6c69 6173 2061 726e 3a20  find alias arn: 
+00019540: 7b61 7069 5f75 7469 6c73 2e71 7561 6c69  {api_utils.quali
+00019550: 6669 6564 5f6c 616d 6264 615f 6172 6e28  fied_lambda_arn(
+00019560: 6675 6e63 7469 6f6e 5f6e 616d 652c 2071  function_name, q
+00019570: 7561 6c69 6669 6572 2c20 636f 6e74 6578  ualifier, contex
+00019580: 742e 6163 636f 756e 745f 6964 2c20 636f  t.account_id, co
+00019590: 6e74 6578 742e 7265 6769 6f6e 297d 222c  ntext.region)}",
+000195a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000195b0: 2020 2020 2054 7970 653d 2255 7365 7222       Type="User"
+000195c0: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+000195d0: 2020 290a 2020 2020 2020 2020 656c 6966    ).        elif
+000195e0: 2061 7069 5f75 7469 6c73 2e71 7561 6c69   api_utils.quali
+000195f0: 6669 6572 5f69 735f 7665 7273 696f 6e28  fier_is_version(
+00019600: 7175 616c 6966 6965 7229 3a0a 2020 2020  qualifier):.    
+00019610: 2020 2020 2020 2020 666e 5f76 6572 7369          fn_versi
+00019620: 6f6e 203d 204e 6f6e 650a 2020 2020 2020  on = None.      
+00019630: 2020 2020 2020 6966 2066 6e3a 0a20 2020        if fn:.   
+00019640: 2020 2020 2020 2020 2020 2020 2066 6e5f               fn_
+00019650: 7665 7273 696f 6e20 3d20 666e 2e76 6572  version = fn.ver
+00019660: 7369 6f6e 732e 6765 7428 7175 616c 6966  sions.get(qualif
+00019670: 6965 7229 0a20 2020 2020 2020 2020 2020  ier).           
+00019680: 2069 6620 666e 5f76 6572 7369 6f6e 2069   if fn_version i
+00019690: 7320 4e6f 6e65 3a0a 2020 2020 2020 2020  s None:.        
+000196a0: 2020 2020 2020 2020 7261 6973 6520 5265          raise Re
+000196b0: 736f 7572 6365 4e6f 7446 6f75 6e64 4578  sourceNotFoundEx
+000196c0: 6365 7074 696f 6e28 0a20 2020 2020 2020  ception(.       
+000196d0: 2020 2020 2020 2020 2020 2020 2066 2246               f"F
+000196e0: 756e 6374 696f 6e20 6e6f 7420 666f 756e  unction not foun
+000196f0: 643a 207b 6170 695f 7574 696c 732e 7175  d: {api_utils.qu
+00019700: 616c 6966 6965 645f 6c61 6d62 6461 5f61  alified_lambda_a
+00019710: 726e 2866 756e 6374 696f 6e5f 6e61 6d65  rn(function_name
+00019720: 2c20 7175 616c 6966 6965 722c 2063 6f6e  , qualifier, con
+00019730: 7465 7874 2e61 6363 6f75 6e74 5f69 642c  text.account_id,
+00019740: 2063 6f6e 7465 7874 2e72 6567 696f 6e29   context.region)
+00019750: 7d22 2c0a 2020 2020 2020 2020 2020 2020  }",.            
+00019760: 2020 2020 2020 2020 5479 7065 3d22 5573          Type="Us
+00019770: 6572 222c 0a20 2020 2020 2020 2020 2020  er",.           
+00019780: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00019790: 7265 7475 726e 2066 6e2e 7072 6f76 6973  return fn.provis
+000197a0: 696f 6e65 645f 636f 6e63 7572 7265 6e63  ioned_concurrenc
+000197b0: 795f 636f 6e66 6967 732e 6765 7428 7175  y_configs.get(qu
+000197c0: 616c 6966 6965 7229 0a0a 2020 2020 6465  alifier)..    de
+000197d0: 6620 7075 745f 7072 6f76 6973 696f 6e65  f put_provisione
+000197e0: 645f 636f 6e63 7572 7265 6e63 795f 636f  d_concurrency_co
+000197f0: 6e66 6967 280a 2020 2020 2020 2020 7365  nfig(.        se
+00019800: 6c66 2c0a 2020 2020 2020 2020 636f 6e74  lf,.        cont
+00019810: 6578 743a 2052 6571 7565 7374 436f 6e74  ext: RequestCont
+00019820: 6578 742c 0a20 2020 2020 2020 2066 756e  ext,.        fun
+00019830: 6374 696f 6e5f 6e61 6d65 3a20 4675 6e63  ction_name: Func
+00019840: 7469 6f6e 4e61 6d65 2c0a 2020 2020 2020  tionName,.      
+00019850: 2020 7175 616c 6966 6965 723a 2051 7561    qualifier: Qua
+00019860: 6c69 6669 6572 2c0a 2020 2020 2020 2020  lifier,.        
+00019870: 7072 6f76 6973 696f 6e65 645f 636f 6e63  provisioned_conc
+00019880: 7572 7265 6e74 5f65 7865 6375 7469 6f6e  urrent_execution
+00019890: 733a 2050 6f73 6974 6976 6549 6e74 6567  s: PositiveInteg
+000198a0: 6572 2c0a 2020 2020 2920 2d3e 2050 7574  er,.    ) -> Put
+000198b0: 5072 6f76 6973 696f 6e65 6443 6f6e 6375  ProvisionedConcu
+000198c0: 7272 656e 6379 436f 6e66 6967 5265 7370  rrencyConfigResp
+000198d0: 6f6e 7365 3a0a 2020 2020 2020 2020 6966  onse:.        if
+000198e0: 2070 726f 7669 7369 6f6e 6564 5f63 6f6e   provisioned_con
+000198f0: 6375 7272 656e 745f 6578 6563 7574 696f  current_executio
+00019900: 6e73 203c 3d20 303a 0a20 2020 2020 2020  ns <= 0:.       
+00019910: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
+00019920: 6174 696f 6e45 7863 6570 7469 6f6e 280a  ationException(.
+00019930: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00019940: 6622 3120 7661 6c69 6461 7469 6f6e 2065  f"1 validation e
+00019950: 7272 6f72 2064 6574 6563 7465 643a 2056  rror detected: V
+00019960: 616c 7565 2027 7b70 726f 7669 7369 6f6e  alue '{provision
+00019970: 6564 5f63 6f6e 6375 7272 656e 745f 6578  ed_concurrent_ex
+00019980: 6563 7574 696f 6e73 7d27 2061 7420 2770  ecutions}' at 'p
+00019990: 726f 7669 7369 6f6e 6564 436f 6e63 7572  rovisionedConcur
+000199a0: 7265 6e74 4578 6563 7574 696f 6e73 2720  rentExecutions' 
+000199b0: 6661 696c 6564 2074 6f20 7361 7469 7366  failed to satisf
+000199c0: 7920 636f 6e73 7472 6169 6e74 3a20 4d65  y constraint: Me
+000199d0: 6d62 6572 206d 7573 7420 6861 7665 2076  mber must have v
+000199e0: 616c 7565 2067 7265 6174 6572 2074 6861  alue greater tha
+000199f0: 6e20 6f72 2065 7175 616c 2074 6f20 3122  n or equal to 1"
+00019a00: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
+00019a10: 2020 2020 2020 2020 6966 2071 7561 6c69          if quali
+00019a20: 6669 6572 203d 3d20 2224 4c41 5445 5354  fier == "$LATEST
+00019a30: 223a 0a20 2020 2020 2020 2020 2020 2072  ":.            r
+00019a40: 6169 7365 2049 6e76 616c 6964 5061 7261  aise InvalidPara
+00019a50: 6d65 7465 7256 616c 7565 4578 6365 7074  meterValueExcept
+00019a60: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
+00019a70: 2020 2020 2022 5072 6f76 6973 696f 6e65       "Provisione
+00019a80: 6420 436f 6e63 7572 7265 6e63 7920 436f  d Concurrency Co
+00019a90: 6e66 6967 7320 6361 6e6e 6f74 2062 6520  nfigs cannot be 
+00019aa0: 6170 706c 6965 6420 746f 2075 6e70 7562  applied to unpub
+00019ab0: 6c69 7368 6564 2066 756e 6374 696f 6e20  lished function 
+00019ac0: 7665 7273 696f 6e73 2e22 2c0a 2020 2020  versions.",.    
+00019ad0: 2020 2020 2020 2020 2020 2020 5479 7065              Type
+00019ae0: 3d22 5573 6572 222c 0a20 2020 2020 2020  ="User",.       
+00019af0: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00019b00: 6675 6e63 7469 6f6e 5f6e 616d 652c 2071  function_name, q
+00019b10: 7561 6c69 6669 6572 203d 2061 7069 5f75  ualifier = api_u
+00019b20: 7469 6c73 2e67 6574 5f6e 616d 655f 616e  tils.get_name_an
+00019b30: 645f 7175 616c 6966 6965 7228 0a20 2020  d_qualifier(.   
+00019b40: 2020 2020 2020 2020 2066 756e 6374 696f           functio
+00019b50: 6e5f 6e61 6d65 2c20 7175 616c 6966 6965  n_name, qualifie
+00019b60: 722c 2063 6f6e 7465 7874 2e72 6567 696f  r, context.regio
+00019b70: 6e0a 2020 2020 2020 2020 290a 2020 2020  n.        ).    
+00019b80: 2020 2020 7374 6174 6520 3d20 6c61 6d62      state = lamb
+00019b90: 6461 5f73 746f 7265 735b 636f 6e74 6578  da_stores[contex
+00019ba0: 742e 6163 636f 756e 745f 6964 5d5b 636f  t.account_id][co
+00019bb0: 6e74 6578 742e 7265 6769 6f6e 5d0a 2020  ntext.region].  
+00019bc0: 2020 2020 2020 666e 203d 2073 7461 7465        fn = state
+00019bd0: 2e66 756e 6374 696f 6e73 2e67 6574 2866  .functions.get(f
+00019be0: 756e 6374 696f 6e5f 6e61 6d65 290a 0a20  unction_name).. 
+00019bf0: 2020 2020 2020 2070 726f 7669 7369 6f6e         provision
+00019c00: 6564 5f63 6f6e 6669 6720 3d20 7365 6c66  ed_config = self
+00019c10: 2e5f 6765 745f 7072 6f76 6973 696f 6e65  ._get_provisione
+00019c20: 645f 636f 6e66 6967 2863 6f6e 7465 7874  d_config(context
+00019c30: 2c20 6675 6e63 7469 6f6e 5f6e 616d 652c  , function_name,
+00019c40: 2071 7561 6c69 6669 6572 290a 0a20 2020   qualifier)..   
+00019c50: 2020 2020 2069 6620 7072 6f76 6973 696f       if provisio
+00019c60: 6e65 645f 636f 6e66 6967 3a20 2023 2054  ned_config:  # T
+00019c70: 4f44 4f3a 206d 6572 6765 3f0a 2020 2020  ODO: merge?.    
+00019c80: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
+00019c90: 6164 6420 6120 7465 7374 2066 6f72 2070  add a test for p
+00019ca0: 6172 7469 616c 2075 7064 6174 6573 2028  artial updates (
+00019cb0: 6966 2070 6f73 7369 626c 6529 0a20 2020  if possible).   
+00019cc0: 2020 2020 2020 2020 204c 4f47 2e77 6172           LOG.war
+00019cd0: 6e69 6e67 280a 2020 2020 2020 2020 2020  ning(.          
+00019ce0: 2020 2020 2020 2250 6172 7469 616c 2075        "Partial u
+00019cf0: 7064 6174 6520 6f66 2070 726f 7669 7369  pdate of provisi
+00019d00: 6f6e 6564 2063 6f6e 6375 7272 656e 6379  oned concurrency
+00019d10: 2063 6f6e 6669 6720 6973 2063 7572 7265   config is curre
+00019d20: 6e74 6c79 206e 6f74 2073 7570 706f 7274  ntly not support
+00019d30: 6564 2e22 0a20 2020 2020 2020 2020 2020  ed.".           
+00019d40: 2029 0a0a 2020 2020 2020 2020 6f74 6865   )..        othe
+00019d50: 725f 7072 6f76 6973 696f 6e65 645f 7375  r_provisioned_su
+00019d60: 6d20 3d20 7375 6d28 0a20 2020 2020 2020  m = sum(.       
+00019d70: 2020 2020 205b 0a20 2020 2020 2020 2020       [.         
+00019d80: 2020 2020 2020 2070 726f 7669 7369 6f6e         provision
+00019d90: 6564 5f63 6f6e 6669 6773 2e70 726f 7669  ed_configs.provi
+00019da0: 7369 6f6e 6564 5f63 6f6e 6375 7272 656e  sioned_concurren
+00019db0: 745f 6578 6563 7574 696f 6e73 0a20 2020  t_executions.   
+00019dc0: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00019dd0: 2070 726f 7669 7369 6f6e 6564 5f71 7561   provisioned_qua
+00019de0: 6c69 6669 6572 2c20 7072 6f76 6973 696f  lifier, provisio
+00019df0: 6e65 645f 636f 6e66 6967 7320 696e 2066  ned_configs in f
+00019e00: 6e2e 7072 6f76 6973 696f 6e65 645f 636f  n.provisioned_co
+00019e10: 6e63 7572 7265 6e63 795f 636f 6e66 6967  ncurrency_config
+00019e20: 732e 6974 656d 7328 290a 2020 2020 2020  s.items().      
+00019e30: 2020 2020 2020 2020 2020 6966 2070 726f            if pro
+00019e40: 7669 7369 6f6e 6564 5f71 7561 6c69 6669  visioned_qualifi
+00019e50: 6572 2021 3d20 7175 616c 6966 6965 720a  er != qualifier.
+00019e60: 2020 2020 2020 2020 2020 2020 5d0a 2020              ].  
+00019e70: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+00019e80: 2069 6620 280a 2020 2020 2020 2020 2020   if (.          
+00019e90: 2020 666e 2e72 6573 6572 7665 645f 636f    fn.reserved_co
+00019ea0: 6e63 7572 7265 6e74 5f65 7865 6375 7469  ncurrent_executi
+00019eb0: 6f6e 7320 6973 206e 6f74 204e 6f6e 650a  ons is not None.
+00019ec0: 2020 2020 2020 2020 2020 2020 616e 6420              and 
+00019ed0: 666e 2e72 6573 6572 7665 645f 636f 6e63  fn.reserved_conc
+00019ee0: 7572 7265 6e74 5f65 7865 6375 7469 6f6e  urrent_execution
+00019ef0: 730a 2020 2020 2020 2020 2020 2020 3c20  s.            < 
+00019f00: 6f74 6865 725f 7072 6f76 6973 696f 6e65  other_provisione
+00019f10: 645f 7375 6d20 2b20 7072 6f76 6973 696f  d_sum + provisio
+00019f20: 6e65 645f 636f 6e63 7572 7265 6e74 5f65  ned_concurrent_e
+00019f30: 7865 6375 7469 6f6e 730a 2020 2020 2020  xecutions.      
+00019f40: 2020 293a 0a20 2020 2020 2020 2020 2020    ):.           
+00019f50: 2072 6169 7365 2049 6e76 616c 6964 5061   raise InvalidPa
+00019f60: 7261 6d65 7465 7256 616c 7565 4578 6365  rameterValueExce
+00019f70: 7074 696f 6e28 0a20 2020 2020 2020 2020  ption(.         
+00019f80: 2020 2020 2020 2022 5265 7175 6573 7465         "Requeste
+00019f90: 6420 5072 6f76 6973 696f 6e65 6420 436f  d Provisioned Co
+00019fa0: 6e63 7572 7265 6e63 7920 7368 6f75 6c64  ncurrency should
+00019fb0: 206e 6f74 2062 6520 6772 6561 7465 7220   not be greater 
+00019fc0: 7468 616e 2074 6865 2072 6573 6572 7665  than the reserve
+00019fd0: 6443 6f6e 6375 7272 656e 7445 7865 6375  dConcurrentExecu
+00019fe0: 7469 6f6e 2066 6f72 2066 756e 6374 696f  tion for functio
+00019ff0: 6e22 2c0a 2020 2020 2020 2020 2020 2020  n",.            
+0001a000: 2020 2020 5479 7065 3d22 5573 6572 222c      Type="User",
+0001a010: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
+0001a020: 2020 2020 2020 2020 7072 6f76 6973 696f          provisio
+0001a030: 6e65 645f 636f 6e66 6967 203d 2050 726f  ned_config = Pro
+0001a040: 7669 7369 6f6e 6564 436f 6e63 7572 7265  visionedConcurre
+0001a050: 6e63 7943 6f6e 6669 6775 7261 7469 6f6e  ncyConfiguration
+0001a060: 280a 2020 2020 2020 2020 2020 2020 7072  (.            pr
+0001a070: 6f76 6973 696f 6e65 645f 636f 6e63 7572  ovisioned_concur
+0001a080: 7265 6e74 5f65 7865 6375 7469 6f6e 732c  rent_executions,
+0001a090: 2061 7069 5f75 7469 6c73 2e67 656e 6572   api_utils.gener
+0001a0a0: 6174 655f 6c61 6d62 6461 5f64 6174 6528  ate_lambda_date(
+0001a0b0: 290a 2020 2020 2020 2020 290a 2020 2020  ).        ).    
+0001a0c0: 2020 2020 666e 5f61 726e 203d 2061 7069      fn_arn = api
+0001a0d0: 5f75 7469 6c73 2e71 7561 6c69 6669 6564  _utils.qualified
+0001a0e0: 5f6c 616d 6264 615f 6172 6e28 0a20 2020  _lambda_arn(.   
+0001a0f0: 2020 2020 2020 2020 2066 756e 6374 696f           functio
+0001a100: 6e5f 6e61 6d65 2c20 7175 616c 6966 6965  n_name, qualifie
+0001a110: 722c 2063 6f6e 7465 7874 2e61 6363 6f75  r, context.accou
+0001a120: 6e74 5f69 642c 2063 6f6e 7465 7874 2e72  nt_id, context.r
+0001a130: 6567 696f 6e0a 2020 2020 2020 2020 290a  egion.        ).
+0001a140: 0a20 2020 2020 2020 2069 6620 6170 695f  .        if api_
+0001a150: 7574 696c 732e 7175 616c 6966 6965 725f  utils.qualifier_
+0001a160: 6973 5f61 6c69 6173 2871 7561 6c69 6669  is_alias(qualifi
+0001a170: 6572 293a 0a20 2020 2020 2020 2020 2020  er):.           
+0001a180: 2061 6c69 6173 203d 2066 6e2e 616c 6961   alias = fn.alia
+0001a190: 7365 732e 6765 7428 7175 616c 6966 6965  ses.get(qualifie
+0001a1a0: 7229 0a20 2020 2020 2020 2020 2020 2072  r).            r
+0001a1b0: 6573 6f6c 7665 645f 7665 7273 696f 6e20  esolved_version 
+0001a1c0: 3d20 666e 2e76 6572 7369 6f6e 732e 6765  = fn.versions.ge
+0001a1d0: 7428 616c 6961 732e 6675 6e63 7469 6f6e  t(alias.function
+0001a1e0: 5f76 6572 7369 6f6e 290a 0a20 2020 2020  _version)..     
+0001a1f0: 2020 2020 2020 2069 6620 280a 2020 2020         if (.    
+0001a200: 2020 2020 2020 2020 2020 2020 7265 736f              reso
+0001a210: 6c76 6564 5f76 6572 7369 6f6e 0a20 2020  lved_version.   
+0001a220: 2020 2020 2020 2020 2020 2020 2061 6e64               and
+0001a230: 2066 6e2e 7072 6f76 6973 696f 6e65 645f   fn.provisioned_
+0001a240: 636f 6e63 7572 7265 6e63 795f 636f 6e66  concurrency_conf
+0001a250: 6967 732e 6765 7428 616c 6961 732e 6675  igs.get(alias.fu
+0001a260: 6e63 7469 6f6e 5f76 6572 7369 6f6e 2920  nction_version) 
+0001a270: 6973 206e 6f74 204e 6f6e 650a 2020 2020  is not None.    
+0001a280: 2020 2020 2020 2020 293a 0a20 2020 2020          ):.     
+0001a290: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0001a2a0: 2052 6573 6f75 7263 6543 6f6e 666c 6963   ResourceConflic
+0001a2b0: 7445 7863 6570 7469 6f6e 280a 2020 2020  tException(.    
+0001a2c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a2d0: 2241 6c69 6173 2063 616e 2774 2062 6520  "Alias can't be 
+0001a2e0: 7573 6564 2066 6f72 2050 726f 7669 7369  used for Provisi
+0001a2f0: 6f6e 6564 2043 6f6e 6375 7272 656e 6379  oned Concurrency
+0001a300: 2063 6f6e 6669 6775 7261 7469 6f6e 206f   configuration o
+0001a310: 6e20 616e 2061 6c72 6561 6479 2050 726f  n an already Pro
+0001a320: 7669 7369 6f6e 6564 2076 6572 7369 6f6e  visioned version
+0001a330: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+0001a340: 2020 2020 2020 2054 7970 653d 2255 7365         Type="Use
+0001a350: 7222 2c0a 2020 2020 2020 2020 2020 2020  r",.            
+0001a360: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+0001a370: 2020 666e 5f61 726e 203d 2072 6573 6f6c    fn_arn = resol
+0001a380: 7665 645f 7665 7273 696f 6e2e 6964 2e71  ved_version.id.q
+0001a390: 7561 6c69 6669 6564 5f61 726e 2829 0a20  ualified_arn(). 
+0001a3a0: 2020 2020 2020 2065 6c69 6620 6170 695f         elif api_
+0001a3b0: 7574 696c 732e 7175 616c 6966 6965 725f  utils.qualifier_
+0001a3c0: 6973 5f76 6572 7369 6f6e 2871 7561 6c69  is_version(quali
+0001a3d0: 6669 6572 293a 0a20 2020 2020 2020 2020  fier):.         
+0001a3e0: 2020 2066 6e5f 7665 7273 696f 6e20 3d20     fn_version = 
+0001a3f0: 666e 2e76 6572 7369 6f6e 732e 6765 7428  fn.versions.get(
+0001a400: 7175 616c 6966 6965 7229 0a0a 2020 2020  qualifier)..    
+0001a410: 2020 2020 2020 2020 2320 544f 444f 3a20          # TODO: 
+0001a420: 6d69 6768 7420 6265 2075 7365 6675 6c20  might be useful 
+0001a430: 6f74 6865 7220 706c 6163 6573 2c20 7574  other places, ut
+0001a440: 696c 697a 650a 2020 2020 2020 2020 2020  ilize.          
+0001a450: 2020 706f 696e 7469 6e67 5f61 6c69 6173    pointing_alias
+0001a460: 6573 203d 205b 5d0a 2020 2020 2020 2020  es = [].        
+0001a470: 2020 2020 666f 7220 616c 6961 7320 696e      for alias in
+0001a480: 2066 6e2e 616c 6961 7365 732e 7661 6c75   fn.aliases.valu
+0001a490: 6573 2829 3a0a 2020 2020 2020 2020 2020  es():.          
+0001a4a0: 2020 2020 2020 6966 2028 0a20 2020 2020        if (.     
+0001a4b0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0001a4c0: 6c69 6173 2e66 756e 6374 696f 6e5f 7665  lias.function_ve
+0001a4d0: 7273 696f 6e20 3d3d 2071 7561 6c69 6669  rsion == qualifi
+0001a4e0: 6572 0a20 2020 2020 2020 2020 2020 2020  er.             
+0001a4f0: 2020 2020 2020 2061 6e64 2066 6e2e 7072         and fn.pr
+0001a500: 6f76 6973 696f 6e65 645f 636f 6e63 7572  ovisioned_concur
+0001a510: 7265 6e63 795f 636f 6e66 6967 732e 6765  rency_configs.ge
+0001a520: 7428 616c 6961 732e 6e61 6d65 2920 6973  t(alias.name) is
+0001a530: 206e 6f74 204e 6f6e 650a 2020 2020 2020   not None.      
+0001a540: 2020 2020 2020 2020 2020 293a 0a20 2020            ):.   
+0001a550: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a560: 2070 6f69 6e74 696e 675f 616c 6961 7365   pointing_aliase
+0001a570: 732e 6170 7065 6e64 2861 6c69 6173 2e6e  s.append(alias.n
+0001a580: 616d 6529 0a20 2020 2020 2020 2020 2020  ame).           
+0001a590: 2069 6620 706f 696e 7469 6e67 5f61 6c69   if pointing_ali
+0001a5a0: 6173 6573 3a0a 2020 2020 2020 2020 2020  ases:.          
+0001a5b0: 2020 2020 2020 7261 6973 6520 5265 736f        raise Reso
+0001a5c0: 7572 6365 436f 6e66 6c69 6374 4578 6365  urceConflictExce
+0001a5d0: 7074 696f 6e28 0a20 2020 2020 2020 2020  ption(.         
+0001a5e0: 2020 2020 2020 2020 2020 2022 5665 7273             "Vers
+0001a5f0: 696f 6e20 6973 2070 6f69 6e74 6564 2062  ion is pointed b
+0001a600: 7920 6120 5072 6f76 6973 696f 6e65 6420  y a Provisioned 
+0001a610: 436f 6e63 7572 7265 6e63 7920 616c 6961  Concurrency alia
+0001a620: 7322 2c20 5479 7065 3d22 5573 6572 220a  s", Type="User".
+0001a630: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001a640: 290a 0a20 2020 2020 2020 2020 2020 2066  )..            f
+0001a650: 6e5f 6172 6e20 3d20 666e 5f76 6572 7369  n_arn = fn_versi
+0001a660: 6f6e 2e69 642e 7175 616c 6966 6965 645f  on.id.qualified_
+0001a670: 6172 6e28 290a 0a20 2020 2020 2020 206d  arn()..        m
+0001a680: 616e 6167 6572 203d 2073 656c 662e 6c61  anager = self.la
+0001a690: 6d62 6461 5f73 6572 7669 6365 2e67 6574  mbda_service.get
+0001a6a0: 5f6c 616d 6264 615f 7665 7273 696f 6e5f  _lambda_version_
+0001a6b0: 6d61 6e61 6765 7228 666e 5f61 726e 290a  manager(fn_arn).
+0001a6c0: 0a20 2020 2020 2020 2066 6e2e 7072 6f76  .        fn.prov
+0001a6d0: 6973 696f 6e65 645f 636f 6e63 7572 7265  isioned_concurre
+0001a6e0: 6e63 795f 636f 6e66 6967 735b 7175 616c  ncy_configs[qual
+0001a6f0: 6966 6965 725d 203d 2070 726f 7669 7369  ifier] = provisi
+0001a700: 6f6e 6564 5f63 6f6e 6669 670a 0a20 2020  oned_config..   
+0001a710: 2020 2020 206d 616e 6167 6572 2e75 7064       manager.upd
+0001a720: 6174 655f 7072 6f76 6973 696f 6e65 645f  ate_provisioned_
+0001a730: 636f 6e63 7572 7265 6e63 795f 636f 6e66  concurrency_conf
+0001a740: 6967 280a 2020 2020 2020 2020 2020 2020  ig(.            
+0001a750: 7072 6f76 6973 696f 6e65 645f 636f 6e66  provisioned_conf
+0001a760: 6967 2e70 726f 7669 7369 6f6e 6564 5f63  ig.provisioned_c
+0001a770: 6f6e 6375 7272 656e 745f 6578 6563 7574  oncurrent_execut
+0001a780: 696f 6e73 0a20 2020 2020 2020 2029 0a0a  ions.        )..
+0001a790: 2020 2020 2020 2020 7265 7475 726e 2050          return P
+0001a7a0: 7574 5072 6f76 6973 696f 6e65 6443 6f6e  utProvisionedCon
+0001a7b0: 6375 7272 656e 6379 436f 6e66 6967 5265  currencyConfigRe
+0001a7c0: 7370 6f6e 7365 280a 2020 2020 2020 2020  sponse(.        
+0001a7d0: 2020 2020 5265 7175 6573 7465 6450 726f      RequestedPro
+0001a7e0: 7669 7369 6f6e 6564 436f 6e63 7572 7265  visionedConcurre
+0001a7f0: 6e74 4578 6563 7574 696f 6e73 3d70 726f  ntExecutions=pro
+0001a800: 7669 7369 6f6e 6564 5f63 6f6e 6669 672e  visioned_config.
+0001a810: 7072 6f76 6973 696f 6e65 645f 636f 6e63  provisioned_conc
+0001a820: 7572 7265 6e74 5f65 7865 6375 7469 6f6e  urrent_execution
+0001a830: 732c 0a20 2020 2020 2020 2020 2020 2041  s,.            A
+0001a840: 7661 696c 6162 6c65 5072 6f76 6973 696f  vailableProvisio
+0001a850: 6e65 6443 6f6e 6375 7272 656e 7445 7865  nedConcurrentExe
+0001a860: 6375 7469 6f6e 733d 302c 0a20 2020 2020  cutions=0,.     
+0001a870: 2020 2020 2020 2041 6c6c 6f63 6174 6564         Allocated
+0001a880: 5072 6f76 6973 696f 6e65 6443 6f6e 6375  ProvisionedConcu
+0001a890: 7272 656e 7445 7865 6375 7469 6f6e 733d  rrentExecutions=
+0001a8a0: 302c 0a20 2020 2020 2020 2020 2020 2053  0,.            S
+0001a8b0: 7461 7475 733d 5072 6f76 6973 696f 6e65  tatus=Provisione
+0001a8c0: 6443 6f6e 6375 7272 656e 6379 5374 6174  dConcurrencyStat
+0001a8d0: 7573 456e 756d 2e49 4e5f 5052 4f47 5245  usEnum.IN_PROGRE
+0001a8e0: 5353 2c0a 2020 2020 2020 2020 2020 2020  SS,.            
+0001a8f0: 2320 5374 6174 7573 5265 6173 6f6e 3d6d  # StatusReason=m
+0001a900: 616e 6167 6572 2e70 726f 7669 7369 6f6e  anager.provision
+0001a910: 6564 5f73 7461 7465 2e73 7461 7475 735f  ed_state.status_
+0001a920: 7265 6173 6f6e 2c0a 2020 2020 2020 2020  reason,.        
+0001a930: 2020 2020 4c61 7374 4d6f 6469 6669 6564      LastModified
+0001a940: 3d70 726f 7669 7369 6f6e 6564 5f63 6f6e  =provisioned_con
+0001a950: 6669 672e 6c61 7374 5f6d 6f64 6966 6965  fig.last_modifie
+0001a960: 642c 2020 2320 544f 444f 3a20 646f 6573  d,  # TODO: does
+0001a970: 2063 6861 6e67 6520 7769 7468 2063 6f6e   change with con
+0001a980: 6669 6775 7261 7469 6f6e 206f 7220 616c  figuration or al
+0001a990: 736f 2077 6974 6820 7374 6174 6520 6368  so with state ch
+0001a9a0: 616e 6765 733f 0a20 2020 2020 2020 2029  anges?.        )
+0001a9b0: 0a0a 2020 2020 6465 6620 6765 745f 7072  ..    def get_pr
+0001a9c0: 6f76 6973 696f 6e65 645f 636f 6e63 7572  ovisioned_concur
+0001a9d0: 7265 6e63 795f 636f 6e66 6967 280a 2020  rency_config(.  
+0001a9e0: 2020 2020 2020 7365 6c66 2c20 636f 6e74        self, cont
+0001a9f0: 6578 743a 2052 6571 7565 7374 436f 6e74  ext: RequestCont
+0001aa00: 6578 742c 2066 756e 6374 696f 6e5f 6e61  ext, function_na
+0001aa10: 6d65 3a20 4675 6e63 7469 6f6e 4e61 6d65  me: FunctionName
+0001aa20: 2c20 7175 616c 6966 6965 723a 2051 7561  , qualifier: Qua
+0001aa30: 6c69 6669 6572 0a20 2020 2029 202d 3e20  lifier.    ) -> 
+0001aa40: 4765 7450 726f 7669 7369 6f6e 6564 436f  GetProvisionedCo
+0001aa50: 6e63 7572 7265 6e63 7943 6f6e 6669 6752  ncurrencyConfigR
+0001aa60: 6573 706f 6e73 653a 0a20 2020 2020 2020  esponse:.       
+0001aa70: 2069 6620 7175 616c 6966 6965 7220 3d3d   if qualifier ==
+0001aa80: 2022 244c 4154 4553 5422 3a0a 2020 2020   "$LATEST":.    
+0001aa90: 2020 2020 2020 2020 7261 6973 6520 496e          raise In
+0001aaa0: 7661 6c69 6450 6172 616d 6574 6572 5661  validParameterVa
+0001aab0: 6c75 6545 7863 6570 7469 6f6e 280a 2020  lueException(.  
+0001aac0: 2020 2020 2020 2020 2020 2020 2020 2254                "T
+0001aad0: 6865 2066 756e 6374 696f 6e20 7265 736f  he function reso
+0001aae0: 7572 6365 2070 726f 7669 6465 6420 6d75  urce provided mu
+0001aaf0: 7374 2062 6520 616e 2061 6c69 6173 206f  st be an alias o
+0001ab00: 7220 6120 7075 626c 6973 6865 6420 7665  r a published ve
+0001ab10: 7273 696f 6e2e 222c 0a20 2020 2020 2020  rsion.",.       
+0001ab20: 2020 2020 2020 2020 2054 7970 653d 2255           Type="U
+0001ab30: 7365 7222 2c0a 2020 2020 2020 2020 2020  ser",.          
+0001ab40: 2020 290a 2020 2020 2020 2020 6675 6e63    ).        func
+0001ab50: 7469 6f6e 5f6e 616d 652c 2071 7561 6c69  tion_name, quali
+0001ab60: 6669 6572 203d 2061 7069 5f75 7469 6c73  fier = api_utils
+0001ab70: 2e67 6574 5f6e 616d 655f 616e 645f 7175  .get_name_and_qu
+0001ab80: 616c 6966 6965 7228 0a20 2020 2020 2020  alifier(.       
+0001ab90: 2020 2020 2066 756e 6374 696f 6e5f 6e61       function_na
+0001aba0: 6d65 2c20 7175 616c 6966 6965 722c 2063  me, qualifier, c
+0001abb0: 6f6e 7465 7874 2e72 6567 696f 6e0a 2020  ontext.region.  
+0001abc0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+0001abd0: 2070 726f 7669 7369 6f6e 6564 5f63 6f6e   provisioned_con
+0001abe0: 6669 6720 3d20 7365 6c66 2e5f 6765 745f  fig = self._get_
+0001abf0: 7072 6f76 6973 696f 6e65 645f 636f 6e66  provisioned_conf
+0001ac00: 6967 2863 6f6e 7465 7874 2c20 6675 6e63  ig(context, func
+0001ac10: 7469 6f6e 5f6e 616d 652c 2071 7561 6c69  tion_name, quali
+0001ac20: 6669 6572 290a 2020 2020 2020 2020 6966  fier).        if
+0001ac30: 206e 6f74 2070 726f 7669 7369 6f6e 6564   not provisioned
+0001ac40: 5f63 6f6e 6669 673a 0a20 2020 2020 2020  _config:.       
+0001ac50: 2020 2020 2072 6169 7365 2050 726f 7669       raise Provi
+0001ac60: 7369 6f6e 6564 436f 6e63 7572 7265 6e63  sionedConcurrenc
+0001ac70: 7943 6f6e 6669 674e 6f74 466f 756e 6445  yConfigNotFoundE
+0001ac80: 7863 6570 7469 6f6e 280a 2020 2020 2020  xception(.      
+0001ac90: 2020 2020 2020 2020 2020 224e 6f20 5072            "No Pr
+0001aca0: 6f76 6973 696f 6e65 6420 436f 6e63 7572  ovisioned Concur
+0001acb0: 7265 6e63 7920 436f 6e66 6967 2066 6f75  rency Config fou
+0001acc0: 6e64 2066 6f72 2074 6869 7320 6675 6e63  nd for this func
+0001acd0: 7469 6f6e 222c 2054 7970 653d 2255 7365  tion", Type="Use
+0001ace0: 7222 0a20 2020 2020 2020 2020 2020 2029  r".            )
+0001acf0: 0a0a 2020 2020 2020 2020 2320 544f 444f  ..        # TODO
+0001ad00: 3a20 6d61 6b65 2074 6869 7320 636f 6d70  : make this comp
+0001ad10: 6174 6962 6c65 2077 6974 6820 616c 6961  atible with alia
+0001ad20: 7320 706f 696e 7465 7220 6d69 6772 6174  s pointer migrat
+0001ad30: 696f 6e20 6f6e 2075 7064 6174 650a 2020  ion on update.  
+0001ad40: 2020 2020 2020 6966 2061 7069 5f75 7469        if api_uti
+0001ad50: 6c73 2e71 7561 6c69 6669 6572 5f69 735f  ls.qualifier_is_
+0001ad60: 616c 6961 7328 7175 616c 6966 6965 7229  alias(qualifier)
+0001ad70: 3a0a 2020 2020 2020 2020 2020 2020 7374  :.            st
+0001ad80: 6174 6520 3d20 6c61 6d62 6461 5f73 746f  ate = lambda_sto
+0001ad90: 7265 735b 636f 6e74 6578 742e 6163 636f  res[context.acco
+0001ada0: 756e 745f 6964 5d5b 636f 6e74 6578 742e  unt_id][context.
+0001adb0: 7265 6769 6f6e 5d0a 2020 2020 2020 2020  region].        
+0001adc0: 2020 2020 666e 203d 2073 7461 7465 2e66      fn = state.f
+0001add0: 756e 6374 696f 6e73 2e67 6574 2866 756e  unctions.get(fun
+0001ade0: 6374 696f 6e5f 6e61 6d65 290a 2020 2020  ction_name).    
+0001adf0: 2020 2020 2020 2020 616c 6961 7320 3d20          alias = 
+0001ae00: 666e 2e61 6c69 6173 6573 2e67 6574 2871  fn.aliases.get(q
+0001ae10: 7561 6c69 6669 6572 290a 2020 2020 2020  ualifier).      
+0001ae20: 2020 2020 2020 666e 5f61 726e 203d 2061        fn_arn = a
+0001ae30: 7069 5f75 7469 6c73 2e71 7561 6c69 6669  pi_utils.qualifi
+0001ae40: 6564 5f6c 616d 6264 615f 6172 6e28 0a20  ed_lambda_arn(. 
+0001ae50: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001ae60: 756e 6374 696f 6e5f 6e61 6d65 2c20 616c  unction_name, al
+0001ae70: 6961 732e 6675 6e63 7469 6f6e 5f76 6572  ias.function_ver
+0001ae80: 7369 6f6e 2c20 636f 6e74 6578 742e 6163  sion, context.ac
+0001ae90: 636f 756e 745f 6964 2c20 636f 6e74 6578  count_id, contex
+0001aea0: 742e 7265 6769 6f6e 0a20 2020 2020 2020  t.region.       
+0001aeb0: 2020 2020 2029 0a20 2020 2020 2020 2065       ).        e
+0001aec0: 6c73 653a 0a20 2020 2020 2020 2020 2020  lse:.           
+0001aed0: 2066 6e5f 6172 6e20 3d20 6170 695f 7574   fn_arn = api_ut
+0001aee0: 696c 732e 7175 616c 6966 6965 645f 6c61  ils.qualified_la
+0001aef0: 6d62 6461 5f61 726e 280a 2020 2020 2020  mbda_arn(.      
+0001af00: 2020 2020 2020 2020 2020 6675 6e63 7469            functi
+0001af10: 6f6e 5f6e 616d 652c 2071 7561 6c69 6669  on_name, qualifi
+0001af20: 6572 2c20 636f 6e74 6578 742e 6163 636f  er, context.acco
+0001af30: 756e 745f 6964 2c20 636f 6e74 6578 742e  unt_id, context.
+0001af40: 7265 6769 6f6e 0a20 2020 2020 2020 2020  region.         
+0001af50: 2020 2029 0a0a 2020 2020 2020 2020 7665     )..        ve
+0001af60: 725f 6d61 6e61 6765 7220 3d20 7365 6c66  r_manager = self
+0001af70: 2e6c 616d 6264 615f 7365 7276 6963 652e  .lambda_service.
+0001af80: 6765 745f 6c61 6d62 6461 5f76 6572 7369  get_lambda_versi
+0001af90: 6f6e 5f6d 616e 6167 6572 2866 6e5f 6172  on_manager(fn_ar
+0001afa0: 6e29 0a0a 2020 2020 2020 2020 7265 7475  n)..        retu
+0001afb0: 726e 2047 6574 5072 6f76 6973 696f 6e65  rn GetProvisione
+0001afc0: 6443 6f6e 6375 7272 656e 6379 436f 6e66  dConcurrencyConf
+0001afd0: 6967 5265 7370 6f6e 7365 280a 2020 2020  igResponse(.    
+0001afe0: 2020 2020 2020 2020 5265 7175 6573 7465          Requeste
+0001aff0: 6450 726f 7669 7369 6f6e 6564 436f 6e63  dProvisionedConc
+0001b000: 7572 7265 6e74 4578 6563 7574 696f 6e73  urrentExecutions
+0001b010: 3d70 726f 7669 7369 6f6e 6564 5f63 6f6e  =provisioned_con
+0001b020: 6669 672e 7072 6f76 6973 696f 6e65 645f  fig.provisioned_
+0001b030: 636f 6e63 7572 7265 6e74 5f65 7865 6375  concurrent_execu
+0001b040: 7469 6f6e 732c 0a20 2020 2020 2020 2020  tions,.         
+0001b050: 2020 204c 6173 744d 6f64 6966 6965 643d     LastModified=
+0001b060: 7072 6f76 6973 696f 6e65 645f 636f 6e66  provisioned_conf
+0001b070: 6967 2e6c 6173 745f 6d6f 6469 6669 6564  ig.last_modified
+0001b080: 2c0a 2020 2020 2020 2020 2020 2020 4176  ,.            Av
+0001b090: 6169 6c61 626c 6550 726f 7669 7369 6f6e  ailableProvision
+0001b0a0: 6564 436f 6e63 7572 7265 6e74 4578 6563  edConcurrentExec
+0001b0b0: 7574 696f 6e73 3d76 6572 5f6d 616e 6167  utions=ver_manag
+0001b0c0: 6572 2e70 726f 7669 7369 6f6e 6564 5f73  er.provisioned_s
+0001b0d0: 7461 7465 2e61 7661 696c 6162 6c65 2c0a  tate.available,.
+0001b0e0: 2020 2020 2020 2020 2020 2020 416c 6c6f              Allo
+0001b0f0: 6361 7465 6450 726f 7669 7369 6f6e 6564  catedProvisioned
+0001b100: 436f 6e63 7572 7265 6e74 4578 6563 7574  ConcurrentExecut
+0001b110: 696f 6e73 3d76 6572 5f6d 616e 6167 6572  ions=ver_manager
+0001b120: 2e70 726f 7669 7369 6f6e 6564 5f73 7461  .provisioned_sta
+0001b130: 7465 2e61 6c6c 6f63 6174 6564 2c0a 2020  te.allocated,.  
+0001b140: 2020 2020 2020 2020 2020 5374 6174 7573            Status
+0001b150: 3d76 6572 5f6d 616e 6167 6572 2e70 726f  =ver_manager.pro
+0001b160: 7669 7369 6f6e 6564 5f73 7461 7465 2e73  visioned_state.s
+0001b170: 7461 7475 732c 0a20 2020 2020 2020 2020  tatus,.         
+0001b180: 2020 2053 7461 7475 7352 6561 736f 6e3d     StatusReason=
+0001b190: 7665 725f 6d61 6e61 6765 722e 7072 6f76  ver_manager.prov
+0001b1a0: 6973 696f 6e65 645f 7374 6174 652e 7374  isioned_state.st
+0001b1b0: 6174 7573 5f72 6561 736f 6e2c 0a20 2020  atus_reason,.   
+0001b1c0: 2020 2020 2029 0a0a 2020 2020 6465 6620       )..    def 
+0001b1d0: 6c69 7374 5f70 726f 7669 7369 6f6e 6564  list_provisioned
+0001b1e0: 5f63 6f6e 6375 7272 656e 6379 5f63 6f6e  _concurrency_con
+0001b1f0: 6669 6773 280a 2020 2020 2020 2020 7365  figs(.        se
+0001b200: 6c66 2c0a 2020 2020 2020 2020 636f 6e74  lf,.        cont
+0001b210: 6578 743a 2052 6571 7565 7374 436f 6e74  ext: RequestCont
+0001b220: 6578 742c 0a20 2020 2020 2020 2066 756e  ext,.        fun
+0001b230: 6374 696f 6e5f 6e61 6d65 3a20 4675 6e63  ction_name: Func
+0001b240: 7469 6f6e 4e61 6d65 2c0a 2020 2020 2020  tionName,.      
+0001b250: 2020 6d61 726b 6572 3a20 5374 7269 6e67    marker: String
+0001b260: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
+0001b270: 206d 6178 5f69 7465 6d73 3a20 4d61 7850   max_items: MaxP
+0001b280: 726f 7669 7369 6f6e 6564 436f 6e63 7572  rovisionedConcur
+0001b290: 7265 6e63 7943 6f6e 6669 674c 6973 7449  rencyConfigListI
+0001b2a0: 7465 6d73 203d 204e 6f6e 652c 0a20 2020  tems = None,.   
+0001b2b0: 2029 202d 3e20 4c69 7374 5072 6f76 6973   ) -> ListProvis
+0001b2c0: 696f 6e65 6443 6f6e 6375 7272 656e 6379  ionedConcurrency
+0001b2d0: 436f 6e66 6967 7352 6573 706f 6e73 653a  ConfigsResponse:
+0001b2e0: 0a20 2020 2020 2020 2073 7461 7465 203d  .        state =
+0001b2f0: 206c 616d 6264 615f 7374 6f72 6573 5b63   lambda_stores[c
+0001b300: 6f6e 7465 7874 2e61 6363 6f75 6e74 5f69  ontext.account_i
+0001b310: 645d 5b63 6f6e 7465 7874 2e72 6567 696f  d][context.regio
+0001b320: 6e5d 0a20 2020 2020 2020 2066 6e20 3d20  n].        fn = 
+0001b330: 7374 6174 652e 6675 6e63 7469 6f6e 732e  state.functions.
+0001b340: 6765 7428 6675 6e63 7469 6f6e 5f6e 616d  get(function_nam
+0001b350: 6529 0a20 2020 2020 2020 2069 6620 666e  e).        if fn
+0001b360: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+0001b370: 2020 2020 2020 7261 6973 6520 5265 736f        raise Reso
+0001b380: 7572 6365 4e6f 7446 6f75 6e64 4578 6365  urceNotFoundExce
+0001b390: 7074 696f 6e28 0a20 2020 2020 2020 2020  ption(.         
+0001b3a0: 2020 2020 2020 2066 2246 756e 6374 696f         f"Functio
+0001b3b0: 6e20 6e6f 7420 666f 756e 643a 207b 6170  n not found: {ap
+0001b3c0: 695f 7574 696c 732e 756e 7175 616c 6966  i_utils.unqualif
+0001b3d0: 6965 645f 6c61 6d62 6461 5f61 726e 2866  ied_lambda_arn(f
+0001b3e0: 756e 6374 696f 6e5f 6e61 6d65 2c20 636f  unction_name, co
+0001b3f0: 6e74 6578 742e 6163 636f 756e 745f 6964  ntext.account_id
+0001b400: 2c20 636f 6e74 6578 742e 7265 6769 6f6e  , context.region
+0001b410: 297d 222c 0a20 2020 2020 2020 2020 2020  )}",.           
+0001b420: 2020 2020 2054 7970 653d 2255 7365 7222       Type="User"
+0001b430: 2c0a 2020 2020 2020 2020 2020 2020 290a  ,.            ).
+0001b440: 0a20 2020 2020 2020 2063 6f6e 6669 6773  .        configs
+0001b450: 203d 205b 5d0a 2020 2020 2020 2020 666f   = [].        fo
+0001b460: 7220 7175 616c 6966 6965 722c 2070 635f  r qualifier, pc_
+0001b470: 636f 6e66 6967 2069 6e20 666e 2e70 726f  config in fn.pro
+0001b480: 7669 7369 6f6e 6564 5f63 6f6e 6375 7272  visioned_concurr
+0001b490: 656e 6379 5f63 6f6e 6669 6773 2e69 7465  ency_configs.ite
+0001b4a0: 6d73 2829 3a0a 0a20 2020 2020 2020 2020  ms():..         
+0001b4b0: 2020 2069 6620 6170 695f 7574 696c 732e     if api_utils.
+0001b4c0: 7175 616c 6966 6965 725f 6973 5f61 6c69  qualifier_is_ali
+0001b4d0: 6173 2871 7561 6c69 6669 6572 293a 0a20  as(qualifier):. 
+0001b4e0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
+0001b4f0: 6c69 6173 203d 2066 6e2e 616c 6961 7365  lias = fn.aliase
+0001b500: 732e 6765 7428 7175 616c 6966 6965 7229  s.get(qualifier)
+0001b510: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b520: 2066 6e5f 6172 6e20 3d20 6170 695f 7574   fn_arn = api_ut
+0001b530: 696c 732e 7175 616c 6966 6965 645f 6c61  ils.qualified_la
+0001b540: 6d62 6461 5f61 726e 280a 2020 2020 2020  mbda_arn(.      
+0001b550: 2020 2020 2020 2020 2020 2020 2020 6675                fu
+0001b560: 6e63 7469 6f6e 5f6e 616d 652c 2061 6c69  nction_name, ali
+0001b570: 6173 2e66 756e 6374 696f 6e5f 7665 7273  as.function_vers
+0001b580: 696f 6e2c 2063 6f6e 7465 7874 2e61 6363  ion, context.acc
+0001b590: 6f75 6e74 5f69 642c 2063 6f6e 7465 7874  ount_id, context
+0001b5a0: 2e72 6567 696f 6e0a 2020 2020 2020 2020  .region.        
+0001b5b0: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0001b5c0: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0001b5d0: 2020 2020 2020 2020 2020 2020 666e 5f61              fn_a
+0001b5e0: 726e 203d 2061 7069 5f75 7469 6c73 2e71  rn = api_utils.q
+0001b5f0: 7561 6c69 6669 6564 5f6c 616d 6264 615f  ualified_lambda_
+0001b600: 6172 6e28 0a20 2020 2020 2020 2020 2020  arn(.           
+0001b610: 2020 2020 2020 2020 2066 756e 6374 696f           functio
+0001b620: 6e5f 6e61 6d65 2c20 7175 616c 6966 6965  n_name, qualifie
+0001b630: 722c 2063 6f6e 7465 7874 2e61 6363 6f75  r, context.accou
+0001b640: 6e74 5f69 642c 2063 6f6e 7465 7874 2e72  nt_id, context.r
+0001b650: 6567 696f 6e0a 2020 2020 2020 2020 2020  egion.          
+0001b660: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+0001b670: 2020 2020 206d 616e 6167 6572 203d 2073       manager = s
+0001b680: 656c 662e 6c61 6d62 6461 5f73 6572 7669  elf.lambda_servi
+0001b690: 6365 2e67 6574 5f6c 616d 6264 615f 7665  ce.get_lambda_ve
+0001b6a0: 7273 696f 6e5f 6d61 6e61 6765 7228 666e  rsion_manager(fn
+0001b6b0: 5f61 726e 290a 0a20 2020 2020 2020 2020  _arn)..         
+0001b6c0: 2020 2063 6f6e 6669 6773 2e61 7070 656e     configs.appen
+0001b6d0: 6428 0a20 2020 2020 2020 2020 2020 2020  d(.             
+0001b6e0: 2020 2050 726f 7669 7369 6f6e 6564 436f     ProvisionedCo
+0001b6f0: 6e63 7572 7265 6e63 7943 6f6e 6669 674c  ncurrencyConfigL
+0001b700: 6973 7449 7465 6d28 0a20 2020 2020 2020  istItem(.       
+0001b710: 2020 2020 2020 2020 2020 2020 2046 756e               Fun
+0001b720: 6374 696f 6e41 726e 3d61 7069 5f75 7469  ctionArn=api_uti
+0001b730: 6c73 2e71 7561 6c69 6669 6564 5f6c 616d  ls.qualified_lam
+0001b740: 6264 615f 6172 6e28 0a20 2020 2020 2020  bda_arn(.       
+0001b750: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b760: 2066 756e 6374 696f 6e5f 6e61 6d65 2c20   function_name, 
+0001b770: 7175 616c 6966 6965 722c 2063 6f6e 7465  qualifier, conte
+0001b780: 7874 2e61 6363 6f75 6e74 5f69 642c 2063  xt.account_id, c
+0001b790: 6f6e 7465 7874 2e72 6567 696f 6e0a 2020  ontext.region.  
+0001b7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b7b0: 2020 292c 0a20 2020 2020 2020 2020 2020    ),.           
+0001b7c0: 2020 2020 2020 2020 2052 6571 7565 7374           Request
+0001b7d0: 6564 5072 6f76 6973 696f 6e65 6443 6f6e  edProvisionedCon
+0001b7e0: 6375 7272 656e 7445 7865 6375 7469 6f6e  currentExecution
+0001b7f0: 733d 7063 5f63 6f6e 6669 672e 7072 6f76  s=pc_config.prov
+0001b800: 6973 696f 6e65 645f 636f 6e63 7572 7265  isioned_concurre
+0001b810: 6e74 5f65 7865 6375 7469 6f6e 732c 0a20  nt_executions,. 
+0001b820: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b830: 2020 2041 7661 696c 6162 6c65 5072 6f76     AvailableProv
+0001b840: 6973 696f 6e65 6443 6f6e 6375 7272 656e  isionedConcurren
+0001b850: 7445 7865 6375 7469 6f6e 733d 6d61 6e61  tExecutions=mana
+0001b860: 6765 722e 7072 6f76 6973 696f 6e65 645f  ger.provisioned_
+0001b870: 7374 6174 652e 6176 6169 6c61 626c 652c  state.available,
+0001b880: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001b890: 2020 2020 2041 6c6c 6f63 6174 6564 5072       AllocatedPr
+0001b8a0: 6f76 6973 696f 6e65 6443 6f6e 6375 7272  ovisionedConcurr
+0001b8b0: 656e 7445 7865 6375 7469 6f6e 733d 6d61  entExecutions=ma
+0001b8c0: 6e61 6765 722e 7072 6f76 6973 696f 6e65  nager.provisione
+0001b8d0: 645f 7374 6174 652e 616c 6c6f 6361 7465  d_state.allocate
+0001b8e0: 642c 0a20 2020 2020 2020 2020 2020 2020  d,.             
+0001b8f0: 2020 2020 2020 2053 7461 7475 733d 6d61         Status=ma
+0001b900: 6e61 6765 722e 7072 6f76 6973 696f 6e65  nager.provisione
+0001b910: 645f 7374 6174 652e 7374 6174 7573 2c0a  d_state.status,.
+0001b920: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001b930: 2020 2020 5374 6174 7573 5265 6173 6f6e      StatusReason
+0001b940: 3d6d 616e 6167 6572 2e70 726f 7669 7369  =manager.provisi
+0001b950: 6f6e 6564 5f73 7461 7465 2e73 7461 7475  oned_state.statu
+0001b960: 735f 7265 6173 6f6e 2c0a 2020 2020 2020  s_reason,.      
+0001b970: 2020 2020 2020 2020 2020 2020 2020 4c61                La
+0001b980: 7374 4d6f 6469 6669 6564 3d70 635f 636f  stModified=pc_co
+0001b990: 6e66 6967 2e6c 6173 745f 6d6f 6469 6669  nfig.last_modifi
+0001b9a0: 6564 2c0a 2020 2020 2020 2020 2020 2020  ed,.            
+0001b9b0: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+0001b9c0: 2020 290a 0a20 2020 2020 2020 2070 726f    )..        pro
+0001b9d0: 7669 7369 6f6e 6564 5f63 6f6e 6375 7272  visioned_concurr
+0001b9e0: 656e 6379 5f63 6f6e 6669 6773 203d 2063  ency_configs = c
+0001b9f0: 6f6e 6669 6773 0a20 2020 2020 2020 2070  onfigs.        p
+0001ba00: 726f 7669 7369 6f6e 6564 5f63 6f6e 6375  rovisioned_concu
+0001ba10: 7272 656e 6379 5f63 6f6e 6669 6773 203d  rrency_configs =
+0001ba20: 2050 6167 696e 6174 6564 4c69 7374 2870   PaginatedList(p
+0001ba30: 726f 7669 7369 6f6e 6564 5f63 6f6e 6375  rovisioned_concu
+0001ba40: 7272 656e 6379 5f63 6f6e 6669 6773 290a  rrency_configs).
+0001ba50: 2020 2020 2020 2020 7061 6765 2c20 746f          page, to
+0001ba60: 6b65 6e20 3d20 7072 6f76 6973 696f 6e65  ken = provisione
+0001ba70: 645f 636f 6e63 7572 7265 6e63 795f 636f  d_concurrency_co
+0001ba80: 6e66 6967 732e 6765 745f 7061 6765 280a  nfigs.get_page(.
+0001ba90: 2020 2020 2020 2020 2020 2020 6c61 6d62              lamb
+0001baa0: 6461 2078 3a20 782c 0a20 2020 2020 2020  da x: x,.       
+0001bab0: 2020 2020 206d 6172 6b65 722c 0a20 2020       marker,.   
+0001bac0: 2020 2020 2020 2020 206d 6178 5f69 7465           max_ite
+0001bad0: 6d73 2c0a 2020 2020 2020 2020 290a 2020  ms,.        ).  
+0001bae0: 2020 2020 2020 7265 7475 726e 204c 6973        return Lis
+0001baf0: 7450 726f 7669 7369 6f6e 6564 436f 6e63  tProvisionedConc
+0001bb00: 7572 7265 6e63 7943 6f6e 6669 6773 5265  urrencyConfigsRe
+0001bb10: 7370 6f6e 7365 280a 2020 2020 2020 2020  sponse(.        
+0001bb20: 2020 2020 5072 6f76 6973 696f 6e65 6443      ProvisionedC
+0001bb30: 6f6e 6375 7272 656e 6379 436f 6e66 6967  oncurrencyConfig
+0001bb40: 733d 7061 6765 2c20 4e65 7874 4d61 726b  s=page, NextMark
+0001bb50: 6572 3d74 6f6b 656e 0a20 2020 2020 2020  er=token.       
+0001bb60: 2029 0a0a 2020 2020 6465 6620 6465 6c65   )..    def dele
+0001bb70: 7465 5f70 726f 7669 7369 6f6e 6564 5f63  te_provisioned_c
+0001bb80: 6f6e 6375 7272 656e 6379 5f63 6f6e 6669  oncurrency_confi
+0001bb90: 6728 0a20 2020 2020 2020 2073 656c 662c  g(.        self,
+0001bba0: 2063 6f6e 7465 7874 3a20 5265 7175 6573   context: Reques
+0001bbb0: 7443 6f6e 7465 7874 2c20 6675 6e63 7469  tContext, functi
+0001bbc0: 6f6e 5f6e 616d 653a 2046 756e 6374 696f  on_name: Functio
+0001bbd0: 6e4e 616d 652c 2071 7561 6c69 6669 6572  nName, qualifier
+0001bbe0: 3a20 5175 616c 6966 6965 720a 2020 2020  : Qualifier.    
+0001bbf0: 2920 2d3e 204e 6f6e 653a 0a20 2020 2020  ) -> None:.     
+0001bc00: 2020 2069 6620 7175 616c 6966 6965 7220     if qualifier 
+0001bc10: 3d3d 2022 244c 4154 4553 5422 3a0a 2020  == "$LATEST":.  
+0001bc20: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0001bc30: 496e 7661 6c69 6450 6172 616d 6574 6572  InvalidParameter
+0001bc40: 5661 6c75 6545 7863 6570 7469 6f6e 280a  ValueException(.
+0001bc50: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001bc60: 2254 6865 2066 756e 6374 696f 6e20 7265  "The function re
+0001bc70: 736f 7572 6365 2070 726f 7669 6465 6420  source provided 
+0001bc80: 6d75 7374 2062 6520 616e 2061 6c69 6173  must be an alias
+0001bc90: 206f 7220 6120 7075 626c 6973 6865 6420   or a published 
+0001bca0: 7665 7273 696f 6e2e 222c 0a20 2020 2020  version.",.     
+0001bcb0: 2020 2020 2020 2020 2020 2054 7970 653d             Type=
+0001bcc0: 2255 7365 7222 2c0a 2020 2020 2020 2020  "User",.        
+0001bcd0: 2020 2020 290a 2020 2020 2020 2020 6675      ).        fu
+0001bce0: 6e63 7469 6f6e 5f6e 616d 652c 2071 7561  nction_name, qua
+0001bcf0: 6c69 6669 6572 203d 2061 7069 5f75 7469  lifier = api_uti
+0001bd00: 6c73 2e67 6574 5f6e 616d 655f 616e 645f  ls.get_name_and_
+0001bd10: 7175 616c 6966 6965 7228 0a20 2020 2020  qualifier(.     
+0001bd20: 2020 2020 2020 2066 756e 6374 696f 6e5f         function_
+0001bd30: 6e61 6d65 2c20 7175 616c 6966 6965 722c  name, qualifier,
+0001bd40: 2063 6f6e 7465 7874 2e72 6567 696f 6e0a   context.region.
+0001bd50: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+0001bd60: 2020 7374 6174 6520 3d20 6c61 6d62 6461    state = lambda
+0001bd70: 5f73 746f 7265 735b 636f 6e74 6578 742e  _stores[context.
+0001bd80: 6163 636f 756e 745f 6964 5d5b 636f 6e74  account_id][cont
+0001bd90: 6578 742e 7265 6769 6f6e 5d0a 2020 2020  ext.region].    
+0001bda0: 2020 2020 666e 203d 2073 7461 7465 2e66      fn = state.f
+0001bdb0: 756e 6374 696f 6e73 2e67 6574 2866 756e  unctions.get(fun
+0001bdc0: 6374 696f 6e5f 6e61 6d65 290a 0a20 2020  ction_name)..   
+0001bdd0: 2020 2020 2070 726f 7669 7369 6f6e 6564       provisioned
+0001bde0: 5f63 6f6e 6669 6720 3d20 7365 6c66 2e5f  _config = self._
+0001bdf0: 6765 745f 7072 6f76 6973 696f 6e65 645f  get_provisioned_
+0001be00: 636f 6e66 6967 2863 6f6e 7465 7874 2c20  config(context, 
+0001be10: 6675 6e63 7469 6f6e 5f6e 616d 652c 2071  function_name, q
+0001be20: 7561 6c69 6669 6572 290a 2020 2020 2020  ualifier).      
+0001be30: 2020 2320 6465 6c65 7465 2069 7320 6964    # delete is id
+0001be40: 656d 706f 7465 6e74 2061 6e64 2064 6f65  empotent and doe
+0001be50: 736e 2774 2061 6374 7561 6c6c 7920 6361  sn't actually ca
+0001be60: 7265 2061 626f 7574 2074 6865 2070 726f  re about the pro
+0001be70: 7669 7369 6f6e 6564 2063 6f6e 6375 7272  visioned concurr
+0001be80: 656e 6379 2063 6f6e 6669 6720 6e6f 7420  ency config not 
+0001be90: 6578 6973 7469 6e67 0a20 2020 2020 2020  existing.       
+0001bea0: 2069 6620 7072 6f76 6973 696f 6e65 645f   if provisioned_
+0001beb0: 636f 6e66 6967 3a0a 2020 2020 2020 2020  config:.        
+0001bec0: 2020 2020 666e 2e70 726f 7669 7369 6f6e      fn.provision
+0001bed0: 6564 5f63 6f6e 6375 7272 656e 6379 5f63  ed_concurrency_c
+0001bee0: 6f6e 6669 6773 2e70 6f70 2871 7561 6c69  onfigs.pop(quali
+0001bef0: 6669 6572 290a 2020 2020 2020 2020 2020  fier).          
+0001bf00: 2020 666e 5f61 726e 203d 2061 7069 5f75    fn_arn = api_u
+0001bf10: 7469 6c73 2e71 7561 6c69 6669 6564 5f6c  tils.qualified_l
+0001bf20: 616d 6264 615f 6172 6e28 0a20 2020 2020  ambda_arn(.     
+0001bf30: 2020 2020 2020 2020 2020 2066 756e 6374             funct
+0001bf40: 696f 6e5f 6e61 6d65 2c20 7175 616c 6966  ion_name, qualif
+0001bf50: 6965 722c 2063 6f6e 7465 7874 2e61 6363  ier, context.acc
+0001bf60: 6f75 6e74 5f69 642c 2063 6f6e 7465 7874  ount_id, context
+0001bf70: 2e72 6567 696f 6e0a 2020 2020 2020 2020  .region.        
+0001bf80: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+0001bf90: 2020 6d61 6e61 6765 7220 3d20 7365 6c66    manager = self
+0001bfa0: 2e6c 616d 6264 615f 7365 7276 6963 652e  .lambda_service.
+0001bfb0: 6765 745f 6c61 6d62 6461 5f76 6572 7369  get_lambda_versi
+0001bfc0: 6f6e 5f6d 616e 6167 6572 2866 6e5f 6172  on_manager(fn_ar
+0001bfd0: 6e29 0a20 2020 2020 2020 2020 2020 206d  n).            m
+0001bfe0: 616e 6167 6572 2e75 7064 6174 655f 7072  anager.update_pr
+0001bff0: 6f76 6973 696f 6e65 645f 636f 6e63 7572  ovisioned_concur
+0001c000: 7265 6e63 795f 636f 6e66 6967 2830 290a  rency_config(0).
+0001c010: 0a20 2020 2023 203d 3d3d 3d3d 3d3d 3d3d  .    # =========
+0001c020: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001c030: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a20  ==============. 
+0001c040: 2020 2023 203d 3d3d 3d3d 3d3d 2020 4576     # =======  Ev
+0001c050: 656e 7420 496e 766f 6b65 2043 6f6e 6669  ent Invoke Confi
+0001c060: 6720 2020 3d3d 3d3d 3d3d 3d3d 0a20 2020  g   ========.   
+0001c070: 2023 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   # =============
+0001c080: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001c090: 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a 2020 2020  ==========..    
+0001c0a0: 2320 2231 2076 616c 6964 6174 696f 6e20  # "1 validation 
+0001c0b0: 6572 726f 7220 6465 7465 6374 6564 3a20  error detected: 
+0001c0c0: 5661 6c75 6520 2761 726e 3a61 7773 3a5f  Value 'arn:aws:_
+0001c0d0: 2d2f 216c 616d 6264 613a 3c72 6567 696f  -/!lambda:<regio
+0001c0e0: 6e3e 3a31 3131 3131 3131 3131 3131 313a  n>:111111111111:
+0001c0f0: 6675 6e63 7469 6f6e 3a3c 6675 6e63 7469  function:<functi
+0001c100: 6f6e 2d6e 616d 653a 313e 2720 6174 2027  on-name:1>' at '
+0001c110: 6465 7374 696e 6174 696f 6e43 6f6e 6669  destinationConfi
+0001c120: 672e 6f6e 4661 696c 7572 652e 6465 7374  g.onFailure.dest
+0001c130: 696e 6174 696f 6e27 2066 6169 6c65 6420  ination' failed 
+0001c140: 746f 2073 6174 6973 6679 2063 6f6e 7374  to satisfy const
+0001c150: 7261 696e 743a 204d 656d 6265 7220 6d75  raint: Member mu
+0001c160: 7374 2073 6174 6973 6679 2072 6567 756c  st satisfy regul
+0001c170: 6172 2065 7870 7265 7373 696f 6e20 7061  ar expression pa
+0001c180: 7474 6572 6e3a 205e 247c 6172 6e3a 2861  ttern: ^$|arn:(a
+0001c190: 7773 5b61 2d7a 412d 5a30 2d39 2d5d 2a29  ws[a-zA-Z0-9-]*)
+0001c1a0: 3a28 5b61 2d7a 412d 5a30 2d39 5c5c 2d5d  :([a-zA-Z0-9\\-]
+0001c1b0: 292b 3a28 5b61 2d7a 5d7b 327d 2828 2d67  )+:([a-z]{2}((-g
+0001c1c0: 6f76 297c 282d 6973 6f28 623f 2929 293f  ov)|(-iso(b?)))?
+0001c1d0: 2d5b 612d 7a5d 2b2d 5c5c 647b 317d 293f  -[a-z]+-\\d{1})?
+0001c1e0: 3a28 5c5c 647b 3132 7d29 3f3a 282e 2a29  :(\\d{12})?:(.*)
+0001c1f0: 220a 2020 2020 2320 2231 2076 616c 6964  ".    # "1 valid
+0001c200: 6174 696f 6e20 6572 726f 7220 6465 7465  ation error dete
+0001c210: 6374 6564 3a20 5661 6c75 6520 2761 726e  cted: Value 'arn
+0001c220: 3a61 7773 3a5f 2d2f 216c 616d 6264 613a  :aws:_-/!lambda:
+0001c230: 3c72 6567 696f 6e3e 3a31 3131 3131 3131  <region>:1111111
+0001c240: 3131 3131 313a 6675 6e63 7469 6f6e 3a3c  11111:function:<
+0001c250: 6675 6e63 7469 6f6e 2d6e 616d 653a 313e  function-name:1>
+0001c260: 2720 6174 2027 6465 7374 696e 6174 696f  ' at 'destinatio
+0001c270: 6e43 6f6e 6669 672e 6f6e 4661 696c 7572  nConfig.onFailur
+0001c280: 652e 6465 7374 696e 6174 696f 6e27 2066  e.destination' f
+0001c290: 6169 6c65 6420 746f 2073 6174 6973 6679  ailed to satisfy
+0001c2a0: 2063 6f6e 7374 7261 696e 743a 204d 656d   constraint: Mem
+0001c2b0: 6265 7220 6d75 7374 2073 6174 6973 6679  ber must satisfy
+0001c2c0: 2072 6567 756c 6172 2065 7870 7265 7373   regular express
+0001c2d0: 696f 6e20 7061 7474 6572 6e3a 205e 247c  ion pattern: ^$|
+0001c2e0: 6172 6e3a 2861 7773 5b61 2d7a 412d 5a30  arn:(aws[a-zA-Z0
+0001c2f0: 2d39 2d5d 2a29 3a28 5b61 2d7a 412d 5a30  -9-]*):([a-zA-Z0
+0001c300: 2d39 5c5c 2d5d 292b 3a28 5b61 2d7a 5d32  -9\\-])+:([a-z]2
+0001c310: 2828 2d67 6f76 297c 282d 6973 6f28 623f  ((-gov)|(-iso(b?
+0001c320: 2929 293f 2d5b 612d 7a5d 2b2d 5c5c 6431  )))?-[a-z]+-\\d1
+0001c330: 293f 3a28 5c5c 6431 3229 3f3a 282e 2a29  )?:(\\d12)?:(.*)
+0001c340: 2220 2e2e 2e20 2865 7870 6563 7465 6420  " ... (expected 
+0001c350: e286 9220 6163 7475 616c 290a 0a20 2020  ... actual)..   
+0001c360: 2064 6566 205f 7661 6c69 6461 7465 5f64   def _validate_d
+0001c370: 6573 7469 6e61 7469 6f6e 5f63 6f6e 6669  estination_confi
+0001c380: 6728 0a20 2020 2020 2020 2073 656c 662c  g(.        self,
+0001c390: 2073 746f 7265 3a20 4c61 6d62 6461 5374   store: LambdaSt
+0001c3a0: 6f72 652c 2066 756e 6374 696f 6e5f 6e61  ore, function_na
+0001c3b0: 6d65 3a20 7374 722c 2064 6573 7469 6e61  me: str, destina
+0001c3c0: 7469 6f6e 5f63 6f6e 6669 673a 2044 6573  tion_config: Des
+0001c3d0: 7469 6e61 7469 6f6e 436f 6e66 6967 0a20  tinationConfig. 
+0001c3e0: 2020 2029 3a0a 2020 2020 2020 2020 6465     ):.        de
+0001c3f0: 6620 5f76 616c 6964 6174 655f 6465 7374  f _validate_dest
+0001c400: 696e 6174 696f 6e5f 6172 6e28 6465 7374  ination_arn(dest
+0001c410: 696e 6174 696f 6e5f 6172 6e29 202d 3e20  ination_arn) -> 
+0001c420: 626f 6f6c 3a0a 2020 2020 2020 2020 2020  bool:.          
+0001c430: 2020 6966 206e 6f74 2061 7069 5f75 7469    if not api_uti
+0001c440: 6c73 2e44 4553 5449 4e41 5449 4f4e 5f41  ls.DESTINATION_A
+0001c450: 524e 5f50 4154 5445 524e 2e6d 6174 6368  RN_PATTERN.match
+0001c460: 2864 6573 7469 6e61 7469 6f6e 5f61 726e  (destination_arn
+0001c470: 293a 0a20 2020 2020 2020 2020 2020 2020  ):.             
+0001c480: 2020 2023 2074 6563 686e 6963 616c 6c79     # technically
+0001c490: 2077 6520 7368 6f75 6c64 6e27 7420 6861   we shouldn't ha
+0001c4a0: 6e64 6c65 2074 6869 7320 696e 2074 6865  ndle this in the
+0001c4b0: 2070 726f 7669 6465 720a 2020 2020 2020   provider.      
+0001c4c0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0001c4d0: 5661 6c69 6461 7469 6f6e 4578 6365 7074  ValidationExcept
+0001c4e0: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
+0001c4f0: 2020 2020 2020 2020 2022 3120 7661 6c69           "1 vali
+0001c500: 6461 7469 6f6e 2065 7272 6f72 2064 6574  dation error det
+0001c510: 6563 7465 643a 2056 616c 7565 2027 220a  ected: Value '".
+0001c520: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c530: 2020 2020 2b20 6465 7374 696e 6174 696f      + destinatio
+0001c540: 6e5f 6172 6e0a 2020 2020 2020 2020 2020  n_arn.          
+0001c550: 2020 2020 2020 2020 2020 2b20 7222 2720            + r"' 
+0001c560: 6174 2027 6465 7374 696e 6174 696f 6e43  at 'destinationC
+0001c570: 6f6e 6669 672e 6f6e 4661 696c 7572 652e  onfig.onFailure.
+0001c580: 6465 7374 696e 6174 696f 6e27 2066 6169  destination' fai
+0001c590: 6c65 6420 746f 2073 6174 6973 6679 2063  led to satisfy c
+0001c5a0: 6f6e 7374 7261 696e 743a 204d 656d 6265  onstraint: Membe
+0001c5b0: 7220 6d75 7374 2073 6174 6973 6679 2072  r must satisfy r
+0001c5c0: 6567 756c 6172 2065 7870 7265 7373 696f  egular expressio
+0001c5d0: 6e20 7061 7474 6572 6e3a 205e 247c 6172  n pattern: ^$|ar
+0001c5e0: 6e3a 2861 7773 5b61 2d7a 412d 5a30 2d39  n:(aws[a-zA-Z0-9
+0001c5f0: 2d5d 2a29 3a28 5b61 2d7a 412d 5a30 2d39  -]*):([a-zA-Z0-9
+0001c600: 5c2d 5d29 2b3a 285b 612d 7a5d 7b32 7d28  \-])+:([a-z]{2}(
+0001c610: 282d 676f 7629 7c28 2d69 736f 2862 3f29  (-gov)|(-iso(b?)
+0001c620: 2929 3f2d 5b61 2d7a 5d2b 2d5c 647b 317d  ))?-[a-z]+-\d{1}
+0001c630: 293f 3a28 5c64 7b31 327d 293f 3a28 2e2a  )?:(\d{12})?:(.*
+0001c640: 2922 0a20 2020 2020 2020 2020 2020 2020  )".             
+0001c650: 2020 2029 0a0a 2020 2020 2020 2020 2020     )..          
+0001c660: 2020 6d61 7463 6820 6465 7374 696e 6174    match destinat
+0001c670: 696f 6e5f 6172 6e2e 7370 6c69 7428 223a  ion_arn.split(":
+0001c680: 2229 5b32 5d3a 0a20 2020 2020 2020 2020  ")[2]:.         
+0001c690: 2020 2020 2020 2063 6173 6520 226c 616d         case "lam
+0001c6a0: 6264 6122 3a0a 2020 2020 2020 2020 2020  bda":.          
+0001c6b0: 2020 2020 2020 2020 2020 666e 5f70 6172            fn_par
+0001c6c0: 7473 203d 2061 7069 5f75 7469 6c73 2e46  ts = api_utils.F
+0001c6d0: 554c 4c5f 464e 5f41 524e 5f50 4154 5445  ULL_FN_ARN_PATTE
+0001c6e0: 524e 2e73 6561 7263 6828 6465 7374 696e  RN.search(destin
+0001c6f0: 6174 696f 6e5f 6172 6e29 2e67 726f 7570  ation_arn).group
+0001c700: 6469 6374 2829 0a20 2020 2020 2020 2020  dict().         
+0001c710: 2020 2020 2020 2020 2020 2069 6620 666e             if fn
+0001c720: 5f70 6172 7473 3a0a 2020 2020 2020 2020  _parts:.        
 0001c730: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c740: 2020 666e 203d 2073 746f 7265 2e66 756e    fn = store.fun
-0001c750: 6374 696f 6e73 2e67 6574 2866 6e5f 7061  ctions.get(fn_pa
-0001c760: 7274 735b 2266 756e 6374 696f 6e5f 6e61  rts["function_na
-0001c770: 6d65 225d 290a 2020 2020 2020 2020 2020  me"]).          
-0001c780: 2020 2020 2020 2020 2020 2020 2020 6966                if
-0001c790: 206e 6f74 2066 6e3a 0a20 2020 2020 2020   not fn:.       
-0001c7a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c7b0: 2020 2020 2072 6169 7365 2049 6e76 616c       raise Inval
-0001c7c0: 6964 5061 7261 6d65 7465 7256 616c 7565  idParameterValue
-0001c7d0: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
-0001c7e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c7f0: 2020 2020 2020 2020 2020 2066 2254 6865             f"The
-0001c800: 2064 6573 7469 6e61 7469 6f6e 2041 524e   destination ARN
-0001c810: 207b 6465 7374 696e 6174 696f 6e5f 6172   {destination_ar
-0001c820: 6e7d 2069 7320 696e 7661 6c69 642e 222c  n} is invalid.",
-0001c830: 2054 7970 653d 2255 7365 7222 0a20 2020   Type="User".   
-0001c840: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c850: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-0001c860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c870: 2020 2069 6620 666e 5f70 6172 7473 5b22     if fn_parts["
-0001c880: 6675 6e63 7469 6f6e 5f6e 616d 6522 5d20  function_name"] 
-0001c890: 3d3d 2066 756e 6374 696f 6e5f 6e61 6d65  == function_name
-0001c8a0: 3a0a 2020 2020 2020 2020 2020 2020 2020  :.              
-0001c8b0: 2020 2020 2020 2020 2020 2020 2020 7261                ra
-0001c8c0: 6973 6520 496e 7661 6c69 6450 6172 616d  ise InvalidParam
-0001c8d0: 6574 6572 5661 6c75 6545 7863 6570 7469  eterValueExcepti
-0001c8e0: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
-0001c8f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c900: 2020 2020 2259 6f75 2063 616e 2774 2073      "You can't s
-0001c910: 7065 6369 6679 2074 6865 2066 756e 6374  pecify the funct
-0001c920: 696f 6e20 6173 2061 2064 6573 7469 6e61  ion as a destina
-0001c930: 7469 6f6e 2066 6f72 2069 7473 656c 662e  tion for itself.
-0001c940: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
-0001c950: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c960: 2020 2054 7970 653d 2255 7365 7222 2c0a     Type="User",.
+0001c740: 2320 6368 6563 6b20 6966 2069 7420 6578  # check if it ex
+0001c750: 6973 7473 0a20 2020 2020 2020 2020 2020  ists.           
+0001c760: 2020 2020 2020 2020 2020 2020 2066 6e20               fn 
+0001c770: 3d20 7374 6f72 652e 6675 6e63 7469 6f6e  = store.function
+0001c780: 732e 6765 7428 666e 5f70 6172 7473 5b22  s.get(fn_parts["
+0001c790: 6675 6e63 7469 6f6e 5f6e 616d 6522 5d29  function_name"])
+0001c7a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001c7b0: 2020 2020 2020 2020 2069 6620 6e6f 7420           if not 
+0001c7c0: 666e 3a0a 2020 2020 2020 2020 2020 2020  fn:.            
+0001c7d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c7e0: 7261 6973 6520 496e 7661 6c69 6450 6172  raise InvalidPar
+0001c7f0: 616d 6574 6572 5661 6c75 6545 7863 6570  ameterValueExcep
+0001c800: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
+0001c810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c820: 2020 2020 2020 6622 5468 6520 6465 7374        f"The dest
+0001c830: 696e 6174 696f 6e20 4152 4e20 7b64 6573  ination ARN {des
+0001c840: 7469 6e61 7469 6f6e 5f61 726e 7d20 6973  tination_arn} is
+0001c850: 2069 6e76 616c 6964 2e22 2c20 5479 7065   invalid.", Type
+0001c860: 3d22 5573 6572 220a 2020 2020 2020 2020  ="User".        
+0001c870: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c880: 2020 2020 290a 2020 2020 2020 2020 2020      ).          
+0001c890: 2020 2020 2020 2020 2020 2020 2020 6966                if
+0001c8a0: 2066 6e5f 7061 7274 735b 2266 756e 6374   fn_parts["funct
+0001c8b0: 696f 6e5f 6e61 6d65 225d 203d 3d20 6675  ion_name"] == fu
+0001c8c0: 6e63 7469 6f6e 5f6e 616d 653a 0a20 2020  nction_name:.   
+0001c8d0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c8e0: 2020 2020 2020 2020 2072 6169 7365 2049           raise I
+0001c8f0: 6e76 616c 6964 5061 7261 6d65 7465 7256  nvalidParameterV
+0001c900: 616c 7565 4578 6365 7074 696f 6e28 0a20  alueException(. 
+0001c910: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c920: 2020 2020 2020 2020 2020 2020 2020 2022                 "
+0001c930: 596f 7520 6361 6e27 7420 7370 6563 6966  You can't specif
+0001c940: 7920 7468 6520 6675 6e63 7469 6f6e 2061  y the function a
+0001c950: 7320 6120 6465 7374 696e 6174 696f 6e20  s a destination 
+0001c960: 666f 7220 6974 7365 6c66 2e22 2c0a 2020  for itself.",.  
 0001c970: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c980: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-0001c990: 2020 2020 2020 2020 2020 2020 2020 6361                ca
-0001c9a0: 7365 2022 736e 7322 207c 2022 7371 7322  se "sns" | "sqs"
-0001c9b0: 207c 2022 6576 656e 7473 223a 0a20 2020   | "events":.   
-0001c9c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001c9d0: 2070 6173 730a 2020 2020 2020 2020 2020   pass.          
-0001c9e0: 2020 2020 2020 6361 7365 205f 3a0a 2020        case _:.  
-0001c9f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001ca00: 2020 7265 7475 726e 2046 616c 7365 0a20    return False. 
-0001ca10: 2020 2020 2020 2020 2020 2072 6574 7572             retur
-0001ca20: 6e20 5472 7565 0a0a 2020 2020 2020 2020  n True..        
-0001ca30: 7661 6c69 6461 7469 6f6e 5f65 7272 203d  validation_err =
-0001ca40: 2046 616c 7365 0a0a 2020 2020 2020 2020   False..        
-0001ca50: 6661 696c 7572 655f 6465 7374 696e 6174  failure_destinat
-0001ca60: 696f 6e20 3d20 6465 7374 696e 6174 696f  ion = destinatio
-0001ca70: 6e5f 636f 6e66 6967 2e67 6574 2822 4f6e  n_config.get("On
-0001ca80: 4661 696c 7572 6522 2c20 7b7d 292e 6765  Failure", {}).ge
-0001ca90: 7428 2244 6573 7469 6e61 7469 6f6e 2229  t("Destination")
-0001caa0: 0a20 2020 2020 2020 2069 6620 6661 696c  .        if fail
-0001cab0: 7572 655f 6465 7374 696e 6174 696f 6e3a  ure_destination:
-0001cac0: 0a20 2020 2020 2020 2020 2020 2076 616c  .            val
-0001cad0: 6964 6174 696f 6e5f 6572 7220 3d20 7661  idation_err = va
-0001cae0: 6c69 6461 7469 6f6e 5f65 7272 206f 7220  lidation_err or 
-0001caf0: 6e6f 7420 5f76 616c 6964 6174 655f 6465  not _validate_de
-0001cb00: 7374 696e 6174 696f 6e5f 6172 6e28 6661  stination_arn(fa
-0001cb10: 696c 7572 655f 6465 7374 696e 6174 696f  ilure_destinatio
-0001cb20: 6e29 0a0a 2020 2020 2020 2020 7375 6363  n)..        succ
-0001cb30: 6573 735f 6465 7374 696e 6174 696f 6e20  ess_destination 
-0001cb40: 3d20 6465 7374 696e 6174 696f 6e5f 636f  = destination_co
-0001cb50: 6e66 6967 2e67 6574 2822 4f6e 5375 6363  nfig.get("OnSucc
-0001cb60: 6573 7322 2c20 7b7d 292e 6765 7428 2244  ess", {}).get("D
-0001cb70: 6573 7469 6e61 7469 6f6e 2229 0a20 2020  estination").   
-0001cb80: 2020 2020 2069 6620 7375 6363 6573 735f       if success_
-0001cb90: 6465 7374 696e 6174 696f 6e3a 0a20 2020  destination:.   
-0001cba0: 2020 2020 2020 2020 2076 616c 6964 6174           validat
-0001cbb0: 696f 6e5f 6572 7220 3d20 7661 6c69 6461  ion_err = valida
-0001cbc0: 7469 6f6e 5f65 7272 206f 7220 6e6f 7420  tion_err or not 
-0001cbd0: 5f76 616c 6964 6174 655f 6465 7374 696e  _validate_destin
-0001cbe0: 6174 696f 6e5f 6172 6e28 7375 6363 6573  ation_arn(succes
-0001cbf0: 735f 6465 7374 696e 6174 696f 6e29 0a0a  s_destination)..
-0001cc00: 2020 2020 2020 2020 6966 2076 616c 6964          if valid
-0001cc10: 6174 696f 6e5f 6572 723a 0a20 2020 2020  ation_err:.     
-0001cc20: 2020 2020 2020 206f 6e5f 7375 6363 6573         on_succes
-0001cc30: 735f 7061 7274 203d 2028 0a20 2020 2020  s_part = (.     
-0001cc40: 2020 2020 2020 2020 2020 2066 224f 6e53             f"OnS
-0001cc50: 7563 6365 7373 2864 6573 7469 6e61 7469  uccess(destinati
-0001cc60: 6f6e 3d7b 7375 6363 6573 735f 6465 7374  on={success_dest
-0001cc70: 696e 6174 696f 6e7d 2922 2069 6620 7375  ination})" if su
-0001cc80: 6363 6573 735f 6465 7374 696e 6174 696f  ccess_destinatio
-0001cc90: 6e20 656c 7365 2022 6e75 6c6c 220a 2020  n else "null".  
-0001cca0: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-0001ccb0: 2020 2020 2020 2020 6f6e 5f66 6169 6c75          on_failu
-0001ccc0: 7265 5f70 6172 7420 3d20 280a 2020 2020  re_part = (.    
-0001ccd0: 2020 2020 2020 2020 2020 2020 6622 4f6e              f"On
-0001cce0: 4661 696c 7572 6528 6465 7374 696e 6174  Failure(destinat
-0001ccf0: 696f 6e3d 7b66 6169 6c75 7265 5f64 6573  ion={failure_des
-0001cd00: 7469 6e61 7469 6f6e 7d29 2220 6966 2066  tination})" if f
-0001cd10: 6169 6c75 7265 5f64 6573 7469 6e61 7469  ailure_destinati
-0001cd20: 6f6e 2065 6c73 6520 226e 756c 6c22 0a20  on else "null". 
-0001cd30: 2020 2020 2020 2020 2020 2029 0a20 2020             ).   
-0001cd40: 2020 2020 2020 2020 2072 6169 7365 2049           raise I
-0001cd50: 6e76 616c 6964 5061 7261 6d65 7465 7256  nvalidParameterV
-0001cd60: 616c 7565 4578 6365 7074 696f 6e28 0a20  alueException(. 
-0001cd70: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-0001cd80: 2254 6865 2070 726f 7669 6465 6420 6465  "The provided de
-0001cd90: 7374 696e 6174 696f 6e20 636f 6e66 6967  stination config
-0001cda0: 2044 6573 7469 6e61 7469 6f6e 436f 6e66   DestinationConf
-0001cdb0: 6967 286f 6e53 7563 6365 7373 3d7b 6f6e  ig(onSuccess={on
-0001cdc0: 5f73 7563 6365 7373 5f70 6172 747d 2c20  _success_part}, 
-0001cdd0: 6f6e 4661 696c 7572 653d 7b6f 6e5f 6661  onFailure={on_fa
-0001cde0: 696c 7572 655f 7061 7274 7d29 2069 7320  ilure_part}) is 
-0001cdf0: 696e 7661 6c69 642e 222c 0a20 2020 2020  invalid.",.     
-0001ce00: 2020 2020 2020 2020 2020 2054 7970 653d             Type=
-0001ce10: 2255 7365 7222 2c0a 2020 2020 2020 2020  "User",.        
-0001ce20: 2020 2020 290a 0a20 2020 2064 6566 2070      )..    def p
-0001ce30: 7574 5f66 756e 6374 696f 6e5f 6576 656e  ut_function_even
-0001ce40: 745f 696e 766f 6b65 5f63 6f6e 6669 6728  t_invoke_config(
-0001ce50: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
-0001ce60: 2020 2020 2020 2063 6f6e 7465 7874 3a20         context: 
-0001ce70: 5265 7175 6573 7443 6f6e 7465 7874 2c0a  RequestContext,.
-0001ce80: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
-0001ce90: 5f6e 616d 653a 2046 756e 6374 696f 6e4e  _name: FunctionN
-0001cea0: 616d 652c 0a20 2020 2020 2020 2071 7561  ame,.        qua
-0001ceb0: 6c69 6669 6572 3a20 5175 616c 6966 6965  lifier: Qualifie
-0001cec0: 7220 3d20 4e6f 6e65 2c0a 2020 2020 2020  r = None,.      
-0001ced0: 2020 6d61 7869 6d75 6d5f 7265 7472 795f    maximum_retry_
-0001cee0: 6174 7465 6d70 7473 3a20 4d61 7869 6d75  attempts: Maximu
-0001cef0: 6d52 6574 7279 4174 7465 6d70 7473 203d  mRetryAttempts =
-0001cf00: 204e 6f6e 652c 0a20 2020 2020 2020 206d   None,.        m
-0001cf10: 6178 696d 756d 5f65 7665 6e74 5f61 6765  aximum_event_age
-0001cf20: 5f69 6e5f 7365 636f 6e64 733a 204d 6178  _in_seconds: Max
-0001cf30: 696d 756d 4576 656e 7441 6765 496e 5365  imumEventAgeInSe
-0001cf40: 636f 6e64 7320 3d20 4e6f 6e65 2c0a 2020  conds = None,.  
-0001cf50: 2020 2020 2020 6465 7374 696e 6174 696f        destinatio
-0001cf60: 6e5f 636f 6e66 6967 3a20 4465 7374 696e  n_config: Destin
-0001cf70: 6174 696f 6e43 6f6e 6669 6720 3d20 4e6f  ationConfig = No
-0001cf80: 6e65 2c0a 2020 2020 2920 2d3e 2046 756e  ne,.    ) -> Fun
-0001cf90: 6374 696f 6e45 7665 6e74 496e 766f 6b65  ctionEventInvoke
-0001cfa0: 436f 6e66 6967 3a0a 2020 2020 2020 2020  Config:.        
-0001cfb0: 2222 220a 2020 2020 2020 2020 4465 7374  """.        Dest
-0001cfc0: 696e 6174 696f 6e20 4152 4e73 2063 616e  ination ARNs can
-0001cfd0: 2062 653a 0a20 2020 2020 2020 202a 2053   be:.        * S
-0001cfe0: 5153 2061 726e 0a20 2020 2020 2020 202a  QS arn.        *
-0001cff0: 2053 4e53 2061 726e 0a20 2020 2020 2020   SNS arn.       
-0001d000: 202a 204c 616d 6264 6120 6172 6e0a 2020   * Lambda arn.  
-0001d010: 2020 2020 2020 2a20 4576 656e 7442 7269        * EventBri
-0001d020: 6467 6520 6172 6e0a 0a20 2020 2020 2020  dge arn..       
-0001d030: 2044 6966 6665 7265 6e63 6573 2062 6574   Differences bet
-0001d040: 7765 656e 2070 7574 5f20 616e 6420 7570  ween put_ and up
-0001d050: 6461 7465 5f3a 0a20 2020 2020 2020 2020  date_:.         
-0001d060: 2020 202a 2070 7574 206f 7665 7277 7269     * put overwri
-0001d070: 7465 7320 616e 7920 6578 6973 7469 6e67  tes any existing
-0001d080: 2063 6f6e 6669 670a 2020 2020 2020 2020   config.        
-0001d090: 2020 2020 2a20 7570 6461 7465 2061 6c6c      * update all
-0001d0a0: 6f77 7320 6368 616e 6765 7320 6f6e 6c79  ows changes only
-0001d0b0: 2073 696e 676c 6520 7661 6c75 6573 2077   single values w
-0001d0c0: 6869 6c65 206b 6565 7069 6e67 2074 6865  hile keeping the
-0001d0d0: 2072 6573 7420 6f66 2065 7869 7374 696e   rest of existin
-0001d0e0: 6720 6f6e 6573 0a20 2020 2020 2020 2020  g ones.         
-0001d0f0: 2020 202a 2075 7064 6174 6520 6661 696c     * update fail
-0001d100: 7320 6f6e 206e 6f6e 2d65 7869 7374 696e  s on non-existin
-0001d110: 6720 636f 6e66 6967 730a 0a20 2020 2020  g configs..     
-0001d120: 2020 2044 6966 6665 7265 6e63 6573 2062     Differences b
-0001d130: 6574 7765 656e 2064 6573 7469 6e61 7469  etween destinati
-0001d140: 6f6e 2061 6e64 2044 4c51 0a20 2020 2020  on and DLQ.     
-0001d150: 2020 2020 2020 202a 2022 486f 7765 7665         * "Howeve
-0001d160: 722c 2061 2064 6561 642d 6c65 7474 6572  r, a dead-letter
-0001d170: 2071 7565 7565 2069 7320 7061 7274 206f   queue is part o
-0001d180: 6620 6120 6675 6e63 7469 6f6e 2773 2076  f a function's v
-0001d190: 6572 7369 6f6e 2d73 7065 6369 6669 6320  ersion-specific 
-0001d1a0: 636f 6e66 6967 7572 6174 696f 6e2c 2073  configuration, s
-0001d1b0: 6f20 6974 2069 7320 6c6f 636b 6564 2069  o it is locked i
-0001d1c0: 6e20 7768 656e 2079 6f75 2070 7562 6c69  n when you publi
-0001d1d0: 7368 2061 2076 6572 7369 6f6e 2e22 0a20  sh a version.". 
-0001d1e0: 2020 2020 2020 2020 2020 202a 2020 224f             *  "O
-0001d1f0: 6e2d 6661 696c 7572 6520 6465 7374 696e  n-failure destin
-0001d200: 6174 696f 6e73 2061 6c73 6f20 7375 7070  ations also supp
-0001d210: 6f72 7420 6164 6469 7469 6f6e 616c 2074  ort additional t
-0001d220: 6172 6765 7473 2061 6e64 2069 6e63 6c75  argets and inclu
-0001d230: 6465 2064 6574 6169 6c73 2061 626f 7574  de details about
-0001d240: 2074 6865 2066 756e 6374 696f 6e27 7320   the function's 
-0001d250: 7265 7370 6f6e 7365 2069 6e20 7468 6520  response in the 
-0001d260: 696e 766f 6361 7469 6f6e 2072 6563 6f72  invocation recor
-0001d270: 642e 220a 0a20 2020 2020 2020 2022 2222  d."..        """
-0001d280: 0a20 2020 2020 2020 2069 6620 280a 2020  .        if (.  
-0001d290: 2020 2020 2020 2020 2020 6d61 7869 6d75            maximu
-0001d2a0: 6d5f 6576 656e 745f 6167 655f 696e 5f73  m_event_age_in_s
-0001d2b0: 6563 6f6e 6473 2069 7320 4e6f 6e65 0a20  econds is None. 
-0001d2c0: 2020 2020 2020 2020 2020 2061 6e64 206d             and m
-0001d2d0: 6178 696d 756d 5f72 6574 7279 5f61 7474  aximum_retry_att
-0001d2e0: 656d 7074 7320 6973 204e 6f6e 650a 2020  empts is None.  
-0001d2f0: 2020 2020 2020 2020 2020 616e 6420 6465            and de
-0001d300: 7374 696e 6174 696f 6e5f 636f 6e66 6967  stination_config
+0001c980: 2020 2020 2020 2020 2020 2020 2020 5479                Ty
+0001c990: 7065 3d22 5573 6572 222c 0a20 2020 2020  pe="User",.     
+0001c9a0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001c9b0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0001c9c0: 2020 2020 2020 2020 2063 6173 6520 2273           case "s
+0001c9d0: 6e73 2220 7c20 2273 7173 2220 7c20 2265  ns" | "sqs" | "e
+0001c9e0: 7665 6e74 7322 3a0a 2020 2020 2020 2020  vents":.        
+0001c9f0: 2020 2020 2020 2020 2020 2020 7061 7373              pass
+0001ca00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ca10: 2063 6173 6520 5f3a 0a20 2020 2020 2020   case _:.       
+0001ca20: 2020 2020 2020 2020 2020 2020 2072 6574               ret
+0001ca30: 7572 6e20 4661 6c73 650a 2020 2020 2020  urn False.      
+0001ca40: 2020 2020 2020 7265 7475 726e 2054 7275        return Tru
+0001ca50: 650a 0a20 2020 2020 2020 2076 616c 6964  e..        valid
+0001ca60: 6174 696f 6e5f 6572 7220 3d20 4661 6c73  ation_err = Fals
+0001ca70: 650a 0a20 2020 2020 2020 2066 6169 6c75  e..        failu
+0001ca80: 7265 5f64 6573 7469 6e61 7469 6f6e 203d  re_destination =
+0001ca90: 2064 6573 7469 6e61 7469 6f6e 5f63 6f6e   destination_con
+0001caa0: 6669 672e 6765 7428 224f 6e46 6169 6c75  fig.get("OnFailu
+0001cab0: 7265 222c 207b 7d29 2e67 6574 2822 4465  re", {}).get("De
+0001cac0: 7374 696e 6174 696f 6e22 290a 2020 2020  stination").    
+0001cad0: 2020 2020 6966 2066 6169 6c75 7265 5f64      if failure_d
+0001cae0: 6573 7469 6e61 7469 6f6e 3a0a 2020 2020  estination:.    
+0001caf0: 2020 2020 2020 2020 7661 6c69 6461 7469          validati
+0001cb00: 6f6e 5f65 7272 203d 2076 616c 6964 6174  on_err = validat
+0001cb10: 696f 6e5f 6572 7220 6f72 206e 6f74 205f  ion_err or not _
+0001cb20: 7661 6c69 6461 7465 5f64 6573 7469 6e61  validate_destina
+0001cb30: 7469 6f6e 5f61 726e 2866 6169 6c75 7265  tion_arn(failure
+0001cb40: 5f64 6573 7469 6e61 7469 6f6e 290a 0a20  _destination).. 
+0001cb50: 2020 2020 2020 2073 7563 6365 7373 5f64         success_d
+0001cb60: 6573 7469 6e61 7469 6f6e 203d 2064 6573  estination = des
+0001cb70: 7469 6e61 7469 6f6e 5f63 6f6e 6669 672e  tination_config.
+0001cb80: 6765 7428 224f 6e53 7563 6365 7373 222c  get("OnSuccess",
+0001cb90: 207b 7d29 2e67 6574 2822 4465 7374 696e   {}).get("Destin
+0001cba0: 6174 696f 6e22 290a 2020 2020 2020 2020  ation").        
+0001cbb0: 6966 2073 7563 6365 7373 5f64 6573 7469  if success_desti
+0001cbc0: 6e61 7469 6f6e 3a0a 2020 2020 2020 2020  nation:.        
+0001cbd0: 2020 2020 7661 6c69 6461 7469 6f6e 5f65      validation_e
+0001cbe0: 7272 203d 2076 616c 6964 6174 696f 6e5f  rr = validation_
+0001cbf0: 6572 7220 6f72 206e 6f74 205f 7661 6c69  err or not _vali
+0001cc00: 6461 7465 5f64 6573 7469 6e61 7469 6f6e  date_destination
+0001cc10: 5f61 726e 2873 7563 6365 7373 5f64 6573  _arn(success_des
+0001cc20: 7469 6e61 7469 6f6e 290a 0a20 2020 2020  tination)..     
+0001cc30: 2020 2069 6620 7661 6c69 6461 7469 6f6e     if validation
+0001cc40: 5f65 7272 3a0a 2020 2020 2020 2020 2020  _err:.          
+0001cc50: 2020 6f6e 5f73 7563 6365 7373 5f70 6172    on_success_par
+0001cc60: 7420 3d20 280a 2020 2020 2020 2020 2020  t = (.          
+0001cc70: 2020 2020 2020 6622 4f6e 5375 6363 6573        f"OnSucces
+0001cc80: 7328 6465 7374 696e 6174 696f 6e3d 7b73  s(destination={s
+0001cc90: 7563 6365 7373 5f64 6573 7469 6e61 7469  uccess_destinati
+0001cca0: 6f6e 7d29 2220 6966 2073 7563 6365 7373  on})" if success
+0001ccb0: 5f64 6573 7469 6e61 7469 6f6e 2065 6c73  _destination els
+0001ccc0: 6520 226e 756c 6c22 0a20 2020 2020 2020  e "null".       
+0001ccd0: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+0001cce0: 2020 206f 6e5f 6661 696c 7572 655f 7061     on_failure_pa
+0001ccf0: 7274 203d 2028 0a20 2020 2020 2020 2020  rt = (.         
+0001cd00: 2020 2020 2020 2066 224f 6e46 6169 6c75         f"OnFailu
+0001cd10: 7265 2864 6573 7469 6e61 7469 6f6e 3d7b  re(destination={
+0001cd20: 6661 696c 7572 655f 6465 7374 696e 6174  failure_destinat
+0001cd30: 696f 6e7d 2922 2069 6620 6661 696c 7572  ion})" if failur
+0001cd40: 655f 6465 7374 696e 6174 696f 6e20 656c  e_destination el
+0001cd50: 7365 2022 6e75 6c6c 220a 2020 2020 2020  se "null".      
+0001cd60: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+0001cd70: 2020 2020 7261 6973 6520 496e 7661 6c69      raise Invali
+0001cd80: 6450 6172 616d 6574 6572 5661 6c75 6545  dParameterValueE
+0001cd90: 7863 6570 7469 6f6e 280a 2020 2020 2020  xception(.      
+0001cda0: 2020 2020 2020 2020 2020 6622 5468 6520            f"The 
+0001cdb0: 7072 6f76 6964 6564 2064 6573 7469 6e61  provided destina
+0001cdc0: 7469 6f6e 2063 6f6e 6669 6720 4465 7374  tion config Dest
+0001cdd0: 696e 6174 696f 6e43 6f6e 6669 6728 6f6e  inationConfig(on
+0001cde0: 5375 6363 6573 733d 7b6f 6e5f 7375 6363  Success={on_succ
+0001cdf0: 6573 735f 7061 7274 7d2c 206f 6e46 6169  ess_part}, onFai
+0001ce00: 6c75 7265 3d7b 6f6e 5f66 6169 6c75 7265  lure={on_failure
+0001ce10: 5f70 6172 747d 2920 6973 2069 6e76 616c  _part}) is inval
+0001ce20: 6964 2e22 2c0a 2020 2020 2020 2020 2020  id.",.          
+0001ce30: 2020 2020 2020 5479 7065 3d22 5573 6572        Type="User
+0001ce40: 222c 0a20 2020 2020 2020 2020 2020 2029  ",.            )
+0001ce50: 0a0a 2020 2020 6465 6620 7075 745f 6675  ..    def put_fu
+0001ce60: 6e63 7469 6f6e 5f65 7665 6e74 5f69 6e76  nction_event_inv
+0001ce70: 6f6b 655f 636f 6e66 6967 280a 2020 2020  oke_config(.    
+0001ce80: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+0001ce90: 2020 636f 6e74 6578 743a 2052 6571 7565    context: Reque
+0001cea0: 7374 436f 6e74 6578 742c 0a20 2020 2020  stContext,.     
+0001ceb0: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
+0001cec0: 3a20 4675 6e63 7469 6f6e 4e61 6d65 2c0a  : FunctionName,.
+0001ced0: 2020 2020 2020 2020 7175 616c 6966 6965          qualifie
+0001cee0: 723a 2051 7561 6c69 6669 6572 203d 204e  r: Qualifier = N
+0001cef0: 6f6e 652c 0a20 2020 2020 2020 206d 6178  one,.        max
+0001cf00: 696d 756d 5f72 6574 7279 5f61 7474 656d  imum_retry_attem
+0001cf10: 7074 733a 204d 6178 696d 756d 5265 7472  pts: MaximumRetr
+0001cf20: 7941 7474 656d 7074 7320 3d20 4e6f 6e65  yAttempts = None
+0001cf30: 2c0a 2020 2020 2020 2020 6d61 7869 6d75  ,.        maximu
+0001cf40: 6d5f 6576 656e 745f 6167 655f 696e 5f73  m_event_age_in_s
+0001cf50: 6563 6f6e 6473 3a20 4d61 7869 6d75 6d45  econds: MaximumE
+0001cf60: 7665 6e74 4167 6549 6e53 6563 6f6e 6473  ventAgeInSeconds
+0001cf70: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
+0001cf80: 2064 6573 7469 6e61 7469 6f6e 5f63 6f6e   destination_con
+0001cf90: 6669 673a 2044 6573 7469 6e61 7469 6f6e  fig: Destination
+0001cfa0: 436f 6e66 6967 203d 204e 6f6e 652c 0a20  Config = None,. 
+0001cfb0: 2020 2029 202d 3e20 4675 6e63 7469 6f6e     ) -> Function
+0001cfc0: 4576 656e 7449 6e76 6f6b 6543 6f6e 6669  EventInvokeConfi
+0001cfd0: 673a 0a20 2020 2020 2020 2022 2222 0a20  g:.        """. 
+0001cfe0: 2020 2020 2020 2044 6573 7469 6e61 7469         Destinati
+0001cff0: 6f6e 2041 524e 7320 6361 6e20 6265 3a0a  on ARNs can be:.
+0001d000: 2020 2020 2020 2020 2a20 5351 5320 6172          * SQS ar
+0001d010: 6e0a 2020 2020 2020 2020 2a20 534e 5320  n.        * SNS 
+0001d020: 6172 6e0a 2020 2020 2020 2020 2a20 4c61  arn.        * La
+0001d030: 6d62 6461 2061 726e 0a20 2020 2020 2020  mbda arn.       
+0001d040: 202a 2045 7665 6e74 4272 6964 6765 2061   * EventBridge a
+0001d050: 726e 0a0a 2020 2020 2020 2020 4469 6666  rn..        Diff
+0001d060: 6572 656e 6365 7320 6265 7477 6565 6e20  erences between 
+0001d070: 7075 745f 2061 6e64 2075 7064 6174 655f  put_ and update_
+0001d080: 3a0a 2020 2020 2020 2020 2020 2020 2a20  :.            * 
+0001d090: 7075 7420 6f76 6572 7772 6974 6573 2061  put overwrites a
+0001d0a0: 6e79 2065 7869 7374 696e 6720 636f 6e66  ny existing conf
+0001d0b0: 6967 0a20 2020 2020 2020 2020 2020 202a  ig.            *
+0001d0c0: 2075 7064 6174 6520 616c 6c6f 7773 2063   update allows c
+0001d0d0: 6861 6e67 6573 206f 6e6c 7920 7369 6e67  hanges only sing
+0001d0e0: 6c65 2076 616c 7565 7320 7768 696c 6520  le values while 
+0001d0f0: 6b65 6570 696e 6720 7468 6520 7265 7374  keeping the rest
+0001d100: 206f 6620 6578 6973 7469 6e67 206f 6e65   of existing one
+0001d110: 730a 2020 2020 2020 2020 2020 2020 2a20  s.            * 
+0001d120: 7570 6461 7465 2066 6169 6c73 206f 6e20  update fails on 
+0001d130: 6e6f 6e2d 6578 6973 7469 6e67 2063 6f6e  non-existing con
+0001d140: 6669 6773 0a0a 2020 2020 2020 2020 4469  figs..        Di
+0001d150: 6666 6572 656e 6365 7320 6265 7477 6565  fferences betwee
+0001d160: 6e20 6465 7374 696e 6174 696f 6e20 616e  n destination an
+0001d170: 6420 444c 510a 2020 2020 2020 2020 2020  d DLQ.          
+0001d180: 2020 2a20 2248 6f77 6576 6572 2c20 6120    * "However, a 
+0001d190: 6465 6164 2d6c 6574 7465 7220 7175 6575  dead-letter queu
+0001d1a0: 6520 6973 2070 6172 7420 6f66 2061 2066  e is part of a f
+0001d1b0: 756e 6374 696f 6e27 7320 7665 7273 696f  unction's versio
+0001d1c0: 6e2d 7370 6563 6966 6963 2063 6f6e 6669  n-specific confi
+0001d1d0: 6775 7261 7469 6f6e 2c20 736f 2069 7420  guration, so it 
+0001d1e0: 6973 206c 6f63 6b65 6420 696e 2077 6865  is locked in whe
+0001d1f0: 6e20 796f 7520 7075 626c 6973 6820 6120  n you publish a 
+0001d200: 7665 7273 696f 6e2e 220a 2020 2020 2020  version.".      
+0001d210: 2020 2020 2020 2a20 2022 4f6e 2d66 6169        *  "On-fai
+0001d220: 6c75 7265 2064 6573 7469 6e61 7469 6f6e  lure destination
+0001d230: 7320 616c 736f 2073 7570 706f 7274 2061  s also support a
+0001d240: 6464 6974 696f 6e61 6c20 7461 7267 6574  dditional target
+0001d250: 7320 616e 6420 696e 636c 7564 6520 6465  s and include de
+0001d260: 7461 696c 7320 6162 6f75 7420 7468 6520  tails about the 
+0001d270: 6675 6e63 7469 6f6e 2773 2072 6573 706f  function's respo
+0001d280: 6e73 6520 696e 2074 6865 2069 6e76 6f63  nse in the invoc
+0001d290: 6174 696f 6e20 7265 636f 7264 2e22 0a0a  ation record."..
+0001d2a0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
+0001d2b0: 2020 2020 6966 2028 0a20 2020 2020 2020      if (.       
+0001d2c0: 2020 2020 206d 6178 696d 756d 5f65 7665       maximum_eve
+0001d2d0: 6e74 5f61 6765 5f69 6e5f 7365 636f 6e64  nt_age_in_second
+0001d2e0: 7320 6973 204e 6f6e 650a 2020 2020 2020  s is None.      
+0001d2f0: 2020 2020 2020 616e 6420 6d61 7869 6d75        and maximu
+0001d300: 6d5f 7265 7472 795f 6174 7465 6d70 7473  m_retry_attempts
 0001d310: 2069 7320 4e6f 6e65 0a20 2020 2020 2020   is None.       
-0001d320: 2029 3a0a 2020 2020 2020 2020 2020 2020   ):.            
-0001d330: 7261 6973 6520 496e 7661 6c69 6450 6172  raise InvalidPar
-0001d340: 616d 6574 6572 5661 6c75 6545 7863 6570  ameterValueExcep
-0001d350: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
-0001d360: 2020 2020 2020 2259 6f75 206d 7573 7420        "You must 
-0001d370: 7370 6563 6966 7920 6174 206c 6561 7374  specify at least
-0001d380: 206f 6e65 206f 6620 6572 726f 7220 6861   one of error ha
-0001d390: 6e64 6c69 6e67 206f 7220 6465 7374 696e  ndling or destin
-0001d3a0: 6174 696f 6e20 7365 7474 696e 672e 222c  ation setting.",
-0001d3b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001d3c0: 2054 7970 653d 2255 7365 7222 2c0a 2020   Type="User",.  
-0001d3d0: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
-0001d3e0: 2020 2020 2073 7461 7465 203d 206c 616d       state = lam
-0001d3f0: 6264 615f 7374 6f72 6573 5b63 6f6e 7465  bda_stores[conte
-0001d400: 7874 2e61 6363 6f75 6e74 5f69 645d 5b63  xt.account_id][c
-0001d410: 6f6e 7465 7874 2e72 6567 696f 6e5d 0a20  ontext.region]. 
-0001d420: 2020 2020 2020 2066 756e 6374 696f 6e5f         function_
-0001d430: 6e61 6d65 2c20 7175 616c 6966 6965 7220  name, qualifier 
-0001d440: 3d20 6170 695f 7574 696c 732e 6765 745f  = api_utils.get_
-0001d450: 6e61 6d65 5f61 6e64 5f71 7561 6c69 6669  name_and_qualifi
-0001d460: 6572 280a 2020 2020 2020 2020 2020 2020  er(.            
-0001d470: 6675 6e63 7469 6f6e 5f6e 616d 652c 2071  function_name, q
-0001d480: 7561 6c69 6669 6572 2c20 636f 6e74 6578  ualifier, contex
-0001d490: 742e 7265 6769 6f6e 0a20 2020 2020 2020  t.region.       
-0001d4a0: 2029 0a20 2020 2020 2020 2066 6e20 3d20   ).        fn = 
-0001d4b0: 7374 6174 652e 6675 6e63 7469 6f6e 732e  state.functions.
-0001d4c0: 6765 7428 6675 6e63 7469 6f6e 5f6e 616d  get(function_nam
-0001d4d0: 6529 0a20 2020 2020 2020 2069 6620 6e6f  e).        if no
-0001d4e0: 7420 666e 206f 7220 2871 7561 6c69 6669  t fn or (qualifi
-0001d4f0: 6572 2061 6e64 206e 6f74 2028 7175 616c  er and not (qual
-0001d500: 6966 6965 7220 696e 2066 6e2e 616c 6961  ifier in fn.alia
-0001d510: 7365 7320 6f72 2071 7561 6c69 6669 6572  ses or qualifier
-0001d520: 2069 6e20 666e 2e76 6572 7369 6f6e 7329   in fn.versions)
-0001d530: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
-0001d540: 6169 7365 2052 6573 6f75 7263 654e 6f74  aise ResourceNot
-0001d550: 466f 756e 6445 7863 6570 7469 6f6e 2822  FoundException("
-0001d560: 5468 6520 6675 6e63 7469 6f6e 2064 6f65  The function doe
-0001d570: 736e 2774 2065 7869 7374 2e22 2c20 5479  sn't exist.", Ty
-0001d580: 7065 3d22 5573 6572 2229 0a0a 2020 2020  pe="User")..    
-0001d590: 2020 2020 7175 616c 6966 6965 7220 3d20      qualifier = 
-0001d5a0: 7175 616c 6966 6965 7220 6f72 2022 244c  qualifier or "$L
-0001d5b0: 4154 4553 5422 0a0a 2020 2020 2020 2020  ATEST"..        
-0001d5c0: 2320 7661 6c69 6461 7465 2061 6e64 206e  # validate and n
-0001d5d0: 6f72 6d61 6c69 7a65 2064 6573 7469 6e61  ormalize destina
-0001d5e0: 7469 6f6e 2063 6f6e 6669 670a 2020 2020  tion config.    
-0001d5f0: 2020 2020 6966 2064 6573 7469 6e61 7469      if destinati
-0001d600: 6f6e 5f63 6f6e 6669 673a 0a20 2020 2020  on_config:.     
-0001d610: 2020 2020 2020 2073 656c 662e 5f76 616c         self._val
-0001d620: 6964 6174 655f 6465 7374 696e 6174 696f  idate_destinatio
-0001d630: 6e5f 636f 6e66 6967 2873 7461 7465 2c20  n_config(state, 
-0001d640: 6675 6e63 7469 6f6e 5f6e 616d 652c 2064  function_name, d
-0001d650: 6573 7469 6e61 7469 6f6e 5f63 6f6e 6669  estination_confi
-0001d660: 6729 0a0a 2020 2020 2020 2020 6465 7374  g)..        dest
-0001d670: 696e 6174 696f 6e5f 636f 6e66 6967 203d  ination_config =
-0001d680: 2044 6573 7469 6e61 7469 6f6e 436f 6e66   DestinationConf
-0001d690: 6967 280a 2020 2020 2020 2020 2020 2020  ig(.            
-0001d6a0: 4f6e 5375 6363 6573 733d 4f6e 5375 6363  OnSuccess=OnSucc
-0001d6b0: 6573 7328 0a20 2020 2020 2020 2020 2020  ess(.           
-0001d6c0: 2020 2020 2044 6573 7469 6e61 7469 6f6e       Destination
-0001d6d0: 3d28 6465 7374 696e 6174 696f 6e5f 636f  =(destination_co
-0001d6e0: 6e66 6967 206f 7220 7b7d 292e 6765 7428  nfig or {}).get(
-0001d6f0: 224f 6e53 7563 6365 7373 222c 207b 7d29  "OnSuccess", {})
-0001d700: 2e67 6574 2822 4465 7374 696e 6174 696f  .get("Destinatio
-0001d710: 6e22 290a 2020 2020 2020 2020 2020 2020  n").            
-0001d720: 292c 0a20 2020 2020 2020 2020 2020 204f  ),.            O
-0001d730: 6e46 6169 6c75 7265 3d4f 6e46 6169 6c75  nFailure=OnFailu
-0001d740: 7265 280a 2020 2020 2020 2020 2020 2020  re(.            
-0001d750: 2020 2020 4465 7374 696e 6174 696f 6e3d      Destination=
-0001d760: 2864 6573 7469 6e61 7469 6f6e 5f63 6f6e  (destination_con
-0001d770: 6669 6720 6f72 207b 7d29 2e67 6574 2822  fig or {}).get("
-0001d780: 4f6e 4661 696c 7572 6522 2c20 7b7d 292e  OnFailure", {}).
-0001d790: 6765 7428 2244 6573 7469 6e61 7469 6f6e  get("Destination
-0001d7a0: 2229 0a20 2020 2020 2020 2020 2020 2029  ").            )
-0001d7b0: 2c0a 2020 2020 2020 2020 290a 0a20 2020  ,.        )..   
-0001d7c0: 2020 2020 2063 6f6e 6669 6720 3d20 4576       config = Ev
-0001d7d0: 656e 7449 6e76 6f6b 6543 6f6e 6669 6728  entInvokeConfig(
-0001d7e0: 0a20 2020 2020 2020 2020 2020 2066 756e  .            fun
-0001d7f0: 6374 696f 6e5f 6e61 6d65 3d66 756e 6374  ction_name=funct
-0001d800: 696f 6e5f 6e61 6d65 2c0a 2020 2020 2020  ion_name,.      
-0001d810: 2020 2020 2020 7175 616c 6966 6965 723d        qualifier=
-0001d820: 7175 616c 6966 6965 722c 0a20 2020 2020  qualifier,.     
-0001d830: 2020 2020 2020 206d 6178 696d 756d 5f65         maximum_e
-0001d840: 7665 6e74 5f61 6765 5f69 6e5f 7365 636f  vent_age_in_seco
-0001d850: 6e64 733d 6d61 7869 6d75 6d5f 6576 656e  nds=maximum_even
-0001d860: 745f 6167 655f 696e 5f73 6563 6f6e 6473  t_age_in_seconds
-0001d870: 2c0a 2020 2020 2020 2020 2020 2020 6d61  ,.            ma
-0001d880: 7869 6d75 6d5f 7265 7472 795f 6174 7465  ximum_retry_atte
-0001d890: 6d70 7473 3d6d 6178 696d 756d 5f72 6574  mpts=maximum_ret
-0001d8a0: 7279 5f61 7474 656d 7074 732c 0a20 2020  ry_attempts,.   
-0001d8b0: 2020 2020 2020 2020 206c 6173 745f 6d6f           last_mo
-0001d8c0: 6469 6669 6564 3d61 7069 5f75 7469 6c73  dified=api_utils
-0001d8d0: 2e67 656e 6572 6174 655f 6c61 6d62 6461  .generate_lambda
-0001d8e0: 5f64 6174 6528 292c 0a20 2020 2020 2020  _date(),.       
-0001d8f0: 2020 2020 2064 6573 7469 6e61 7469 6f6e       destination
-0001d900: 5f63 6f6e 6669 673d 6465 7374 696e 6174  _config=destinat
-0001d910: 696f 6e5f 636f 6e66 6967 2c0a 2020 2020  ion_config,.    
-0001d920: 2020 2020 290a 2020 2020 2020 2020 666e      ).        fn
-0001d930: 2e65 7665 6e74 5f69 6e76 6f6b 655f 636f  .event_invoke_co
-0001d940: 6e66 6967 735b 7175 616c 6966 6965 725d  nfigs[qualifier]
-0001d950: 203d 2063 6f6e 6669 670a 0a20 2020 2020   = config..     
-0001d960: 2020 2072 6574 7572 6e20 4675 6e63 7469     return Functi
-0001d970: 6f6e 4576 656e 7449 6e76 6f6b 6543 6f6e  onEventInvokeCon
-0001d980: 6669 6728 0a20 2020 2020 2020 2020 2020  fig(.           
-0001d990: 204c 6173 744d 6f64 6966 6965 643d 6461   LastModified=da
-0001d9a0: 7465 7469 6d65 2e64 6174 6574 696d 652e  tetime.datetime.
-0001d9b0: 7374 7270 7469 6d65 280a 2020 2020 2020  strptime(.      
-0001d9c0: 2020 2020 2020 2020 2020 636f 6e66 6967            config
-0001d9d0: 2e6c 6173 745f 6d6f 6469 6669 6564 2c20  .last_modified, 
-0001d9e0: 6170 695f 7574 696c 732e 4c41 4d42 4441  api_utils.LAMBDA
-0001d9f0: 5f44 4154 455f 464f 524d 4154 0a20 2020  _DATE_FORMAT.   
-0001da00: 2020 2020 2020 2020 2029 2c0a 2020 2020           ),.    
-0001da10: 2020 2020 2020 2020 4675 6e63 7469 6f6e          Function
-0001da20: 4172 6e3d 6170 695f 7574 696c 732e 7175  Arn=api_utils.qu
-0001da30: 616c 6966 6965 645f 6c61 6d62 6461 5f61  alified_lambda_a
-0001da40: 726e 280a 2020 2020 2020 2020 2020 2020  rn(.            
-0001da50: 2020 2020 6675 6e63 7469 6f6e 5f6e 616d      function_nam
-0001da60: 652c 2071 7561 6c69 6669 6572 206f 7220  e, qualifier or 
-0001da70: 2224 4c41 5445 5354 222c 2063 6f6e 7465  "$LATEST", conte
-0001da80: 7874 2e61 6363 6f75 6e74 5f69 642c 2063  xt.account_id, c
-0001da90: 6f6e 7465 7874 2e72 6567 696f 6e0a 2020  ontext.region.  
-0001daa0: 2020 2020 2020 2020 2020 292c 0a20 2020            ),.   
-0001dab0: 2020 2020 2020 2020 2044 6573 7469 6e61           Destina
-0001dac0: 7469 6f6e 436f 6e66 6967 3d64 6573 7469  tionConfig=desti
-0001dad0: 6e61 7469 6f6e 5f63 6f6e 6669 672c 0a20  nation_config,. 
-0001dae0: 2020 2020 2020 2020 2020 204d 6178 696d             Maxim
-0001daf0: 756d 4576 656e 7441 6765 496e 5365 636f  umEventAgeInSeco
-0001db00: 6e64 733d 6d61 7869 6d75 6d5f 6576 656e  nds=maximum_even
-0001db10: 745f 6167 655f 696e 5f73 6563 6f6e 6473  t_age_in_seconds
-0001db20: 2c0a 2020 2020 2020 2020 2020 2020 4d61  ,.            Ma
-0001db30: 7869 6d75 6d52 6574 7279 4174 7465 6d70  ximumRetryAttemp
-0001db40: 7473 3d6d 6178 696d 756d 5f72 6574 7279  ts=maximum_retry
-0001db50: 5f61 7474 656d 7074 732c 0a20 2020 2020  _attempts,.     
-0001db60: 2020 2029 0a0a 2020 2020 6465 6620 6765     )..    def ge
-0001db70: 745f 6675 6e63 7469 6f6e 5f65 7665 6e74  t_function_event
-0001db80: 5f69 6e76 6f6b 655f 636f 6e66 6967 280a  _invoke_config(.
-0001db90: 2020 2020 2020 2020 7365 6c66 2c20 636f          self, co
-0001dba0: 6e74 6578 743a 2052 6571 7565 7374 436f  ntext: RequestCo
-0001dbb0: 6e74 6578 742c 2066 756e 6374 696f 6e5f  ntext, function_
-0001dbc0: 6e61 6d65 3a20 4675 6e63 7469 6f6e 4e61  name: FunctionNa
-0001dbd0: 6d65 2c20 7175 616c 6966 6965 723a 2051  me, qualifier: Q
-0001dbe0: 7561 6c69 6669 6572 203d 204e 6f6e 650a  ualifier = None.
-0001dbf0: 2020 2020 2920 2d3e 2046 756e 6374 696f      ) -> Functio
-0001dc00: 6e45 7665 6e74 496e 766f 6b65 436f 6e66  nEventInvokeConf
-0001dc10: 6967 3a0a 2020 2020 2020 2020 7374 6174  ig:.        stat
-0001dc20: 6520 3d20 6c61 6d62 6461 5f73 746f 7265  e = lambda_store
-0001dc30: 735b 636f 6e74 6578 742e 6163 636f 756e  s[context.accoun
-0001dc40: 745f 6964 5d5b 636f 6e74 6578 742e 7265  t_id][context.re
-0001dc50: 6769 6f6e 5d0a 2020 2020 2020 2020 6675  gion].        fu
-0001dc60: 6e63 7469 6f6e 5f6e 616d 652c 2071 7561  nction_name, qua
-0001dc70: 6c69 6669 6572 203d 2061 7069 5f75 7469  lifier = api_uti
-0001dc80: 6c73 2e67 6574 5f6e 616d 655f 616e 645f  ls.get_name_and_
-0001dc90: 7175 616c 6966 6965 7228 0a20 2020 2020  qualifier(.     
-0001dca0: 2020 2020 2020 2066 756e 6374 696f 6e5f         function_
-0001dcb0: 6e61 6d65 2c20 7175 616c 6966 6965 722c  name, qualifier,
-0001dcc0: 2063 6f6e 7465 7874 2e72 6567 696f 6e0a   context.region.
-0001dcd0: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-0001dce0: 2020 2071 7561 6c69 6669 6572 203d 2071     qualifier = q
-0001dcf0: 7561 6c69 6669 6572 206f 7220 2224 4c41  ualifier or "$LA
-0001dd00: 5445 5354 220a 2020 2020 2020 2020 666e  TEST".        fn
-0001dd10: 203d 2073 7461 7465 2e66 756e 6374 696f   = state.functio
-0001dd20: 6e73 2e67 6574 2866 756e 6374 696f 6e5f  ns.get(function_
-0001dd30: 6e61 6d65 290a 2020 2020 2020 2020 6966  name).        if
-0001dd40: 206e 6f74 2066 6e3a 0a20 2020 2020 2020   not fn:.       
-0001dd50: 2020 2020 2066 6e5f 6172 6e20 3d20 6170       fn_arn = ap
-0001dd60: 695f 7574 696c 732e 7175 616c 6966 6965  i_utils.qualifie
-0001dd70: 645f 6c61 6d62 6461 5f61 726e 280a 2020  d_lambda_arn(.  
-0001dd80: 2020 2020 2020 2020 2020 2020 2020 6675                fu
-0001dd90: 6e63 7469 6f6e 5f6e 616d 652c 2071 7561  nction_name, qua
-0001dda0: 6c69 6669 6572 2c20 636f 6e74 6578 742e  lifier, context.
-0001ddb0: 6163 636f 756e 745f 6964 2c20 636f 6e74  account_id, cont
-0001ddc0: 6578 742e 7265 6769 6f6e 0a20 2020 2020  ext.region.     
-0001ddd0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-0001dde0: 2020 2020 2072 6169 7365 2052 6573 6f75       raise Resou
-0001ddf0: 7263 654e 6f74 466f 756e 6445 7863 6570  rceNotFoundExcep
-0001de00: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
-0001de10: 2020 2020 2020 6622 5468 6520 6675 6e63        f"The func
-0001de20: 7469 6f6e 207b 666e 5f61 726e 7d20 646f  tion {fn_arn} do
-0001de30: 6573 6e27 7420 6861 7665 2061 6e20 4576  esn't have an Ev
-0001de40: 656e 7449 6e76 6f6b 6543 6f6e 6669 6722  entInvokeConfig"
-0001de50: 2c20 5479 7065 3d22 5573 6572 220a 2020  , Type="User".  
-0001de60: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
-0001de70: 2020 2020 2063 6f6e 6669 6720 3d20 666e       config = fn
-0001de80: 2e65 7665 6e74 5f69 6e76 6f6b 655f 636f  .event_invoke_co
-0001de90: 6e66 6967 732e 6765 7428 7175 616c 6966  nfigs.get(qualif
-0001dea0: 6965 7229 0a20 2020 2020 2020 2069 6620  ier).        if 
-0001deb0: 6e6f 7420 636f 6e66 6967 3a0a 2020 2020  not config:.    
-0001dec0: 2020 2020 2020 2020 666e 5f61 726e 203d          fn_arn =
-0001ded0: 2061 7069 5f75 7469 6c73 2e71 7561 6c69   api_utils.quali
-0001dee0: 6669 6564 5f6c 616d 6264 615f 6172 6e28  fied_lambda_arn(
-0001def0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001df00: 2066 756e 6374 696f 6e5f 6e61 6d65 2c20   function_name, 
-0001df10: 7175 616c 6966 6965 722c 2063 6f6e 7465  qualifier, conte
-0001df20: 7874 2e61 6363 6f75 6e74 5f69 642c 2063  xt.account_id, c
-0001df30: 6f6e 7465 7874 2e72 6567 696f 6e0a 2020  ontext.region.  
-0001df40: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-0001df50: 2020 2020 2020 2020 7261 6973 6520 5265          raise Re
-0001df60: 736f 7572 6365 4e6f 7446 6f75 6e64 4578  sourceNotFoundEx
-0001df70: 6365 7074 696f 6e28 0a20 2020 2020 2020  ception(.       
-0001df80: 2020 2020 2020 2020 2066 2254 6865 2066           f"The f
-0001df90: 756e 6374 696f 6e20 7b66 6e5f 6172 6e7d  unction {fn_arn}
-0001dfa0: 2064 6f65 736e 2774 2068 6176 6520 616e   doesn't have an
-0001dfb0: 2045 7665 6e74 496e 766f 6b65 436f 6e66   EventInvokeConf
-0001dfc0: 6967 222c 2054 7970 653d 2255 7365 7222  ig", Type="User"
-0001dfd0: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
-0001dfe0: 2020 2020 2020 2020 7265 7475 726e 2046          return F
-0001dff0: 756e 6374 696f 6e45 7665 6e74 496e 766f  unctionEventInvo
-0001e000: 6b65 436f 6e66 6967 280a 2020 2020 2020  keConfig(.      
-0001e010: 2020 2020 2020 4c61 7374 4d6f 6469 6669        LastModifi
-0001e020: 6564 3d64 6174 6574 696d 652e 6461 7465  ed=datetime.date
-0001e030: 7469 6d65 2e73 7472 7074 696d 6528 0a20  time.strptime(. 
-0001e040: 2020 2020 2020 2020 2020 2020 2020 2063                 c
-0001e050: 6f6e 6669 672e 6c61 7374 5f6d 6f64 6966  onfig.last_modif
-0001e060: 6965 642c 2061 7069 5f75 7469 6c73 2e4c  ied, api_utils.L
-0001e070: 414d 4244 415f 4441 5445 5f46 4f52 4d41  AMBDA_DATE_FORMA
-0001e080: 540a 2020 2020 2020 2020 2020 2020 292c  T.            ),
-0001e090: 0a20 2020 2020 2020 2020 2020 2046 756e  .            Fun
-0001e0a0: 6374 696f 6e41 726e 3d61 7069 5f75 7469  ctionArn=api_uti
-0001e0b0: 6c73 2e71 7561 6c69 6669 6564 5f6c 616d  ls.qualified_lam
-0001e0c0: 6264 615f 6172 6e28 0a20 2020 2020 2020  bda_arn(.       
-0001e0d0: 2020 2020 2020 2020 2066 756e 6374 696f           functio
-0001e0e0: 6e5f 6e61 6d65 2c20 7175 616c 6966 6965  n_name, qualifie
-0001e0f0: 722c 2063 6f6e 7465 7874 2e61 6363 6f75  r, context.accou
-0001e100: 6e74 5f69 642c 2063 6f6e 7465 7874 2e72  nt_id, context.r
-0001e110: 6567 696f 6e0a 2020 2020 2020 2020 2020  egion.          
-0001e120: 2020 292c 0a20 2020 2020 2020 2020 2020    ),.           
-0001e130: 2044 6573 7469 6e61 7469 6f6e 436f 6e66   DestinationConf
-0001e140: 6967 3d63 6f6e 6669 672e 6465 7374 696e  ig=config.destin
-0001e150: 6174 696f 6e5f 636f 6e66 6967 2c0a 2020  ation_config,.  
-0001e160: 2020 2020 2020 2020 2020 4d61 7869 6d75            Maximu
-0001e170: 6d45 7665 6e74 4167 6549 6e53 6563 6f6e  mEventAgeInSecon
-0001e180: 6473 3d63 6f6e 6669 672e 6d61 7869 6d75  ds=config.maximu
-0001e190: 6d5f 6576 656e 745f 6167 655f 696e 5f73  m_event_age_in_s
-0001e1a0: 6563 6f6e 6473 2c0a 2020 2020 2020 2020  econds,.        
-0001e1b0: 2020 2020 4d61 7869 6d75 6d52 6574 7279      MaximumRetry
-0001e1c0: 4174 7465 6d70 7473 3d63 6f6e 6669 672e  Attempts=config.
-0001e1d0: 6d61 7869 6d75 6d5f 7265 7472 795f 6174  maximum_retry_at
-0001e1e0: 7465 6d70 7473 2c0a 2020 2020 2020 2020  tempts,.        
-0001e1f0: 290a 0a20 2020 2064 6566 206c 6973 745f  )..    def list_
-0001e200: 6675 6e63 7469 6f6e 5f65 7665 6e74 5f69  function_event_i
-0001e210: 6e76 6f6b 655f 636f 6e66 6967 7328 0a20  nvoke_configs(. 
-0001e220: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
-0001e230: 2020 2020 2063 6f6e 7465 7874 3a20 5265       context: Re
-0001e240: 7175 6573 7443 6f6e 7465 7874 2c0a 2020  questContext,.  
-0001e250: 2020 2020 2020 6675 6e63 7469 6f6e 5f6e        function_n
-0001e260: 616d 653a 2046 756e 6374 696f 6e4e 616d  ame: FunctionNam
-0001e270: 652c 0a20 2020 2020 2020 206d 6172 6b65  e,.        marke
-0001e280: 723a 2053 7472 696e 6720 3d20 4e6f 6e65  r: String = None
-0001e290: 2c0a 2020 2020 2020 2020 6d61 785f 6974  ,.        max_it
-0001e2a0: 656d 733a 204d 6178 4675 6e63 7469 6f6e  ems: MaxFunction
-0001e2b0: 4576 656e 7449 6e76 6f6b 6543 6f6e 6669  EventInvokeConfi
-0001e2c0: 674c 6973 7449 7465 6d73 203d 204e 6f6e  gListItems = Non
-0001e2d0: 652c 0a20 2020 2029 202d 3e20 4c69 7374  e,.    ) -> List
-0001e2e0: 4675 6e63 7469 6f6e 4576 656e 7449 6e76  FunctionEventInv
-0001e2f0: 6f6b 6543 6f6e 6669 6773 5265 7370 6f6e  okeConfigsRespon
-0001e300: 7365 3a0a 2020 2020 2020 2020 7374 6174  se:.        stat
-0001e310: 6520 3d20 6c61 6d62 6461 5f73 746f 7265  e = lambda_store
-0001e320: 735b 636f 6e74 6578 742e 6163 636f 756e  s[context.accoun
-0001e330: 745f 6964 5d5b 636f 6e74 6578 742e 7265  t_id][context.re
-0001e340: 6769 6f6e 5d0a 2020 2020 2020 2020 666e  gion].        fn
-0001e350: 203d 2073 7461 7465 2e66 756e 6374 696f   = state.functio
-0001e360: 6e73 2e67 6574 2866 756e 6374 696f 6e5f  ns.get(function_
-0001e370: 6e61 6d65 290a 2020 2020 2020 2020 6966  name).        if
-0001e380: 206e 6f74 2066 6e3a 0a20 2020 2020 2020   not fn:.       
-0001e390: 2020 2020 2072 6169 7365 2052 6573 6f75       raise Resou
-0001e3a0: 7263 654e 6f74 466f 756e 6445 7863 6570  rceNotFoundExcep
-0001e3b0: 7469 6f6e 2822 5468 6520 6675 6e63 7469  tion("The functi
-0001e3c0: 6f6e 2064 6f65 736e 2774 2065 7869 7374  on doesn't exist
-0001e3d0: 2e22 2c20 5479 7065 3d22 5573 6572 2229  .", Type="User")
-0001e3e0: 0a0a 2020 2020 2020 2020 6576 656e 745f  ..        event_
-0001e3f0: 696e 766f 6b65 5f63 6f6e 6669 6773 203d  invoke_configs =
-0001e400: 205b 0a20 2020 2020 2020 2020 2020 2046   [.            F
-0001e410: 756e 6374 696f 6e45 7665 6e74 496e 766f  unctionEventInvo
-0001e420: 6b65 436f 6e66 6967 280a 2020 2020 2020  keConfig(.      
-0001e430: 2020 2020 2020 2020 2020 4c61 7374 4d6f            LastMo
-0001e440: 6469 6669 6564 3d63 2e6c 6173 745f 6d6f  dified=c.last_mo
-0001e450: 6469 6669 6564 2c0a 2020 2020 2020 2020  dified,.        
-0001e460: 2020 2020 2020 2020 4675 6e63 7469 6f6e          Function
-0001e470: 4172 6e3d 6170 695f 7574 696c 732e 7175  Arn=api_utils.qu
-0001e480: 616c 6966 6965 645f 6c61 6d62 6461 5f61  alified_lambda_a
-0001e490: 726e 280a 2020 2020 2020 2020 2020 2020  rn(.            
-0001e4a0: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
-0001e4b0: 5f6e 616d 652c 2063 2e71 7561 6c69 6669  _name, c.qualifi
-0001e4c0: 6572 2c20 636f 6e74 6578 742e 6163 636f  er, context.acco
-0001e4d0: 756e 745f 6964 2c20 636f 6e74 6578 742e  unt_id, context.
-0001e4e0: 7265 6769 6f6e 0a20 2020 2020 2020 2020  region.         
-0001e4f0: 2020 2020 2020 2029 2c0a 2020 2020 2020         ),.      
-0001e500: 2020 2020 2020 2020 2020 4d61 7869 6d75            Maximu
-0001e510: 6d45 7665 6e74 4167 6549 6e53 6563 6f6e  mEventAgeInSecon
-0001e520: 6473 3d63 2e6d 6178 696d 756d 5f65 7665  ds=c.maximum_eve
-0001e530: 6e74 5f61 6765 5f69 6e5f 7365 636f 6e64  nt_age_in_second
-0001e540: 732c 0a20 2020 2020 2020 2020 2020 2020  s,.             
-0001e550: 2020 204d 6178 696d 756d 5265 7472 7941     MaximumRetryA
-0001e560: 7474 656d 7074 733d 632e 6d61 7869 6d75  ttempts=c.maximu
-0001e570: 6d5f 7265 7472 795f 6174 7465 6d70 7473  m_retry_attempts
-0001e580: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-0001e590: 2020 4465 7374 696e 6174 696f 6e43 6f6e    DestinationCon
-0001e5a0: 6669 673d 632e 6465 7374 696e 6174 696f  fig=c.destinatio
-0001e5b0: 6e5f 636f 6e66 6967 2c0a 2020 2020 2020  n_config,.      
-0001e5c0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0001e5d0: 2020 2020 666f 7220 6320 696e 2066 6e2e      for c in fn.
-0001e5e0: 6576 656e 745f 696e 766f 6b65 5f63 6f6e  event_invoke_con
-0001e5f0: 6669 6773 2e76 616c 7565 7328 290a 2020  figs.values().  
-0001e600: 2020 2020 2020 5d0a 0a20 2020 2020 2020        ]..       
-0001e610: 2065 7665 6e74 5f69 6e76 6f6b 655f 636f   event_invoke_co
-0001e620: 6e66 6967 7320 3d20 5061 6769 6e61 7465  nfigs = Paginate
-0001e630: 644c 6973 7428 6576 656e 745f 696e 766f  dList(event_invo
-0001e640: 6b65 5f63 6f6e 6669 6773 290a 2020 2020  ke_configs).    
-0001e650: 2020 2020 7061 6765 2c20 746f 6b65 6e20      page, token 
-0001e660: 3d20 6576 656e 745f 696e 766f 6b65 5f63  = event_invoke_c
-0001e670: 6f6e 6669 6773 2e67 6574 5f70 6167 6528  onfigs.get_page(
-0001e680: 0a20 2020 2020 2020 2020 2020 206c 616d  .            lam
-0001e690: 6264 6120 783a 2078 5b22 4675 6e63 7469  bda x: x["Functi
-0001e6a0: 6f6e 4172 6e22 5d2c 0a20 2020 2020 2020  onArn"],.       
-0001e6b0: 2020 2020 206d 6172 6b65 722c 0a20 2020       marker,.   
-0001e6c0: 2020 2020 2020 2020 206d 6178 5f69 7465           max_ite
-0001e6d0: 6d73 2c0a 2020 2020 2020 2020 290a 2020  ms,.        ).  
-0001e6e0: 2020 2020 2020 7265 7475 726e 204c 6973        return Lis
-0001e6f0: 7446 756e 6374 696f 6e45 7665 6e74 496e  tFunctionEventIn
-0001e700: 766f 6b65 436f 6e66 6967 7352 6573 706f  vokeConfigsRespo
-0001e710: 6e73 6528 0a20 2020 2020 2020 2020 2020  nse(.           
-0001e720: 2046 756e 6374 696f 6e45 7665 6e74 496e   FunctionEventIn
-0001e730: 766f 6b65 436f 6e66 6967 733d 7061 6765  vokeConfigs=page
-0001e740: 2c20 4e65 7874 4d61 726b 6572 3d74 6f6b  , NextMarker=tok
-0001e750: 656e 0a20 2020 2020 2020 2029 0a0a 2020  en.        )..  
-0001e760: 2020 6465 6620 6465 6c65 7465 5f66 756e    def delete_fun
-0001e770: 6374 696f 6e5f 6576 656e 745f 696e 766f  ction_event_invo
-0001e780: 6b65 5f63 6f6e 6669 6728 0a20 2020 2020  ke_config(.     
-0001e790: 2020 2073 656c 662c 2063 6f6e 7465 7874     self, context
-0001e7a0: 3a20 5265 7175 6573 7443 6f6e 7465 7874  : RequestContext
-0001e7b0: 2c20 6675 6e63 7469 6f6e 5f6e 616d 653a  , function_name:
-0001e7c0: 2046 756e 6374 696f 6e4e 616d 652c 2071   FunctionName, q
-0001e7d0: 7561 6c69 6669 6572 3a20 5175 616c 6966  ualifier: Qualif
-0001e7e0: 6965 7220 3d20 4e6f 6e65 0a20 2020 2029  ier = None.    )
-0001e7f0: 202d 3e20 4e6f 6e65 3a0a 2020 2020 2020   -> None:.      
-0001e800: 2020 6675 6e63 7469 6f6e 5f6e 616d 652c    function_name,
-0001e810: 2071 7561 6c69 6669 6572 203d 2061 7069   qualifier = api
-0001e820: 5f75 7469 6c73 2e67 6574 5f6e 616d 655f  _utils.get_name_
-0001e830: 616e 645f 7175 616c 6966 6965 7228 0a20  and_qualifier(. 
-0001e840: 2020 2020 2020 2020 2020 2066 756e 6374             funct
-0001e850: 696f 6e5f 6e61 6d65 2c20 7175 616c 6966  ion_name, qualif
-0001e860: 6965 722c 2063 6f6e 7465 7874 2e72 6567  ier, context.reg
-0001e870: 696f 6e0a 2020 2020 2020 2020 290a 2020  ion.        ).  
-0001e880: 2020 2020 2020 7374 6174 6520 3d20 6c61        state = la
-0001e890: 6d62 6461 5f73 746f 7265 735b 636f 6e74  mbda_stores[cont
-0001e8a0: 6578 742e 6163 636f 756e 745f 6964 5d5b  ext.account_id][
-0001e8b0: 636f 6e74 6578 742e 7265 6769 6f6e 5d0a  context.region].
-0001e8c0: 2020 2020 2020 2020 666e 203d 2073 7461          fn = sta
-0001e8d0: 7465 2e66 756e 6374 696f 6e73 2e67 6574  te.functions.get
-0001e8e0: 2866 756e 6374 696f 6e5f 6e61 6d65 290a  (function_name).
-0001e8f0: 2020 2020 2020 2020 7265 736f 6c76 6564          resolved
-0001e900: 5f71 7561 6c69 6669 6572 203d 2071 7561  _qualifier = qua
-0001e910: 6c69 6669 6572 206f 7220 2224 4c41 5445  lifier or "$LATE
-0001e920: 5354 220a 2020 2020 2020 2020 666e 5f61  ST".        fn_a
-0001e930: 726e 203d 2061 7069 5f75 7469 6c73 2e71  rn = api_utils.q
-0001e940: 7561 6c69 6669 6564 5f6c 616d 6264 615f  ualified_lambda_
-0001e950: 6172 6e28 0a20 2020 2020 2020 2020 2020  arn(.           
-0001e960: 2066 756e 6374 696f 6e5f 6e61 6d65 2c20   function_name, 
-0001e970: 7175 616c 6966 6965 722c 2063 6f6e 7465  qualifier, conte
-0001e980: 7874 2e61 6363 6f75 6e74 5f69 642c 2063  xt.account_id, c
-0001e990: 6f6e 7465 7874 2e72 6567 696f 6e0a 2020  ontext.region.  
-0001e9a0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-0001e9b0: 6966 206e 6f74 2066 6e3a 0a20 2020 2020  if not fn:.     
-0001e9c0: 2020 2020 2020 2072 6169 7365 2052 6573         raise Res
-0001e9d0: 6f75 7263 654e 6f74 466f 756e 6445 7863  ourceNotFoundExc
-0001e9e0: 6570 7469 6f6e 280a 2020 2020 2020 2020  eption(.        
-0001e9f0: 2020 2020 2020 2020 6622 5468 6520 6675          f"The fu
-0001ea00: 6e63 7469 6f6e 207b 666e 5f61 726e 7d20  nction {fn_arn} 
-0001ea10: 646f 6573 6e27 7420 6861 7665 2061 6e20  doesn't have an 
-0001ea20: 4576 656e 7449 6e76 6f6b 6543 6f6e 6669  EventInvokeConfi
-0001ea30: 6722 2c20 5479 7065 3d22 5573 6572 220a  g", Type="User".
-0001ea40: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
-0001ea50: 2020 2020 2020 2063 6f6e 6669 6720 3d20         config = 
-0001ea60: 666e 2e65 7665 6e74 5f69 6e76 6f6b 655f  fn.event_invoke_
-0001ea70: 636f 6e66 6967 732e 6765 7428 7265 736f  configs.get(reso
-0001ea80: 6c76 6564 5f71 7561 6c69 6669 6572 290a  lved_qualifier).
-0001ea90: 2020 2020 2020 2020 6966 206e 6f74 2063          if not c
-0001eaa0: 6f6e 6669 673a 0a20 2020 2020 2020 2020  onfig:.         
-0001eab0: 2020 2072 6169 7365 2052 6573 6f75 7263     raise Resourc
-0001eac0: 654e 6f74 466f 756e 6445 7863 6570 7469  eNotFoundExcepti
-0001ead0: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
-0001eae0: 2020 2020 6622 5468 6520 6675 6e63 7469      f"The functi
-0001eaf0: 6f6e 207b 666e 5f61 726e 7d20 646f 6573  on {fn_arn} does
-0001eb00: 6e27 7420 6861 7665 2061 6e20 4576 656e  n't have an Even
-0001eb10: 7449 6e76 6f6b 6543 6f6e 6669 6722 2c20  tInvokeConfig", 
-0001eb20: 5479 7065 3d22 5573 6572 220a 2020 2020  Type="User".    
-0001eb30: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-0001eb40: 2020 2064 656c 2066 6e2e 6576 656e 745f     del fn.event_
-0001eb50: 696e 766f 6b65 5f63 6f6e 6669 6773 5b72  invoke_configs[r
-0001eb60: 6573 6f6c 7665 645f 7175 616c 6966 6965  esolved_qualifie
-0001eb70: 725d 0a0a 2020 2020 6465 6620 7570 6461  r]..    def upda
-0001eb80: 7465 5f66 756e 6374 696f 6e5f 6576 656e  te_function_even
-0001eb90: 745f 696e 766f 6b65 5f63 6f6e 6669 6728  t_invoke_config(
-0001eba0: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
-0001ebb0: 2020 2020 2020 2063 6f6e 7465 7874 3a20         context: 
-0001ebc0: 5265 7175 6573 7443 6f6e 7465 7874 2c0a  RequestContext,.
-0001ebd0: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
-0001ebe0: 5f6e 616d 653a 2046 756e 6374 696f 6e4e  _name: FunctionN
-0001ebf0: 616d 652c 0a20 2020 2020 2020 2071 7561  ame,.        qua
-0001ec00: 6c69 6669 6572 3a20 5175 616c 6966 6965  lifier: Qualifie
-0001ec10: 7220 3d20 4e6f 6e65 2c0a 2020 2020 2020  r = None,.      
-0001ec20: 2020 6d61 7869 6d75 6d5f 7265 7472 795f    maximum_retry_
-0001ec30: 6174 7465 6d70 7473 3a20 4d61 7869 6d75  attempts: Maximu
-0001ec40: 6d52 6574 7279 4174 7465 6d70 7473 203d  mRetryAttempts =
-0001ec50: 204e 6f6e 652c 0a20 2020 2020 2020 206d   None,.        m
-0001ec60: 6178 696d 756d 5f65 7665 6e74 5f61 6765  aximum_event_age
-0001ec70: 5f69 6e5f 7365 636f 6e64 733a 204d 6178  _in_seconds: Max
-0001ec80: 696d 756d 4576 656e 7441 6765 496e 5365  imumEventAgeInSe
-0001ec90: 636f 6e64 7320 3d20 4e6f 6e65 2c0a 2020  conds = None,.  
-0001eca0: 2020 2020 2020 6465 7374 696e 6174 696f        destinatio
-0001ecb0: 6e5f 636f 6e66 6967 3a20 4465 7374 696e  n_config: Destin
-0001ecc0: 6174 696f 6e43 6f6e 6669 6720 3d20 4e6f  ationConfig = No
-0001ecd0: 6e65 2c0a 2020 2020 2920 2d3e 2046 756e  ne,.    ) -> Fun
-0001ece0: 6374 696f 6e45 7665 6e74 496e 766f 6b65  ctionEventInvoke
-0001ecf0: 436f 6e66 6967 3a0a 2020 2020 2020 2020  Config:.        
-0001ed00: 2320 6c69 6b65 2070 7574 2062 7574 206f  # like put but o
-0001ed10: 6e6c 7920 7570 6461 7465 2073 696e 676c  nly update singl
-0001ed20: 6520 6669 656c 6473 2076 6961 2072 6570  e fields via rep
-0001ed30: 6c61 6365 0a20 2020 2020 2020 2073 7461  lace.        sta
-0001ed40: 7465 203d 206c 616d 6264 615f 7374 6f72  te = lambda_stor
-0001ed50: 6573 5b63 6f6e 7465 7874 2e61 6363 6f75  es[context.accou
-0001ed60: 6e74 5f69 645d 5b63 6f6e 7465 7874 2e72  nt_id][context.r
-0001ed70: 6567 696f 6e5d 0a20 2020 2020 2020 2066  egion].        f
-0001ed80: 756e 6374 696f 6e5f 6e61 6d65 2c20 7175  unction_name, qu
-0001ed90: 616c 6966 6965 7220 3d20 6170 695f 7574  alifier = api_ut
-0001eda0: 696c 732e 6765 745f 6e61 6d65 5f61 6e64  ils.get_name_and
-0001edb0: 5f71 7561 6c69 6669 6572 280a 2020 2020  _qualifier(.    
-0001edc0: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
-0001edd0: 5f6e 616d 652c 2071 7561 6c69 6669 6572  _name, qualifier
-0001ede0: 2c20 636f 6e74 6578 742e 7265 6769 6f6e  , context.region
-0001edf0: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
-0001ee00: 2020 2020 6966 2028 0a20 2020 2020 2020      if (.       
-0001ee10: 2020 2020 206d 6178 696d 756d 5f65 7665       maximum_eve
-0001ee20: 6e74 5f61 6765 5f69 6e5f 7365 636f 6e64  nt_age_in_second
-0001ee30: 7320 6973 204e 6f6e 650a 2020 2020 2020  s is None.      
-0001ee40: 2020 2020 2020 616e 6420 6d61 7869 6d75        and maximu
-0001ee50: 6d5f 7265 7472 795f 6174 7465 6d70 7473  m_retry_attempts
-0001ee60: 2069 7320 4e6f 6e65 0a20 2020 2020 2020   is None.       
-0001ee70: 2020 2020 2061 6e64 2064 6573 7469 6e61       and destina
-0001ee80: 7469 6f6e 5f63 6f6e 6669 6720 6973 204e  tion_config is N
-0001ee90: 6f6e 650a 2020 2020 2020 2020 293a 0a20  one.        ):. 
-0001eea0: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-0001eeb0: 2049 6e76 616c 6964 5061 7261 6d65 7465   InvalidParamete
-0001eec0: 7256 616c 7565 4578 6365 7074 696f 6e28  rValueException(
-0001eed0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001eee0: 2022 596f 7520 6d75 7374 2073 7065 6369   "You must speci
-0001eef0: 6679 2061 7420 6c65 6173 7420 6f6e 6520  fy at least one 
-0001ef00: 6f66 2065 7272 6f72 2068 616e 646c 696e  of error handlin
-0001ef10: 6720 6f72 2064 6573 7469 6e61 7469 6f6e  g or destination
-0001ef20: 2073 6574 7469 6e67 2e22 2c0a 2020 2020   setting.",.    
-0001ef30: 2020 2020 2020 2020 2020 2020 5479 7065              Type
-0001ef40: 3d22 5573 6572 222c 0a20 2020 2020 2020  ="User",.       
-0001ef50: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-0001ef60: 666e 203d 2073 7461 7465 2e66 756e 6374  fn = state.funct
-0001ef70: 696f 6e73 2e67 6574 2866 756e 6374 696f  ions.get(functio
-0001ef80: 6e5f 6e61 6d65 290a 2020 2020 2020 2020  n_name).        
-0001ef90: 6966 206e 6f74 2066 6e20 6f72 2028 7175  if not fn or (qu
-0001efa0: 616c 6966 6965 7220 616e 6420 6e6f 7420  alifier and not 
-0001efb0: 2871 7561 6c69 6669 6572 2069 6e20 666e  (qualifier in fn
-0001efc0: 2e61 6c69 6173 6573 206f 7220 7175 616c  .aliases or qual
-0001efd0: 6966 6965 7220 696e 2066 6e2e 7665 7273  ifier in fn.vers
-0001efe0: 696f 6e73 2929 3a0a 2020 2020 2020 2020  ions)):.        
-0001eff0: 2020 2020 7261 6973 6520 5265 736f 7572      raise Resour
-0001f000: 6365 4e6f 7446 6f75 6e64 4578 6365 7074  ceNotFoundExcept
-0001f010: 696f 6e28 2254 6865 2066 756e 6374 696f  ion("The functio
-0001f020: 6e20 646f 6573 6e27 7420 6578 6973 742e  n doesn't exist.
-0001f030: 222c 2054 7970 653d 2255 7365 7222 290a  ", Type="User").
-0001f040: 0a20 2020 2020 2020 2071 7561 6c69 6669  .        qualifi
-0001f050: 6572 203d 2071 7561 6c69 6669 6572 206f  er = qualifier o
-0001f060: 7220 2224 4c41 5445 5354 220a 0a20 2020  r "$LATEST"..   
-0001f070: 2020 2020 2063 6f6e 6669 6720 3d20 666e       config = fn
-0001f080: 2e65 7665 6e74 5f69 6e76 6f6b 655f 636f  .event_invoke_co
-0001f090: 6e66 6967 732e 6765 7428 7175 616c 6966  nfigs.get(qualif
-0001f0a0: 6965 7229 0a20 2020 2020 2020 2069 6620  ier).        if 
-0001f0b0: 6e6f 7420 636f 6e66 6967 3a0a 2020 2020  not config:.    
-0001f0c0: 2020 2020 2020 2020 666e 5f61 726e 203d          fn_arn =
-0001f0d0: 2061 7069 5f75 7469 6c73 2e71 7561 6c69   api_utils.quali
-0001f0e0: 6669 6564 5f6c 616d 6264 615f 6172 6e28  fied_lambda_arn(
-0001f0f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001f100: 2066 756e 6374 696f 6e5f 6e61 6d65 2c20   function_name, 
-0001f110: 7175 616c 6966 6965 722c 2063 6f6e 7465  qualifier, conte
-0001f120: 7874 2e61 6363 6f75 6e74 5f69 642c 2063  xt.account_id, c
-0001f130: 6f6e 7465 7874 2e72 6567 696f 6e0a 2020  ontext.region.  
-0001f140: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-0001f150: 2020 2020 2020 2020 7261 6973 6520 5265          raise Re
-0001f160: 736f 7572 6365 4e6f 7446 6f75 6e64 4578  sourceNotFoundEx
-0001f170: 6365 7074 696f 6e28 0a20 2020 2020 2020  ception(.       
-0001f180: 2020 2020 2020 2020 2066 2254 6865 2066           f"The f
-0001f190: 756e 6374 696f 6e20 7b66 6e5f 6172 6e7d  unction {fn_arn}
-0001f1a0: 2064 6f65 736e 2774 2068 6176 6520 616e   doesn't have an
-0001f1b0: 2045 7665 6e74 496e 766f 6b65 436f 6e66   EventInvokeConf
-0001f1c0: 6967 222c 2054 7970 653d 2255 7365 7222  ig", Type="User"
-0001f1d0: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
-0001f1e0: 2020 2020 2020 2020 6966 2064 6573 7469          if desti
-0001f1f0: 6e61 7469 6f6e 5f63 6f6e 6669 673a 0a20  nation_config:. 
-0001f200: 2020 2020 2020 2020 2020 2073 656c 662e             self.
-0001f210: 5f76 616c 6964 6174 655f 6465 7374 696e  _validate_destin
-0001f220: 6174 696f 6e5f 636f 6e66 6967 2873 7461  ation_config(sta
-0001f230: 7465 2c20 6675 6e63 7469 6f6e 5f6e 616d  te, function_nam
-0001f240: 652c 2064 6573 7469 6e61 7469 6f6e 5f63  e, destination_c
-0001f250: 6f6e 6669 6729 0a0a 2020 2020 2020 2020  onfig)..        
-0001f260: 6f70 7469 6f6e 616c 5f6b 7761 7267 7320  optional_kwargs 
-0001f270: 3d20 7b0a 2020 2020 2020 2020 2020 2020  = {.            
-0001f280: 6b3a 2076 0a20 2020 2020 2020 2020 2020  k: v.           
-0001f290: 2066 6f72 206b 2c20 7620 696e 207b 0a20   for k, v in {. 
-0001f2a0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-0001f2b0: 6465 7374 696e 6174 696f 6e5f 636f 6e66  destination_conf
-0001f2c0: 6967 223a 2064 6573 7469 6e61 7469 6f6e  ig": destination
-0001f2d0: 5f63 6f6e 6669 672c 0a20 2020 2020 2020  _config,.       
-0001f2e0: 2020 2020 2020 2020 2022 6d61 7869 6d75           "maximu
-0001f2f0: 6d5f 7265 7472 795f 6174 7465 6d70 7473  m_retry_attempts
-0001f300: 223a 206d 6178 696d 756d 5f72 6574 7279  ": maximum_retry
-0001f310: 5f61 7474 656d 7074 732c 0a20 2020 2020  _attempts,.     
-0001f320: 2020 2020 2020 2020 2020 2022 6d61 7869             "maxi
-0001f330: 6d75 6d5f 6576 656e 745f 6167 655f 696e  mum_event_age_in
-0001f340: 5f73 6563 6f6e 6473 223a 206d 6178 696d  _seconds": maxim
-0001f350: 756d 5f65 7665 6e74 5f61 6765 5f69 6e5f  um_event_age_in_
-0001f360: 7365 636f 6e64 732c 0a20 2020 2020 2020  seconds,.       
-0001f370: 2020 2020 207d 2e69 7465 6d73 2829 0a20       }.items(). 
-0001f380: 2020 2020 2020 2020 2020 2069 6620 7620             if v 
-0001f390: 6973 206e 6f74 204e 6f6e 650a 2020 2020  is not None.    
-0001f3a0: 2020 2020 7d0a 0a20 2020 2020 2020 206e      }..        n
-0001f3b0: 6577 5f63 6f6e 6669 6720 3d20 6461 7461  ew_config = data
-0001f3c0: 636c 6173 7365 732e 7265 706c 6163 6528  classes.replace(
-0001f3d0: 0a20 2020 2020 2020 2020 2020 2063 6f6e  .            con
-0001f3e0: 6669 672c 206c 6173 745f 6d6f 6469 6669  fig, last_modifi
-0001f3f0: 6564 3d61 7069 5f75 7469 6c73 2e67 656e  ed=api_utils.gen
-0001f400: 6572 6174 655f 6c61 6d62 6461 5f64 6174  erate_lambda_dat
-0001f410: 6528 292c 202a 2a6f 7074 696f 6e61 6c5f  e(), **optional_
-0001f420: 6b77 6172 6773 0a20 2020 2020 2020 2029  kwargs.        )
-0001f430: 0a20 2020 2020 2020 2066 6e2e 6576 656e  .        fn.even
-0001f440: 745f 696e 766f 6b65 5f63 6f6e 6669 6773  t_invoke_configs
-0001f450: 5b71 7561 6c69 6669 6572 5d20 3d20 6e65  [qualifier] = ne
-0001f460: 775f 636f 6e66 6967 0a0a 2020 2020 2020  w_config..      
-0001f470: 2020 7265 7475 726e 2046 756e 6374 696f    return Functio
-0001f480: 6e45 7665 6e74 496e 766f 6b65 436f 6e66  nEventInvokeConf
-0001f490: 6967 280a 2020 2020 2020 2020 2020 2020  ig(.            
-0001f4a0: 4c61 7374 4d6f 6469 6669 6564 3d64 6174  LastModified=dat
-0001f4b0: 6574 696d 652e 6461 7465 7469 6d65 2e73  etime.datetime.s
-0001f4c0: 7472 7074 696d 6528 0a20 2020 2020 2020  trptime(.       
-0001f4d0: 2020 2020 2020 2020 206e 6577 5f63 6f6e           new_con
-0001f4e0: 6669 672e 6c61 7374 5f6d 6f64 6966 6965  fig.last_modifie
-0001f4f0: 642c 2061 7069 5f75 7469 6c73 2e4c 414d  d, api_utils.LAM
-0001f500: 4244 415f 4441 5445 5f46 4f52 4d41 540a  BDA_DATE_FORMAT.
-0001f510: 2020 2020 2020 2020 2020 2020 292c 0a20              ),. 
-0001f520: 2020 2020 2020 2020 2020 2046 756e 6374             Funct
-0001f530: 696f 6e41 726e 3d61 7069 5f75 7469 6c73  ionArn=api_utils
-0001f540: 2e71 7561 6c69 6669 6564 5f6c 616d 6264  .qualified_lambd
-0001f550: 615f 6172 6e28 0a20 2020 2020 2020 2020  a_arn(.         
-0001f560: 2020 2020 2020 2066 756e 6374 696f 6e5f         function_
-0001f570: 6e61 6d65 2c20 7175 616c 6966 6965 7220  name, qualifier 
-0001f580: 6f72 2022 244c 4154 4553 5422 2c20 636f  or "$LATEST", co
-0001f590: 6e74 6578 742e 6163 636f 756e 745f 6964  ntext.account_id
-0001f5a0: 2c20 636f 6e74 6578 742e 7265 6769 6f6e  , context.region
-0001f5b0: 0a20 2020 2020 2020 2020 2020 2029 2c0a  .            ),.
-0001f5c0: 2020 2020 2020 2020 2020 2020 4465 7374              Dest
-0001f5d0: 696e 6174 696f 6e43 6f6e 6669 673d 6e65  inationConfig=ne
-0001f5e0: 775f 636f 6e66 6967 2e64 6573 7469 6e61  w_config.destina
-0001f5f0: 7469 6f6e 5f63 6f6e 6669 672c 0a20 2020  tion_config,.   
-0001f600: 2020 2020 2020 2020 204d 6178 696d 756d           Maximum
-0001f610: 4576 656e 7441 6765 496e 5365 636f 6e64  EventAgeInSecond
-0001f620: 733d 6e65 775f 636f 6e66 6967 2e6d 6178  s=new_config.max
-0001f630: 696d 756d 5f65 7665 6e74 5f61 6765 5f69  imum_event_age_i
-0001f640: 6e5f 7365 636f 6e64 732c 0a20 2020 2020  n_seconds,.     
-0001f650: 2020 2020 2020 204d 6178 696d 756d 5265         MaximumRe
-0001f660: 7472 7941 7474 656d 7074 733d 6e65 775f  tryAttempts=new_
-0001f670: 636f 6e66 6967 2e6d 6178 696d 756d 5f72  config.maximum_r
-0001f680: 6574 7279 5f61 7474 656d 7074 732c 0a20  etry_attempts,. 
-0001f690: 2020 2020 2020 2029 0a0a 2020 2020 2320         )..    # 
-0001f6a0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001f6b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001f6c0: 3d3d 3d3d 3d3d 3d0a 2020 2020 2320 3d3d  =======.    # ==
-0001f6d0: 3d3d 3d3d 2020 4c61 7965 7220 2620 4c61  ====  Layer & La
-0001f6e0: 7965 7220 5665 7273 696f 6e73 2020 3d3d  yer Versions  ==
-0001f6f0: 3d3d 3d3d 3d0a 2020 2020 2320 3d3d 3d3d  =====.    # ====
-0001f700: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001f710: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-0001f720: 3d3d 3d0a 0a20 2020 2064 6566 2070 7562  ===..    def pub
-0001f730: 6c69 7368 5f6c 6179 6572 5f76 6572 7369  lish_layer_versi
-0001f740: 6f6e 280a 2020 2020 2020 2020 7365 6c66  on(.        self
-0001f750: 2c0a 2020 2020 2020 2020 636f 6e74 6578  ,.        contex
-0001f760: 743a 2052 6571 7565 7374 436f 6e74 6578  t: RequestContex
-0001f770: 742c 0a20 2020 2020 2020 206c 6179 6572  t,.        layer
-0001f780: 5f6e 616d 653a 204c 6179 6572 4e61 6d65  _name: LayerName
-0001f790: 2c0a 2020 2020 2020 2020 636f 6e74 656e  ,.        conten
-0001f7a0: 743a 204c 6179 6572 5665 7273 696f 6e43  t: LayerVersionC
-0001f7b0: 6f6e 7465 6e74 496e 7075 742c 0a20 2020  ontentInput,.   
-0001f7c0: 2020 2020 2064 6573 6372 6970 7469 6f6e       description
-0001f7d0: 3a20 4465 7363 7269 7074 696f 6e20 3d20  : Description = 
-0001f7e0: 4e6f 6e65 2c0a 2020 2020 2020 2020 636f  None,.        co
-0001f7f0: 6d70 6174 6962 6c65 5f72 756e 7469 6d65  mpatible_runtime
-0001f800: 733a 2043 6f6d 7061 7469 626c 6552 756e  s: CompatibleRun
-0001f810: 7469 6d65 7320 3d20 4e6f 6e65 2c0a 2020  times = None,.  
-0001f820: 2020 2020 2020 6c69 6365 6e73 655f 696e        license_in
-0001f830: 666f 3a20 4c69 6365 6e73 6549 6e66 6f20  fo: LicenseInfo 
-0001f840: 3d20 4e6f 6e65 2c0a 2020 2020 2020 2020  = None,.        
-0001f850: 636f 6d70 6174 6962 6c65 5f61 7263 6869  compatible_archi
-0001f860: 7465 6374 7572 6573 3a20 436f 6d70 6174  tectures: Compat
-0001f870: 6962 6c65 4172 6368 6974 6563 7475 7265  ibleArchitecture
-0001f880: 7320 3d20 4e6f 6e65 2c0a 2020 2020 2920  s = None,.    ) 
-0001f890: 2d3e 2050 7562 6c69 7368 4c61 7965 7256  -> PublishLayerV
-0001f8a0: 6572 7369 6f6e 5265 7370 6f6e 7365 3a0a  ersionResponse:.
-0001f8b0: 2020 2020 2020 2020 2222 220a 2020 2020          """.    
-0001f8c0: 2020 2020 4f6e 2066 6972 7374 2075 7365      On first use
-0001f8d0: 206f 6620 6120 4c61 7965 724e 616d 6520   of a LayerName 
-0001f8e0: 6120 6e65 7720 6c61 7965 7220 6973 2063  a new layer is c
-0001f8f0: 7265 6174 6564 2061 6e64 2066 6f72 2065  reated and for e
-0001f900: 6163 6820 7375 6273 6571 7565 6e74 2063  ach subsequent c
-0001f910: 616c 6c20 7769 7468 2074 6865 2073 616d  all with the sam
-0001f920: 6520 4c61 7965 724e 616d 6520 6120 6e65  e LayerName a ne
-0001f930: 7720 7665 7273 696f 6e20 6973 2063 7265  w version is cre
-0001f940: 6174 6564 2e0a 2020 2020 2020 2020 4e6f  ated..        No
-0001f950: 7465 2074 6861 7420 7468 6572 6520 6172  te that there ar
-0001f960: 6520 6e6f 2024 4c41 5445 5354 2076 6572  e no $LATEST ver
-0001f970: 7369 6f6e 7320 7769 7468 206c 6179 6572  sions with layer
-0001f980: 7321 0a0a 2020 2020 2020 2020 2222 220a  s!..        """.
-0001f990: 2020 2020 2020 2020 7661 6c69 6461 7469          validati
-0001f9a0: 6f6e 5f65 7272 6f72 7320 3d20 6170 695f  on_errors = api_
-0001f9b0: 7574 696c 732e 7661 6c69 6461 7465 5f6c  utils.validate_l
-0001f9c0: 6179 6572 5f72 756e 7469 6d65 735f 616e  ayer_runtimes_an
-0001f9d0: 645f 6172 6368 6974 6563 7475 7265 7328  d_architectures(
-0001f9e0: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
-0001f9f0: 7061 7469 626c 655f 7275 6e74 696d 6573  patible_runtimes
-0001fa00: 2c20 636f 6d70 6174 6962 6c65 5f61 7263  , compatible_arc
-0001fa10: 6869 7465 6374 7572 6573 0a20 2020 2020  hitectures.     
-0001fa20: 2020 2029 0a20 2020 2020 2020 2069 6620     ).        if 
-0001fa30: 7661 6c69 6461 7469 6f6e 5f65 7272 6f72  validation_error
-0001fa40: 733a 0a20 2020 2020 2020 2020 2020 2072  s:.            r
-0001fa50: 6169 7365 2056 616c 6964 6174 696f 6e45  aise ValidationE
-0001fa60: 7863 6570 7469 6f6e 280a 2020 2020 2020  xception(.      
-0001fa70: 2020 2020 2020 2020 2020 6622 7b6c 656e            f"{len
-0001fa80: 2876 616c 6964 6174 696f 6e5f 6572 726f  (validation_erro
-0001fa90: 7273 297d 2076 616c 6964 6174 696f 6e20  rs)} validation 
-0001faa0: 6572 726f 727b 2773 2720 6966 206c 656e  error{'s' if len
-0001fab0: 2876 616c 6964 6174 696f 6e5f 6572 726f  (validation_erro
-0001fac0: 7273 2920 3e20 3120 656c 7365 2027 277d  rs) > 1 else ''}
-0001fad0: 2064 6574 6563 7465 643a 207b 273b 2027   detected: {'; '
-0001fae0: 2e6a 6f69 6e28 7661 6c69 6461 7469 6f6e  .join(validation
-0001faf0: 5f65 7272 6f72 7329 7d22 0a20 2020 2020  _errors)}".     
-0001fb00: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-0001fb10: 2020 7374 6174 6520 3d20 6c61 6d62 6461    state = lambda
-0001fb20: 5f73 746f 7265 735b 636f 6e74 6578 742e  _stores[context.
-0001fb30: 6163 636f 756e 745f 6964 5d5b 636f 6e74  account_id][cont
-0001fb40: 6578 742e 7265 6769 6f6e 5d0a 2020 2020  ext.region].    
-0001fb50: 2020 2020 7769 7468 2073 656c 662e 6372      with self.cr
-0001fb60: 6561 7465 5f6c 6179 6572 5f6c 6f63 6b3a  eate_layer_lock:
-0001fb70: 0a20 2020 2020 2020 2020 2020 2069 6620  .            if 
-0001fb80: 6c61 7965 725f 6e61 6d65 206e 6f74 2069  layer_name not i
-0001fb90: 6e20 7374 6174 652e 6c61 7965 7273 3a0a  n state.layers:.
-0001fba0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fbb0: 2320 7765 2064 6f6e 2774 2068 6176 6520  # we don't have 
-0001fbc0: 6120 7665 7273 696f 6e20 736f 2063 7265  a version so cre
-0001fbd0: 6174 6520 6e65 7720 6c61 7965 7220 6f62  ate new layer ob
-0001fbe0: 6a65 6374 0a20 2020 2020 2020 2020 2020  ject.           
-0001fbf0: 2020 2020 2023 206c 6f63 6b20 6973 2072       # lock is r
-0001fc00: 6571 7569 7265 6420 746f 2061 766f 6964  equired to avoid
-0001fc10: 2063 7265 6174 696e 6720 7477 6f20 7631   creating two v1
-0001fc20: 206f 626a 6563 7473 2066 6f72 2074 6865   objects for the
-0001fc30: 2073 616d 6520 6e61 6d65 0a20 2020 2020   same name.     
-0001fc40: 2020 2020 2020 2020 2020 206c 6179 6572             layer
-0001fc50: 203d 204c 6179 6572 280a 2020 2020 2020   = Layer(.      
-0001fc60: 2020 2020 2020 2020 2020 2020 2020 6172                ar
-0001fc70: 6e3d 6170 695f 7574 696c 732e 6c61 7965  n=api_utils.laye
-0001fc80: 725f 6172 6e28 0a20 2020 2020 2020 2020  r_arn(.         
-0001fc90: 2020 2020 2020 2020 2020 2020 2020 206c                 l
-0001fca0: 6179 6572 5f6e 616d 653d 6c61 7965 725f  ayer_name=layer_
-0001fcb0: 6e61 6d65 2c20 6163 636f 756e 743d 636f  name, account=co
-0001fcc0: 6e74 6578 742e 6163 636f 756e 745f 6964  ntext.account_id
-0001fcd0: 2c20 7265 6769 6f6e 3d63 6f6e 7465 7874  , region=context
-0001fce0: 2e72 6567 696f 6e0a 2020 2020 2020 2020  .region.        
-0001fcf0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-0001fd00: 2020 2020 2020 2020 2020 2020 2020 290a                ).
-0001fd10: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fd20: 7374 6174 652e 6c61 7965 7273 5b6c 6179  state.layers[lay
-0001fd30: 6572 5f6e 616d 655d 203d 206c 6179 6572  er_name] = layer
-0001fd40: 0a0a 2020 2020 2020 2020 6c61 7965 7220  ..        layer 
-0001fd50: 3d20 7374 6174 652e 6c61 7965 7273 5b6c  = state.layers[l
-0001fd60: 6179 6572 5f6e 616d 655d 0a20 2020 2020  ayer_name].     
-0001fd70: 2020 2077 6974 6820 6c61 7965 722e 6e65     with layer.ne
-0001fd80: 7874 5f76 6572 7369 6f6e 5f6c 6f63 6b3a  xt_version_lock:
-0001fd90: 0a20 2020 2020 2020 2020 2020 206e 6578  .            nex
-0001fda0: 745f 7665 7273 696f 6e20 3d20 6c61 7965  t_version = laye
-0001fdb0: 722e 6e65 7874 5f76 6572 7369 6f6e 0a20  r.next_version. 
-0001fdc0: 2020 2020 2020 2020 2020 206c 6179 6572             layer
-0001fdd0: 2e6e 6578 745f 7665 7273 696f 6e20 2b3d  .next_version +=
-0001fde0: 2031 0a0a 2020 2020 2020 2020 2320 6372   1..        # cr
-0001fdf0: 6561 7469 6e67 2061 206e 6577 206c 6179  eating a new lay
-0001fe00: 6572 0a20 2020 2020 2020 2069 6620 636f  er.        if co
-0001fe10: 6e74 656e 742e 6765 7428 225a 6970 4669  ntent.get("ZipFi
-0001fe20: 6c65 2229 3a0a 2020 2020 2020 2020 2020  le"):.          
-0001fe30: 2020 636f 6465 203d 2073 746f 7265 5f6c    code = store_l
-0001fe40: 616d 6264 615f 6172 6368 6976 6528 0a20  ambda_archive(. 
-0001fe50: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0001fe60: 7263 6869 7665 5f66 696c 653d 636f 6e74  rchive_file=cont
-0001fe70: 656e 745b 225a 6970 4669 6c65 225d 2c0a  ent["ZipFile"],.
-0001fe80: 2020 2020 2020 2020 2020 2020 2020 2020                  
-0001fe90: 6675 6e63 7469 6f6e 5f6e 616d 653d 6c61  function_name=la
-0001fea0: 7965 725f 6e61 6d65 2c0a 2020 2020 2020  yer_name,.      
-0001feb0: 2020 2020 2020 2020 2020 7265 6769 6f6e            region
-0001fec0: 5f6e 616d 653d 636f 6e74 6578 742e 7265  _name=context.re
-0001fed0: 6769 6f6e 2c0a 2020 2020 2020 2020 2020  gion,.          
-0001fee0: 2020 2020 2020 6163 636f 756e 745f 6964        account_id
-0001fef0: 3d63 6f6e 7465 7874 2e61 6363 6f75 6e74  =context.account
-0001ff00: 5f69 642c 0a20 2020 2020 2020 2020 2020  _id,.           
-0001ff10: 2029 0a20 2020 2020 2020 2065 6c73 653a   ).        else:
-0001ff20: 0a20 2020 2020 2020 2020 2020 2063 6f64  .            cod
-0001ff30: 6520 3d20 7374 6f72 655f 7333 5f62 7563  e = store_s3_buc
-0001ff40: 6b65 745f 6172 6368 6976 6528 0a20 2020  ket_archive(.   
-0001ff50: 2020 2020 2020 2020 2020 2020 2061 7263               arc
-0001ff60: 6869 7665 5f62 7563 6b65 743d 636f 6e74  hive_bucket=cont
-0001ff70: 656e 745b 2253 3342 7563 6b65 7422 5d2c  ent["S3Bucket"],
-0001ff80: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-0001ff90: 2061 7263 6869 7665 5f6b 6579 3d63 6f6e   archive_key=con
-0001ffa0: 7465 6e74 5b22 5333 4b65 7922 5d2c 0a20  tent["S3Key"],. 
-0001ffb0: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-0001ffc0: 7263 6869 7665 5f76 6572 7369 6f6e 3d63  rchive_version=c
-0001ffd0: 6f6e 7465 6e74 2e67 6574 2822 5333 4f62  ontent.get("S3Ob
-0001ffe0: 6a65 6374 5665 7273 696f 6e22 292c 0a20  jectVersion"),. 
-0001fff0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
-00020000: 756e 6374 696f 6e5f 6e61 6d65 3d6c 6179  unction_name=lay
-00020010: 6572 5f6e 616d 652c 0a20 2020 2020 2020  er_name,.       
-00020020: 2020 2020 2020 2020 2072 6567 696f 6e5f           region_
-00020030: 6e61 6d65 3d63 6f6e 7465 7874 2e72 6567  name=context.reg
-00020040: 696f 6e2c 0a20 2020 2020 2020 2020 2020  ion,.           
-00020050: 2020 2020 2061 6363 6f75 6e74 5f69 643d       account_id=
-00020060: 636f 6e74 6578 742e 6163 636f 756e 745f  context.account_
-00020070: 6964 2c0a 2020 2020 2020 2020 2020 2020  id,.            
-00020080: 290a 0a20 2020 2020 2020 206e 6577 5f6c  )..        new_l
-00020090: 6179 6572 5f76 6572 7369 6f6e 203d 204c  ayer_version = L
-000200a0: 6179 6572 5665 7273 696f 6e28 0a20 2020  ayerVersion(.   
-000200b0: 2020 2020 2020 2020 206c 6179 6572 5f76           layer_v
-000200c0: 6572 7369 6f6e 5f61 726e 3d61 7069 5f75  ersion_arn=api_u
-000200d0: 7469 6c73 2e6c 6179 6572 5f76 6572 7369  tils.layer_versi
-000200e0: 6f6e 5f61 726e 280a 2020 2020 2020 2020  on_arn(.        
-000200f0: 2020 2020 2020 2020 6c61 7965 725f 6e61          layer_na
-00020100: 6d65 3d6c 6179 6572 5f6e 616d 652c 0a20  me=layer_name,. 
-00020110: 2020 2020 2020 2020 2020 2020 2020 2061                 a
-00020120: 6363 6f75 6e74 3d63 6f6e 7465 7874 2e61  ccount=context.a
-00020130: 6363 6f75 6e74 5f69 642c 0a20 2020 2020  ccount_id,.     
-00020140: 2020 2020 2020 2020 2020 2072 6567 696f             regio
-00020150: 6e3d 636f 6e74 6578 742e 7265 6769 6f6e  n=context.region
-00020160: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00020170: 2020 7665 7273 696f 6e3d 7374 7228 6e65    version=str(ne
-00020180: 7874 5f76 6572 7369 6f6e 292c 0a20 2020  xt_version),.   
-00020190: 2020 2020 2020 2020 2029 2c0a 2020 2020           ),.    
-000201a0: 2020 2020 2020 2020 6c61 7965 725f 6172          layer_ar
-000201b0: 6e3d 6c61 7965 722e 6172 6e2c 0a20 2020  n=layer.arn,.   
-000201c0: 2020 2020 2020 2020 2076 6572 7369 6f6e           version
-000201d0: 3d6e 6578 745f 7665 7273 696f 6e2c 0a20  =next_version,. 
-000201e0: 2020 2020 2020 2020 2020 2064 6573 6372             descr
-000201f0: 6970 7469 6f6e 3d64 6573 6372 6970 7469  iption=descripti
-00020200: 6f6e 206f 7220 2222 2c0a 2020 2020 2020  on or "",.      
-00020210: 2020 2020 2020 6c69 6365 6e73 655f 696e        license_in
-00020220: 666f 3d6c 6963 656e 7365 5f69 6e66 6f2c  fo=license_info,
-00020230: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
-00020240: 7061 7469 626c 655f 7275 6e74 696d 6573  patible_runtimes
-00020250: 3d63 6f6d 7061 7469 626c 655f 7275 6e74  =compatible_runt
-00020260: 696d 6573 2c0a 2020 2020 2020 2020 2020  imes,.          
-00020270: 2020 636f 6d70 6174 6962 6c65 5f61 7263    compatible_arc
-00020280: 6869 7465 6374 7572 6573 3d63 6f6d 7061  hitectures=compa
-00020290: 7469 626c 655f 6172 6368 6974 6563 7475  tible_architectu
-000202a0: 7265 732c 0a20 2020 2020 2020 2020 2020  res,.           
-000202b0: 2063 7265 6174 6564 3d61 7069 5f75 7469   created=api_uti
-000202c0: 6c73 2e67 656e 6572 6174 655f 6c61 6d62  ls.generate_lamb
-000202d0: 6461 5f64 6174 6528 292c 0a20 2020 2020  da_date(),.     
-000202e0: 2020 2020 2020 2063 6f64 653d 636f 6465         code=code
-000202f0: 2c0a 2020 2020 2020 2020 290a 0a20 2020  ,.        )..   
-00020300: 2020 2020 206c 6179 6572 2e6c 6179 6572       layer.layer
-00020310: 5f76 6572 7369 6f6e 735b 7374 7228 6e65  _versions[str(ne
-00020320: 7874 5f76 6572 7369 6f6e 295d 203d 206e  xt_version)] = n
-00020330: 6577 5f6c 6179 6572 5f76 6572 7369 6f6e  ew_layer_version
-00020340: 0a0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00020350: 2061 7069 5f75 7469 6c73 2e6d 6170 5f6c   api_utils.map_l
-00020360: 6179 6572 5f6f 7574 286e 6577 5f6c 6179  ayer_out(new_lay
-00020370: 6572 5f76 6572 7369 6f6e 290a 0a20 2020  er_version)..   
-00020380: 2064 6566 2067 6574 5f6c 6179 6572 5f76   def get_layer_v
-00020390: 6572 7369 6f6e 280a 2020 2020 2020 2020  ersion(.        
-000203a0: 7365 6c66 2c20 636f 6e74 6578 743a 2052  self, context: R
-000203b0: 6571 7565 7374 436f 6e74 6578 742c 206c  equestContext, l
-000203c0: 6179 6572 5f6e 616d 653a 204c 6179 6572  ayer_name: Layer
-000203d0: 4e61 6d65 2c20 7665 7273 696f 6e5f 6e75  Name, version_nu
-000203e0: 6d62 6572 3a20 4c61 7965 7256 6572 7369  mber: LayerVersi
-000203f0: 6f6e 4e75 6d62 6572 0a20 2020 2029 202d  onNumber.    ) -
-00020400: 3e20 4765 744c 6179 6572 5665 7273 696f  > GetLayerVersio
-00020410: 6e52 6573 706f 6e73 653a 0a20 2020 2020  nResponse:.     
-00020420: 2020 2023 2054 4f44 4f3a 2068 616e 646c     # TODO: handl
-00020430: 6520 6c61 7965 725f 6e61 6d65 2061 7320  e layer_name as 
-00020440: 616e 2041 524e 0a0a 2020 2020 2020 2020  an ARN..        
-00020450: 6163 636f 756e 745f 6964 203d 2063 6f6e  account_id = con
-00020460: 7465 7874 2e61 6363 6f75 6e74 5f69 640a  text.account_id.
-00020470: 2020 2020 2020 2020 7265 6769 6f6e 5f6e          region_n
-00020480: 616d 6520 3d20 636f 6e74 6578 742e 7265  ame = context.re
-00020490: 6769 6f6e 0a20 2020 2020 2020 2069 6620  gion.        if 
-000204a0: 6170 695f 7574 696c 732e 6973 5f6c 6179  api_utils.is_lay
-000204b0: 6572 5f61 726e 286c 6179 6572 5f6e 616d  er_arn(layer_nam
-000204c0: 6529 3a0a 2020 2020 2020 2020 2020 2020  e):.            
-000204d0: 7265 6769 6f6e 5f6e 616d 652c 2061 6363  region_name, acc
-000204e0: 6f75 6e74 5f69 642c 206c 6179 6572 5f6e  ount_id, layer_n
-000204f0: 616d 652c 205f 203d 2061 7069 5f75 7469  ame, _ = api_uti
-00020500: 6c73 2e70 6172 7365 5f6c 6179 6572 5f61  ls.parse_layer_a
-00020510: 726e 286c 6179 6572 5f6e 616d 6529 0a20  rn(layer_name). 
-00020520: 2020 2020 2020 2073 7461 7465 203d 206c         state = l
-00020530: 616d 6264 615f 7374 6f72 6573 5b61 6363  ambda_stores[acc
-00020540: 6f75 6e74 5f69 645d 5b72 6567 696f 6e5f  ount_id][region_
-00020550: 6e61 6d65 5d0a 0a20 2020 2020 2020 206c  name]..        l
-00020560: 6179 6572 203d 2073 7461 7465 2e6c 6179  ayer = state.lay
-00020570: 6572 732e 6765 7428 6c61 7965 725f 6e61  ers.get(layer_na
-00020580: 6d65 290a 2020 2020 2020 2020 6966 2076  me).        if v
-00020590: 6572 7369 6f6e 5f6e 756d 6265 7220 3c20  ersion_number < 
-000205a0: 313a 0a20 2020 2020 2020 2020 2020 2072  1:.            r
-000205b0: 6169 7365 2049 6e76 616c 6964 5061 7261  aise InvalidPara
-000205c0: 6d65 7465 7256 616c 7565 4578 6365 7074  meterValueExcept
-000205d0: 696f 6e28 224c 6179 6572 2056 6572 7369  ion("Layer Versi
-000205e0: 6f6e 2043 616e 6e6f 7420 6265 206c 6573  on Cannot be les
-000205f0: 7320 7468 616e 2031 222c 2054 7970 653d  s than 1", Type=
-00020600: 2255 7365 7222 290a 2020 2020 2020 2020  "User").        
-00020610: 6966 206c 6179 6572 2069 7320 4e6f 6e65  if layer is None
-00020620: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
-00020630: 6973 6520 5265 736f 7572 6365 4e6f 7446  ise ResourceNotF
-00020640: 6f75 6e64 4578 6365 7074 696f 6e28 0a20  oundException(. 
-00020650: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00020660: 5468 6520 7265 736f 7572 6365 2079 6f75  The resource you
-00020670: 2072 6571 7565 7374 6564 2064 6f65 7320   requested does 
-00020680: 6e6f 7420 6578 6973 742e 222c 2054 7970  not exist.", Typ
-00020690: 653d 2255 7365 7222 0a20 2020 2020 2020  e="User".       
-000206a0: 2020 2020 2029 0a20 2020 2020 2020 206c       ).        l
-000206b0: 6179 6572 5f76 6572 7369 6f6e 203d 206c  ayer_version = l
-000206c0: 6179 6572 2e6c 6179 6572 5f76 6572 7369  ayer.layer_versi
-000206d0: 6f6e 732e 6765 7428 7374 7228 7665 7273  ons.get(str(vers
-000206e0: 696f 6e5f 6e75 6d62 6572 2929 0a20 2020  ion_number)).   
-000206f0: 2020 2020 2069 6620 6c61 7965 725f 7665       if layer_ve
-00020700: 7273 696f 6e20 6973 204e 6f6e 653a 0a20  rsion is None:. 
-00020710: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00020720: 2052 6573 6f75 7263 654e 6f74 466f 756e   ResourceNotFoun
-00020730: 6445 7863 6570 7469 6f6e 280a 2020 2020  dException(.    
-00020740: 2020 2020 2020 2020 2020 2020 2254 6865              "The
-00020750: 2072 6573 6f75 7263 6520 796f 7520 7265   resource you re
-00020760: 7175 6573 7465 6420 646f 6573 206e 6f74  quested does not
-00020770: 2065 7869 7374 2e22 2c20 5479 7065 3d22   exist.", Type="
-00020780: 5573 6572 220a 2020 2020 2020 2020 2020  User".          
-00020790: 2020 290a 2020 2020 2020 2020 7265 7475    ).        retu
-000207a0: 726e 2061 7069 5f75 7469 6c73 2e6d 6170  rn api_utils.map
-000207b0: 5f6c 6179 6572 5f6f 7574 286c 6179 6572  _layer_out(layer
-000207c0: 5f76 6572 7369 6f6e 290a 0a20 2020 2064  _version)..    d
-000207d0: 6566 2067 6574 5f6c 6179 6572 5f76 6572  ef get_layer_ver
-000207e0: 7369 6f6e 5f62 795f 6172 6e28 0a20 2020  sion_by_arn(.   
-000207f0: 2020 2020 2073 656c 662c 2063 6f6e 7465       self, conte
-00020800: 7874 3a20 5265 7175 6573 7443 6f6e 7465  xt: RequestConte
-00020810: 7874 2c20 6172 6e3a 204c 6179 6572 5665  xt, arn: LayerVe
-00020820: 7273 696f 6e41 726e 0a20 2020 2029 202d  rsionArn.    ) -
-00020830: 3e20 4765 744c 6179 6572 5665 7273 696f  > GetLayerVersio
-00020840: 6e52 6573 706f 6e73 653a 0a20 2020 2020  nResponse:.     
-00020850: 2020 206d 6174 6368 203d 2061 7069 5f75     match = api_u
-00020860: 7469 6c73 2e4c 4159 4552 5f56 4552 5349  tils.LAYER_VERSI
-00020870: 4f4e 5f41 524e 5f50 4154 5445 524e 2e73  ON_ARN_PATTERN.s
-00020880: 6561 7263 6828 6172 6e29 0a20 2020 2020  earch(arn).     
-00020890: 2020 206c 6179 6572 5f76 6572 7369 6f6e     layer_version
-000208a0: 5f70 6172 7473 203d 206d 6174 6368 2e67  _parts = match.g
-000208b0: 726f 7570 6469 6374 2829 0a20 2020 2020  roupdict().     
-000208c0: 2020 2069 6620 6e6f 7420 6c61 7965 725f     if not layer_
-000208d0: 7665 7273 696f 6e5f 7061 7274 732e 6765  version_parts.ge
-000208e0: 7428 226c 6179 6572 5f76 6572 7369 6f6e  t("layer_version
-000208f0: 2229 3a0a 2020 2020 2020 2020 2020 2020  "):.            
-00020900: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
-00020910: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
-00020920: 2020 2020 2020 2020 2020 2066 2231 2076             f"1 v
-00020930: 616c 6964 6174 696f 6e20 6572 726f 7220  alidation error 
-00020940: 6465 7465 6374 6564 3a20 5661 6c75 6520  detected: Value 
-00020950: 277b 6172 6e7d 2720 6174 2027 6172 6e27  '{arn}' at 'arn'
-00020960: 2066 6169 6c65 6420 746f 2073 6174 6973   failed to satis
-00020970: 6679 2063 6f6e 7374 7261 696e 743a 204d  fy constraint: M
-00020980: 656d 6265 7220 6d75 7374 2073 6174 6973  ember must satis
-00020990: 6679 2072 6567 756c 6172 2065 7870 7265  fy regular expre
-000209a0: 7373 696f 6e20 7061 7474 6572 6e3a 2022  ssion pattern: "
-000209b0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000209c0: 202b 2022 6172 6e3a 5b61 2d7a 412d 5a30   + "arn:[a-zA-Z0
-000209d0: 2d39 2d5d 2b3a 6c61 6d62 6461 3a5b 612d  -9-]+:lambda:[a-
-000209e0: 7a41 2d5a 302d 392d 5d2b 3a5c 5c64 7b31  zA-Z0-9-]+:\\d{1
-000209f0: 327d 3a6c 6179 6572 3a5b 612d 7a41 2d5a  2}:layer:[a-zA-Z
-00020a00: 302d 392d 5f5d 2b3a 5b30 2d39 5d2b 220a  0-9-_]+:[0-9]+".
-00020a10: 2020 2020 2020 2020 2020 2020 290a 0a20              ).. 
-00020a20: 2020 2020 2020 206c 6179 6572 5f6e 616d         layer_nam
-00020a30: 6520 3d20 6c61 7965 725f 7665 7273 696f  e = layer_versio
-00020a40: 6e5f 7061 7274 735b 226c 6179 6572 5f6e  n_parts["layer_n
-00020a50: 616d 6522 5d0a 2020 2020 2020 2020 6c61  ame"].        la
-00020a60: 7965 725f 7665 7273 696f 6e20 3d20 6c61  yer_version = la
-00020a70: 7965 725f 7665 7273 696f 6e5f 7061 7274  yer_version_part
-00020a80: 735b 226c 6179 6572 5f76 6572 7369 6f6e  s["layer_version
-00020a90: 225d 0a20 2020 2020 2020 2061 6363 6f75  "].        accou
-00020aa0: 6e74 5f69 6420 3d20 6c61 7965 725f 7665  nt_id = layer_ve
-00020ab0: 7273 696f 6e5f 7061 7274 735b 2261 6363  rsion_parts["acc
-00020ac0: 6f75 6e74 5f69 6422 5d0a 2020 2020 2020  ount_id"].      
-00020ad0: 2020 7265 6769 6f6e 5f6e 616d 6520 3d20    region_name = 
-00020ae0: 6c61 7965 725f 7665 7273 696f 6e5f 7061  layer_version_pa
-00020af0: 7274 735b 2272 6567 696f 6e5f 6e61 6d65  rts["region_name
-00020b00: 225d 0a0a 2020 2020 2020 2020 7374 6174  "]..        stat
-00020b10: 6520 3d20 6c61 6d62 6461 5f73 746f 7265  e = lambda_store
-00020b20: 735b 6163 636f 756e 745f 6964 5d5b 7265  s[account_id][re
-00020b30: 6769 6f6e 5f6e 616d 655d 0a20 2020 2020  gion_name].     
-00020b40: 2020 206c 6179 6572 5f76 6572 7369 6f6e     layer_version
-00020b50: 203d 2073 7461 7465 2e6c 6179 6572 732e   = state.layers.
-00020b60: 6765 7428 6c61 7965 725f 6e61 6d65 2c20  get(layer_name, 
-00020b70: 7b7d 292e 6c61 7965 725f 7665 7273 696f  {}).layer_versio
-00020b80: 6e73 2e67 6574 286c 6179 6572 5f76 6572  ns.get(layer_ver
-00020b90: 7369 6f6e 290a 0a20 2020 2020 2020 2069  sion)..        i
-00020ba0: 6620 6e6f 7420 6c61 7965 725f 7665 7273  f not layer_vers
-00020bb0: 696f 6e3a 0a20 2020 2020 2020 2020 2020  ion:.           
-00020bc0: 2072 6169 7365 2052 6573 6f75 7263 654e   raise ResourceN
-00020bd0: 6f74 466f 756e 6445 7863 6570 7469 6f6e  otFoundException
-00020be0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00020bf0: 2020 2254 6865 2072 6573 6f75 7263 6520    "The resource 
-00020c00: 796f 7520 7265 7175 6573 7465 6420 646f  you requested do
-00020c10: 6573 206e 6f74 2065 7869 7374 2e22 2c20  es not exist.", 
-00020c20: 5479 7065 3d22 5573 6572 220a 2020 2020  Type="User".    
-00020c30: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
-00020c40: 2020 2072 6574 7572 6e20 6170 695f 7574     return api_ut
-00020c50: 696c 732e 6d61 705f 6c61 7965 725f 6f75  ils.map_layer_ou
-00020c60: 7428 6c61 7965 725f 7665 7273 696f 6e29  t(layer_version)
-00020c70: 0a0a 2020 2020 6465 6620 6c69 7374 5f6c  ..    def list_l
-00020c80: 6179 6572 7328 0a20 2020 2020 2020 2073  ayers(.        s
-00020c90: 656c 662c 0a20 2020 2020 2020 2063 6f6e  elf,.        con
-00020ca0: 7465 7874 3a20 5265 7175 6573 7443 6f6e  text: RequestCon
-00020cb0: 7465 7874 2c0a 2020 2020 2020 2020 636f  text,.        co
-00020cc0: 6d70 6174 6962 6c65 5f72 756e 7469 6d65  mpatible_runtime
-00020cd0: 3a20 5275 6e74 696d 6520 3d20 4e6f 6e65  : Runtime = None
-00020ce0: 2c0a 2020 2020 2020 2020 6d61 726b 6572  ,.        marker
-00020cf0: 3a20 5374 7269 6e67 203d 204e 6f6e 652c  : String = None,
-00020d00: 0a20 2020 2020 2020 206d 6178 5f69 7465  .        max_ite
-00020d10: 6d73 3a20 4d61 784c 6179 6572 4c69 7374  ms: MaxLayerList
-00020d20: 4974 656d 7320 3d20 4e6f 6e65 2c0a 2020  Items = None,.  
-00020d30: 2020 2020 2020 636f 6d70 6174 6962 6c65        compatible
-00020d40: 5f61 7263 6869 7465 6374 7572 653a 2041  _architecture: A
-00020d50: 7263 6869 7465 6374 7572 6520 3d20 4e6f  rchitecture = No
-00020d60: 6e65 2c0a 2020 2020 2920 2d3e 204c 6973  ne,.    ) -> Lis
-00020d70: 744c 6179 6572 7352 6573 706f 6e73 653a  tLayersResponse:
-00020d80: 0a20 2020 2020 2020 2076 616c 6964 6174  .        validat
-00020d90: 696f 6e5f 6572 726f 7273 203d 205b 5d0a  ion_errors = [].
-00020da0: 0a20 2020 2020 2020 2076 616c 6964 6174  .        validat
-00020db0: 696f 6e5f 6572 726f 725f 6172 6368 203d  ion_error_arch =
-00020dc0: 2061 7069 5f75 7469 6c73 2e76 616c 6964   api_utils.valid
-00020dd0: 6174 655f 6c61 7965 725f 6172 6368 6974  ate_layer_archit
-00020de0: 6563 7475 7265 2863 6f6d 7061 7469 626c  ecture(compatibl
-00020df0: 655f 6172 6368 6974 6563 7475 7265 290a  e_architecture).
-00020e00: 2020 2020 2020 2020 6966 2076 616c 6964          if valid
-00020e10: 6174 696f 6e5f 6572 726f 725f 6172 6368  ation_error_arch
-00020e20: 3a0a 2020 2020 2020 2020 2020 2020 7661  :.            va
-00020e30: 6c69 6461 7469 6f6e 5f65 7272 6f72 732e  lidation_errors.
-00020e40: 6170 7065 6e64 2876 616c 6964 6174 696f  append(validatio
-00020e50: 6e5f 6572 726f 725f 6172 6368 290a 0a20  n_error_arch).. 
-00020e60: 2020 2020 2020 2076 616c 6964 6174 696f         validatio
-00020e70: 6e5f 6572 726f 725f 7275 6e74 696d 6520  n_error_runtime 
-00020e80: 3d20 6170 695f 7574 696c 732e 7661 6c69  = api_utils.vali
-00020e90: 6461 7465 5f6c 6179 6572 5f72 756e 7469  date_layer_runti
-00020ea0: 6d65 2863 6f6d 7061 7469 626c 655f 7275  me(compatible_ru
-00020eb0: 6e74 696d 6529 0a20 2020 2020 2020 2069  ntime).        i
-00020ec0: 6620 7661 6c69 6461 7469 6f6e 5f65 7272  f validation_err
-00020ed0: 6f72 5f72 756e 7469 6d65 3a0a 2020 2020  or_runtime:.    
-00020ee0: 2020 2020 2020 2020 7661 6c69 6461 7469          validati
-00020ef0: 6f6e 5f65 7272 6f72 732e 6170 7065 6e64  on_errors.append
-00020f00: 2876 616c 6964 6174 696f 6e5f 6572 726f  (validation_erro
-00020f10: 725f 7275 6e74 696d 6529 0a0a 2020 2020  r_runtime)..    
-00020f20: 2020 2020 6966 2076 616c 6964 6174 696f      if validatio
-00020f30: 6e5f 6572 726f 7273 3a0a 2020 2020 2020  n_errors:.      
-00020f40: 2020 2020 2020 7261 6973 6520 5661 6c69        raise Vali
-00020f50: 6461 7469 6f6e 4578 6365 7074 696f 6e28  dationException(
-00020f60: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00020f70: 2066 227b 6c65 6e28 7661 6c69 6461 7469   f"{len(validati
-00020f80: 6f6e 5f65 7272 6f72 7329 7d20 7661 6c69  on_errors)} vali
-00020f90: 6461 7469 6f6e 2065 7272 6f72 7b27 7327  dation error{'s'
-00020fa0: 2069 6620 6c65 6e28 7661 6c69 6461 7469   if len(validati
-00020fb0: 6f6e 5f65 7272 6f72 7329 203e 2031 2065  on_errors) > 1 e
-00020fc0: 6c73 6520 2727 7d20 6465 7465 6374 6564  lse ''} detected
-00020fd0: 3a20 7b27 3b27 2e6a 6f69 6e28 7661 6c69  : {';'.join(vali
-00020fe0: 6461 7469 6f6e 5f65 7272 6f72 7329 7d22  dation_errors)}"
-00020ff0: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
-00021000: 2020 2020 2020 2023 2054 4f44 4f3a 2068         # TODO: h
-00021010: 616e 646c 6520 6669 6c74 6572 3a20 636f  andle filter: co
-00021020: 6d70 6174 6962 6c65 5f72 756e 7469 6d65  mpatible_runtime
-00021030: 0a20 2020 2020 2020 2023 2054 4f44 4f3a  .        # TODO:
-00021040: 2068 616e 646c 6520 6669 6c74 6572 3a20   handle filter: 
-00021050: 636f 6d70 6174 6962 6c65 5f61 7263 6869  compatible_archi
-00021060: 7465 6374 7572 650a 0a20 2020 2020 2020  tecture..       
-00021070: 2073 7461 7465 203d 206c 616d 6264 615f   state = lambda_
-00021080: 7374 6f72 6573 5b63 6f6e 7465 7874 2e61  stores[context.a
-00021090: 6363 6f75 6e74 5f69 645d 5b63 6f6e 7465  ccount_id][conte
-000210a0: 7874 2e72 6567 696f 6e5d 0a20 2020 2020  xt.region].     
-000210b0: 2020 206c 6179 6572 7320 3d20 7374 6174     layers = stat
-000210c0: 652e 6c61 7965 7273 0a0a 2020 2020 2020  e.layers..      
-000210d0: 2020 2320 544f 444f 3a20 7465 7374 2068    # TODO: test h
-000210e0: 6f77 2066 696c 7465 7273 2062 6568 6176  ow filters behav
-000210f0: 6520 746f 6765 7468 6572 2077 6974 6820  e together with 
-00021100: 6f6e 6c79 2072 6574 7572 6e69 6e67 206c  only returning l
-00021110: 6179 6572 7320 6865 7265 3f20 446f 6573  ayers here? Does
-00021120: 2069 7420 7265 7475 726e 2074 6865 206c   it return the l
-00021130: 6174 6573 7420 226d 6174 6368 696e 6722  atest "matching"
-00021140: 206c 6179 6572 2c20 692e 652e 2064 6f65   layer, i.e. doe
-00021150: 7320 6974 2069 676e 6f72 6520 6c61 7465  s it ignore late
-00021160: 7220 6c61 7965 7220 7665 7273 696f 6e73  r layer versions
-00021170: 2074 6861 7420 646f 6e27 7420 6d61 7463   that don't matc
-00021180: 683f 0a0a 2020 2020 2020 2020 7265 7370  h?..        resp
-00021190: 6f6e 7365 733a 206c 6973 745b 4c61 7965  onses: list[Laye
-000211a0: 7273 4c69 7374 4974 656d 5d20 3d20 5b5d  rsListItem] = []
-000211b0: 0a20 2020 2020 2020 2066 6f72 206c 6179  .        for lay
-000211c0: 6572 5f6e 616d 652c 206c 6179 6572 2069  er_name, layer i
-000211d0: 6e20 6c61 7965 7273 2e69 7465 6d73 2829  n layers.items()
-000211e0: 3a0a 2020 2020 2020 2020 2020 2020 2320  :.            # 
-000211f0: 6665 7463 6820 6c61 7465 7374 2076 6572  fetch latest ver
-00021200: 7369 6f6e 0a20 2020 2020 2020 2020 2020  sion.           
-00021210: 206c 6179 6572 5f76 6572 7369 6f6e 7320   layer_versions 
-00021220: 3d20 6c69 7374 286c 6179 6572 2e6c 6179  = list(layer.lay
-00021230: 6572 5f76 6572 7369 6f6e 732e 7661 6c75  er_versions.valu
-00021240: 6573 2829 290a 2020 2020 2020 2020 2020  es()).          
-00021250: 2020 736f 7274 6564 286c 6179 6572 5f76    sorted(layer_v
-00021260: 6572 7369 6f6e 732c 206b 6579 3d6c 616d  ersions, key=lam
-00021270: 6264 6120 783a 2078 2e76 6572 7369 6f6e  bda x: x.version
-00021280: 290a 2020 2020 2020 2020 2020 2020 6c61  ).            la
-00021290: 7465 7374 5f6c 6179 6572 5f76 6572 7369  test_layer_versi
-000212a0: 6f6e 203d 206c 6179 6572 5f76 6572 7369  on = layer_versi
-000212b0: 6f6e 735b 2d31 5d0a 2020 2020 2020 2020  ons[-1].        
-000212c0: 2020 2020 7265 7370 6f6e 7365 732e 6170      responses.ap
-000212d0: 7065 6e64 280a 2020 2020 2020 2020 2020  pend(.          
-000212e0: 2020 2020 2020 4c61 7965 7273 4c69 7374        LayersList
-000212f0: 4974 656d 280a 2020 2020 2020 2020 2020  Item(.          
-00021300: 2020 2020 2020 2020 2020 4c61 7965 724e            LayerN
-00021310: 616d 653d 6c61 7965 725f 6e61 6d65 2c0a  ame=layer_name,.
-00021320: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00021330: 2020 2020 4c61 7965 7241 726e 3d6c 6179      LayerArn=lay
-00021340: 6572 2e61 726e 2c0a 2020 2020 2020 2020  er.arn,.        
-00021350: 2020 2020 2020 2020 2020 2020 4c61 7465              Late
-00021360: 7374 4d61 7463 6869 6e67 5665 7273 696f  stMatchingVersio
-00021370: 6e3d 6170 695f 7574 696c 732e 6d61 705f  n=api_utils.map_
-00021380: 6c61 7965 725f 6f75 7428 6c61 7465 7374  layer_out(latest
-00021390: 5f6c 6179 6572 5f76 6572 7369 6f6e 292c  _layer_version),
-000213a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000213b0: 2029 0a20 2020 2020 2020 2020 2020 2029   ).            )
-000213c0: 0a0a 2020 2020 2020 2020 7265 7370 6f6e  ..        respon
-000213d0: 7365 7320 3d20 5061 6769 6e61 7465 644c  ses = PaginatedL
-000213e0: 6973 7428 7265 7370 6f6e 7365 7329 0a20  ist(responses). 
-000213f0: 2020 2020 2020 2070 6167 652c 2074 6f6b         page, tok
-00021400: 656e 203d 2072 6573 706f 6e73 6573 2e67  en = responses.g
-00021410: 6574 5f70 6167 6528 0a20 2020 2020 2020  et_page(.       
-00021420: 2020 2020 206c 616d 6264 6120 7665 7273       lambda vers
-00021430: 696f 6e3a 2076 6572 7369 6f6e 2c0a 2020  ion: version,.  
-00021440: 2020 2020 2020 2020 2020 6d61 726b 6572            marker
-00021450: 2c0a 2020 2020 2020 2020 2020 2020 6d61  ,.            ma
-00021460: 785f 6974 656d 732c 0a20 2020 2020 2020  x_items,.       
-00021470: 2029 0a0a 2020 2020 2020 2020 7265 7475   )..        retu
-00021480: 726e 204c 6973 744c 6179 6572 7352 6573  rn ListLayersRes
-00021490: 706f 6e73 6528 4e65 7874 4d61 726b 6572  ponse(NextMarker
-000214a0: 3d74 6f6b 656e 2c20 4c61 7965 7273 3d70  =token, Layers=p
-000214b0: 6167 6529 0a0a 2020 2020 6465 6620 6c69  age)..    def li
-000214c0: 7374 5f6c 6179 6572 5f76 6572 7369 6f6e  st_layer_version
-000214d0: 7328 0a20 2020 2020 2020 2073 656c 662c  s(.        self,
-000214e0: 0a20 2020 2020 2020 2063 6f6e 7465 7874  .        context
-000214f0: 3a20 5265 7175 6573 7443 6f6e 7465 7874  : RequestContext
-00021500: 2c0a 2020 2020 2020 2020 6c61 7965 725f  ,.        layer_
-00021510: 6e61 6d65 3a20 4c61 7965 724e 616d 652c  name: LayerName,
-00021520: 0a20 2020 2020 2020 2063 6f6d 7061 7469  .        compati
-00021530: 626c 655f 7275 6e74 696d 653a 2052 756e  ble_runtime: Run
-00021540: 7469 6d65 203d 204e 6f6e 652c 0a20 2020  time = None,.   
-00021550: 2020 2020 206d 6172 6b65 723a 2053 7472       marker: Str
-00021560: 696e 6720 3d20 4e6f 6e65 2c0a 2020 2020  ing = None,.    
-00021570: 2020 2020 6d61 785f 6974 656d 733a 204d      max_items: M
-00021580: 6178 4c61 7965 724c 6973 7449 7465 6d73  axLayerListItems
-00021590: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
-000215a0: 2063 6f6d 7061 7469 626c 655f 6172 6368   compatible_arch
-000215b0: 6974 6563 7475 7265 3a20 4172 6368 6974  itecture: Archit
-000215c0: 6563 7475 7265 203d 204e 6f6e 652c 0a20  ecture = None,. 
-000215d0: 2020 2029 202d 3e20 4c69 7374 4c61 7965     ) -> ListLaye
-000215e0: 7256 6572 7369 6f6e 7352 6573 706f 6e73  rVersionsRespons
-000215f0: 653a 0a20 2020 2020 2020 2076 616c 6964  e:.        valid
-00021600: 6174 696f 6e5f 6572 726f 7273 203d 2061  ation_errors = a
-00021610: 7069 5f75 7469 6c73 2e76 616c 6964 6174  pi_utils.validat
-00021620: 655f 6c61 7965 725f 7275 6e74 696d 6573  e_layer_runtimes
-00021630: 5f61 6e64 5f61 7263 6869 7465 6374 7572  _and_architectur
-00021640: 6573 280a 2020 2020 2020 2020 2020 2020  es(.            
-00021650: 5b63 6f6d 7061 7469 626c 655f 7275 6e74  [compatible_runt
-00021660: 696d 655d 2069 6620 636f 6d70 6174 6962  ime] if compatib
-00021670: 6c65 5f72 756e 7469 6d65 2065 6c73 6520  le_runtime else 
-00021680: 5b5d 2c0a 2020 2020 2020 2020 2020 2020  [],.            
-00021690: 5b63 6f6d 7061 7469 626c 655f 6172 6368  [compatible_arch
-000216a0: 6974 6563 7475 7265 5d20 6966 2063 6f6d  itecture] if com
-000216b0: 7061 7469 626c 655f 6172 6368 6974 6563  patible_architec
-000216c0: 7475 7265 2065 6c73 6520 5b5d 2c0a 2020  ture else [],.  
-000216d0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
-000216e0: 6966 2076 616c 6964 6174 696f 6e5f 6572  if validation_er
-000216f0: 726f 7273 3a0a 2020 2020 2020 2020 2020  rors:.          
-00021700: 2020 7261 6973 6520 5661 6c69 6461 7469    raise Validati
-00021710: 6f6e 4578 6365 7074 696f 6e28 0a20 2020  onException(.   
-00021720: 2020 2020 2020 2020 2020 2020 2066 227b               f"{
-00021730: 6c65 6e28 7661 6c69 6461 7469 6f6e 5f65  len(validation_e
-00021740: 7272 6f72 7329 7d20 7661 6c69 6461 7469  rrors)} validati
-00021750: 6f6e 2065 7272 6f72 7b27 7327 2069 6620  on error{'s' if 
-00021760: 6c65 6e28 7661 6c69 6461 7469 6f6e 5f65  len(validation_e
-00021770: 7272 6f72 7329 203e 2031 2065 6c73 6520  rrors) > 1 else 
-00021780: 2727 7d20 6465 7465 6374 6564 3a20 7b27  ''} detected: {'
-00021790: 3b27 2e6a 6f69 6e28 7661 6c69 6461 7469  ;'.join(validati
-000217a0: 6f6e 5f65 7272 6f72 7329 7d22 0a20 2020  on_errors)}".   
-000217b0: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
-000217c0: 2020 2020 6163 636f 756e 745f 6964 203d      account_id =
-000217d0: 2063 6f6e 7465 7874 2e61 6363 6f75 6e74   context.account
-000217e0: 5f69 640a 2020 2020 2020 2020 7265 6769  _id.        regi
-000217f0: 6f6e 5f6e 616d 6520 3d20 636f 6e74 6578  on_name = contex
-00021800: 742e 7265 6769 6f6e 0a20 2020 2020 2020  t.region.       
-00021810: 2069 6620 6170 695f 7574 696c 732e 6973   if api_utils.is
-00021820: 5f6c 6179 6572 5f61 726e 286c 6179 6572  _layer_arn(layer
-00021830: 5f6e 616d 6529 3a0a 2020 2020 2020 2020  _name):.        
-00021840: 2020 2020 7265 6769 6f6e 5f6e 616d 652c      region_name,
-00021850: 2061 6363 6f75 6e74 5f69 642c 206c 6179   account_id, lay
-00021860: 6572 5f6e 616d 652c 205f 203d 2061 7069  er_name, _ = api
-00021870: 5f75 7469 6c73 2e70 6172 7365 5f6c 6179  _utils.parse_lay
-00021880: 6572 5f61 726e 286c 6179 6572 5f6e 616d  er_arn(layer_nam
-00021890: 6529 0a20 2020 2020 2020 2073 7461 7465  e).        state
-000218a0: 203d 206c 616d 6264 615f 7374 6f72 6573   = lambda_stores
-000218b0: 5b61 6363 6f75 6e74 5f69 645d 5b72 6567  [account_id][reg
-000218c0: 696f 6e5f 6e61 6d65 5d0a 0a20 2020 2020  ion_name]..     
-000218d0: 2020 2023 2054 4f44 4f3a 2054 6573 7420     # TODO: Test 
-000218e0: 2620 6861 6e64 6c65 2066 696c 7465 723a  & handle filter:
-000218f0: 2063 6f6d 7061 7469 626c 655f 7275 6e74   compatible_runt
-00021900: 696d 650a 2020 2020 2020 2020 2320 544f  ime.        # TO
-00021910: 444f 3a20 5465 7374 2026 2068 616e 646c  DO: Test & handl
-00021920: 6520 6669 6c74 6572 3a20 636f 6d70 6174  e filter: compat
-00021930: 6962 6c65 5f61 7263 6869 7465 6374 7572  ible_architectur
-00021940: 650a 2020 2020 2020 2020 616c 6c5f 6c61  e.        all_la
-00021950: 7965 725f 7665 7273 696f 6e73 203d 205b  yer_versions = [
-00021960: 5d0a 2020 2020 2020 2020 6c61 7965 7220  ].        layer 
-00021970: 3d20 7374 6174 652e 6c61 7965 7273 2e67  = state.layers.g
-00021980: 6574 286c 6179 6572 5f6e 616d 6529 0a20  et(layer_name). 
-00021990: 2020 2020 2020 2069 6620 6c61 7965 7220         if layer 
-000219a0: 6973 206e 6f74 204e 6f6e 653a 0a20 2020  is not None:.   
-000219b0: 2020 2020 2020 2020 2066 6f72 206c 6179           for lay
-000219c0: 6572 5f76 6572 7369 6f6e 2069 6e20 6c61  er_version in la
-000219d0: 7965 722e 6c61 7965 725f 7665 7273 696f  yer.layer_versio
-000219e0: 6e73 2e76 616c 7565 7328 293a 0a20 2020  ns.values():.   
-000219f0: 2020 2020 2020 2020 2020 2020 2061 6c6c               all
-00021a00: 5f6c 6179 6572 5f76 6572 7369 6f6e 732e  _layer_versions.
-00021a10: 6170 7065 6e64 2861 7069 5f75 7469 6c73  append(api_utils
-00021a20: 2e6d 6170 5f6c 6179 6572 5f6f 7574 286c  .map_layer_out(l
-00021a30: 6179 6572 5f76 6572 7369 6f6e 2929 0a0a  ayer_version))..
-00021a40: 2020 2020 2020 2020 616c 6c5f 6c61 7965          all_laye
-00021a50: 725f 7665 7273 696f 6e73 2e73 6f72 7428  r_versions.sort(
-00021a60: 6b65 793d 6c61 6d62 6461 2078 3a20 785b  key=lambda x: x[
-00021a70: 2256 6572 7369 6f6e 225d 2c20 7265 7665  "Version"], reve
-00021a80: 7273 653d 5472 7565 290a 2020 2020 2020  rse=True).      
-00021a90: 2020 616c 6c5f 6c61 7965 725f 7665 7273    all_layer_vers
-00021aa0: 696f 6e73 203d 2050 6167 696e 6174 6564  ions = Paginated
-00021ab0: 4c69 7374 2861 6c6c 5f6c 6179 6572 5f76  List(all_layer_v
-00021ac0: 6572 7369 6f6e 7329 0a20 2020 2020 2020  ersions).       
-00021ad0: 2070 6167 652c 2074 6f6b 656e 203d 2061   page, token = a
-00021ae0: 6c6c 5f6c 6179 6572 5f76 6572 7369 6f6e  ll_layer_version
-00021af0: 732e 6765 745f 7061 6765 280a 2020 2020  s.get_page(.    
-00021b00: 2020 2020 2020 2020 6c61 6d62 6461 2076          lambda v
-00021b10: 6572 7369 6f6e 3a20 7665 7273 696f 6e5b  ersion: version[
-00021b20: 224c 6179 6572 5665 7273 696f 6e41 726e  "LayerVersionArn
-00021b30: 225d 2c0a 2020 2020 2020 2020 2020 2020  "],.            
-00021b40: 6d61 726b 6572 2c0a 2020 2020 2020 2020  marker,.        
-00021b50: 2020 2020 6d61 785f 6974 656d 732c 0a20      max_items,. 
-00021b60: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00021b70: 2072 6574 7572 6e20 4c69 7374 4c61 7965   return ListLaye
-00021b80: 7256 6572 7369 6f6e 7352 6573 706f 6e73  rVersionsRespons
-00021b90: 6528 4e65 7874 4d61 726b 6572 3d74 6f6b  e(NextMarker=tok
-00021ba0: 656e 2c20 4c61 7965 7256 6572 7369 6f6e  en, LayerVersion
-00021bb0: 733d 7061 6765 290a 0a20 2020 2064 6566  s=page)..    def
-00021bc0: 2064 656c 6574 655f 6c61 7965 725f 7665   delete_layer_ve
-00021bd0: 7273 696f 6e28 0a20 2020 2020 2020 2073  rsion(.        s
-00021be0: 656c 662c 2063 6f6e 7465 7874 3a20 5265  elf, context: Re
-00021bf0: 7175 6573 7443 6f6e 7465 7874 2c20 6c61  questContext, la
-00021c00: 7965 725f 6e61 6d65 3a20 4c61 7965 724e  yer_name: LayerN
-00021c10: 616d 652c 2076 6572 7369 6f6e 5f6e 756d  ame, version_num
-00021c20: 6265 723a 204c 6179 6572 5665 7273 696f  ber: LayerVersio
-00021c30: 6e4e 756d 6265 720a 2020 2020 2920 2d3e  nNumber.    ) ->
-00021c40: 204e 6f6e 653a 0a20 2020 2020 2020 2069   None:.        i
-00021c50: 6620 7665 7273 696f 6e5f 6e75 6d62 6572  f version_number
-00021c60: 203c 2031 3a0a 2020 2020 2020 2020 2020   < 1:.          
-00021c70: 2020 7261 6973 6520 496e 7661 6c69 6450    raise InvalidP
-00021c80: 6172 616d 6574 6572 5661 6c75 6545 7863  arameterValueExc
-00021c90: 6570 7469 6f6e 2822 4c61 7965 7220 5665  eption("Layer Ve
-00021ca0: 7273 696f 6e20 4361 6e6e 6f74 2062 6520  rsion Cannot be 
-00021cb0: 6c65 7373 2074 6861 6e20 3122 2c20 5479  less than 1", Ty
-00021cc0: 7065 3d22 5573 6572 2229 0a0a 2020 2020  pe="User")..    
-00021cd0: 2020 2020 2320 544f 444f 3a20 7465 7374      # TODO: test
-00021ce0: 2063 726f 7373 2d72 6567 696f 6e3f 2028   cross-region? (
-00021cf0: 652e 672e 2077 6974 6820 6675 6e63 7469  e.g. with functi
-00021d00: 6f6e 7320 6974 2064 6f65 736e 7420 776f  ons it doesnt wo
-00021d10: 726b 2061 6e64 2072 6169 7365 7320 616e  rk and raises an
-00021d20: 2065 7863 6570 7469 6f6e 290a 2020 2020   exception).    
-00021d30: 2020 2020 6163 636f 756e 745f 6964 203d      account_id =
-00021d40: 2063 6f6e 7465 7874 2e61 6363 6f75 6e74   context.account
-00021d50: 5f69 640a 2020 2020 2020 2020 7265 6769  _id.        regi
-00021d60: 6f6e 5f6e 616d 6520 3d20 636f 6e74 6578  on_name = contex
-00021d70: 742e 7265 6769 6f6e 0a20 2020 2020 2020  t.region.       
-00021d80: 2069 6620 6170 695f 7574 696c 732e 6973   if api_utils.is
-00021d90: 5f6c 6179 6572 5f61 726e 286c 6179 6572  _layer_arn(layer
-00021da0: 5f6e 616d 6529 3a0a 2020 2020 2020 2020  _name):.        
-00021db0: 2020 2020 7265 6769 6f6e 5f6e 616d 652c      region_name,
-00021dc0: 2061 6363 6f75 6e74 5f69 642c 206c 6179   account_id, lay
-00021dd0: 6572 5f6e 616d 652c 205f 203d 2061 7069  er_name, _ = api
-00021de0: 5f75 7469 6c73 2e70 6172 7365 5f6c 6179  _utils.parse_lay
-00021df0: 6572 5f61 726e 286c 6179 6572 5f6e 616d  er_arn(layer_nam
-00021e00: 6529 0a0a 2020 2020 2020 2020 7374 6174  e)..        stat
-00021e10: 6520 3d20 6c61 6d62 6461 5f73 746f 7265  e = lambda_store
-00021e20: 735b 6163 636f 756e 745f 6964 5d5b 7265  s[account_id][re
-00021e30: 6769 6f6e 5f6e 616d 655d 0a20 2020 2020  gion_name].     
-00021e40: 2020 206c 6179 6572 203d 2073 7461 7465     layer = state
-00021e50: 2e6c 6179 6572 732e 6765 7428 6c61 7965  .layers.get(laye
-00021e60: 725f 6e61 6d65 2c20 7b7d 290a 2020 2020  r_name, {}).    
-00021e70: 2020 2020 6966 206c 6179 6572 3a0a 2020      if layer:.  
-00021e80: 2020 2020 2020 2020 2020 6c61 7965 722e            layer.
-00021e90: 6c61 7965 725f 7665 7273 696f 6e73 2e70  layer_versions.p
-00021ea0: 6f70 2873 7472 2876 6572 7369 6f6e 5f6e  op(str(version_n
-00021eb0: 756d 6265 7229 2c20 4e6f 6e65 290a 0a20  umber), None).. 
-00021ec0: 2020 2023 203d 3d3d 3d3d 3d3d 3d3d 3d3d     # ===========
-00021ed0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00021ee0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a20 2020  ============.   
-00021ef0: 2023 203d 3d3d 3d3d 2020 4c61 7965 7220   # =====  Layer 
-00021f00: 5665 7273 696f 6e20 5065 726d 6973 7369  Version Permissi
-00021f10: 6f6e 7320 203d 3d3d 3d3d 0a20 2020 2023  ons  =====.    #
-00021f20: 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   ===============
-00021f30: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00021f40: 3d3d 3d3d 3d3d 3d3d 0a20 2020 2023 2054  ========.    # T
-00021f50: 4f44 4f3a 206c 6f63 6b20 7570 6461 7465  ODO: lock update
-00021f60: 7320 7468 6174 2063 6861 6e67 6520 7265  s that change re
-00021f70: 7669 7369 6f6e 2049 4473 0a0a 2020 2020  vision IDs..    
-00021f80: 6465 6620 6164 645f 6c61 7965 725f 7665  def add_layer_ve
-00021f90: 7273 696f 6e5f 7065 726d 6973 7369 6f6e  rsion_permission
-00021fa0: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
-00021fb0: 2020 2020 2020 2020 636f 6e74 6578 743a          context:
-00021fc0: 2052 6571 7565 7374 436f 6e74 6578 742c   RequestContext,
-00021fd0: 0a20 2020 2020 2020 206c 6179 6572 5f6e  .        layer_n
-00021fe0: 616d 653a 204c 6179 6572 4e61 6d65 2c0a  ame: LayerName,.
-00021ff0: 2020 2020 2020 2020 7665 7273 696f 6e5f          version_
-00022000: 6e75 6d62 6572 3a20 4c61 7965 7256 6572  number: LayerVer
-00022010: 7369 6f6e 4e75 6d62 6572 2c0a 2020 2020  sionNumber,.    
-00022020: 2020 2020 7374 6174 656d 656e 745f 6964      statement_id
-00022030: 3a20 5374 6174 656d 656e 7449 642c 0a20  : StatementId,. 
-00022040: 2020 2020 2020 2061 6374 696f 6e3a 204c         action: L
-00022050: 6179 6572 5065 726d 6973 7369 6f6e 416c  ayerPermissionAl
-00022060: 6c6f 7765 6441 6374 696f 6e2c 0a20 2020  lowedAction,.   
-00022070: 2020 2020 2070 7269 6e63 6970 616c 3a20       principal: 
-00022080: 4c61 7965 7250 6572 6d69 7373 696f 6e41  LayerPermissionA
-00022090: 6c6c 6f77 6564 5072 696e 6369 7061 6c2c  llowedPrincipal,
-000220a0: 0a20 2020 2020 2020 206f 7267 616e 697a  .        organiz
-000220b0: 6174 696f 6e5f 6964 3a20 4f72 6761 6e69  ation_id: Organi
-000220c0: 7a61 7469 6f6e 4964 203d 204e 6f6e 652c  zationId = None,
-000220d0: 0a20 2020 2020 2020 2072 6576 6973 696f  .        revisio
-000220e0: 6e5f 6964 3a20 5374 7269 6e67 203d 204e  n_id: String = N
-000220f0: 6f6e 652c 0a20 2020 2029 202d 3e20 4164  one,.    ) -> Ad
-00022100: 644c 6179 6572 5665 7273 696f 6e50 6572  dLayerVersionPer
-00022110: 6d69 7373 696f 6e52 6573 706f 6e73 653a  missionResponse:
-00022120: 0a20 2020 2020 2020 2023 2054 4f44 4f3a  .        # TODO:
-00022130: 2061 6464 206c 6179 6572 2041 524e 2061   add layer ARN a
-00022140: 7320 6c61 7965 725f 6e61 6d65 2073 7570  s layer_name sup
-00022150: 706f 7274 0a0a 2020 2020 2020 2020 6c61  port..        la
-00022160: 7965 725f 7665 7273 696f 6e5f 6172 6e20  yer_version_arn 
-00022170: 3d20 6170 695f 7574 696c 732e 6c61 7965  = api_utils.laye
-00022180: 725f 7665 7273 696f 6e5f 6172 6e28 0a20  r_version_arn(. 
-00022190: 2020 2020 2020 2020 2020 206c 6179 6572             layer
-000221a0: 5f6e 616d 652c 2063 6f6e 7465 7874 2e61  _name, context.a
-000221b0: 6363 6f75 6e74 5f69 642c 2063 6f6e 7465  ccount_id, conte
-000221c0: 7874 2e72 6567 696f 6e2c 2073 7472 2876  xt.region, str(v
-000221d0: 6572 7369 6f6e 5f6e 756d 6265 7229 0a20  ersion_number). 
-000221e0: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-000221f0: 2020 6966 2061 6374 696f 6e20 213d 2022    if action != "
-00022200: 6c61 6d62 6461 3a47 6574 4c61 7965 7256  lambda:GetLayerV
-00022210: 6572 7369 6f6e 223a 0a20 2020 2020 2020  ersion":.       
-00022220: 2020 2020 2072 6169 7365 2056 616c 6964       raise Valid
-00022230: 6174 696f 6e45 7863 6570 7469 6f6e 280a  ationException(.
-00022240: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022250: 6622 3120 7661 6c69 6461 7469 6f6e 2065  f"1 validation e
-00022260: 7272 6f72 2064 6574 6563 7465 643a 2056  rror detected: V
-00022270: 616c 7565 2027 7b61 6374 696f 6e7d 2720  alue '{action}' 
-00022280: 6174 2027 6163 7469 6f6e 2720 6661 696c  at 'action' fail
-00022290: 6564 2074 6f20 7361 7469 7366 7920 636f  ed to satisfy co
-000222a0: 6e73 7472 6169 6e74 3a20 4d65 6d62 6572  nstraint: Member
-000222b0: 206d 7573 7420 7361 7469 7366 7920 7265   must satisfy re
-000222c0: 6775 6c61 7220 6578 7072 6573 7369 6f6e  gular expression
-000222d0: 2070 6174 7465 726e 3a20 6c61 6d62 6461   pattern: lambda
-000222e0: 3a47 6574 4c61 7965 7256 6572 7369 6f6e  :GetLayerVersion
-000222f0: 220a 2020 2020 2020 2020 2020 2020 290a  ".            ).
-00022300: 0a20 2020 2020 2020 2073 7461 7465 203d  .        state =
-00022310: 206c 616d 6264 615f 7374 6f72 6573 5b63   lambda_stores[c
-00022320: 6f6e 7465 7874 2e61 6363 6f75 6e74 5f69  ontext.account_i
-00022330: 645d 5b63 6f6e 7465 7874 2e72 6567 696f  d][context.regio
-00022340: 6e5d 0a20 2020 2020 2020 206c 6179 6572  n].        layer
-00022350: 203d 2073 7461 7465 2e6c 6179 6572 732e   = state.layers.
-00022360: 6765 7428 6c61 7965 725f 6e61 6d65 290a  get(layer_name).
-00022370: 2020 2020 2020 2020 6966 206c 6179 6572          if layer
-00022380: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
-00022390: 2020 2020 2020 7261 6973 6520 5265 736f        raise Reso
-000223a0: 7572 6365 4e6f 7446 6f75 6e64 4578 6365  urceNotFoundExce
-000223b0: 7074 696f 6e28 0a20 2020 2020 2020 2020  ption(.         
-000223c0: 2020 2020 2020 2066 224c 6179 6572 2076         f"Layer v
-000223d0: 6572 7369 6f6e 207b 6c61 7965 725f 7665  ersion {layer_ve
-000223e0: 7273 696f 6e5f 6172 6e7d 2064 6f65 7320  rsion_arn} does 
-000223f0: 6e6f 7420 6578 6973 742e 222c 2054 7970  not exist.", Typ
-00022400: 653d 2255 7365 7222 0a20 2020 2020 2020  e="User".       
-00022410: 2020 2020 2029 0a20 2020 2020 2020 206c       ).        l
-00022420: 6179 6572 5f76 6572 7369 6f6e 203d 206c  ayer_version = l
-00022430: 6179 6572 2e6c 6179 6572 5f76 6572 7369  ayer.layer_versi
-00022440: 6f6e 732e 6765 7428 7374 7228 7665 7273  ons.get(str(vers
-00022450: 696f 6e5f 6e75 6d62 6572 2929 0a20 2020  ion_number)).   
-00022460: 2020 2020 2069 6620 6c61 7965 725f 7665       if layer_ve
-00022470: 7273 696f 6e20 6973 204e 6f6e 653a 0a20  rsion is None:. 
-00022480: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00022490: 2052 6573 6f75 7263 654e 6f74 466f 756e   ResourceNotFoun
-000224a0: 6445 7863 6570 7469 6f6e 280a 2020 2020  dException(.    
-000224b0: 2020 2020 2020 2020 2020 2020 6622 4c61              f"La
-000224c0: 7965 7220 7665 7273 696f 6e20 7b6c 6179  yer version {lay
-000224d0: 6572 5f76 6572 7369 6f6e 5f61 726e 7d20  er_version_arn} 
-000224e0: 646f 6573 206e 6f74 2065 7869 7374 2e22  does not exist."
-000224f0: 2c20 5479 7065 3d22 5573 6572 220a 2020  , Type="User".  
-00022500: 2020 2020 2020 2020 2020 290a 2020 2020            ).    
-00022510: 2020 2020 2320 646f 2077 6520 6861 7665      # do we have
-00022520: 2061 2070 6f6c 6963 793f 2069 6620 6e6f   a policy? if no
-00022530: 7420 7365 7420 6f6e 650a 2020 2020 2020  t set one.      
-00022540: 2020 6966 206c 6179 6572 5f76 6572 7369    if layer_versi
-00022550: 6f6e 2e70 6f6c 6963 7920 6973 204e 6f6e  on.policy is Non
-00022560: 653a 0a20 2020 2020 2020 2020 2020 206c  e:.            l
-00022570: 6179 6572 5f76 6572 7369 6f6e 2e70 6f6c  ayer_version.pol
-00022580: 6963 7920 3d20 4c61 7965 7250 6f6c 6963  icy = LayerPolic
-00022590: 7928 290a 0a20 2020 2020 2020 2069 6620  y()..        if 
-000225a0: 7374 6174 656d 656e 745f 6964 2069 6e20  statement_id in 
-000225b0: 6c61 7965 725f 7665 7273 696f 6e2e 706f  layer_version.po
-000225c0: 6c69 6379 2e73 7461 7465 6d65 6e74 733a  licy.statements:
-000225d0: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-000225e0: 7365 2052 6573 6f75 7263 6543 6f6e 666c  se ResourceConfl
-000225f0: 6963 7445 7863 6570 7469 6f6e 280a 2020  ictException(.  
-00022600: 2020 2020 2020 2020 2020 2020 2020 6622                f"
-00022610: 5468 6520 7374 6174 656d 656e 7420 6964  The statement id
-00022620: 2028 7b73 7461 7465 6d65 6e74 5f69 647d   ({statement_id}
-00022630: 2920 7072 6f76 6964 6564 2061 6c72 6561  ) provided alrea
-00022640: 6479 2065 7869 7374 732e 2050 6c65 6173  dy exists. Pleas
-00022650: 6520 7072 6f76 6964 6520 6120 6e65 7720  e provide a new 
-00022660: 7374 6174 656d 656e 7420 6964 2c20 6f72  statement id, or
-00022670: 2072 656d 6f76 6520 7468 6520 6578 6973   remove the exis
-00022680: 7469 6e67 2073 7461 7465 6d65 6e74 2e22  ting statement."
-00022690: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-000226a0: 2020 5479 7065 3d22 5573 6572 222c 0a20    Type="User",. 
-000226b0: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
-000226c0: 2020 2020 2020 6966 2072 6576 6973 696f        if revisio
-000226d0: 6e5f 6964 2061 6e64 206c 6179 6572 5f76  n_id and layer_v
-000226e0: 6572 7369 6f6e 2e70 6f6c 6963 792e 7265  ersion.policy.re
-000226f0: 7669 7369 6f6e 5f69 6420 213d 2072 6576  vision_id != rev
-00022700: 6973 696f 6e5f 6964 3a0a 2020 2020 2020  ision_id:.      
-00022710: 2020 2020 2020 7261 6973 6520 5072 6563        raise Prec
-00022720: 6f6e 6469 7469 6f6e 4661 696c 6564 4578  onditionFailedEx
-00022730: 6365 7074 696f 6e28 0a20 2020 2020 2020  ception(.       
-00022740: 2020 2020 2020 2020 2022 5468 6520 5265           "The Re
-00022750: 7669 7369 6f6e 2049 6420 7072 6f76 6964  vision Id provid
-00022760: 6564 2064 6f65 7320 6e6f 7420 6d61 7463  ed does not matc
-00022770: 6820 7468 6520 6c61 7465 7374 2052 6576  h the latest Rev
-00022780: 6973 696f 6e20 4964 2e20 220a 2020 2020  ision Id. ".    
-00022790: 2020 2020 2020 2020 2020 2020 2243 616c              "Cal
-000227a0: 6c20 7468 6520 4765 744c 6179 6572 506f  l the GetLayerPo
-000227b0: 6c69 6379 2041 5049 2074 6f20 7265 7472  licy API to retr
-000227c0: 6965 7665 2074 6865 206c 6174 6573 7420  ieve the latest 
-000227d0: 5265 7669 7369 6f6e 2049 6422 2c0a 2020  Revision Id",.  
-000227e0: 2020 2020 2020 2020 2020 2020 2020 5479                Ty
-000227f0: 7065 3d22 5573 6572 222c 0a20 2020 2020  pe="User",.     
-00022800: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-00022810: 2020 7374 6174 656d 656e 7420 3d20 4c61    statement = La
-00022820: 7965 7250 6f6c 6963 7953 7461 7465 6d65  yerPolicyStateme
-00022830: 6e74 280a 2020 2020 2020 2020 2020 2020  nt(.            
-00022840: 7369 643d 7374 6174 656d 656e 745f 6964  sid=statement_id
-00022850: 2c20 6163 7469 6f6e 3d61 6374 696f 6e2c  , action=action,
-00022860: 2070 7269 6e63 6970 616c 3d70 7269 6e63   principal=princ
-00022870: 6970 616c 2c20 6f72 6761 6e69 7a61 7469  ipal, organizati
-00022880: 6f6e 5f69 643d 6f72 6761 6e69 7a61 7469  on_id=organizati
-00022890: 6f6e 5f69 640a 2020 2020 2020 2020 290a  on_id.        ).
-000228a0: 0a20 2020 2020 2020 206f 6c64 5f73 7461  .        old_sta
-000228b0: 7465 6d65 6e74 7320 3d20 6c61 7965 725f  tements = layer_
-000228c0: 7665 7273 696f 6e2e 706f 6c69 6379 2e73  version.policy.s
-000228d0: 7461 7465 6d65 6e74 730a 2020 2020 2020  tatements.      
-000228e0: 2020 6c61 7965 725f 7665 7273 696f 6e2e    layer_version.
-000228f0: 706f 6c69 6379 203d 2064 6174 6163 6c61  policy = datacla
-00022900: 7373 6573 2e72 6570 6c61 6365 280a 2020  sses.replace(.  
-00022910: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
-00022920: 7665 7273 696f 6e2e 706f 6c69 6379 2c20  version.policy, 
-00022930: 7374 6174 656d 656e 7473 3d7b 2a2a 6f6c  statements={**ol
-00022940: 645f 7374 6174 656d 656e 7473 2c20 7374  d_statements, st
-00022950: 6174 656d 656e 745f 6964 3a20 7374 6174  atement_id: stat
-00022960: 656d 656e 747d 0a20 2020 2020 2020 2029  ement}.        )
-00022970: 0a0a 2020 2020 2020 2020 7265 7475 726e  ..        return
-00022980: 2041 6464 4c61 7965 7256 6572 7369 6f6e   AddLayerVersion
-00022990: 5065 726d 6973 7369 6f6e 5265 7370 6f6e  PermissionRespon
-000229a0: 7365 280a 2020 2020 2020 2020 2020 2020  se(.            
-000229b0: 5374 6174 656d 656e 743d 6a73 6f6e 2e64  Statement=json.d
-000229c0: 756d 7073 280a 2020 2020 2020 2020 2020  umps(.          
-000229d0: 2020 2020 2020 7b0a 2020 2020 2020 2020        {.        
-000229e0: 2020 2020 2020 2020 2020 2020 2253 6964              "Sid
-000229f0: 223a 2073 7461 7465 6d65 6e74 2e73 6964  ": statement.sid
-00022a00: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
-00022a10: 2020 2020 2020 2245 6666 6563 7422 3a20        "Effect": 
-00022a20: 2241 6c6c 6f77 222c 0a20 2020 2020 2020  "Allow",.       
-00022a30: 2020 2020 2020 2020 2020 2020 2022 5072               "Pr
-00022a40: 696e 6369 7061 6c22 3a20 7374 6174 656d  incipal": statem
-00022a50: 656e 742e 7072 696e 6369 7061 6c2c 0a20  ent.principal,. 
-00022a60: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022a70: 2020 2022 4163 7469 6f6e 223a 2073 7461     "Action": sta
-00022a80: 7465 6d65 6e74 2e61 6374 696f 6e2c 0a20  tement.action,. 
-00022a90: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022aa0: 2020 2022 5265 736f 7572 6365 223a 206c     "Resource": l
-00022ab0: 6179 6572 5f76 6572 7369 6f6e 2e6c 6179  ayer_version.lay
-00022ac0: 6572 5f76 6572 7369 6f6e 5f61 726e 2c0a  er_version_arn,.
-00022ad0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022ae0: 7d0a 2020 2020 2020 2020 2020 2020 292c  }.            ),
-00022af0: 0a20 2020 2020 2020 2020 2020 2052 6576  .            Rev
-00022b00: 6973 696f 6e49 643d 6c61 7965 725f 7665  isionId=layer_ve
-00022b10: 7273 696f 6e2e 706f 6c69 6379 2e72 6576  rsion.policy.rev
-00022b20: 6973 696f 6e5f 6964 2c0a 2020 2020 2020  ision_id,.      
-00022b30: 2020 290a 0a20 2020 2064 6566 2072 656d    )..    def rem
-00022b40: 6f76 655f 6c61 7965 725f 7665 7273 696f  ove_layer_versio
-00022b50: 6e5f 7065 726d 6973 7369 6f6e 280a 2020  n_permission(.  
-00022b60: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
-00022b70: 2020 2020 636f 6e74 6578 743a 2052 6571      context: Req
-00022b80: 7565 7374 436f 6e74 6578 742c 0a20 2020  uestContext,.   
-00022b90: 2020 2020 206c 6179 6572 5f6e 616d 653a       layer_name:
-00022ba0: 204c 6179 6572 4e61 6d65 2c0a 2020 2020   LayerName,.    
-00022bb0: 2020 2020 7665 7273 696f 6e5f 6e75 6d62      version_numb
-00022bc0: 6572 3a20 4c61 7965 7256 6572 7369 6f6e  er: LayerVersion
-00022bd0: 4e75 6d62 6572 2c0a 2020 2020 2020 2020  Number,.        
-00022be0: 7374 6174 656d 656e 745f 6964 3a20 5374  statement_id: St
-00022bf0: 6174 656d 656e 7449 642c 0a20 2020 2020  atementId,.     
-00022c00: 2020 2072 6576 6973 696f 6e5f 6964 3a20     revision_id: 
-00022c10: 5374 7269 6e67 203d 204e 6f6e 652c 0a20  String = None,. 
-00022c20: 2020 2029 202d 3e20 4e6f 6e65 3a0a 2020     ) -> None:.  
-00022c30: 2020 2020 2020 2320 544f 444f 3a20 6164        # TODO: ad
-00022c40: 6420 6c61 7965 7220 4152 4e20 6173 206c  d layer ARN as l
-00022c50: 6179 6572 5f6e 616d 6520 7375 7070 6f72  ayer_name suppor
-00022c60: 740a 2020 2020 2020 2020 6c61 7965 725f  t.        layer_
-00022c70: 7665 7273 696f 6e5f 6172 6e20 3d20 6170  version_arn = ap
-00022c80: 695f 7574 696c 732e 6c61 7965 725f 7665  i_utils.layer_ve
-00022c90: 7273 696f 6e5f 6172 6e28 0a20 2020 2020  rsion_arn(.     
-00022ca0: 2020 2020 2020 206c 6179 6572 5f6e 616d         layer_nam
-00022cb0: 652c 2063 6f6e 7465 7874 2e61 6363 6f75  e, context.accou
-00022cc0: 6e74 5f69 642c 2063 6f6e 7465 7874 2e72  nt_id, context.r
-00022cd0: 6567 696f 6e2c 2073 7472 2876 6572 7369  egion, str(versi
-00022ce0: 6f6e 5f6e 756d 6265 7229 0a20 2020 2020  on_number).     
-00022cf0: 2020 2029 0a20 2020 2020 2020 2073 7461     ).        sta
-00022d00: 7465 203d 206c 616d 6264 615f 7374 6f72  te = lambda_stor
-00022d10: 6573 5b63 6f6e 7465 7874 2e61 6363 6f75  es[context.accou
-00022d20: 6e74 5f69 645d 5b63 6f6e 7465 7874 2e72  nt_id][context.r
-00022d30: 6567 696f 6e5d 0a20 2020 2020 2020 206c  egion].        l
-00022d40: 6179 6572 203d 2073 7461 7465 2e6c 6179  ayer = state.lay
-00022d50: 6572 732e 6765 7428 6c61 7965 725f 6e61  ers.get(layer_na
-00022d60: 6d65 290a 2020 2020 2020 2020 6966 206c  me).        if l
-00022d70: 6179 6572 2069 7320 4e6f 6e65 3a0a 2020  ayer is None:.  
-00022d80: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
-00022d90: 5265 736f 7572 6365 4e6f 7446 6f75 6e64  ResourceNotFound
-00022da0: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
-00022db0: 2020 2020 2020 2020 2020 2066 224c 6179             f"Lay
-00022dc0: 6572 2076 6572 7369 6f6e 207b 6c61 7965  er version {laye
-00022dd0: 725f 7665 7273 696f 6e5f 6172 6e7d 2064  r_version_arn} d
-00022de0: 6f65 7320 6e6f 7420 6578 6973 742e 222c  oes not exist.",
-00022df0: 2054 7970 653d 2255 7365 7222 0a20 2020   Type="User".   
-00022e00: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
-00022e10: 2020 206c 6179 6572 5f76 6572 7369 6f6e     layer_version
-00022e20: 203d 206c 6179 6572 2e6c 6179 6572 5f76   = layer.layer_v
-00022e30: 6572 7369 6f6e 732e 6765 7428 7374 7228  ersions.get(str(
-00022e40: 7665 7273 696f 6e5f 6e75 6d62 6572 2929  version_number))
-00022e50: 0a20 2020 2020 2020 2069 6620 6c61 7965  .        if laye
-00022e60: 725f 7665 7273 696f 6e20 6973 204e 6f6e  r_version is Non
-00022e70: 653a 0a20 2020 2020 2020 2020 2020 2072  e:.            r
-00022e80: 6169 7365 2052 6573 6f75 7263 654e 6f74  aise ResourceNot
-00022e90: 466f 756e 6445 7863 6570 7469 6f6e 280a  FoundException(.
-00022ea0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00022eb0: 6622 4c61 7965 7220 7665 7273 696f 6e20  f"Layer version 
-00022ec0: 7b6c 6179 6572 5f76 6572 7369 6f6e 5f61  {layer_version_a
-00022ed0: 726e 7d20 646f 6573 206e 6f74 2065 7869  rn} does not exi
-00022ee0: 7374 2e22 2c20 5479 7065 3d22 5573 6572  st.", Type="User
-00022ef0: 220a 2020 2020 2020 2020 2020 2020 290a  ".            ).
-00022f00: 0a20 2020 2020 2020 2069 6620 7265 7669  .        if revi
-00022f10: 7369 6f6e 5f69 6420 616e 6420 6c61 7965  sion_id and laye
-00022f20: 725f 7665 7273 696f 6e2e 706f 6c69 6379  r_version.policy
-00022f30: 2e72 6576 6973 696f 6e5f 6964 2021 3d20  .revision_id != 
-00022f40: 7265 7669 7369 6f6e 5f69 643a 0a20 2020  revision_id:.   
-00022f50: 2020 2020 2020 2020 2072 6169 7365 2050           raise P
-00022f60: 7265 636f 6e64 6974 696f 6e46 6169 6c65  reconditionFaile
-00022f70: 6445 7863 6570 7469 6f6e 280a 2020 2020  dException(.    
-00022f80: 2020 2020 2020 2020 2020 2020 2254 6865              "The
-00022f90: 2052 6576 6973 696f 6e20 4964 2070 726f   Revision Id pro
-00022fa0: 7669 6465 6420 646f 6573 206e 6f74 206d  vided does not m
-00022fb0: 6174 6368 2074 6865 206c 6174 6573 7420  atch the latest 
-00022fc0: 5265 7669 7369 6f6e 2049 642e 2022 0a20  Revision Id. ". 
-00022fd0: 2020 2020 2020 2020 2020 2020 2020 2022                 "
-00022fe0: 4361 6c6c 2074 6865 2047 6574 4c61 7965  Call the GetLaye
-00022ff0: 7250 6f6c 6963 7920 4150 4920 746f 2072  rPolicy API to r
-00023000: 6574 7269 6576 6520 7468 6520 6c61 7465  etrieve the late
-00023010: 7374 2052 6576 6973 696f 6e20 4964 222c  st Revision Id",
-00023020: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-00023030: 2054 7970 653d 2255 7365 7222 2c0a 2020   Type="User",.  
-00023040: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
-00023050: 2020 2020 2069 6620 7374 6174 656d 656e       if statemen
-00023060: 745f 6964 206e 6f74 2069 6e20 6c61 7965  t_id not in laye
-00023070: 725f 7665 7273 696f 6e2e 706f 6c69 6379  r_version.policy
-00023080: 2e73 7461 7465 6d65 6e74 733a 0a20 2020  .statements:.   
-00023090: 2020 2020 2020 2020 2072 6169 7365 2052           raise R
-000230a0: 6573 6f75 7263 654e 6f74 466f 756e 6445  esourceNotFoundE
-000230b0: 7863 6570 7469 6f6e 280a 2020 2020 2020  xception(.      
-000230c0: 2020 2020 2020 2020 2020 6622 5374 6174            f"Stat
-000230d0: 656d 656e 7420 7b73 7461 7465 6d65 6e74  ement {statement
-000230e0: 5f69 647d 2069 7320 6e6f 7420 666f 756e  _id} is not foun
-000230f0: 6420 696e 2072 6573 6f75 7263 6520 706f  d in resource po
-00023100: 6c69 6379 2e22 2c20 5479 7065 3d22 5573  licy.", Type="Us
-00023110: 6572 220a 2020 2020 2020 2020 2020 2020  er".            
-00023120: 290a 0a20 2020 2020 2020 206f 6c64 5f73  )..        old_s
-00023130: 7461 7465 6d65 6e74 7320 3d20 6c61 7965  tatements = laye
-00023140: 725f 7665 7273 696f 6e2e 706f 6c69 6379  r_version.policy
-00023150: 2e73 7461 7465 6d65 6e74 730a 2020 2020  .statements.    
-00023160: 2020 2020 6c61 7965 725f 7665 7273 696f      layer_versio
-00023170: 6e2e 706f 6c69 6379 203d 2064 6174 6163  n.policy = datac
-00023180: 6c61 7373 6573 2e72 6570 6c61 6365 280a  lasses.replace(.
-00023190: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
-000231a0: 725f 7665 7273 696f 6e2e 706f 6c69 6379  r_version.policy
-000231b0: 2c0a 2020 2020 2020 2020 2020 2020 7374  ,.            st
-000231c0: 6174 656d 656e 7473 3d7b 6b3a 2076 2066  atements={k: v f
-000231d0: 6f72 206b 2c20 7620 696e 206f 6c64 5f73  or k, v in old_s
-000231e0: 7461 7465 6d65 6e74 732e 6974 656d 7328  tatements.items(
-000231f0: 2920 6966 206b 2021 3d20 7374 6174 656d  ) if k != statem
-00023200: 656e 745f 6964 7d2c 0a20 2020 2020 2020  ent_id},.       
-00023210: 2029 0a0a 2020 2020 6465 6620 6765 745f   )..    def get_
-00023220: 6c61 7965 725f 7665 7273 696f 6e5f 706f  layer_version_po
-00023230: 6c69 6379 280a 2020 2020 2020 2020 7365  licy(.        se
-00023240: 6c66 2c20 636f 6e74 6578 743a 2052 6571  lf, context: Req
-00023250: 7565 7374 436f 6e74 6578 742c 206c 6179  uestContext, lay
-00023260: 6572 5f6e 616d 653a 204c 6179 6572 4e61  er_name: LayerNa
-00023270: 6d65 2c20 7665 7273 696f 6e5f 6e75 6d62  me, version_numb
-00023280: 6572 3a20 4c61 7965 7256 6572 7369 6f6e  er: LayerVersion
-00023290: 4e75 6d62 6572 0a20 2020 2029 202d 3e20  Number.    ) -> 
-000232a0: 4765 744c 6179 6572 5665 7273 696f 6e50  GetLayerVersionP
-000232b0: 6f6c 6963 7952 6573 706f 6e73 653a 0a20  olicyResponse:. 
-000232c0: 2020 2020 2020 2023 2054 4f44 4f3a 2061         # TODO: a
-000232d0: 6464 206c 6179 6572 2041 524e 2061 7320  dd layer ARN as 
-000232e0: 6c61 7965 725f 6e61 6d65 2073 7570 706f  layer_name suppo
-000232f0: 7274 0a20 2020 2020 2020 206c 6179 6572  rt.        layer
-00023300: 5f76 6572 7369 6f6e 5f61 726e 203d 2061  _version_arn = a
-00023310: 7069 5f75 7469 6c73 2e6c 6179 6572 5f76  pi_utils.layer_v
-00023320: 6572 7369 6f6e 5f61 726e 280a 2020 2020  ersion_arn(.    
-00023330: 2020 2020 2020 2020 6c61 7965 725f 6e61          layer_na
-00023340: 6d65 2c20 636f 6e74 6578 742e 6163 636f  me, context.acco
-00023350: 756e 745f 6964 2c20 636f 6e74 6578 742e  unt_id, context.
-00023360: 7265 6769 6f6e 2c20 7374 7228 7665 7273  region, str(vers
-00023370: 696f 6e5f 6e75 6d62 6572 290a 2020 2020  ion_number).    
-00023380: 2020 2020 290a 2020 2020 2020 2020 7374      ).        st
-00023390: 6174 6520 3d20 6c61 6d62 6461 5f73 746f  ate = lambda_sto
-000233a0: 7265 735b 636f 6e74 6578 742e 6163 636f  res[context.acco
-000233b0: 756e 745f 6964 5d5b 636f 6e74 6578 742e  unt_id][context.
-000233c0: 7265 6769 6f6e 5d0a 2020 2020 2020 2020  region].        
-000233d0: 6c61 7965 7220 3d20 7374 6174 652e 6c61  layer = state.la
-000233e0: 7965 7273 2e67 6574 286c 6179 6572 5f6e  yers.get(layer_n
-000233f0: 616d 6529 0a20 2020 2020 2020 2069 6620  ame).        if 
-00023400: 6c61 7965 7220 6973 204e 6f6e 653a 0a20  layer is None:. 
-00023410: 2020 2020 2020 2020 2020 2072 6169 7365             raise
-00023420: 2052 6573 6f75 7263 654e 6f74 466f 756e   ResourceNotFoun
-00023430: 6445 7863 6570 7469 6f6e 280a 2020 2020  dException(.    
-00023440: 2020 2020 2020 2020 2020 2020 6622 4c61              f"La
-00023450: 7965 7220 7665 7273 696f 6e20 7b6c 6179  yer version {lay
-00023460: 6572 5f76 6572 7369 6f6e 5f61 726e 7d20  er_version_arn} 
-00023470: 646f 6573 206e 6f74 2065 7869 7374 2e22  does not exist."
-00023480: 2c20 5479 7065 3d22 5573 6572 220a 2020  , Type="User".  
-00023490: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
-000234a0: 2020 2020 206c 6179 6572 5f76 6572 7369       layer_versi
-000234b0: 6f6e 203d 206c 6179 6572 2e6c 6179 6572  on = layer.layer
-000234c0: 5f76 6572 7369 6f6e 732e 6765 7428 7374  _versions.get(st
-000234d0: 7228 7665 7273 696f 6e5f 6e75 6d62 6572  r(version_number
-000234e0: 2929 0a20 2020 2020 2020 2069 6620 6c61  )).        if la
-000234f0: 7965 725f 7665 7273 696f 6e20 6973 204e  yer_version is N
-00023500: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
-00023510: 2072 6169 7365 2052 6573 6f75 7263 654e   raise ResourceN
-00023520: 6f74 466f 756e 6445 7863 6570 7469 6f6e  otFoundException
-00023530: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
-00023540: 2020 6622 4c61 7965 7220 7665 7273 696f    f"Layer versio
-00023550: 6e20 7b6c 6179 6572 5f76 6572 7369 6f6e  n {layer_version
-00023560: 5f61 726e 7d20 646f 6573 206e 6f74 2065  _arn} does not e
-00023570: 7869 7374 2e22 2c20 5479 7065 3d22 5573  xist.", Type="Us
-00023580: 6572 220a 2020 2020 2020 2020 2020 2020  er".            
-00023590: 290a 0a20 2020 2020 2020 2069 6620 6c61  )..        if la
-000235a0: 7965 725f 7665 7273 696f 6e2e 706f 6c69  yer_version.poli
-000235b0: 6379 2069 7320 4e6f 6e65 3a0a 2020 2020  cy is None:.    
-000235c0: 2020 2020 2020 2020 7261 6973 6520 5265          raise Re
-000235d0: 736f 7572 6365 4e6f 7446 6f75 6e64 4578  sourceNotFoundEx
-000235e0: 6365 7074 696f 6e28 0a20 2020 2020 2020  ception(.       
-000235f0: 2020 2020 2020 2020 2022 4e6f 2070 6f6c           "No pol
-00023600: 6963 7920 6973 2061 7373 6f63 6961 7465  icy is associate
-00023610: 6420 7769 7468 2074 6865 2067 6976 656e  d with the given
-00023620: 2072 6573 6f75 7263 652e 222c 2054 7970   resource.", Typ
-00023630: 653d 2255 7365 7222 0a20 2020 2020 2020  e="User".       
-00023640: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
-00023650: 7265 7475 726e 2047 6574 4c61 7965 7256  return GetLayerV
-00023660: 6572 7369 6f6e 506f 6c69 6379 5265 7370  ersionPolicyResp
-00023670: 6f6e 7365 280a 2020 2020 2020 2020 2020  onse(.          
-00023680: 2020 506f 6c69 6379 3d6a 736f 6e2e 6475    Policy=json.du
-00023690: 6d70 7328 0a20 2020 2020 2020 2020 2020  mps(.           
-000236a0: 2020 2020 207b 0a20 2020 2020 2020 2020       {.         
-000236b0: 2020 2020 2020 2020 2020 2022 5665 7273             "Vers
-000236c0: 696f 6e22 3a20 6c61 7965 725f 7665 7273  ion": layer_vers
-000236d0: 696f 6e2e 706f 6c69 6379 2e76 6572 7369  ion.policy.versi
-000236e0: 6f6e 2c0a 2020 2020 2020 2020 2020 2020  on,.            
-000236f0: 2020 2020 2020 2020 2249 6422 3a20 6c61          "Id": la
-00023700: 7965 725f 7665 7273 696f 6e2e 706f 6c69  yer_version.poli
-00023710: 6379 2e69 642c 0a20 2020 2020 2020 2020  cy.id,.         
-00023720: 2020 2020 2020 2020 2020 2022 5374 6174             "Stat
-00023730: 656d 656e 7422 3a20 5b0a 2020 2020 2020  ement": [.      
-00023740: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023750: 2020 7b0a 2020 2020 2020 2020 2020 2020    {.            
-00023760: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023770: 2253 6964 223a 2070 732e 7369 642c 0a20  "Sid": ps.sid,. 
+0001d320: 2020 2020 2061 6e64 2064 6573 7469 6e61       and destina
+0001d330: 7469 6f6e 5f63 6f6e 6669 6720 6973 204e  tion_config is N
+0001d340: 6f6e 650a 2020 2020 2020 2020 293a 0a20  one.        ):. 
+0001d350: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+0001d360: 2049 6e76 616c 6964 5061 7261 6d65 7465   InvalidParamete
+0001d370: 7256 616c 7565 4578 6365 7074 696f 6e28  rValueException(
+0001d380: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001d390: 2022 596f 7520 6d75 7374 2073 7065 6369   "You must speci
+0001d3a0: 6679 2061 7420 6c65 6173 7420 6f6e 6520  fy at least one 
+0001d3b0: 6f66 2065 7272 6f72 2068 616e 646c 696e  of error handlin
+0001d3c0: 6720 6f72 2064 6573 7469 6e61 7469 6f6e  g or destination
+0001d3d0: 2073 6574 7469 6e67 2e22 2c0a 2020 2020   setting.",.    
+0001d3e0: 2020 2020 2020 2020 2020 2020 5479 7065              Type
+0001d3f0: 3d22 5573 6572 222c 0a20 2020 2020 2020  ="User",.       
+0001d400: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+0001d410: 7374 6174 6520 3d20 6c61 6d62 6461 5f73  state = lambda_s
+0001d420: 746f 7265 735b 636f 6e74 6578 742e 6163  tores[context.ac
+0001d430: 636f 756e 745f 6964 5d5b 636f 6e74 6578  count_id][contex
+0001d440: 742e 7265 6769 6f6e 5d0a 2020 2020 2020  t.region].      
+0001d450: 2020 6675 6e63 7469 6f6e 5f6e 616d 652c    function_name,
+0001d460: 2071 7561 6c69 6669 6572 203d 2061 7069   qualifier = api
+0001d470: 5f75 7469 6c73 2e67 6574 5f6e 616d 655f  _utils.get_name_
+0001d480: 616e 645f 7175 616c 6966 6965 7228 0a20  and_qualifier(. 
+0001d490: 2020 2020 2020 2020 2020 2066 756e 6374             funct
+0001d4a0: 696f 6e5f 6e61 6d65 2c20 7175 616c 6966  ion_name, qualif
+0001d4b0: 6965 722c 2063 6f6e 7465 7874 2e72 6567  ier, context.reg
+0001d4c0: 696f 6e0a 2020 2020 2020 2020 290a 2020  ion.        ).  
+0001d4d0: 2020 2020 2020 666e 203d 2073 7461 7465        fn = state
+0001d4e0: 2e66 756e 6374 696f 6e73 2e67 6574 2866  .functions.get(f
+0001d4f0: 756e 6374 696f 6e5f 6e61 6d65 290a 2020  unction_name).  
+0001d500: 2020 2020 2020 6966 206e 6f74 2066 6e20        if not fn 
+0001d510: 6f72 2028 7175 616c 6966 6965 7220 616e  or (qualifier an
+0001d520: 6420 6e6f 7420 2871 7561 6c69 6669 6572  d not (qualifier
+0001d530: 2069 6e20 666e 2e61 6c69 6173 6573 206f   in fn.aliases o
+0001d540: 7220 7175 616c 6966 6965 7220 696e 2066  r qualifier in f
+0001d550: 6e2e 7665 7273 696f 6e73 2929 3a0a 2020  n.versions)):.  
+0001d560: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0001d570: 5265 736f 7572 6365 4e6f 7446 6f75 6e64  ResourceNotFound
+0001d580: 4578 6365 7074 696f 6e28 2254 6865 2066  Exception("The f
+0001d590: 756e 6374 696f 6e20 646f 6573 6e27 7420  unction doesn't 
+0001d5a0: 6578 6973 742e 222c 2054 7970 653d 2255  exist.", Type="U
+0001d5b0: 7365 7222 290a 0a20 2020 2020 2020 2071  ser")..        q
+0001d5c0: 7561 6c69 6669 6572 203d 2071 7561 6c69  ualifier = quali
+0001d5d0: 6669 6572 206f 7220 2224 4c41 5445 5354  fier or "$LATEST
+0001d5e0: 220a 0a20 2020 2020 2020 2023 2076 616c  "..        # val
+0001d5f0: 6964 6174 6520 616e 6420 6e6f 726d 616c  idate and normal
+0001d600: 697a 6520 6465 7374 696e 6174 696f 6e20  ize destination 
+0001d610: 636f 6e66 6967 0a20 2020 2020 2020 2069  config.        i
+0001d620: 6620 6465 7374 696e 6174 696f 6e5f 636f  f destination_co
+0001d630: 6e66 6967 3a0a 2020 2020 2020 2020 2020  nfig:.          
+0001d640: 2020 7365 6c66 2e5f 7661 6c69 6461 7465    self._validate
+0001d650: 5f64 6573 7469 6e61 7469 6f6e 5f63 6f6e  _destination_con
+0001d660: 6669 6728 7374 6174 652c 2066 756e 6374  fig(state, funct
+0001d670: 696f 6e5f 6e61 6d65 2c20 6465 7374 696e  ion_name, destin
+0001d680: 6174 696f 6e5f 636f 6e66 6967 290a 0a20  ation_config).. 
+0001d690: 2020 2020 2020 2064 6573 7469 6e61 7469         destinati
+0001d6a0: 6f6e 5f63 6f6e 6669 6720 3d20 4465 7374  on_config = Dest
+0001d6b0: 696e 6174 696f 6e43 6f6e 6669 6728 0a20  inationConfig(. 
+0001d6c0: 2020 2020 2020 2020 2020 204f 6e53 7563             OnSuc
+0001d6d0: 6365 7373 3d4f 6e53 7563 6365 7373 280a  cess=OnSuccess(.
+0001d6e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001d6f0: 4465 7374 696e 6174 696f 6e3d 2864 6573  Destination=(des
+0001d700: 7469 6e61 7469 6f6e 5f63 6f6e 6669 6720  tination_config 
+0001d710: 6f72 207b 7d29 2e67 6574 2822 4f6e 5375  or {}).get("OnSu
+0001d720: 6363 6573 7322 2c20 7b7d 292e 6765 7428  ccess", {}).get(
+0001d730: 2244 6573 7469 6e61 7469 6f6e 2229 0a20  "Destination"). 
+0001d740: 2020 2020 2020 2020 2020 2029 2c0a 2020             ),.  
+0001d750: 2020 2020 2020 2020 2020 4f6e 4661 696c            OnFail
+0001d760: 7572 653d 4f6e 4661 696c 7572 6528 0a20  ure=OnFailure(. 
+0001d770: 2020 2020 2020 2020 2020 2020 2020 2044                 D
+0001d780: 6573 7469 6e61 7469 6f6e 3d28 6465 7374  estination=(dest
+0001d790: 696e 6174 696f 6e5f 636f 6e66 6967 206f  ination_config o
+0001d7a0: 7220 7b7d 292e 6765 7428 224f 6e46 6169  r {}).get("OnFai
+0001d7b0: 6c75 7265 222c 207b 7d29 2e67 6574 2822  lure", {}).get("
+0001d7c0: 4465 7374 696e 6174 696f 6e22 290a 2020  Destination").  
+0001d7d0: 2020 2020 2020 2020 2020 292c 0a20 2020            ),.   
+0001d7e0: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+0001d7f0: 636f 6e66 6967 203d 2045 7665 6e74 496e  config = EventIn
+0001d800: 766f 6b65 436f 6e66 6967 280a 2020 2020  vokeConfig(.    
+0001d810: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
+0001d820: 5f6e 616d 653d 6675 6e63 7469 6f6e 5f6e  _name=function_n
+0001d830: 616d 652c 0a20 2020 2020 2020 2020 2020  ame,.           
+0001d840: 2071 7561 6c69 6669 6572 3d71 7561 6c69   qualifier=quali
+0001d850: 6669 6572 2c0a 2020 2020 2020 2020 2020  fier,.          
+0001d860: 2020 6d61 7869 6d75 6d5f 6576 656e 745f    maximum_event_
+0001d870: 6167 655f 696e 5f73 6563 6f6e 6473 3d6d  age_in_seconds=m
+0001d880: 6178 696d 756d 5f65 7665 6e74 5f61 6765  aximum_event_age
+0001d890: 5f69 6e5f 7365 636f 6e64 732c 0a20 2020  _in_seconds,.   
+0001d8a0: 2020 2020 2020 2020 206d 6178 696d 756d           maximum
+0001d8b0: 5f72 6574 7279 5f61 7474 656d 7074 733d  _retry_attempts=
+0001d8c0: 6d61 7869 6d75 6d5f 7265 7472 795f 6174  maximum_retry_at
+0001d8d0: 7465 6d70 7473 2c0a 2020 2020 2020 2020  tempts,.        
+0001d8e0: 2020 2020 6c61 7374 5f6d 6f64 6966 6965      last_modifie
+0001d8f0: 643d 6170 695f 7574 696c 732e 6765 6e65  d=api_utils.gene
+0001d900: 7261 7465 5f6c 616d 6264 615f 6461 7465  rate_lambda_date
+0001d910: 2829 2c0a 2020 2020 2020 2020 2020 2020  (),.            
+0001d920: 6465 7374 696e 6174 696f 6e5f 636f 6e66  destination_conf
+0001d930: 6967 3d64 6573 7469 6e61 7469 6f6e 5f63  ig=destination_c
+0001d940: 6f6e 6669 672c 0a20 2020 2020 2020 2029  onfig,.        )
+0001d950: 0a20 2020 2020 2020 2066 6e2e 6576 656e  .        fn.even
+0001d960: 745f 696e 766f 6b65 5f63 6f6e 6669 6773  t_invoke_configs
+0001d970: 5b71 7561 6c69 6669 6572 5d20 3d20 636f  [qualifier] = co
+0001d980: 6e66 6967 0a0a 2020 2020 2020 2020 7265  nfig..        re
+0001d990: 7475 726e 2046 756e 6374 696f 6e45 7665  turn FunctionEve
+0001d9a0: 6e74 496e 766f 6b65 436f 6e66 6967 280a  ntInvokeConfig(.
+0001d9b0: 2020 2020 2020 2020 2020 2020 4c61 7374              Last
+0001d9c0: 4d6f 6469 6669 6564 3d64 6174 6574 696d  Modified=datetim
+0001d9d0: 652e 6461 7465 7469 6d65 2e73 7472 7074  e.datetime.strpt
+0001d9e0: 696d 6528 0a20 2020 2020 2020 2020 2020  ime(.           
+0001d9f0: 2020 2020 2063 6f6e 6669 672e 6c61 7374       config.last
+0001da00: 5f6d 6f64 6966 6965 642c 2061 7069 5f75  _modified, api_u
+0001da10: 7469 6c73 2e4c 414d 4244 415f 4441 5445  tils.LAMBDA_DATE
+0001da20: 5f46 4f52 4d41 540a 2020 2020 2020 2020  _FORMAT.        
+0001da30: 2020 2020 292c 0a20 2020 2020 2020 2020      ),.         
+0001da40: 2020 2046 756e 6374 696f 6e41 726e 3d61     FunctionArn=a
+0001da50: 7069 5f75 7469 6c73 2e71 7561 6c69 6669  pi_utils.qualifi
+0001da60: 6564 5f6c 616d 6264 615f 6172 6e28 0a20  ed_lambda_arn(. 
+0001da70: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001da80: 756e 6374 696f 6e5f 6e61 6d65 2c20 7175  unction_name, qu
+0001da90: 616c 6966 6965 7220 6f72 2022 244c 4154  alifier or "$LAT
+0001daa0: 4553 5422 2c20 636f 6e74 6578 742e 6163  EST", context.ac
+0001dab0: 636f 756e 745f 6964 2c20 636f 6e74 6578  count_id, contex
+0001dac0: 742e 7265 6769 6f6e 0a20 2020 2020 2020  t.region.       
+0001dad0: 2020 2020 2029 2c0a 2020 2020 2020 2020       ),.        
+0001dae0: 2020 2020 4465 7374 696e 6174 696f 6e43      DestinationC
+0001daf0: 6f6e 6669 673d 6465 7374 696e 6174 696f  onfig=destinatio
+0001db00: 6e5f 636f 6e66 6967 2c0a 2020 2020 2020  n_config,.      
+0001db10: 2020 2020 2020 4d61 7869 6d75 6d45 7665        MaximumEve
+0001db20: 6e74 4167 6549 6e53 6563 6f6e 6473 3d6d  ntAgeInSeconds=m
+0001db30: 6178 696d 756d 5f65 7665 6e74 5f61 6765  aximum_event_age
+0001db40: 5f69 6e5f 7365 636f 6e64 732c 0a20 2020  _in_seconds,.   
+0001db50: 2020 2020 2020 2020 204d 6178 696d 756d           Maximum
+0001db60: 5265 7472 7941 7474 656d 7074 733d 6d61  RetryAttempts=ma
+0001db70: 7869 6d75 6d5f 7265 7472 795f 6174 7465  ximum_retry_atte
+0001db80: 6d70 7473 2c0a 2020 2020 2020 2020 290a  mpts,.        ).
+0001db90: 0a20 2020 2064 6566 2067 6574 5f66 756e  .    def get_fun
+0001dba0: 6374 696f 6e5f 6576 656e 745f 696e 766f  ction_event_invo
+0001dbb0: 6b65 5f63 6f6e 6669 6728 0a20 2020 2020  ke_config(.     
+0001dbc0: 2020 2073 656c 662c 2063 6f6e 7465 7874     self, context
+0001dbd0: 3a20 5265 7175 6573 7443 6f6e 7465 7874  : RequestContext
+0001dbe0: 2c20 6675 6e63 7469 6f6e 5f6e 616d 653a  , function_name:
+0001dbf0: 2046 756e 6374 696f 6e4e 616d 652c 2071   FunctionName, q
+0001dc00: 7561 6c69 6669 6572 3a20 5175 616c 6966  ualifier: Qualif
+0001dc10: 6965 7220 3d20 4e6f 6e65 0a20 2020 2029  ier = None.    )
+0001dc20: 202d 3e20 4675 6e63 7469 6f6e 4576 656e   -> FunctionEven
+0001dc30: 7449 6e76 6f6b 6543 6f6e 6669 673a 0a20  tInvokeConfig:. 
+0001dc40: 2020 2020 2020 2073 7461 7465 203d 206c         state = l
+0001dc50: 616d 6264 615f 7374 6f72 6573 5b63 6f6e  ambda_stores[con
+0001dc60: 7465 7874 2e61 6363 6f75 6e74 5f69 645d  text.account_id]
+0001dc70: 5b63 6f6e 7465 7874 2e72 6567 696f 6e5d  [context.region]
+0001dc80: 0a20 2020 2020 2020 2066 756e 6374 696f  .        functio
+0001dc90: 6e5f 6e61 6d65 2c20 7175 616c 6966 6965  n_name, qualifie
+0001dca0: 7220 3d20 6170 695f 7574 696c 732e 6765  r = api_utils.ge
+0001dcb0: 745f 6e61 6d65 5f61 6e64 5f71 7561 6c69  t_name_and_quali
+0001dcc0: 6669 6572 280a 2020 2020 2020 2020 2020  fier(.          
+0001dcd0: 2020 6675 6e63 7469 6f6e 5f6e 616d 652c    function_name,
+0001dce0: 2071 7561 6c69 6669 6572 2c20 636f 6e74   qualifier, cont
+0001dcf0: 6578 742e 7265 6769 6f6e 0a20 2020 2020  ext.region.     
+0001dd00: 2020 2029 0a0a 2020 2020 2020 2020 7175     )..        qu
+0001dd10: 616c 6966 6965 7220 3d20 7175 616c 6966  alifier = qualif
+0001dd20: 6965 7220 6f72 2022 244c 4154 4553 5422  ier or "$LATEST"
+0001dd30: 0a20 2020 2020 2020 2066 6e20 3d20 7374  .        fn = st
+0001dd40: 6174 652e 6675 6e63 7469 6f6e 732e 6765  ate.functions.ge
+0001dd50: 7428 6675 6e63 7469 6f6e 5f6e 616d 6529  t(function_name)
+0001dd60: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+0001dd70: 666e 3a0a 2020 2020 2020 2020 2020 2020  fn:.            
+0001dd80: 666e 5f61 726e 203d 2061 7069 5f75 7469  fn_arn = api_uti
+0001dd90: 6c73 2e71 7561 6c69 6669 6564 5f6c 616d  ls.qualified_lam
+0001dda0: 6264 615f 6172 6e28 0a20 2020 2020 2020  bda_arn(.       
+0001ddb0: 2020 2020 2020 2020 2066 756e 6374 696f           functio
+0001ddc0: 6e5f 6e61 6d65 2c20 7175 616c 6966 6965  n_name, qualifie
+0001ddd0: 722c 2063 6f6e 7465 7874 2e61 6363 6f75  r, context.accou
+0001dde0: 6e74 5f69 642c 2063 6f6e 7465 7874 2e72  nt_id, context.r
+0001ddf0: 6567 696f 6e0a 2020 2020 2020 2020 2020  egion.          
+0001de00: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+0001de10: 7261 6973 6520 5265 736f 7572 6365 4e6f  raise ResourceNo
+0001de20: 7446 6f75 6e64 4578 6365 7074 696f 6e28  tFoundException(
+0001de30: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001de40: 2066 2254 6865 2066 756e 6374 696f 6e20   f"The function 
+0001de50: 7b66 6e5f 6172 6e7d 2064 6f65 736e 2774  {fn_arn} doesn't
+0001de60: 2068 6176 6520 616e 2045 7665 6e74 496e   have an EventIn
+0001de70: 766f 6b65 436f 6e66 6967 222c 2054 7970  vokeConfig", Typ
+0001de80: 653d 2255 7365 7222 0a20 2020 2020 2020  e="User".       
+0001de90: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+0001dea0: 636f 6e66 6967 203d 2066 6e2e 6576 656e  config = fn.even
+0001deb0: 745f 696e 766f 6b65 5f63 6f6e 6669 6773  t_invoke_configs
+0001dec0: 2e67 6574 2871 7561 6c69 6669 6572 290a  .get(qualifier).
+0001ded0: 2020 2020 2020 2020 6966 206e 6f74 2063          if not c
+0001dee0: 6f6e 6669 673a 0a20 2020 2020 2020 2020  onfig:.         
+0001def0: 2020 2066 6e5f 6172 6e20 3d20 6170 695f     fn_arn = api_
+0001df00: 7574 696c 732e 7175 616c 6966 6965 645f  utils.qualified_
+0001df10: 6c61 6d62 6461 5f61 726e 280a 2020 2020  lambda_arn(.    
+0001df20: 2020 2020 2020 2020 2020 2020 6675 6e63              func
+0001df30: 7469 6f6e 5f6e 616d 652c 2071 7561 6c69  tion_name, quali
+0001df40: 6669 6572 2c20 636f 6e74 6578 742e 6163  fier, context.ac
+0001df50: 636f 756e 745f 6964 2c20 636f 6e74 6578  count_id, contex
+0001df60: 742e 7265 6769 6f6e 0a20 2020 2020 2020  t.region.       
+0001df70: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+0001df80: 2020 2072 6169 7365 2052 6573 6f75 7263     raise Resourc
+0001df90: 654e 6f74 466f 756e 6445 7863 6570 7469  eNotFoundExcepti
+0001dfa0: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
+0001dfb0: 2020 2020 6622 5468 6520 6675 6e63 7469      f"The functi
+0001dfc0: 6f6e 207b 666e 5f61 726e 7d20 646f 6573  on {fn_arn} does
+0001dfd0: 6e27 7420 6861 7665 2061 6e20 4576 656e  n't have an Even
+0001dfe0: 7449 6e76 6f6b 6543 6f6e 6669 6722 2c20  tInvokeConfig", 
+0001dff0: 5479 7065 3d22 5573 6572 220a 2020 2020  Type="User".    
+0001e000: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+0001e010: 2020 2072 6574 7572 6e20 4675 6e63 7469     return Functi
+0001e020: 6f6e 4576 656e 7449 6e76 6f6b 6543 6f6e  onEventInvokeCon
+0001e030: 6669 6728 0a20 2020 2020 2020 2020 2020  fig(.           
+0001e040: 204c 6173 744d 6f64 6966 6965 643d 6461   LastModified=da
+0001e050: 7465 7469 6d65 2e64 6174 6574 696d 652e  tetime.datetime.
+0001e060: 7374 7270 7469 6d65 280a 2020 2020 2020  strptime(.      
+0001e070: 2020 2020 2020 2020 2020 636f 6e66 6967            config
+0001e080: 2e6c 6173 745f 6d6f 6469 6669 6564 2c20  .last_modified, 
+0001e090: 6170 695f 7574 696c 732e 4c41 4d42 4441  api_utils.LAMBDA
+0001e0a0: 5f44 4154 455f 464f 524d 4154 0a20 2020  _DATE_FORMAT.   
+0001e0b0: 2020 2020 2020 2020 2029 2c0a 2020 2020           ),.    
+0001e0c0: 2020 2020 2020 2020 4675 6e63 7469 6f6e          Function
+0001e0d0: 4172 6e3d 6170 695f 7574 696c 732e 7175  Arn=api_utils.qu
+0001e0e0: 616c 6966 6965 645f 6c61 6d62 6461 5f61  alified_lambda_a
+0001e0f0: 726e 280a 2020 2020 2020 2020 2020 2020  rn(.            
+0001e100: 2020 2020 6675 6e63 7469 6f6e 5f6e 616d      function_nam
+0001e110: 652c 2071 7561 6c69 6669 6572 2c20 636f  e, qualifier, co
+0001e120: 6e74 6578 742e 6163 636f 756e 745f 6964  ntext.account_id
+0001e130: 2c20 636f 6e74 6578 742e 7265 6769 6f6e  , context.region
+0001e140: 0a20 2020 2020 2020 2020 2020 2029 2c0a  .            ),.
+0001e150: 2020 2020 2020 2020 2020 2020 4465 7374              Dest
+0001e160: 696e 6174 696f 6e43 6f6e 6669 673d 636f  inationConfig=co
+0001e170: 6e66 6967 2e64 6573 7469 6e61 7469 6f6e  nfig.destination
+0001e180: 5f63 6f6e 6669 672c 0a20 2020 2020 2020  _config,.       
+0001e190: 2020 2020 204d 6178 696d 756d 4576 656e       MaximumEven
+0001e1a0: 7441 6765 496e 5365 636f 6e64 733d 636f  tAgeInSeconds=co
+0001e1b0: 6e66 6967 2e6d 6178 696d 756d 5f65 7665  nfig.maximum_eve
+0001e1c0: 6e74 5f61 6765 5f69 6e5f 7365 636f 6e64  nt_age_in_second
+0001e1d0: 732c 0a20 2020 2020 2020 2020 2020 204d  s,.            M
+0001e1e0: 6178 696d 756d 5265 7472 7941 7474 656d  aximumRetryAttem
+0001e1f0: 7074 733d 636f 6e66 6967 2e6d 6178 696d  pts=config.maxim
+0001e200: 756d 5f72 6574 7279 5f61 7474 656d 7074  um_retry_attempt
+0001e210: 732c 0a20 2020 2020 2020 2029 0a0a 2020  s,.        )..  
+0001e220: 2020 6465 6620 6c69 7374 5f66 756e 6374    def list_funct
+0001e230: 696f 6e5f 6576 656e 745f 696e 766f 6b65  ion_event_invoke
+0001e240: 5f63 6f6e 6669 6773 280a 2020 2020 2020  _configs(.      
+0001e250: 2020 7365 6c66 2c0a 2020 2020 2020 2020    self,.        
+0001e260: 636f 6e74 6578 743a 2052 6571 7565 7374  context: Request
+0001e270: 436f 6e74 6578 742c 0a20 2020 2020 2020  Context,.       
+0001e280: 2066 756e 6374 696f 6e5f 6e61 6d65 3a20   function_name: 
+0001e290: 4675 6e63 7469 6f6e 4e61 6d65 2c0a 2020  FunctionName,.  
+0001e2a0: 2020 2020 2020 6d61 726b 6572 3a20 5374        marker: St
+0001e2b0: 7269 6e67 203d 204e 6f6e 652c 0a20 2020  ring = None,.   
+0001e2c0: 2020 2020 206d 6178 5f69 7465 6d73 3a20       max_items: 
+0001e2d0: 4d61 7846 756e 6374 696f 6e45 7665 6e74  MaxFunctionEvent
+0001e2e0: 496e 766f 6b65 436f 6e66 6967 4c69 7374  InvokeConfigList
+0001e2f0: 4974 656d 7320 3d20 4e6f 6e65 2c0a 2020  Items = None,.  
+0001e300: 2020 2920 2d3e 204c 6973 7446 756e 6374    ) -> ListFunct
+0001e310: 696f 6e45 7665 6e74 496e 766f 6b65 436f  ionEventInvokeCo
+0001e320: 6e66 6967 7352 6573 706f 6e73 653a 0a20  nfigsResponse:. 
+0001e330: 2020 2020 2020 2073 7461 7465 203d 206c         state = l
+0001e340: 616d 6264 615f 7374 6f72 6573 5b63 6f6e  ambda_stores[con
+0001e350: 7465 7874 2e61 6363 6f75 6e74 5f69 645d  text.account_id]
+0001e360: 5b63 6f6e 7465 7874 2e72 6567 696f 6e5d  [context.region]
+0001e370: 0a20 2020 2020 2020 2066 6e20 3d20 7374  .        fn = st
+0001e380: 6174 652e 6675 6e63 7469 6f6e 732e 6765  ate.functions.ge
+0001e390: 7428 6675 6e63 7469 6f6e 5f6e 616d 6529  t(function_name)
+0001e3a0: 0a20 2020 2020 2020 2069 6620 6e6f 7420  .        if not 
+0001e3b0: 666e 3a0a 2020 2020 2020 2020 2020 2020  fn:.            
+0001e3c0: 7261 6973 6520 5265 736f 7572 6365 4e6f  raise ResourceNo
+0001e3d0: 7446 6f75 6e64 4578 6365 7074 696f 6e28  tFoundException(
+0001e3e0: 2254 6865 2066 756e 6374 696f 6e20 646f  "The function do
+0001e3f0: 6573 6e27 7420 6578 6973 742e 222c 2054  esn't exist.", T
+0001e400: 7970 653d 2255 7365 7222 290a 0a20 2020  ype="User")..   
+0001e410: 2020 2020 2065 7665 6e74 5f69 6e76 6f6b       event_invok
+0001e420: 655f 636f 6e66 6967 7320 3d20 5b0a 2020  e_configs = [.  
+0001e430: 2020 2020 2020 2020 2020 4675 6e63 7469            Functi
+0001e440: 6f6e 4576 656e 7449 6e76 6f6b 6543 6f6e  onEventInvokeCon
+0001e450: 6669 6728 0a20 2020 2020 2020 2020 2020  fig(.           
+0001e460: 2020 2020 204c 6173 744d 6f64 6966 6965       LastModifie
+0001e470: 643d 632e 6c61 7374 5f6d 6f64 6966 6965  d=c.last_modifie
+0001e480: 642c 0a20 2020 2020 2020 2020 2020 2020  d,.             
+0001e490: 2020 2046 756e 6374 696f 6e41 726e 3d61     FunctionArn=a
+0001e4a0: 7069 5f75 7469 6c73 2e71 7561 6c69 6669  pi_utils.qualifi
+0001e4b0: 6564 5f6c 616d 6264 615f 6172 6e28 0a20  ed_lambda_arn(. 
+0001e4c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001e4d0: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
+0001e4e0: 2c20 632e 7175 616c 6966 6965 722c 2063  , c.qualifier, c
+0001e4f0: 6f6e 7465 7874 2e61 6363 6f75 6e74 5f69  ontext.account_i
+0001e500: 642c 2063 6f6e 7465 7874 2e72 6567 696f  d, context.regio
+0001e510: 6e0a 2020 2020 2020 2020 2020 2020 2020  n.              
+0001e520: 2020 292c 0a20 2020 2020 2020 2020 2020    ),.           
+0001e530: 2020 2020 204d 6178 696d 756d 4576 656e       MaximumEven
+0001e540: 7441 6765 496e 5365 636f 6e64 733d 632e  tAgeInSeconds=c.
+0001e550: 6d61 7869 6d75 6d5f 6576 656e 745f 6167  maximum_event_ag
+0001e560: 655f 696e 5f73 6563 6f6e 6473 2c0a 2020  e_in_seconds,.  
+0001e570: 2020 2020 2020 2020 2020 2020 2020 4d61                Ma
+0001e580: 7869 6d75 6d52 6574 7279 4174 7465 6d70  ximumRetryAttemp
+0001e590: 7473 3d63 2e6d 6178 696d 756d 5f72 6574  ts=c.maximum_ret
+0001e5a0: 7279 5f61 7474 656d 7074 732c 0a20 2020  ry_attempts,.   
+0001e5b0: 2020 2020 2020 2020 2020 2020 2044 6573               Des
+0001e5c0: 7469 6e61 7469 6f6e 436f 6e66 6967 3d63  tinationConfig=c
+0001e5d0: 2e64 6573 7469 6e61 7469 6f6e 5f63 6f6e  .destination_con
+0001e5e0: 6669 672c 0a20 2020 2020 2020 2020 2020  fig,.           
+0001e5f0: 2029 0a20 2020 2020 2020 2020 2020 2066   ).            f
+0001e600: 6f72 2063 2069 6e20 666e 2e65 7665 6e74  or c in fn.event
+0001e610: 5f69 6e76 6f6b 655f 636f 6e66 6967 732e  _invoke_configs.
+0001e620: 7661 6c75 6573 2829 0a20 2020 2020 2020  values().       
+0001e630: 205d 0a0a 2020 2020 2020 2020 6576 656e   ]..        even
+0001e640: 745f 696e 766f 6b65 5f63 6f6e 6669 6773  t_invoke_configs
+0001e650: 203d 2050 6167 696e 6174 6564 4c69 7374   = PaginatedList
+0001e660: 2865 7665 6e74 5f69 6e76 6f6b 655f 636f  (event_invoke_co
+0001e670: 6e66 6967 7329 0a20 2020 2020 2020 2070  nfigs).        p
+0001e680: 6167 652c 2074 6f6b 656e 203d 2065 7665  age, token = eve
+0001e690: 6e74 5f69 6e76 6f6b 655f 636f 6e66 6967  nt_invoke_config
+0001e6a0: 732e 6765 745f 7061 6765 280a 2020 2020  s.get_page(.    
+0001e6b0: 2020 2020 2020 2020 6c61 6d62 6461 2078          lambda x
+0001e6c0: 3a20 785b 2246 756e 6374 696f 6e41 726e  : x["FunctionArn
+0001e6d0: 225d 2c0a 2020 2020 2020 2020 2020 2020  "],.            
+0001e6e0: 6d61 726b 6572 2c0a 2020 2020 2020 2020  marker,.        
+0001e6f0: 2020 2020 6d61 785f 6974 656d 732c 0a20      max_items,. 
+0001e700: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0001e710: 2072 6574 7572 6e20 4c69 7374 4675 6e63   return ListFunc
+0001e720: 7469 6f6e 4576 656e 7449 6e76 6f6b 6543  tionEventInvokeC
+0001e730: 6f6e 6669 6773 5265 7370 6f6e 7365 280a  onfigsResponse(.
+0001e740: 2020 2020 2020 2020 2020 2020 4675 6e63              Func
+0001e750: 7469 6f6e 4576 656e 7449 6e76 6f6b 6543  tionEventInvokeC
+0001e760: 6f6e 6669 6773 3d70 6167 652c 204e 6578  onfigs=page, Nex
+0001e770: 744d 6172 6b65 723d 746f 6b65 6e0a 2020  tMarker=token.  
+0001e780: 2020 2020 2020 290a 0a20 2020 2064 6566        )..    def
+0001e790: 2064 656c 6574 655f 6675 6e63 7469 6f6e   delete_function
+0001e7a0: 5f65 7665 6e74 5f69 6e76 6f6b 655f 636f  _event_invoke_co
+0001e7b0: 6e66 6967 280a 2020 2020 2020 2020 7365  nfig(.        se
+0001e7c0: 6c66 2c20 636f 6e74 6578 743a 2052 6571  lf, context: Req
+0001e7d0: 7565 7374 436f 6e74 6578 742c 2066 756e  uestContext, fun
+0001e7e0: 6374 696f 6e5f 6e61 6d65 3a20 4675 6e63  ction_name: Func
+0001e7f0: 7469 6f6e 4e61 6d65 2c20 7175 616c 6966  tionName, qualif
+0001e800: 6965 723a 2051 7561 6c69 6669 6572 203d  ier: Qualifier =
+0001e810: 204e 6f6e 650a 2020 2020 2920 2d3e 204e   None.    ) -> N
+0001e820: 6f6e 653a 0a20 2020 2020 2020 2066 756e  one:.        fun
+0001e830: 6374 696f 6e5f 6e61 6d65 2c20 7175 616c  ction_name, qual
+0001e840: 6966 6965 7220 3d20 6170 695f 7574 696c  ifier = api_util
+0001e850: 732e 6765 745f 6e61 6d65 5f61 6e64 5f71  s.get_name_and_q
+0001e860: 7561 6c69 6669 6572 280a 2020 2020 2020  ualifier(.      
+0001e870: 2020 2020 2020 6675 6e63 7469 6f6e 5f6e        function_n
+0001e880: 616d 652c 2071 7561 6c69 6669 6572 2c20  ame, qualifier, 
+0001e890: 636f 6e74 6578 742e 7265 6769 6f6e 0a20  context.region. 
+0001e8a0: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0001e8b0: 2073 7461 7465 203d 206c 616d 6264 615f   state = lambda_
+0001e8c0: 7374 6f72 6573 5b63 6f6e 7465 7874 2e61  stores[context.a
+0001e8d0: 6363 6f75 6e74 5f69 645d 5b63 6f6e 7465  ccount_id][conte
+0001e8e0: 7874 2e72 6567 696f 6e5d 0a20 2020 2020  xt.region].     
+0001e8f0: 2020 2066 6e20 3d20 7374 6174 652e 6675     fn = state.fu
+0001e900: 6e63 7469 6f6e 732e 6765 7428 6675 6e63  nctions.get(func
+0001e910: 7469 6f6e 5f6e 616d 6529 0a20 2020 2020  tion_name).     
+0001e920: 2020 2072 6573 6f6c 7665 645f 7175 616c     resolved_qual
+0001e930: 6966 6965 7220 3d20 7175 616c 6966 6965  ifier = qualifie
+0001e940: 7220 6f72 2022 244c 4154 4553 5422 0a20  r or "$LATEST". 
+0001e950: 2020 2020 2020 2066 6e5f 6172 6e20 3d20         fn_arn = 
+0001e960: 6170 695f 7574 696c 732e 7175 616c 6966  api_utils.qualif
+0001e970: 6965 645f 6c61 6d62 6461 5f61 726e 280a  ied_lambda_arn(.
+0001e980: 2020 2020 2020 2020 2020 2020 6675 6e63              func
+0001e990: 7469 6f6e 5f6e 616d 652c 2071 7561 6c69  tion_name, quali
+0001e9a0: 6669 6572 2c20 636f 6e74 6578 742e 6163  fier, context.ac
+0001e9b0: 636f 756e 745f 6964 2c20 636f 6e74 6578  count_id, contex
+0001e9c0: 742e 7265 6769 6f6e 0a20 2020 2020 2020  t.region.       
+0001e9d0: 2029 0a20 2020 2020 2020 2069 6620 6e6f   ).        if no
+0001e9e0: 7420 666e 3a0a 2020 2020 2020 2020 2020  t fn:.          
+0001e9f0: 2020 7261 6973 6520 5265 736f 7572 6365    raise Resource
+0001ea00: 4e6f 7446 6f75 6e64 4578 6365 7074 696f  NotFoundExceptio
+0001ea10: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+0001ea20: 2020 2066 2254 6865 2066 756e 6374 696f     f"The functio
+0001ea30: 6e20 7b66 6e5f 6172 6e7d 2064 6f65 736e  n {fn_arn} doesn
+0001ea40: 2774 2068 6176 6520 616e 2045 7665 6e74  't have an Event
+0001ea50: 496e 766f 6b65 436f 6e66 6967 222c 2054  InvokeConfig", T
+0001ea60: 7970 653d 2255 7365 7222 0a20 2020 2020  ype="User".     
+0001ea70: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+0001ea80: 2020 636f 6e66 6967 203d 2066 6e2e 6576    config = fn.ev
+0001ea90: 656e 745f 696e 766f 6b65 5f63 6f6e 6669  ent_invoke_confi
+0001eaa0: 6773 2e67 6574 2872 6573 6f6c 7665 645f  gs.get(resolved_
+0001eab0: 7175 616c 6966 6965 7229 0a20 2020 2020  qualifier).     
+0001eac0: 2020 2069 6620 6e6f 7420 636f 6e66 6967     if not config
+0001ead0: 3a0a 2020 2020 2020 2020 2020 2020 7261  :.            ra
+0001eae0: 6973 6520 5265 736f 7572 6365 4e6f 7446  ise ResourceNotF
+0001eaf0: 6f75 6e64 4578 6365 7074 696f 6e28 0a20  oundException(. 
+0001eb00: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+0001eb10: 2254 6865 2066 756e 6374 696f 6e20 7b66  "The function {f
+0001eb20: 6e5f 6172 6e7d 2064 6f65 736e 2774 2068  n_arn} doesn't h
+0001eb30: 6176 6520 616e 2045 7665 6e74 496e 766f  ave an EventInvo
+0001eb40: 6b65 436f 6e66 6967 222c 2054 7970 653d  keConfig", Type=
+0001eb50: 2255 7365 7222 0a20 2020 2020 2020 2020  "User".         
+0001eb60: 2020 2029 0a0a 2020 2020 2020 2020 6465     )..        de
+0001eb70: 6c20 666e 2e65 7665 6e74 5f69 6e76 6f6b  l fn.event_invok
+0001eb80: 655f 636f 6e66 6967 735b 7265 736f 6c76  e_configs[resolv
+0001eb90: 6564 5f71 7561 6c69 6669 6572 5d0a 0a20  ed_qualifier].. 
+0001eba0: 2020 2064 6566 2075 7064 6174 655f 6675     def update_fu
+0001ebb0: 6e63 7469 6f6e 5f65 7665 6e74 5f69 6e76  nction_event_inv
+0001ebc0: 6f6b 655f 636f 6e66 6967 280a 2020 2020  oke_config(.    
+0001ebd0: 2020 2020 7365 6c66 2c0a 2020 2020 2020      self,.      
+0001ebe0: 2020 636f 6e74 6578 743a 2052 6571 7565    context: Reque
+0001ebf0: 7374 436f 6e74 6578 742c 0a20 2020 2020  stContext,.     
+0001ec00: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
+0001ec10: 3a20 4675 6e63 7469 6f6e 4e61 6d65 2c0a  : FunctionName,.
+0001ec20: 2020 2020 2020 2020 7175 616c 6966 6965          qualifie
+0001ec30: 723a 2051 7561 6c69 6669 6572 203d 204e  r: Qualifier = N
+0001ec40: 6f6e 652c 0a20 2020 2020 2020 206d 6178  one,.        max
+0001ec50: 696d 756d 5f72 6574 7279 5f61 7474 656d  imum_retry_attem
+0001ec60: 7074 733a 204d 6178 696d 756d 5265 7472  pts: MaximumRetr
+0001ec70: 7941 7474 656d 7074 7320 3d20 4e6f 6e65  yAttempts = None
+0001ec80: 2c0a 2020 2020 2020 2020 6d61 7869 6d75  ,.        maximu
+0001ec90: 6d5f 6576 656e 745f 6167 655f 696e 5f73  m_event_age_in_s
+0001eca0: 6563 6f6e 6473 3a20 4d61 7869 6d75 6d45  econds: MaximumE
+0001ecb0: 7665 6e74 4167 6549 6e53 6563 6f6e 6473  ventAgeInSeconds
+0001ecc0: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
+0001ecd0: 2064 6573 7469 6e61 7469 6f6e 5f63 6f6e   destination_con
+0001ece0: 6669 673a 2044 6573 7469 6e61 7469 6f6e  fig: Destination
+0001ecf0: 436f 6e66 6967 203d 204e 6f6e 652c 0a20  Config = None,. 
+0001ed00: 2020 2029 202d 3e20 4675 6e63 7469 6f6e     ) -> Function
+0001ed10: 4576 656e 7449 6e76 6f6b 6543 6f6e 6669  EventInvokeConfi
+0001ed20: 673a 0a20 2020 2020 2020 2023 206c 696b  g:.        # lik
+0001ed30: 6520 7075 7420 6275 7420 6f6e 6c79 2075  e put but only u
+0001ed40: 7064 6174 6520 7369 6e67 6c65 2066 6965  pdate single fie
+0001ed50: 6c64 7320 7669 6120 7265 706c 6163 650a  lds via replace.
+0001ed60: 2020 2020 2020 2020 7374 6174 6520 3d20          state = 
+0001ed70: 6c61 6d62 6461 5f73 746f 7265 735b 636f  lambda_stores[co
+0001ed80: 6e74 6578 742e 6163 636f 756e 745f 6964  ntext.account_id
+0001ed90: 5d5b 636f 6e74 6578 742e 7265 6769 6f6e  ][context.region
+0001eda0: 5d0a 2020 2020 2020 2020 6675 6e63 7469  ].        functi
+0001edb0: 6f6e 5f6e 616d 652c 2071 7561 6c69 6669  on_name, qualifi
+0001edc0: 6572 203d 2061 7069 5f75 7469 6c73 2e67  er = api_utils.g
+0001edd0: 6574 5f6e 616d 655f 616e 645f 7175 616c  et_name_and_qual
+0001ede0: 6966 6965 7228 0a20 2020 2020 2020 2020  ifier(.         
+0001edf0: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
+0001ee00: 2c20 7175 616c 6966 6965 722c 2063 6f6e  , qualifier, con
+0001ee10: 7465 7874 2e72 6567 696f 6e0a 2020 2020  text.region.    
+0001ee20: 2020 2020 290a 0a20 2020 2020 2020 2069      )..        i
+0001ee30: 6620 280a 2020 2020 2020 2020 2020 2020  f (.            
+0001ee40: 6d61 7869 6d75 6d5f 6576 656e 745f 6167  maximum_event_ag
+0001ee50: 655f 696e 5f73 6563 6f6e 6473 2069 7320  e_in_seconds is 
+0001ee60: 4e6f 6e65 0a20 2020 2020 2020 2020 2020  None.           
+0001ee70: 2061 6e64 206d 6178 696d 756d 5f72 6574   and maximum_ret
+0001ee80: 7279 5f61 7474 656d 7074 7320 6973 204e  ry_attempts is N
+0001ee90: 6f6e 650a 2020 2020 2020 2020 2020 2020  one.            
+0001eea0: 616e 6420 6465 7374 696e 6174 696f 6e5f  and destination_
+0001eeb0: 636f 6e66 6967 2069 7320 4e6f 6e65 0a20  config is None. 
+0001eec0: 2020 2020 2020 2029 3a0a 2020 2020 2020         ):.      
+0001eed0: 2020 2020 2020 7261 6973 6520 496e 7661        raise Inva
+0001eee0: 6c69 6450 6172 616d 6574 6572 5661 6c75  lidParameterValu
+0001eef0: 6545 7863 6570 7469 6f6e 280a 2020 2020  eException(.    
+0001ef00: 2020 2020 2020 2020 2020 2020 2259 6f75              "You
+0001ef10: 206d 7573 7420 7370 6563 6966 7920 6174   must specify at
+0001ef20: 206c 6561 7374 206f 6e65 206f 6620 6572   least one of er
+0001ef30: 726f 7220 6861 6e64 6c69 6e67 206f 7220  ror handling or 
+0001ef40: 6465 7374 696e 6174 696f 6e20 7365 7474  destination sett
+0001ef50: 696e 672e 222c 0a20 2020 2020 2020 2020  ing.",.         
+0001ef60: 2020 2020 2020 2054 7970 653d 2255 7365         Type="Use
+0001ef70: 7222 2c0a 2020 2020 2020 2020 2020 2020  r",.            
+0001ef80: 290a 0a20 2020 2020 2020 2066 6e20 3d20  )..        fn = 
+0001ef90: 7374 6174 652e 6675 6e63 7469 6f6e 732e  state.functions.
+0001efa0: 6765 7428 6675 6e63 7469 6f6e 5f6e 616d  get(function_nam
+0001efb0: 6529 0a20 2020 2020 2020 2069 6620 6e6f  e).        if no
+0001efc0: 7420 666e 206f 7220 2871 7561 6c69 6669  t fn or (qualifi
+0001efd0: 6572 2061 6e64 206e 6f74 2028 7175 616c  er and not (qual
+0001efe0: 6966 6965 7220 696e 2066 6e2e 616c 6961  ifier in fn.alia
+0001eff0: 7365 7320 6f72 2071 7561 6c69 6669 6572  ses or qualifier
+0001f000: 2069 6e20 666e 2e76 6572 7369 6f6e 7329   in fn.versions)
+0001f010: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+0001f020: 6169 7365 2052 6573 6f75 7263 654e 6f74  aise ResourceNot
+0001f030: 466f 756e 6445 7863 6570 7469 6f6e 2822  FoundException("
+0001f040: 5468 6520 6675 6e63 7469 6f6e 2064 6f65  The function doe
+0001f050: 736e 2774 2065 7869 7374 2e22 2c20 5479  sn't exist.", Ty
+0001f060: 7065 3d22 5573 6572 2229 0a0a 2020 2020  pe="User")..    
+0001f070: 2020 2020 7175 616c 6966 6965 7220 3d20      qualifier = 
+0001f080: 7175 616c 6966 6965 7220 6f72 2022 244c  qualifier or "$L
+0001f090: 4154 4553 5422 0a0a 2020 2020 2020 2020  ATEST"..        
+0001f0a0: 636f 6e66 6967 203d 2066 6e2e 6576 656e  config = fn.even
+0001f0b0: 745f 696e 766f 6b65 5f63 6f6e 6669 6773  t_invoke_configs
+0001f0c0: 2e67 6574 2871 7561 6c69 6669 6572 290a  .get(qualifier).
+0001f0d0: 2020 2020 2020 2020 6966 206e 6f74 2063          if not c
+0001f0e0: 6f6e 6669 673a 0a20 2020 2020 2020 2020  onfig:.         
+0001f0f0: 2020 2066 6e5f 6172 6e20 3d20 6170 695f     fn_arn = api_
+0001f100: 7574 696c 732e 7175 616c 6966 6965 645f  utils.qualified_
+0001f110: 6c61 6d62 6461 5f61 726e 280a 2020 2020  lambda_arn(.    
+0001f120: 2020 2020 2020 2020 2020 2020 6675 6e63              func
+0001f130: 7469 6f6e 5f6e 616d 652c 2071 7561 6c69  tion_name, quali
+0001f140: 6669 6572 2c20 636f 6e74 6578 742e 6163  fier, context.ac
+0001f150: 636f 756e 745f 6964 2c20 636f 6e74 6578  count_id, contex
+0001f160: 742e 7265 6769 6f6e 0a20 2020 2020 2020  t.region.       
+0001f170: 2020 2020 2029 0a20 2020 2020 2020 2020       ).         
+0001f180: 2020 2072 6169 7365 2052 6573 6f75 7263     raise Resourc
+0001f190: 654e 6f74 466f 756e 6445 7863 6570 7469  eNotFoundExcepti
+0001f1a0: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
+0001f1b0: 2020 2020 6622 5468 6520 6675 6e63 7469      f"The functi
+0001f1c0: 6f6e 207b 666e 5f61 726e 7d20 646f 6573  on {fn_arn} does
+0001f1d0: 6e27 7420 6861 7665 2061 6e20 4576 656e  n't have an Even
+0001f1e0: 7449 6e76 6f6b 6543 6f6e 6669 6722 2c20  tInvokeConfig", 
+0001f1f0: 5479 7065 3d22 5573 6572 220a 2020 2020  Type="User".    
+0001f200: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+0001f210: 2020 2069 6620 6465 7374 696e 6174 696f     if destinatio
+0001f220: 6e5f 636f 6e66 6967 3a0a 2020 2020 2020  n_config:.      
+0001f230: 2020 2020 2020 7365 6c66 2e5f 7661 6c69        self._vali
+0001f240: 6461 7465 5f64 6573 7469 6e61 7469 6f6e  date_destination
+0001f250: 5f63 6f6e 6669 6728 7374 6174 652c 2066  _config(state, f
+0001f260: 756e 6374 696f 6e5f 6e61 6d65 2c20 6465  unction_name, de
+0001f270: 7374 696e 6174 696f 6e5f 636f 6e66 6967  stination_config
+0001f280: 290a 0a20 2020 2020 2020 206f 7074 696f  )..        optio
+0001f290: 6e61 6c5f 6b77 6172 6773 203d 207b 0a20  nal_kwargs = {. 
+0001f2a0: 2020 2020 2020 2020 2020 206b 3a20 760a             k: v.
+0001f2b0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+0001f2c0: 6b2c 2076 2069 6e20 7b0a 2020 2020 2020  k, v in {.      
+0001f2d0: 2020 2020 2020 2020 2020 2264 6573 7469            "desti
+0001f2e0: 6e61 7469 6f6e 5f63 6f6e 6669 6722 3a20  nation_config": 
+0001f2f0: 6465 7374 696e 6174 696f 6e5f 636f 6e66  destination_conf
+0001f300: 6967 2c0a 2020 2020 2020 2020 2020 2020  ig,.            
+0001f310: 2020 2020 226d 6178 696d 756d 5f72 6574      "maximum_ret
+0001f320: 7279 5f61 7474 656d 7074 7322 3a20 6d61  ry_attempts": ma
+0001f330: 7869 6d75 6d5f 7265 7472 795f 6174 7465  ximum_retry_atte
+0001f340: 6d70 7473 2c0a 2020 2020 2020 2020 2020  mpts,.          
+0001f350: 2020 2020 2020 226d 6178 696d 756d 5f65        "maximum_e
+0001f360: 7665 6e74 5f61 6765 5f69 6e5f 7365 636f  vent_age_in_seco
+0001f370: 6e64 7322 3a20 6d61 7869 6d75 6d5f 6576  nds": maximum_ev
+0001f380: 656e 745f 6167 655f 696e 5f73 6563 6f6e  ent_age_in_secon
+0001f390: 6473 2c0a 2020 2020 2020 2020 2020 2020  ds,.            
+0001f3a0: 7d2e 6974 656d 7328 290a 2020 2020 2020  }.items().      
+0001f3b0: 2020 2020 2020 6966 2076 2069 7320 6e6f        if v is no
+0001f3c0: 7420 4e6f 6e65 0a20 2020 2020 2020 207d  t None.        }
+0001f3d0: 0a0a 2020 2020 2020 2020 6e65 775f 636f  ..        new_co
+0001f3e0: 6e66 6967 203d 2064 6174 6163 6c61 7373  nfig = dataclass
+0001f3f0: 6573 2e72 6570 6c61 6365 280a 2020 2020  es.replace(.    
+0001f400: 2020 2020 2020 2020 636f 6e66 6967 2c20          config, 
+0001f410: 6c61 7374 5f6d 6f64 6966 6965 643d 6170  last_modified=ap
+0001f420: 695f 7574 696c 732e 6765 6e65 7261 7465  i_utils.generate
+0001f430: 5f6c 616d 6264 615f 6461 7465 2829 2c20  _lambda_date(), 
+0001f440: 2a2a 6f70 7469 6f6e 616c 5f6b 7761 7267  **optional_kwarg
+0001f450: 730a 2020 2020 2020 2020 290a 2020 2020  s.        ).    
+0001f460: 2020 2020 666e 2e65 7665 6e74 5f69 6e76      fn.event_inv
+0001f470: 6f6b 655f 636f 6e66 6967 735b 7175 616c  oke_configs[qual
+0001f480: 6966 6965 725d 203d 206e 6577 5f63 6f6e  ifier] = new_con
+0001f490: 6669 670a 0a20 2020 2020 2020 2072 6574  fig..        ret
+0001f4a0: 7572 6e20 4675 6e63 7469 6f6e 4576 656e  urn FunctionEven
+0001f4b0: 7449 6e76 6f6b 6543 6f6e 6669 6728 0a20  tInvokeConfig(. 
+0001f4c0: 2020 2020 2020 2020 2020 204c 6173 744d             LastM
+0001f4d0: 6f64 6966 6965 643d 6461 7465 7469 6d65  odified=datetime
+0001f4e0: 2e64 6174 6574 696d 652e 7374 7270 7469  .datetime.strpti
+0001f4f0: 6d65 280a 2020 2020 2020 2020 2020 2020  me(.            
+0001f500: 2020 2020 6e65 775f 636f 6e66 6967 2e6c      new_config.l
+0001f510: 6173 745f 6d6f 6469 6669 6564 2c20 6170  ast_modified, ap
+0001f520: 695f 7574 696c 732e 4c41 4d42 4441 5f44  i_utils.LAMBDA_D
+0001f530: 4154 455f 464f 524d 4154 0a20 2020 2020  ATE_FORMAT.     
+0001f540: 2020 2020 2020 2029 2c0a 2020 2020 2020         ),.      
+0001f550: 2020 2020 2020 4675 6e63 7469 6f6e 4172        FunctionAr
+0001f560: 6e3d 6170 695f 7574 696c 732e 7175 616c  n=api_utils.qual
+0001f570: 6966 6965 645f 6c61 6d62 6461 5f61 726e  ified_lambda_arn
+0001f580: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0001f590: 2020 6675 6e63 7469 6f6e 5f6e 616d 652c    function_name,
+0001f5a0: 2071 7561 6c69 6669 6572 206f 7220 2224   qualifier or "$
+0001f5b0: 4c41 5445 5354 222c 2063 6f6e 7465 7874  LATEST", context
+0001f5c0: 2e61 6363 6f75 6e74 5f69 642c 2063 6f6e  .account_id, con
+0001f5d0: 7465 7874 2e72 6567 696f 6e0a 2020 2020  text.region.    
+0001f5e0: 2020 2020 2020 2020 292c 0a20 2020 2020          ),.     
+0001f5f0: 2020 2020 2020 2044 6573 7469 6e61 7469         Destinati
+0001f600: 6f6e 436f 6e66 6967 3d6e 6577 5f63 6f6e  onConfig=new_con
+0001f610: 6669 672e 6465 7374 696e 6174 696f 6e5f  fig.destination_
+0001f620: 636f 6e66 6967 2c0a 2020 2020 2020 2020  config,.        
+0001f630: 2020 2020 4d61 7869 6d75 6d45 7665 6e74      MaximumEvent
+0001f640: 4167 6549 6e53 6563 6f6e 6473 3d6e 6577  AgeInSeconds=new
+0001f650: 5f63 6f6e 6669 672e 6d61 7869 6d75 6d5f  _config.maximum_
+0001f660: 6576 656e 745f 6167 655f 696e 5f73 6563  event_age_in_sec
+0001f670: 6f6e 6473 2c0a 2020 2020 2020 2020 2020  onds,.          
+0001f680: 2020 4d61 7869 6d75 6d52 6574 7279 4174    MaximumRetryAt
+0001f690: 7465 6d70 7473 3d6e 6577 5f63 6f6e 6669  tempts=new_confi
+0001f6a0: 672e 6d61 7869 6d75 6d5f 7265 7472 795f  g.maximum_retry_
+0001f6b0: 6174 7465 6d70 7473 2c0a 2020 2020 2020  attempts,.      
+0001f6c0: 2020 290a 0a20 2020 2023 203d 3d3d 3d3d    )..    # =====
+0001f6d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001f6e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001f6f0: 3d3d 0a20 2020 2023 203d 3d3d 3d3d 3d20  ==.    # ====== 
+0001f700: 204c 6179 6572 2026 204c 6179 6572 2056   Layer & Layer V
+0001f710: 6572 7369 6f6e 7320 203d 3d3d 3d3d 3d3d  ersions  =======
+0001f720: 0a20 2020 2023 203d 3d3d 3d3d 3d3d 3d3d  .    # =========
+0001f730: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+0001f740: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a  ==============..
+0001f750: 2020 2020 6465 6620 7075 626c 6973 685f      def publish_
+0001f760: 6c61 7965 725f 7665 7273 696f 6e28 0a20  layer_version(. 
+0001f770: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
+0001f780: 2020 2020 2063 6f6e 7465 7874 3a20 5265       context: Re
+0001f790: 7175 6573 7443 6f6e 7465 7874 2c0a 2020  questContext,.  
+0001f7a0: 2020 2020 2020 6c61 7965 725f 6e61 6d65        layer_name
+0001f7b0: 3a20 4c61 7965 724e 616d 652c 0a20 2020  : LayerName,.   
+0001f7c0: 2020 2020 2063 6f6e 7465 6e74 3a20 4c61       content: La
+0001f7d0: 7965 7256 6572 7369 6f6e 436f 6e74 656e  yerVersionConten
+0001f7e0: 7449 6e70 7574 2c0a 2020 2020 2020 2020  tInput,.        
+0001f7f0: 6465 7363 7269 7074 696f 6e3a 2044 6573  description: Des
+0001f800: 6372 6970 7469 6f6e 203d 204e 6f6e 652c  cription = None,
+0001f810: 0a20 2020 2020 2020 2063 6f6d 7061 7469  .        compati
+0001f820: 626c 655f 7275 6e74 696d 6573 3a20 436f  ble_runtimes: Co
+0001f830: 6d70 6174 6962 6c65 5275 6e74 696d 6573  mpatibleRuntimes
+0001f840: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
+0001f850: 206c 6963 656e 7365 5f69 6e66 6f3a 204c   license_info: L
+0001f860: 6963 656e 7365 496e 666f 203d 204e 6f6e  icenseInfo = Non
+0001f870: 652c 0a20 2020 2020 2020 2063 6f6d 7061  e,.        compa
+0001f880: 7469 626c 655f 6172 6368 6974 6563 7475  tible_architectu
+0001f890: 7265 733a 2043 6f6d 7061 7469 626c 6541  res: CompatibleA
+0001f8a0: 7263 6869 7465 6374 7572 6573 203d 204e  rchitectures = N
+0001f8b0: 6f6e 652c 0a20 2020 2029 202d 3e20 5075  one,.    ) -> Pu
+0001f8c0: 626c 6973 684c 6179 6572 5665 7273 696f  blishLayerVersio
+0001f8d0: 6e52 6573 706f 6e73 653a 0a20 2020 2020  nResponse:.     
+0001f8e0: 2020 2022 2222 0a20 2020 2020 2020 204f     """.        O
+0001f8f0: 6e20 6669 7273 7420 7573 6520 6f66 2061  n first use of a
+0001f900: 204c 6179 6572 4e61 6d65 2061 206e 6577   LayerName a new
+0001f910: 206c 6179 6572 2069 7320 6372 6561 7465   layer is create
+0001f920: 6420 616e 6420 666f 7220 6561 6368 2073  d and for each s
+0001f930: 7562 7365 7175 656e 7420 6361 6c6c 2077  ubsequent call w
+0001f940: 6974 6820 7468 6520 7361 6d65 204c 6179  ith the same Lay
+0001f950: 6572 4e61 6d65 2061 206e 6577 2076 6572  erName a new ver
+0001f960: 7369 6f6e 2069 7320 6372 6561 7465 642e  sion is created.
+0001f970: 0a20 2020 2020 2020 204e 6f74 6520 7468  .        Note th
+0001f980: 6174 2074 6865 7265 2061 7265 206e 6f20  at there are no 
+0001f990: 244c 4154 4553 5420 7665 7273 696f 6e73  $LATEST versions
+0001f9a0: 2077 6974 6820 6c61 7965 7273 210a 0a20   with layers!.. 
+0001f9b0: 2020 2020 2020 2022 2222 0a20 2020 2020         """.     
+0001f9c0: 2020 2076 616c 6964 6174 696f 6e5f 6572     validation_er
+0001f9d0: 726f 7273 203d 2061 7069 5f75 7469 6c73  rors = api_utils
+0001f9e0: 2e76 616c 6964 6174 655f 6c61 7965 725f  .validate_layer_
+0001f9f0: 7275 6e74 696d 6573 5f61 6e64 5f61 7263  runtimes_and_arc
+0001fa00: 6869 7465 6374 7572 6573 280a 2020 2020  hitectures(.    
+0001fa10: 2020 2020 2020 2020 636f 6d70 6174 6962          compatib
+0001fa20: 6c65 5f72 756e 7469 6d65 732c 2063 6f6d  le_runtimes, com
+0001fa30: 7061 7469 626c 655f 6172 6368 6974 6563  patible_architec
+0001fa40: 7475 7265 730a 2020 2020 2020 2020 290a  tures.        ).
+0001fa50: 2020 2020 2020 2020 6966 2076 616c 6964          if valid
+0001fa60: 6174 696f 6e5f 6572 726f 7273 3a0a 2020  ation_errors:.  
+0001fa70: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+0001fa80: 5661 6c69 6461 7469 6f6e 4578 6365 7074  ValidationExcept
+0001fa90: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
+0001faa0: 2020 2020 2066 227b 6c65 6e28 7661 6c69       f"{len(vali
+0001fab0: 6461 7469 6f6e 5f65 7272 6f72 7329 7d20  dation_errors)} 
+0001fac0: 7661 6c69 6461 7469 6f6e 2065 7272 6f72  validation error
+0001fad0: 7b27 7327 2069 6620 6c65 6e28 7661 6c69  {'s' if len(vali
+0001fae0: 6461 7469 6f6e 5f65 7272 6f72 7329 203e  dation_errors) >
+0001faf0: 2031 2065 6c73 6520 2727 7d20 6465 7465   1 else ''} dete
+0001fb00: 6374 6564 3a20 7b27 3b20 272e 6a6f 696e  cted: {'; '.join
+0001fb10: 2876 616c 6964 6174 696f 6e5f 6572 726f  (validation_erro
+0001fb20: 7273 297d 220a 2020 2020 2020 2020 2020  rs)}".          
+0001fb30: 2020 290a 0a20 2020 2020 2020 2073 7461    )..        sta
+0001fb40: 7465 203d 206c 616d 6264 615f 7374 6f72  te = lambda_stor
+0001fb50: 6573 5b63 6f6e 7465 7874 2e61 6363 6f75  es[context.accou
+0001fb60: 6e74 5f69 645d 5b63 6f6e 7465 7874 2e72  nt_id][context.r
+0001fb70: 6567 696f 6e5d 0a20 2020 2020 2020 2077  egion].        w
+0001fb80: 6974 6820 7365 6c66 2e63 7265 6174 655f  ith self.create_
+0001fb90: 6c61 7965 725f 6c6f 636b 3a0a 2020 2020  layer_lock:.    
+0001fba0: 2020 2020 2020 2020 6966 206c 6179 6572          if layer
+0001fbb0: 5f6e 616d 6520 6e6f 7420 696e 2073 7461  _name not in sta
+0001fbc0: 7465 2e6c 6179 6572 733a 0a20 2020 2020  te.layers:.     
+0001fbd0: 2020 2020 2020 2020 2020 2023 2077 6520             # we 
+0001fbe0: 646f 6e27 7420 6861 7665 2061 2076 6572  don't have a ver
+0001fbf0: 7369 6f6e 2073 6f20 6372 6561 7465 206e  sion so create n
+0001fc00: 6577 206c 6179 6572 206f 626a 6563 740a  ew layer object.
+0001fc10: 2020 2020 2020 2020 2020 2020 2020 2020                  
+0001fc20: 2320 6c6f 636b 2069 7320 7265 7175 6972  # lock is requir
+0001fc30: 6564 2074 6f20 6176 6f69 6420 6372 6561  ed to avoid crea
+0001fc40: 7469 6e67 2074 776f 2076 3120 6f62 6a65  ting two v1 obje
+0001fc50: 6374 7320 666f 7220 7468 6520 7361 6d65  cts for the same
+0001fc60: 206e 616d 650a 2020 2020 2020 2020 2020   name.          
+0001fc70: 2020 2020 2020 6c61 7965 7220 3d20 4c61        layer = La
+0001fc80: 7965 7228 0a20 2020 2020 2020 2020 2020  yer(.           
+0001fc90: 2020 2020 2020 2020 2061 726e 3d61 7069           arn=api
+0001fca0: 5f75 7469 6c73 2e6c 6179 6572 5f61 726e  _utils.layer_arn
+0001fcb0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+0001fcc0: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
+0001fcd0: 6e61 6d65 3d6c 6179 6572 5f6e 616d 652c  name=layer_name,
+0001fce0: 2061 6363 6f75 6e74 3d63 6f6e 7465 7874   account=context
+0001fcf0: 2e61 6363 6f75 6e74 5f69 642c 2072 6567  .account_id, reg
+0001fd00: 696f 6e3d 636f 6e74 6578 742e 7265 6769  ion=context.regi
+0001fd10: 6f6e 0a20 2020 2020 2020 2020 2020 2020  on.             
+0001fd20: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+0001fd30: 2020 2020 2020 2020 2029 0a20 2020 2020           ).     
+0001fd40: 2020 2020 2020 2020 2020 2073 7461 7465             state
+0001fd50: 2e6c 6179 6572 735b 6c61 7965 725f 6e61  .layers[layer_na
+0001fd60: 6d65 5d20 3d20 6c61 7965 720a 0a20 2020  me] = layer..   
+0001fd70: 2020 2020 206c 6179 6572 203d 2073 7461       layer = sta
+0001fd80: 7465 2e6c 6179 6572 735b 6c61 7965 725f  te.layers[layer_
+0001fd90: 6e61 6d65 5d0a 2020 2020 2020 2020 7769  name].        wi
+0001fda0: 7468 206c 6179 6572 2e6e 6578 745f 7665  th layer.next_ve
+0001fdb0: 7273 696f 6e5f 6c6f 636b 3a0a 2020 2020  rsion_lock:.    
+0001fdc0: 2020 2020 2020 2020 6e65 7874 5f76 6572          next_ver
+0001fdd0: 7369 6f6e 203d 206c 6179 6572 2e6e 6578  sion = layer.nex
+0001fde0: 745f 7665 7273 696f 6e0a 2020 2020 2020  t_version.      
+0001fdf0: 2020 2020 2020 6c61 7965 722e 6e65 7874        layer.next
+0001fe00: 5f76 6572 7369 6f6e 202b 3d20 310a 0a20  _version += 1.. 
+0001fe10: 2020 2020 2020 2023 2063 7265 6174 696e         # creatin
+0001fe20: 6720 6120 6e65 7720 6c61 7965 720a 2020  g a new layer.  
+0001fe30: 2020 2020 2020 6966 2063 6f6e 7465 6e74        if content
+0001fe40: 2e67 6574 2822 5a69 7046 696c 6522 293a  .get("ZipFile"):
+0001fe50: 0a20 2020 2020 2020 2020 2020 2063 6f64  .            cod
+0001fe60: 6520 3d20 7374 6f72 655f 6c61 6d62 6461  e = store_lambda
+0001fe70: 5f61 7263 6869 7665 280a 2020 2020 2020  _archive(.      
+0001fe80: 2020 2020 2020 2020 2020 6172 6368 6976            archiv
+0001fe90: 655f 6669 6c65 3d63 6f6e 7465 6e74 5b22  e_file=content["
+0001fea0: 5a69 7046 696c 6522 5d2c 0a20 2020 2020  ZipFile"],.     
+0001feb0: 2020 2020 2020 2020 2020 2066 756e 6374             funct
+0001fec0: 696f 6e5f 6e61 6d65 3d6c 6179 6572 5f6e  ion_name=layer_n
+0001fed0: 616d 652c 0a20 2020 2020 2020 2020 2020  ame,.           
+0001fee0: 2020 2020 2072 6567 696f 6e5f 6e61 6d65       region_name
+0001fef0: 3d63 6f6e 7465 7874 2e72 6567 696f 6e2c  =context.region,
+0001ff00: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+0001ff10: 2061 6363 6f75 6e74 5f69 643d 636f 6e74   account_id=cont
+0001ff20: 6578 742e 6163 636f 756e 745f 6964 2c0a  ext.account_id,.
+0001ff30: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+0001ff40: 2020 2020 2020 656c 7365 3a0a 2020 2020        else:.    
+0001ff50: 2020 2020 2020 2020 636f 6465 203d 2073          code = s
+0001ff60: 746f 7265 5f73 335f 6275 636b 6574 5f61  tore_s3_bucket_a
+0001ff70: 7263 6869 7665 280a 2020 2020 2020 2020  rchive(.        
+0001ff80: 2020 2020 2020 2020 6172 6368 6976 655f          archive_
+0001ff90: 6275 636b 6574 3d63 6f6e 7465 6e74 5b22  bucket=content["
+0001ffa0: 5333 4275 636b 6574 225d 2c0a 2020 2020  S3Bucket"],.    
+0001ffb0: 2020 2020 2020 2020 2020 2020 6172 6368              arch
+0001ffc0: 6976 655f 6b65 793d 636f 6e74 656e 745b  ive_key=content[
+0001ffd0: 2253 334b 6579 225d 2c0a 2020 2020 2020  "S3Key"],.      
+0001ffe0: 2020 2020 2020 2020 2020 6172 6368 6976            archiv
+0001fff0: 655f 7665 7273 696f 6e3d 636f 6e74 656e  e_version=conten
+00020000: 742e 6765 7428 2253 334f 626a 6563 7456  t.get("S3ObjectV
+00020010: 6572 7369 6f6e 2229 2c0a 2020 2020 2020  ersion"),.      
+00020020: 2020 2020 2020 2020 2020 6675 6e63 7469            functi
+00020030: 6f6e 5f6e 616d 653d 6c61 7965 725f 6e61  on_name=layer_na
+00020040: 6d65 2c0a 2020 2020 2020 2020 2020 2020  me,.            
+00020050: 2020 2020 7265 6769 6f6e 5f6e 616d 653d      region_name=
+00020060: 636f 6e74 6578 742e 7265 6769 6f6e 2c0a  context.region,.
+00020070: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00020080: 6163 636f 756e 745f 6964 3d63 6f6e 7465  account_id=conte
+00020090: 7874 2e61 6363 6f75 6e74 5f69 642c 0a20  xt.account_id,. 
+000200a0: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
+000200b0: 2020 2020 2020 6e65 775f 6c61 7965 725f        new_layer_
+000200c0: 7665 7273 696f 6e20 3d20 4c61 7965 7256  version = LayerV
+000200d0: 6572 7369 6f6e 280a 2020 2020 2020 2020  ersion(.        
+000200e0: 2020 2020 6c61 7965 725f 7665 7273 696f      layer_versio
+000200f0: 6e5f 6172 6e3d 6170 695f 7574 696c 732e  n_arn=api_utils.
+00020100: 6c61 7965 725f 7665 7273 696f 6e5f 6172  layer_version_ar
+00020110: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+00020120: 2020 206c 6179 6572 5f6e 616d 653d 6c61     layer_name=la
+00020130: 7965 725f 6e61 6d65 2c0a 2020 2020 2020  yer_name,.      
+00020140: 2020 2020 2020 2020 2020 6163 636f 756e            accoun
+00020150: 743d 636f 6e74 6578 742e 6163 636f 756e  t=context.accoun
+00020160: 745f 6964 2c0a 2020 2020 2020 2020 2020  t_id,.          
+00020170: 2020 2020 2020 7265 6769 6f6e 3d63 6f6e        region=con
+00020180: 7465 7874 2e72 6567 696f 6e2c 0a20 2020  text.region,.   
+00020190: 2020 2020 2020 2020 2020 2020 2076 6572               ver
+000201a0: 7369 6f6e 3d73 7472 286e 6578 745f 7665  sion=str(next_ve
+000201b0: 7273 696f 6e29 2c0a 2020 2020 2020 2020  rsion),.        
+000201c0: 2020 2020 292c 0a20 2020 2020 2020 2020      ),.         
+000201d0: 2020 206c 6179 6572 5f61 726e 3d6c 6179     layer_arn=lay
+000201e0: 6572 2e61 726e 2c0a 2020 2020 2020 2020  er.arn,.        
+000201f0: 2020 2020 7665 7273 696f 6e3d 6e65 7874      version=next
+00020200: 5f76 6572 7369 6f6e 2c0a 2020 2020 2020  _version,.      
+00020210: 2020 2020 2020 6465 7363 7269 7074 696f        descriptio
+00020220: 6e3d 6465 7363 7269 7074 696f 6e20 6f72  n=description or
+00020230: 2022 222c 0a20 2020 2020 2020 2020 2020   "",.           
+00020240: 206c 6963 656e 7365 5f69 6e66 6f3d 6c69   license_info=li
+00020250: 6365 6e73 655f 696e 666f 2c0a 2020 2020  cense_info,.    
+00020260: 2020 2020 2020 2020 636f 6d70 6174 6962          compatib
+00020270: 6c65 5f72 756e 7469 6d65 733d 636f 6d70  le_runtimes=comp
+00020280: 6174 6962 6c65 5f72 756e 7469 6d65 732c  atible_runtimes,
+00020290: 0a20 2020 2020 2020 2020 2020 2063 6f6d  .            com
+000202a0: 7061 7469 626c 655f 6172 6368 6974 6563  patible_architec
+000202b0: 7475 7265 733d 636f 6d70 6174 6962 6c65  tures=compatible
+000202c0: 5f61 7263 6869 7465 6374 7572 6573 2c0a  _architectures,.
+000202d0: 2020 2020 2020 2020 2020 2020 6372 6561              crea
+000202e0: 7465 643d 6170 695f 7574 696c 732e 6765  ted=api_utils.ge
+000202f0: 6e65 7261 7465 5f6c 616d 6264 615f 6461  nerate_lambda_da
+00020300: 7465 2829 2c0a 2020 2020 2020 2020 2020  te(),.          
+00020310: 2020 636f 6465 3d63 6f64 652c 0a20 2020    code=code,.   
+00020320: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00020330: 6c61 7965 722e 6c61 7965 725f 7665 7273  layer.layer_vers
+00020340: 696f 6e73 5b73 7472 286e 6578 745f 7665  ions[str(next_ve
+00020350: 7273 696f 6e29 5d20 3d20 6e65 775f 6c61  rsion)] = new_la
+00020360: 7965 725f 7665 7273 696f 6e0a 0a20 2020  yer_version..   
+00020370: 2020 2020 2072 6574 7572 6e20 6170 695f       return api_
+00020380: 7574 696c 732e 6d61 705f 6c61 7965 725f  utils.map_layer_
+00020390: 6f75 7428 6e65 775f 6c61 7965 725f 7665  out(new_layer_ve
+000203a0: 7273 696f 6e29 0a0a 2020 2020 6465 6620  rsion)..    def 
+000203b0: 6765 745f 6c61 7965 725f 7665 7273 696f  get_layer_versio
+000203c0: 6e28 0a20 2020 2020 2020 2073 656c 662c  n(.        self,
+000203d0: 2063 6f6e 7465 7874 3a20 5265 7175 6573   context: Reques
+000203e0: 7443 6f6e 7465 7874 2c20 6c61 7965 725f  tContext, layer_
+000203f0: 6e61 6d65 3a20 4c61 7965 724e 616d 652c  name: LayerName,
+00020400: 2076 6572 7369 6f6e 5f6e 756d 6265 723a   version_number:
+00020410: 204c 6179 6572 5665 7273 696f 6e4e 756d   LayerVersionNum
+00020420: 6265 720a 2020 2020 2920 2d3e 2047 6574  ber.    ) -> Get
+00020430: 4c61 7965 7256 6572 7369 6f6e 5265 7370  LayerVersionResp
+00020440: 6f6e 7365 3a0a 2020 2020 2020 2020 2320  onse:.        # 
+00020450: 544f 444f 3a20 6861 6e64 6c65 206c 6179  TODO: handle lay
+00020460: 6572 5f6e 616d 6520 6173 2061 6e20 4152  er_name as an AR
+00020470: 4e0a 0a20 2020 2020 2020 2061 6363 6f75  N..        accou
+00020480: 6e74 5f69 6420 3d20 636f 6e74 6578 742e  nt_id = context.
+00020490: 6163 636f 756e 745f 6964 0a20 2020 2020  account_id.     
+000204a0: 2020 2072 6567 696f 6e5f 6e61 6d65 203d     region_name =
+000204b0: 2063 6f6e 7465 7874 2e72 6567 696f 6e0a   context.region.
+000204c0: 2020 2020 2020 2020 6966 2061 7069 5f75          if api_u
+000204d0: 7469 6c73 2e69 735f 6c61 7965 725f 6172  tils.is_layer_ar
+000204e0: 6e28 6c61 7965 725f 6e61 6d65 293a 0a20  n(layer_name):. 
+000204f0: 2020 2020 2020 2020 2020 2072 6567 696f             regio
+00020500: 6e5f 6e61 6d65 2c20 6163 636f 756e 745f  n_name, account_
+00020510: 6964 2c20 6c61 7965 725f 6e61 6d65 2c20  id, layer_name, 
+00020520: 5f20 3d20 6170 695f 7574 696c 732e 7061  _ = api_utils.pa
+00020530: 7273 655f 6c61 7965 725f 6172 6e28 6c61  rse_layer_arn(la
+00020540: 7965 725f 6e61 6d65 290a 2020 2020 2020  yer_name).      
+00020550: 2020 7374 6174 6520 3d20 6c61 6d62 6461    state = lambda
+00020560: 5f73 746f 7265 735b 6163 636f 756e 745f  _stores[account_
+00020570: 6964 5d5b 7265 6769 6f6e 5f6e 616d 655d  id][region_name]
+00020580: 0a0a 2020 2020 2020 2020 6c61 7965 7220  ..        layer 
+00020590: 3d20 7374 6174 652e 6c61 7965 7273 2e67  = state.layers.g
+000205a0: 6574 286c 6179 6572 5f6e 616d 6529 0a20  et(layer_name). 
+000205b0: 2020 2020 2020 2069 6620 7665 7273 696f         if versio
+000205c0: 6e5f 6e75 6d62 6572 203c 2031 3a0a 2020  n_number < 1:.  
+000205d0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+000205e0: 496e 7661 6c69 6450 6172 616d 6574 6572  InvalidParameter
+000205f0: 5661 6c75 6545 7863 6570 7469 6f6e 2822  ValueException("
+00020600: 4c61 7965 7220 5665 7273 696f 6e20 4361  Layer Version Ca
+00020610: 6e6e 6f74 2062 6520 6c65 7373 2074 6861  nnot be less tha
+00020620: 6e20 3122 2c20 5479 7065 3d22 5573 6572  n 1", Type="User
+00020630: 2229 0a20 2020 2020 2020 2069 6620 6c61  ").        if la
+00020640: 7965 7220 6973 204e 6f6e 653a 0a20 2020  yer is None:.   
+00020650: 2020 2020 2020 2020 2072 6169 7365 2052           raise R
+00020660: 6573 6f75 7263 654e 6f74 466f 756e 6445  esourceNotFoundE
+00020670: 7863 6570 7469 6f6e 280a 2020 2020 2020  xception(.      
+00020680: 2020 2020 2020 2020 2020 2254 6865 2072            "The r
+00020690: 6573 6f75 7263 6520 796f 7520 7265 7175  esource you requ
+000206a0: 6573 7465 6420 646f 6573 206e 6f74 2065  ested does not e
+000206b0: 7869 7374 2e22 2c20 5479 7065 3d22 5573  xist.", Type="Us
+000206c0: 6572 220a 2020 2020 2020 2020 2020 2020  er".            
+000206d0: 290a 2020 2020 2020 2020 6c61 7965 725f  ).        layer_
+000206e0: 7665 7273 696f 6e20 3d20 6c61 7965 722e  version = layer.
+000206f0: 6c61 7965 725f 7665 7273 696f 6e73 2e67  layer_versions.g
+00020700: 6574 2873 7472 2876 6572 7369 6f6e 5f6e  et(str(version_n
+00020710: 756d 6265 7229 290a 2020 2020 2020 2020  umber)).        
+00020720: 6966 206c 6179 6572 5f76 6572 7369 6f6e  if layer_version
+00020730: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+00020740: 2020 2020 2020 7261 6973 6520 5265 736f        raise Reso
+00020750: 7572 6365 4e6f 7446 6f75 6e64 4578 6365  urceNotFoundExce
+00020760: 7074 696f 6e28 0a20 2020 2020 2020 2020  ption(.         
+00020770: 2020 2020 2020 2022 5468 6520 7265 736f         "The reso
+00020780: 7572 6365 2079 6f75 2072 6571 7565 7374  urce you request
+00020790: 6564 2064 6f65 7320 6e6f 7420 6578 6973  ed does not exis
+000207a0: 742e 222c 2054 7970 653d 2255 7365 7222  t.", Type="User"
+000207b0: 0a20 2020 2020 2020 2020 2020 2029 0a20  .            ). 
+000207c0: 2020 2020 2020 2072 6574 7572 6e20 6170         return ap
+000207d0: 695f 7574 696c 732e 6d61 705f 6c61 7965  i_utils.map_laye
+000207e0: 725f 6f75 7428 6c61 7965 725f 7665 7273  r_out(layer_vers
+000207f0: 696f 6e29 0a0a 2020 2020 6465 6620 6765  ion)..    def ge
+00020800: 745f 6c61 7965 725f 7665 7273 696f 6e5f  t_layer_version_
+00020810: 6279 5f61 726e 280a 2020 2020 2020 2020  by_arn(.        
+00020820: 7365 6c66 2c20 636f 6e74 6578 743a 2052  self, context: R
+00020830: 6571 7565 7374 436f 6e74 6578 742c 2061  equestContext, a
+00020840: 726e 3a20 4c61 7965 7256 6572 7369 6f6e  rn: LayerVersion
+00020850: 4172 6e0a 2020 2020 2920 2d3e 2047 6574  Arn.    ) -> Get
+00020860: 4c61 7965 7256 6572 7369 6f6e 5265 7370  LayerVersionResp
+00020870: 6f6e 7365 3a0a 2020 2020 2020 2020 6d61  onse:.        ma
+00020880: 7463 6820 3d20 6170 695f 7574 696c 732e  tch = api_utils.
+00020890: 4c41 5945 525f 5645 5253 494f 4e5f 4152  LAYER_VERSION_AR
+000208a0: 4e5f 5041 5454 4552 4e2e 7365 6172 6368  N_PATTERN.search
+000208b0: 2861 726e 290a 2020 2020 2020 2020 6c61  (arn).        la
+000208c0: 7965 725f 7665 7273 696f 6e5f 7061 7274  yer_version_part
+000208d0: 7320 3d20 6d61 7463 682e 6772 6f75 7064  s = match.groupd
+000208e0: 6963 7428 290a 2020 2020 2020 2020 6966  ict().        if
+000208f0: 206e 6f74 206c 6179 6572 5f76 6572 7369   not layer_versi
+00020900: 6f6e 5f70 6172 7473 2e67 6574 2822 6c61  on_parts.get("la
+00020910: 7965 725f 7665 7273 696f 6e22 293a 0a20  yer_version"):. 
+00020920: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+00020930: 2056 616c 6964 6174 696f 6e45 7863 6570   ValidationExcep
+00020940: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
+00020950: 2020 2020 2020 6622 3120 7661 6c69 6461        f"1 valida
+00020960: 7469 6f6e 2065 7272 6f72 2064 6574 6563  tion error detec
+00020970: 7465 643a 2056 616c 7565 2027 7b61 726e  ted: Value '{arn
+00020980: 7d27 2061 7420 2761 726e 2720 6661 696c  }' at 'arn' fail
+00020990: 6564 2074 6f20 7361 7469 7366 7920 636f  ed to satisfy co
+000209a0: 6e73 7472 6169 6e74 3a20 4d65 6d62 6572  nstraint: Member
+000209b0: 206d 7573 7420 7361 7469 7366 7920 7265   must satisfy re
+000209c0: 6775 6c61 7220 6578 7072 6573 7369 6f6e  gular expression
+000209d0: 2070 6174 7465 726e 3a20 220a 2020 2020   pattern: ".    
+000209e0: 2020 2020 2020 2020 2020 2020 2b20 2261              + "a
+000209f0: 726e 3a5b 612d 7a41 2d5a 302d 392d 5d2b  rn:[a-zA-Z0-9-]+
+00020a00: 3a6c 616d 6264 613a 5b61 2d7a 412d 5a30  :lambda:[a-zA-Z0
+00020a10: 2d39 2d5d 2b3a 5c5c 647b 3132 7d3a 6c61  -9-]+:\\d{12}:la
+00020a20: 7965 723a 5b61 2d7a 412d 5a30 2d39 2d5f  yer:[a-zA-Z0-9-_
+00020a30: 5d2b 3a5b 302d 395d 2b22 0a20 2020 2020  ]+:[0-9]+".     
+00020a40: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
+00020a50: 2020 6c61 7965 725f 6e61 6d65 203d 206c    layer_name = l
+00020a60: 6179 6572 5f76 6572 7369 6f6e 5f70 6172  ayer_version_par
+00020a70: 7473 5b22 6c61 7965 725f 6e61 6d65 225d  ts["layer_name"]
+00020a80: 0a20 2020 2020 2020 206c 6179 6572 5f76  .        layer_v
+00020a90: 6572 7369 6f6e 203d 206c 6179 6572 5f76  ersion = layer_v
+00020aa0: 6572 7369 6f6e 5f70 6172 7473 5b22 6c61  ersion_parts["la
+00020ab0: 7965 725f 7665 7273 696f 6e22 5d0a 2020  yer_version"].  
+00020ac0: 2020 2020 2020 6163 636f 756e 745f 6964        account_id
+00020ad0: 203d 206c 6179 6572 5f76 6572 7369 6f6e   = layer_version
+00020ae0: 5f70 6172 7473 5b22 6163 636f 756e 745f  _parts["account_
+00020af0: 6964 225d 0a20 2020 2020 2020 2072 6567  id"].        reg
+00020b00: 696f 6e5f 6e61 6d65 203d 206c 6179 6572  ion_name = layer
+00020b10: 5f76 6572 7369 6f6e 5f70 6172 7473 5b22  _version_parts["
+00020b20: 7265 6769 6f6e 5f6e 616d 6522 5d0a 0a20  region_name"].. 
+00020b30: 2020 2020 2020 2073 7461 7465 203d 206c         state = l
+00020b40: 616d 6264 615f 7374 6f72 6573 5b61 6363  ambda_stores[acc
+00020b50: 6f75 6e74 5f69 645d 5b72 6567 696f 6e5f  ount_id][region_
+00020b60: 6e61 6d65 5d0a 2020 2020 2020 2020 6c61  name].        la
+00020b70: 7965 725f 7665 7273 696f 6e20 3d20 7374  yer_version = st
+00020b80: 6174 652e 6c61 7965 7273 2e67 6574 286c  ate.layers.get(l
+00020b90: 6179 6572 5f6e 616d 652c 207b 7d29 2e6c  ayer_name, {}).l
+00020ba0: 6179 6572 5f76 6572 7369 6f6e 732e 6765  ayer_versions.ge
+00020bb0: 7428 6c61 7965 725f 7665 7273 696f 6e29  t(layer_version)
+00020bc0: 0a0a 2020 2020 2020 2020 6966 206e 6f74  ..        if not
+00020bd0: 206c 6179 6572 5f76 6572 7369 6f6e 3a0a   layer_version:.
+00020be0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00020bf0: 6520 5265 736f 7572 6365 4e6f 7446 6f75  e ResourceNotFou
+00020c00: 6e64 4578 6365 7074 696f 6e28 0a20 2020  ndException(.   
+00020c10: 2020 2020 2020 2020 2020 2020 2022 5468               "Th
+00020c20: 6520 7265 736f 7572 6365 2079 6f75 2072  e resource you r
+00020c30: 6571 7565 7374 6564 2064 6f65 7320 6e6f  equested does no
+00020c40: 7420 6578 6973 742e 222c 2054 7970 653d  t exist.", Type=
+00020c50: 2255 7365 7222 0a20 2020 2020 2020 2020  "User".         
+00020c60: 2020 2029 0a0a 2020 2020 2020 2020 7265     )..        re
+00020c70: 7475 726e 2061 7069 5f75 7469 6c73 2e6d  turn api_utils.m
+00020c80: 6170 5f6c 6179 6572 5f6f 7574 286c 6179  ap_layer_out(lay
+00020c90: 6572 5f76 6572 7369 6f6e 290a 0a20 2020  er_version)..   
+00020ca0: 2064 6566 206c 6973 745f 6c61 7965 7273   def list_layers
+00020cb0: 280a 2020 2020 2020 2020 7365 6c66 2c0a  (.        self,.
+00020cc0: 2020 2020 2020 2020 636f 6e74 6578 743a          context:
+00020cd0: 2052 6571 7565 7374 436f 6e74 6578 742c   RequestContext,
+00020ce0: 0a20 2020 2020 2020 2063 6f6d 7061 7469  .        compati
+00020cf0: 626c 655f 7275 6e74 696d 653a 2052 756e  ble_runtime: Run
+00020d00: 7469 6d65 203d 204e 6f6e 652c 0a20 2020  time = None,.   
+00020d10: 2020 2020 206d 6172 6b65 723a 2053 7472       marker: Str
+00020d20: 696e 6720 3d20 4e6f 6e65 2c0a 2020 2020  ing = None,.    
+00020d30: 2020 2020 6d61 785f 6974 656d 733a 204d      max_items: M
+00020d40: 6178 4c61 7965 724c 6973 7449 7465 6d73  axLayerListItems
+00020d50: 203d 204e 6f6e 652c 0a20 2020 2020 2020   = None,.       
+00020d60: 2063 6f6d 7061 7469 626c 655f 6172 6368   compatible_arch
+00020d70: 6974 6563 7475 7265 3a20 4172 6368 6974  itecture: Archit
+00020d80: 6563 7475 7265 203d 204e 6f6e 652c 0a20  ecture = None,. 
+00020d90: 2020 2029 202d 3e20 4c69 7374 4c61 7965     ) -> ListLaye
+00020da0: 7273 5265 7370 6f6e 7365 3a0a 2020 2020  rsResponse:.    
+00020db0: 2020 2020 7661 6c69 6461 7469 6f6e 5f65      validation_e
+00020dc0: 7272 6f72 7320 3d20 5b5d 0a0a 2020 2020  rrors = []..    
+00020dd0: 2020 2020 7661 6c69 6461 7469 6f6e 5f65      validation_e
+00020de0: 7272 6f72 5f61 7263 6820 3d20 6170 695f  rror_arch = api_
+00020df0: 7574 696c 732e 7661 6c69 6461 7465 5f6c  utils.validate_l
+00020e00: 6179 6572 5f61 7263 6869 7465 6374 7572  ayer_architectur
+00020e10: 6528 636f 6d70 6174 6962 6c65 5f61 7263  e(compatible_arc
+00020e20: 6869 7465 6374 7572 6529 0a20 2020 2020  hitecture).     
+00020e30: 2020 2069 6620 7661 6c69 6461 7469 6f6e     if validation
+00020e40: 5f65 7272 6f72 5f61 7263 683a 0a20 2020  _error_arch:.   
+00020e50: 2020 2020 2020 2020 2076 616c 6964 6174           validat
+00020e60: 696f 6e5f 6572 726f 7273 2e61 7070 656e  ion_errors.appen
+00020e70: 6428 7661 6c69 6461 7469 6f6e 5f65 7272  d(validation_err
+00020e80: 6f72 5f61 7263 6829 0a0a 2020 2020 2020  or_arch)..      
+00020e90: 2020 7661 6c69 6461 7469 6f6e 5f65 7272    validation_err
+00020ea0: 6f72 5f72 756e 7469 6d65 203d 2061 7069  or_runtime = api
+00020eb0: 5f75 7469 6c73 2e76 616c 6964 6174 655f  _utils.validate_
+00020ec0: 6c61 7965 725f 7275 6e74 696d 6528 636f  layer_runtime(co
+00020ed0: 6d70 6174 6962 6c65 5f72 756e 7469 6d65  mpatible_runtime
+00020ee0: 290a 2020 2020 2020 2020 6966 2076 616c  ).        if val
+00020ef0: 6964 6174 696f 6e5f 6572 726f 725f 7275  idation_error_ru
+00020f00: 6e74 696d 653a 0a20 2020 2020 2020 2020  ntime:.         
+00020f10: 2020 2076 616c 6964 6174 696f 6e5f 6572     validation_er
+00020f20: 726f 7273 2e61 7070 656e 6428 7661 6c69  rors.append(vali
+00020f30: 6461 7469 6f6e 5f65 7272 6f72 5f72 756e  dation_error_run
+00020f40: 7469 6d65 290a 0a20 2020 2020 2020 2069  time)..        i
+00020f50: 6620 7661 6c69 6461 7469 6f6e 5f65 7272  f validation_err
+00020f60: 6f72 733a 0a20 2020 2020 2020 2020 2020  ors:.           
+00020f70: 2072 6169 7365 2056 616c 6964 6174 696f   raise Validatio
+00020f80: 6e45 7863 6570 7469 6f6e 280a 2020 2020  nException(.    
+00020f90: 2020 2020 2020 2020 2020 2020 6622 7b6c              f"{l
+00020fa0: 656e 2876 616c 6964 6174 696f 6e5f 6572  en(validation_er
+00020fb0: 726f 7273 297d 2076 616c 6964 6174 696f  rors)} validatio
+00020fc0: 6e20 6572 726f 727b 2773 2720 6966 206c  n error{'s' if l
+00020fd0: 656e 2876 616c 6964 6174 696f 6e5f 6572  en(validation_er
+00020fe0: 726f 7273 2920 3e20 3120 656c 7365 2027  rors) > 1 else '
+00020ff0: 277d 2064 6574 6563 7465 643a 207b 273b  '} detected: {';
+00021000: 272e 6a6f 696e 2876 616c 6964 6174 696f  '.join(validatio
+00021010: 6e5f 6572 726f 7273 297d 220a 2020 2020  n_errors)}".    
+00021020: 2020 2020 2020 2020 290a 2020 2020 2020          ).      
+00021030: 2020 2320 544f 444f 3a20 6861 6e64 6c65    # TODO: handle
+00021040: 2066 696c 7465 723a 2063 6f6d 7061 7469   filter: compati
+00021050: 626c 655f 7275 6e74 696d 650a 2020 2020  ble_runtime.    
+00021060: 2020 2020 2320 544f 444f 3a20 6861 6e64      # TODO: hand
+00021070: 6c65 2066 696c 7465 723a 2063 6f6d 7061  le filter: compa
+00021080: 7469 626c 655f 6172 6368 6974 6563 7475  tible_architectu
+00021090: 7265 0a0a 2020 2020 2020 2020 7374 6174  re..        stat
+000210a0: 6520 3d20 6c61 6d62 6461 5f73 746f 7265  e = lambda_store
+000210b0: 735b 636f 6e74 6578 742e 6163 636f 756e  s[context.accoun
+000210c0: 745f 6964 5d5b 636f 6e74 6578 742e 7265  t_id][context.re
+000210d0: 6769 6f6e 5d0a 2020 2020 2020 2020 6c61  gion].        la
+000210e0: 7965 7273 203d 2073 7461 7465 2e6c 6179  yers = state.lay
+000210f0: 6572 730a 0a20 2020 2020 2020 2023 2054  ers..        # T
+00021100: 4f44 4f3a 2074 6573 7420 686f 7720 6669  ODO: test how fi
+00021110: 6c74 6572 7320 6265 6861 7665 2074 6f67  lters behave tog
+00021120: 6574 6865 7220 7769 7468 206f 6e6c 7920  ether with only 
+00021130: 7265 7475 726e 696e 6720 6c61 7965 7273  returning layers
+00021140: 2068 6572 653f 2044 6f65 7320 6974 2072   here? Does it r
+00021150: 6574 7572 6e20 7468 6520 6c61 7465 7374  eturn the latest
+00021160: 2022 6d61 7463 6869 6e67 2220 6c61 7965   "matching" laye
+00021170: 722c 2069 2e65 2e20 646f 6573 2069 7420  r, i.e. does it 
+00021180: 6967 6e6f 7265 206c 6174 6572 206c 6179  ignore later lay
+00021190: 6572 2076 6572 7369 6f6e 7320 7468 6174  er versions that
+000211a0: 2064 6f6e 2774 206d 6174 6368 3f0a 0a20   don't match?.. 
+000211b0: 2020 2020 2020 2072 6573 706f 6e73 6573         responses
+000211c0: 3a20 6c69 7374 5b4c 6179 6572 734c 6973  : list[LayersLis
+000211d0: 7449 7465 6d5d 203d 205b 5d0a 2020 2020  tItem] = [].    
+000211e0: 2020 2020 666f 7220 6c61 7965 725f 6e61      for layer_na
+000211f0: 6d65 2c20 6c61 7965 7220 696e 206c 6179  me, layer in lay
+00021200: 6572 732e 6974 656d 7328 293a 0a20 2020  ers.items():.   
+00021210: 2020 2020 2020 2020 2023 2066 6574 6368           # fetch
+00021220: 206c 6174 6573 7420 7665 7273 696f 6e0a   latest version.
+00021230: 2020 2020 2020 2020 2020 2020 6c61 7965              laye
+00021240: 725f 7665 7273 696f 6e73 203d 206c 6973  r_versions = lis
+00021250: 7428 6c61 7965 722e 6c61 7965 725f 7665  t(layer.layer_ve
+00021260: 7273 696f 6e73 2e76 616c 7565 7328 2929  rsions.values())
+00021270: 0a20 2020 2020 2020 2020 2020 2073 6f72  .            sor
+00021280: 7465 6428 6c61 7965 725f 7665 7273 696f  ted(layer_versio
+00021290: 6e73 2c20 6b65 793d 6c61 6d62 6461 2078  ns, key=lambda x
+000212a0: 3a20 782e 7665 7273 696f 6e29 0a20 2020  : x.version).   
+000212b0: 2020 2020 2020 2020 206c 6174 6573 745f           latest_
+000212c0: 6c61 7965 725f 7665 7273 696f 6e20 3d20  layer_version = 
+000212d0: 6c61 7965 725f 7665 7273 696f 6e73 5b2d  layer_versions[-
+000212e0: 315d 0a20 2020 2020 2020 2020 2020 2072  1].            r
+000212f0: 6573 706f 6e73 6573 2e61 7070 656e 6428  esponses.append(
+00021300: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00021310: 204c 6179 6572 734c 6973 7449 7465 6d28   LayersListItem(
+00021320: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00021330: 2020 2020 204c 6179 6572 4e61 6d65 3d6c       LayerName=l
+00021340: 6179 6572 5f6e 616d 652c 0a20 2020 2020  ayer_name,.     
+00021350: 2020 2020 2020 2020 2020 2020 2020 204c                 L
+00021360: 6179 6572 4172 6e3d 6c61 7965 722e 6172  ayerArn=layer.ar
+00021370: 6e2c 0a20 2020 2020 2020 2020 2020 2020  n,.             
+00021380: 2020 2020 2020 204c 6174 6573 744d 6174         LatestMat
+00021390: 6368 696e 6756 6572 7369 6f6e 3d61 7069  chingVersion=api
+000213a0: 5f75 7469 6c73 2e6d 6170 5f6c 6179 6572  _utils.map_layer
+000213b0: 5f6f 7574 286c 6174 6573 745f 6c61 7965  _out(latest_laye
+000213c0: 725f 7665 7273 696f 6e29 2c0a 2020 2020  r_version),.    
+000213d0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
+000213e0: 2020 2020 2020 2020 2020 290a 0a20 2020            )..   
+000213f0: 2020 2020 2072 6573 706f 6e73 6573 203d       responses =
+00021400: 2050 6167 696e 6174 6564 4c69 7374 2872   PaginatedList(r
+00021410: 6573 706f 6e73 6573 290a 2020 2020 2020  esponses).      
+00021420: 2020 7061 6765 2c20 746f 6b65 6e20 3d20    page, token = 
+00021430: 7265 7370 6f6e 7365 732e 6765 745f 7061  responses.get_pa
+00021440: 6765 280a 2020 2020 2020 2020 2020 2020  ge(.            
+00021450: 6c61 6d62 6461 2076 6572 7369 6f6e 3a20  lambda version: 
+00021460: 7665 7273 696f 6e2c 0a20 2020 2020 2020  version,.       
+00021470: 2020 2020 206d 6172 6b65 722c 0a20 2020       marker,.   
+00021480: 2020 2020 2020 2020 206d 6178 5f69 7465           max_ite
+00021490: 6d73 2c0a 2020 2020 2020 2020 290a 0a20  ms,.        ).. 
+000214a0: 2020 2020 2020 2072 6574 7572 6e20 4c69         return Li
+000214b0: 7374 4c61 7965 7273 5265 7370 6f6e 7365  stLayersResponse
+000214c0: 284e 6578 744d 6172 6b65 723d 746f 6b65  (NextMarker=toke
+000214d0: 6e2c 204c 6179 6572 733d 7061 6765 290a  n, Layers=page).
+000214e0: 0a20 2020 2064 6566 206c 6973 745f 6c61  .    def list_la
+000214f0: 7965 725f 7665 7273 696f 6e73 280a 2020  yer_versions(.  
+00021500: 2020 2020 2020 7365 6c66 2c0a 2020 2020        self,.    
+00021510: 2020 2020 636f 6e74 6578 743a 2052 6571      context: Req
+00021520: 7565 7374 436f 6e74 6578 742c 0a20 2020  uestContext,.   
+00021530: 2020 2020 206c 6179 6572 5f6e 616d 653a       layer_name:
+00021540: 204c 6179 6572 4e61 6d65 2c0a 2020 2020   LayerName,.    
+00021550: 2020 2020 636f 6d70 6174 6962 6c65 5f72      compatible_r
+00021560: 756e 7469 6d65 3a20 5275 6e74 696d 6520  untime: Runtime 
+00021570: 3d20 4e6f 6e65 2c0a 2020 2020 2020 2020  = None,.        
+00021580: 6d61 726b 6572 3a20 5374 7269 6e67 203d  marker: String =
+00021590: 204e 6f6e 652c 0a20 2020 2020 2020 206d   None,.        m
+000215a0: 6178 5f69 7465 6d73 3a20 4d61 784c 6179  ax_items: MaxLay
+000215b0: 6572 4c69 7374 4974 656d 7320 3d20 4e6f  erListItems = No
+000215c0: 6e65 2c0a 2020 2020 2020 2020 636f 6d70  ne,.        comp
+000215d0: 6174 6962 6c65 5f61 7263 6869 7465 6374  atible_architect
+000215e0: 7572 653a 2041 7263 6869 7465 6374 7572  ure: Architectur
+000215f0: 6520 3d20 4e6f 6e65 2c0a 2020 2020 2920  e = None,.    ) 
+00021600: 2d3e 204c 6973 744c 6179 6572 5665 7273  -> ListLayerVers
+00021610: 696f 6e73 5265 7370 6f6e 7365 3a0a 2020  ionsResponse:.  
+00021620: 2020 2020 2020 7661 6c69 6461 7469 6f6e        validation
+00021630: 5f65 7272 6f72 7320 3d20 6170 695f 7574  _errors = api_ut
+00021640: 696c 732e 7661 6c69 6461 7465 5f6c 6179  ils.validate_lay
+00021650: 6572 5f72 756e 7469 6d65 735f 616e 645f  er_runtimes_and_
+00021660: 6172 6368 6974 6563 7475 7265 7328 0a20  architectures(. 
+00021670: 2020 2020 2020 2020 2020 205b 636f 6d70             [comp
+00021680: 6174 6962 6c65 5f72 756e 7469 6d65 5d20  atible_runtime] 
+00021690: 6966 2063 6f6d 7061 7469 626c 655f 7275  if compatible_ru
+000216a0: 6e74 696d 6520 656c 7365 205b 5d2c 0a20  ntime else [],. 
+000216b0: 2020 2020 2020 2020 2020 205b 636f 6d70             [comp
+000216c0: 6174 6962 6c65 5f61 7263 6869 7465 6374  atible_architect
+000216d0: 7572 655d 2069 6620 636f 6d70 6174 6962  ure] if compatib
+000216e0: 6c65 5f61 7263 6869 7465 6374 7572 6520  le_architecture 
+000216f0: 656c 7365 205b 5d2c 0a20 2020 2020 2020  else [],.       
+00021700: 2029 0a20 2020 2020 2020 2069 6620 7661   ).        if va
+00021710: 6c69 6461 7469 6f6e 5f65 7272 6f72 733a  lidation_errors:
+00021720: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00021730: 7365 2056 616c 6964 6174 696f 6e45 7863  se ValidationExc
+00021740: 6570 7469 6f6e 280a 2020 2020 2020 2020  eption(.        
+00021750: 2020 2020 2020 2020 6622 7b6c 656e 2876          f"{len(v
+00021760: 616c 6964 6174 696f 6e5f 6572 726f 7273  alidation_errors
+00021770: 297d 2076 616c 6964 6174 696f 6e20 6572  )} validation er
+00021780: 726f 727b 2773 2720 6966 206c 656e 2876  ror{'s' if len(v
+00021790: 616c 6964 6174 696f 6e5f 6572 726f 7273  alidation_errors
+000217a0: 2920 3e20 3120 656c 7365 2027 277d 2064  ) > 1 else ''} d
+000217b0: 6574 6563 7465 643a 207b 273b 272e 6a6f  etected: {';'.jo
+000217c0: 696e 2876 616c 6964 6174 696f 6e5f 6572  in(validation_er
+000217d0: 726f 7273 297d 220a 2020 2020 2020 2020  rors)}".        
+000217e0: 2020 2020 290a 0a20 2020 2020 2020 2061      )..        a
+000217f0: 6363 6f75 6e74 5f69 6420 3d20 636f 6e74  ccount_id = cont
+00021800: 6578 742e 6163 636f 756e 745f 6964 0a20  ext.account_id. 
+00021810: 2020 2020 2020 2072 6567 696f 6e5f 6e61         region_na
+00021820: 6d65 203d 2063 6f6e 7465 7874 2e72 6567  me = context.reg
+00021830: 696f 6e0a 2020 2020 2020 2020 6966 2061  ion.        if a
+00021840: 7069 5f75 7469 6c73 2e69 735f 6c61 7965  pi_utils.is_laye
+00021850: 725f 6172 6e28 6c61 7965 725f 6e61 6d65  r_arn(layer_name
+00021860: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+00021870: 6567 696f 6e5f 6e61 6d65 2c20 6163 636f  egion_name, acco
+00021880: 756e 745f 6964 2c20 6c61 7965 725f 6e61  unt_id, layer_na
+00021890: 6d65 2c20 5f20 3d20 6170 695f 7574 696c  me, _ = api_util
+000218a0: 732e 7061 7273 655f 6c61 7965 725f 6172  s.parse_layer_ar
+000218b0: 6e28 6c61 7965 725f 6e61 6d65 290a 2020  n(layer_name).  
+000218c0: 2020 2020 2020 7374 6174 6520 3d20 6c61        state = la
+000218d0: 6d62 6461 5f73 746f 7265 735b 6163 636f  mbda_stores[acco
+000218e0: 756e 745f 6964 5d5b 7265 6769 6f6e 5f6e  unt_id][region_n
+000218f0: 616d 655d 0a0a 2020 2020 2020 2020 2320  ame]..        # 
+00021900: 544f 444f 3a20 5465 7374 2026 2068 616e  TODO: Test & han
+00021910: 646c 6520 6669 6c74 6572 3a20 636f 6d70  dle filter: comp
+00021920: 6174 6962 6c65 5f72 756e 7469 6d65 0a20  atible_runtime. 
+00021930: 2020 2020 2020 2023 2054 4f44 4f3a 2054         # TODO: T
+00021940: 6573 7420 2620 6861 6e64 6c65 2066 696c  est & handle fil
+00021950: 7465 723a 2063 6f6d 7061 7469 626c 655f  ter: compatible_
+00021960: 6172 6368 6974 6563 7475 7265 0a20 2020  architecture.   
+00021970: 2020 2020 2061 6c6c 5f6c 6179 6572 5f76       all_layer_v
+00021980: 6572 7369 6f6e 7320 3d20 5b5d 0a20 2020  ersions = [].   
+00021990: 2020 2020 206c 6179 6572 203d 2073 7461       layer = sta
+000219a0: 7465 2e6c 6179 6572 732e 6765 7428 6c61  te.layers.get(la
+000219b0: 7965 725f 6e61 6d65 290a 2020 2020 2020  yer_name).      
+000219c0: 2020 6966 206c 6179 6572 2069 7320 6e6f    if layer is no
+000219d0: 7420 4e6f 6e65 3a0a 2020 2020 2020 2020  t None:.        
+000219e0: 2020 2020 666f 7220 6c61 7965 725f 7665      for layer_ve
+000219f0: 7273 696f 6e20 696e 206c 6179 6572 2e6c  rsion in layer.l
+00021a00: 6179 6572 5f76 6572 7369 6f6e 732e 7661  ayer_versions.va
+00021a10: 6c75 6573 2829 3a0a 2020 2020 2020 2020  lues():.        
+00021a20: 2020 2020 2020 2020 616c 6c5f 6c61 7965          all_laye
+00021a30: 725f 7665 7273 696f 6e73 2e61 7070 656e  r_versions.appen
+00021a40: 6428 6170 695f 7574 696c 732e 6d61 705f  d(api_utils.map_
+00021a50: 6c61 7965 725f 6f75 7428 6c61 7965 725f  layer_out(layer_
+00021a60: 7665 7273 696f 6e29 290a 0a20 2020 2020  version))..     
+00021a70: 2020 2061 6c6c 5f6c 6179 6572 5f76 6572     all_layer_ver
+00021a80: 7369 6f6e 732e 736f 7274 286b 6579 3d6c  sions.sort(key=l
+00021a90: 616d 6264 6120 783a 2078 5b22 5665 7273  ambda x: x["Vers
+00021aa0: 696f 6e22 5d2c 2072 6576 6572 7365 3d54  ion"], reverse=T
+00021ab0: 7275 6529 0a20 2020 2020 2020 2061 6c6c  rue).        all
+00021ac0: 5f6c 6179 6572 5f76 6572 7369 6f6e 7320  _layer_versions 
+00021ad0: 3d20 5061 6769 6e61 7465 644c 6973 7428  = PaginatedList(
+00021ae0: 616c 6c5f 6c61 7965 725f 7665 7273 696f  all_layer_versio
+00021af0: 6e73 290a 2020 2020 2020 2020 7061 6765  ns).        page
+00021b00: 2c20 746f 6b65 6e20 3d20 616c 6c5f 6c61  , token = all_la
+00021b10: 7965 725f 7665 7273 696f 6e73 2e67 6574  yer_versions.get
+00021b20: 5f70 6167 6528 0a20 2020 2020 2020 2020  _page(.         
+00021b30: 2020 206c 616d 6264 6120 7665 7273 696f     lambda versio
+00021b40: 6e3a 2076 6572 7369 6f6e 5b22 4c61 7965  n: version["Laye
+00021b50: 7256 6572 7369 6f6e 4172 6e22 5d2c 0a20  rVersionArn"],. 
+00021b60: 2020 2020 2020 2020 2020 206d 6172 6b65             marke
+00021b70: 722c 0a20 2020 2020 2020 2020 2020 206d  r,.            m
+00021b80: 6178 5f69 7465 6d73 2c0a 2020 2020 2020  ax_items,.      
+00021b90: 2020 290a 2020 2020 2020 2020 7265 7475    ).        retu
+00021ba0: 726e 204c 6973 744c 6179 6572 5665 7273  rn ListLayerVers
+00021bb0: 696f 6e73 5265 7370 6f6e 7365 284e 6578  ionsResponse(Nex
+00021bc0: 744d 6172 6b65 723d 746f 6b65 6e2c 204c  tMarker=token, L
+00021bd0: 6179 6572 5665 7273 696f 6e73 3d70 6167  ayerVersions=pag
+00021be0: 6529 0a0a 2020 2020 6465 6620 6465 6c65  e)..    def dele
+00021bf0: 7465 5f6c 6179 6572 5f76 6572 7369 6f6e  te_layer_version
+00021c00: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
+00021c10: 636f 6e74 6578 743a 2052 6571 7565 7374  context: Request
+00021c20: 436f 6e74 6578 742c 206c 6179 6572 5f6e  Context, layer_n
+00021c30: 616d 653a 204c 6179 6572 4e61 6d65 2c20  ame: LayerName, 
+00021c40: 7665 7273 696f 6e5f 6e75 6d62 6572 3a20  version_number: 
+00021c50: 4c61 7965 7256 6572 7369 6f6e 4e75 6d62  LayerVersionNumb
+00021c60: 6572 0a20 2020 2029 202d 3e20 4e6f 6e65  er.    ) -> None
+00021c70: 3a0a 2020 2020 2020 2020 6966 2076 6572  :.        if ver
+00021c80: 7369 6f6e 5f6e 756d 6265 7220 3c20 313a  sion_number < 1:
+00021c90: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
+00021ca0: 7365 2049 6e76 616c 6964 5061 7261 6d65  se InvalidParame
+00021cb0: 7465 7256 616c 7565 4578 6365 7074 696f  terValueExceptio
+00021cc0: 6e28 224c 6179 6572 2056 6572 7369 6f6e  n("Layer Version
+00021cd0: 2043 616e 6e6f 7420 6265 206c 6573 7320   Cannot be less 
+00021ce0: 7468 616e 2031 222c 2054 7970 653d 2255  than 1", Type="U
+00021cf0: 7365 7222 290a 0a20 2020 2020 2020 2023  ser")..        #
+00021d00: 2054 4f44 4f3a 2074 6573 7420 6372 6f73   TODO: test cros
+00021d10: 732d 7265 6769 6f6e 3f20 2865 2e67 2e20  s-region? (e.g. 
+00021d20: 7769 7468 2066 756e 6374 696f 6e73 2069  with functions i
+00021d30: 7420 646f 6573 6e74 2077 6f72 6b20 616e  t doesnt work an
+00021d40: 6420 7261 6973 6573 2061 6e20 6578 6365  d raises an exce
+00021d50: 7074 696f 6e29 0a20 2020 2020 2020 2061  ption).        a
+00021d60: 6363 6f75 6e74 5f69 6420 3d20 636f 6e74  ccount_id = cont
+00021d70: 6578 742e 6163 636f 756e 745f 6964 0a20  ext.account_id. 
+00021d80: 2020 2020 2020 2072 6567 696f 6e5f 6e61         region_na
+00021d90: 6d65 203d 2063 6f6e 7465 7874 2e72 6567  me = context.reg
+00021da0: 696f 6e0a 2020 2020 2020 2020 6966 2061  ion.        if a
+00021db0: 7069 5f75 7469 6c73 2e69 735f 6c61 7965  pi_utils.is_laye
+00021dc0: 725f 6172 6e28 6c61 7965 725f 6e61 6d65  r_arn(layer_name
+00021dd0: 293a 0a20 2020 2020 2020 2020 2020 2072  ):.            r
+00021de0: 6567 696f 6e5f 6e61 6d65 2c20 6163 636f  egion_name, acco
+00021df0: 756e 745f 6964 2c20 6c61 7965 725f 6e61  unt_id, layer_na
+00021e00: 6d65 2c20 5f20 3d20 6170 695f 7574 696c  me, _ = api_util
+00021e10: 732e 7061 7273 655f 6c61 7965 725f 6172  s.parse_layer_ar
+00021e20: 6e28 6c61 7965 725f 6e61 6d65 290a 0a20  n(layer_name).. 
+00021e30: 2020 2020 2020 2073 7461 7465 203d 206c         state = l
+00021e40: 616d 6264 615f 7374 6f72 6573 5b61 6363  ambda_stores[acc
+00021e50: 6f75 6e74 5f69 645d 5b72 6567 696f 6e5f  ount_id][region_
+00021e60: 6e61 6d65 5d0a 2020 2020 2020 2020 6c61  name].        la
+00021e70: 7965 7220 3d20 7374 6174 652e 6c61 7965  yer = state.laye
+00021e80: 7273 2e67 6574 286c 6179 6572 5f6e 616d  rs.get(layer_nam
+00021e90: 652c 207b 7d29 0a20 2020 2020 2020 2069  e, {}).        i
+00021ea0: 6620 6c61 7965 723a 0a20 2020 2020 2020  f layer:.       
+00021eb0: 2020 2020 206c 6179 6572 2e6c 6179 6572       layer.layer
+00021ec0: 5f76 6572 7369 6f6e 732e 706f 7028 7374  _versions.pop(st
+00021ed0: 7228 7665 7273 696f 6e5f 6e75 6d62 6572  r(version_number
+00021ee0: 292c 204e 6f6e 6529 0a0a 2020 2020 2320  ), None)..    # 
+00021ef0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00021f00: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00021f10: 3d3d 3d3d 3d3d 3d0a 2020 2020 2320 3d3d  =======.    # ==
+00021f20: 3d3d 3d20 204c 6179 6572 2056 6572 7369  ===  Layer Versi
+00021f30: 6f6e 2050 6572 6d69 7373 696f 6e73 2020  on Permissions  
+00021f40: 3d3d 3d3d 3d0a 2020 2020 2320 3d3d 3d3d  =====.    # ====
+00021f50: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00021f60: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00021f70: 3d3d 3d0a 2020 2020 2320 544f 444f 3a20  ===.    # TODO: 
+00021f80: 6c6f 636b 2075 7064 6174 6573 2074 6861  lock updates tha
+00021f90: 7420 6368 616e 6765 2072 6576 6973 696f  t change revisio
+00021fa0: 6e20 4944 730a 0a20 2020 2064 6566 2061  n IDs..    def a
+00021fb0: 6464 5f6c 6179 6572 5f76 6572 7369 6f6e  dd_layer_version
+00021fc0: 5f70 6572 6d69 7373 696f 6e28 0a20 2020  _permission(.   
+00021fd0: 2020 2020 2073 656c 662c 0a20 2020 2020       self,.     
+00021fe0: 2020 2063 6f6e 7465 7874 3a20 5265 7175     context: Requ
+00021ff0: 6573 7443 6f6e 7465 7874 2c0a 2020 2020  estContext,.    
+00022000: 2020 2020 6c61 7965 725f 6e61 6d65 3a20      layer_name: 
+00022010: 4c61 7965 724e 616d 652c 0a20 2020 2020  LayerName,.     
+00022020: 2020 2076 6572 7369 6f6e 5f6e 756d 6265     version_numbe
+00022030: 723a 204c 6179 6572 5665 7273 696f 6e4e  r: LayerVersionN
+00022040: 756d 6265 722c 0a20 2020 2020 2020 2073  umber,.        s
+00022050: 7461 7465 6d65 6e74 5f69 643a 2053 7461  tatement_id: Sta
+00022060: 7465 6d65 6e74 4964 2c0a 2020 2020 2020  tementId,.      
+00022070: 2020 6163 7469 6f6e 3a20 4c61 7965 7250    action: LayerP
+00022080: 6572 6d69 7373 696f 6e41 6c6c 6f77 6564  ermissionAllowed
+00022090: 4163 7469 6f6e 2c0a 2020 2020 2020 2020  Action,.        
+000220a0: 7072 696e 6369 7061 6c3a 204c 6179 6572  principal: Layer
+000220b0: 5065 726d 6973 7369 6f6e 416c 6c6f 7765  PermissionAllowe
+000220c0: 6450 7269 6e63 6970 616c 2c0a 2020 2020  dPrincipal,.    
+000220d0: 2020 2020 6f72 6761 6e69 7a61 7469 6f6e      organization
+000220e0: 5f69 643a 204f 7267 616e 697a 6174 696f  _id: Organizatio
+000220f0: 6e49 6420 3d20 4e6f 6e65 2c0a 2020 2020  nId = None,.    
+00022100: 2020 2020 7265 7669 7369 6f6e 5f69 643a      revision_id:
+00022110: 2053 7472 696e 6720 3d20 4e6f 6e65 2c0a   String = None,.
+00022120: 2020 2020 2920 2d3e 2041 6464 4c61 7965      ) -> AddLaye
+00022130: 7256 6572 7369 6f6e 5065 726d 6973 7369  rVersionPermissi
+00022140: 6f6e 5265 7370 6f6e 7365 3a0a 2020 2020  onResponse:.    
+00022150: 2020 2020 2320 544f 444f 3a20 6164 6420      # TODO: add 
+00022160: 6c61 7965 7220 4152 4e20 6173 206c 6179  layer ARN as lay
+00022170: 6572 5f6e 616d 6520 7375 7070 6f72 740a  er_name support.
+00022180: 0a20 2020 2020 2020 206c 6179 6572 5f76  .        layer_v
+00022190: 6572 7369 6f6e 5f61 726e 203d 2061 7069  ersion_arn = api
+000221a0: 5f75 7469 6c73 2e6c 6179 6572 5f76 6572  _utils.layer_ver
+000221b0: 7369 6f6e 5f61 726e 280a 2020 2020 2020  sion_arn(.      
+000221c0: 2020 2020 2020 6c61 7965 725f 6e61 6d65        layer_name
+000221d0: 2c20 636f 6e74 6578 742e 6163 636f 756e  , context.accoun
+000221e0: 745f 6964 2c20 636f 6e74 6578 742e 7265  t_id, context.re
+000221f0: 6769 6f6e 2c20 7374 7228 7665 7273 696f  gion, str(versio
+00022200: 6e5f 6e75 6d62 6572 290a 2020 2020 2020  n_number).      
+00022210: 2020 290a 0a20 2020 2020 2020 2069 6620    )..        if 
+00022220: 6163 7469 6f6e 2021 3d20 226c 616d 6264  action != "lambd
+00022230: 613a 4765 744c 6179 6572 5665 7273 696f  a:GetLayerVersio
+00022240: 6e22 3a0a 2020 2020 2020 2020 2020 2020  n":.            
+00022250: 7261 6973 6520 5661 6c69 6461 7469 6f6e  raise Validation
+00022260: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
+00022270: 2020 2020 2020 2020 2020 2066 2231 2076             f"1 v
+00022280: 616c 6964 6174 696f 6e20 6572 726f 7220  alidation error 
+00022290: 6465 7465 6374 6564 3a20 5661 6c75 6520  detected: Value 
+000222a0: 277b 6163 7469 6f6e 7d27 2061 7420 2761  '{action}' at 'a
+000222b0: 6374 696f 6e27 2066 6169 6c65 6420 746f  ction' failed to
+000222c0: 2073 6174 6973 6679 2063 6f6e 7374 7261   satisfy constra
+000222d0: 696e 743a 204d 656d 6265 7220 6d75 7374  int: Member must
+000222e0: 2073 6174 6973 6679 2072 6567 756c 6172   satisfy regular
+000222f0: 2065 7870 7265 7373 696f 6e20 7061 7474   expression patt
+00022300: 6572 6e3a 206c 616d 6264 613a 4765 744c  ern: lambda:GetL
+00022310: 6179 6572 5665 7273 696f 6e22 0a20 2020  ayerVersion".   
+00022320: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
+00022330: 2020 2020 7374 6174 6520 3d20 6c61 6d62      state = lamb
+00022340: 6461 5f73 746f 7265 735b 636f 6e74 6578  da_stores[contex
+00022350: 742e 6163 636f 756e 745f 6964 5d5b 636f  t.account_id][co
+00022360: 6e74 6578 742e 7265 6769 6f6e 5d0a 2020  ntext.region].  
+00022370: 2020 2020 2020 6c61 7965 7220 3d20 7374        layer = st
+00022380: 6174 652e 6c61 7965 7273 2e67 6574 286c  ate.layers.get(l
+00022390: 6179 6572 5f6e 616d 6529 0a20 2020 2020  ayer_name).     
+000223a0: 2020 2069 6620 6c61 7965 7220 6973 204e     if layer is N
+000223b0: 6f6e 653a 0a20 2020 2020 2020 2020 2020  one:.           
+000223c0: 2072 6169 7365 2052 6573 6f75 7263 654e   raise ResourceN
+000223d0: 6f74 466f 756e 6445 7863 6570 7469 6f6e  otFoundException
+000223e0: 280a 2020 2020 2020 2020 2020 2020 2020  (.              
+000223f0: 2020 6622 4c61 7965 7220 7665 7273 696f    f"Layer versio
+00022400: 6e20 7b6c 6179 6572 5f76 6572 7369 6f6e  n {layer_version
+00022410: 5f61 726e 7d20 646f 6573 206e 6f74 2065  _arn} does not e
+00022420: 7869 7374 2e22 2c20 5479 7065 3d22 5573  xist.", Type="Us
+00022430: 6572 220a 2020 2020 2020 2020 2020 2020  er".            
+00022440: 290a 2020 2020 2020 2020 6c61 7965 725f  ).        layer_
+00022450: 7665 7273 696f 6e20 3d20 6c61 7965 722e  version = layer.
+00022460: 6c61 7965 725f 7665 7273 696f 6e73 2e67  layer_versions.g
+00022470: 6574 2873 7472 2876 6572 7369 6f6e 5f6e  et(str(version_n
+00022480: 756d 6265 7229 290a 2020 2020 2020 2020  umber)).        
+00022490: 6966 206c 6179 6572 5f76 6572 7369 6f6e  if layer_version
+000224a0: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+000224b0: 2020 2020 2020 7261 6973 6520 5265 736f        raise Reso
+000224c0: 7572 6365 4e6f 7446 6f75 6e64 4578 6365  urceNotFoundExce
+000224d0: 7074 696f 6e28 0a20 2020 2020 2020 2020  ption(.         
+000224e0: 2020 2020 2020 2066 224c 6179 6572 2076         f"Layer v
+000224f0: 6572 7369 6f6e 207b 6c61 7965 725f 7665  ersion {layer_ve
+00022500: 7273 696f 6e5f 6172 6e7d 2064 6f65 7320  rsion_arn} does 
+00022510: 6e6f 7420 6578 6973 742e 222c 2054 7970  not exist.", Typ
+00022520: 653d 2255 7365 7222 0a20 2020 2020 2020  e="User".       
+00022530: 2020 2020 2029 0a20 2020 2020 2020 2023       ).        #
+00022540: 2064 6f20 7765 2068 6176 6520 6120 706f   do we have a po
+00022550: 6c69 6379 3f20 6966 206e 6f74 2073 6574  licy? if not set
+00022560: 206f 6e65 0a20 2020 2020 2020 2069 6620   one.        if 
+00022570: 6c61 7965 725f 7665 7273 696f 6e2e 706f  layer_version.po
+00022580: 6c69 6379 2069 7320 4e6f 6e65 3a0a 2020  licy is None:.  
+00022590: 2020 2020 2020 2020 2020 6c61 7965 725f            layer_
+000225a0: 7665 7273 696f 6e2e 706f 6c69 6379 203d  version.policy =
+000225b0: 204c 6179 6572 506f 6c69 6379 2829 0a0a   LayerPolicy()..
+000225c0: 2020 2020 2020 2020 6966 2073 7461 7465          if state
+000225d0: 6d65 6e74 5f69 6420 696e 206c 6179 6572  ment_id in layer
+000225e0: 5f76 6572 7369 6f6e 2e70 6f6c 6963 792e  _version.policy.
+000225f0: 7374 6174 656d 656e 7473 3a0a 2020 2020  statements:.    
+00022600: 2020 2020 2020 2020 7261 6973 6520 5265          raise Re
+00022610: 736f 7572 6365 436f 6e66 6c69 6374 4578  sourceConflictEx
+00022620: 6365 7074 696f 6e28 0a20 2020 2020 2020  ception(.       
+00022630: 2020 2020 2020 2020 2066 2254 6865 2073           f"The s
+00022640: 7461 7465 6d65 6e74 2069 6420 287b 7374  tatement id ({st
+00022650: 6174 656d 656e 745f 6964 7d29 2070 726f  atement_id}) pro
+00022660: 7669 6465 6420 616c 7265 6164 7920 6578  vided already ex
+00022670: 6973 7473 2e20 506c 6561 7365 2070 726f  ists. Please pro
+00022680: 7669 6465 2061 206e 6577 2073 7461 7465  vide a new state
+00022690: 6d65 6e74 2069 642c 206f 7220 7265 6d6f  ment id, or remo
+000226a0: 7665 2074 6865 2065 7869 7374 696e 6720  ve the existing 
+000226b0: 7374 6174 656d 656e 742e 222c 0a20 2020  statement.",.   
+000226c0: 2020 2020 2020 2020 2020 2020 2054 7970               Typ
+000226d0: 653d 2255 7365 7222 2c0a 2020 2020 2020  e="User",.      
+000226e0: 2020 2020 2020 290a 0a20 2020 2020 2020        )..       
+000226f0: 2069 6620 7265 7669 7369 6f6e 5f69 6420   if revision_id 
+00022700: 616e 6420 6c61 7965 725f 7665 7273 696f  and layer_versio
+00022710: 6e2e 706f 6c69 6379 2e72 6576 6973 696f  n.policy.revisio
+00022720: 6e5f 6964 2021 3d20 7265 7669 7369 6f6e  n_id != revision
+00022730: 5f69 643a 0a20 2020 2020 2020 2020 2020  _id:.           
+00022740: 2072 6169 7365 2050 7265 636f 6e64 6974   raise Precondit
+00022750: 696f 6e46 6169 6c65 6445 7863 6570 7469  ionFailedExcepti
+00022760: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
+00022770: 2020 2020 2254 6865 2052 6576 6973 696f      "The Revisio
+00022780: 6e20 4964 2070 726f 7669 6465 6420 646f  n Id provided do
+00022790: 6573 206e 6f74 206d 6174 6368 2074 6865  es not match the
+000227a0: 206c 6174 6573 7420 5265 7669 7369 6f6e   latest Revision
+000227b0: 2049 642e 2022 0a20 2020 2020 2020 2020   Id. ".         
+000227c0: 2020 2020 2020 2022 4361 6c6c 2074 6865         "Call the
+000227d0: 2047 6574 4c61 7965 7250 6f6c 6963 7920   GetLayerPolicy 
+000227e0: 4150 4920 746f 2072 6574 7269 6576 6520  API to retrieve 
+000227f0: 7468 6520 6c61 7465 7374 2052 6576 6973  the latest Revis
+00022800: 696f 6e20 4964 222c 0a20 2020 2020 2020  ion Id",.       
+00022810: 2020 2020 2020 2020 2054 7970 653d 2255           Type="U
+00022820: 7365 7222 2c0a 2020 2020 2020 2020 2020  ser",.          
+00022830: 2020 290a 0a20 2020 2020 2020 2073 7461    )..        sta
+00022840: 7465 6d65 6e74 203d 204c 6179 6572 506f  tement = LayerPo
+00022850: 6c69 6379 5374 6174 656d 656e 7428 0a20  licyStatement(. 
+00022860: 2020 2020 2020 2020 2020 2073 6964 3d73             sid=s
+00022870: 7461 7465 6d65 6e74 5f69 642c 2061 6374  tatement_id, act
+00022880: 696f 6e3d 6163 7469 6f6e 2c20 7072 696e  ion=action, prin
+00022890: 6369 7061 6c3d 7072 696e 6369 7061 6c2c  cipal=principal,
+000228a0: 206f 7267 616e 697a 6174 696f 6e5f 6964   organization_id
+000228b0: 3d6f 7267 616e 697a 6174 696f 6e5f 6964  =organization_id
+000228c0: 0a20 2020 2020 2020 2029 0a0a 2020 2020  .        )..    
+000228d0: 2020 2020 6f6c 645f 7374 6174 656d 656e      old_statemen
+000228e0: 7473 203d 206c 6179 6572 5f76 6572 7369  ts = layer_versi
+000228f0: 6f6e 2e70 6f6c 6963 792e 7374 6174 656d  on.policy.statem
+00022900: 656e 7473 0a20 2020 2020 2020 206c 6179  ents.        lay
+00022910: 6572 5f76 6572 7369 6f6e 2e70 6f6c 6963  er_version.polic
+00022920: 7920 3d20 6461 7461 636c 6173 7365 732e  y = dataclasses.
+00022930: 7265 706c 6163 6528 0a20 2020 2020 2020  replace(.       
+00022940: 2020 2020 206c 6179 6572 5f76 6572 7369       layer_versi
+00022950: 6f6e 2e70 6f6c 6963 792c 2073 7461 7465  on.policy, state
+00022960: 6d65 6e74 733d 7b2a 2a6f 6c64 5f73 7461  ments={**old_sta
+00022970: 7465 6d65 6e74 732c 2073 7461 7465 6d65  tements, stateme
+00022980: 6e74 5f69 643a 2073 7461 7465 6d65 6e74  nt_id: statement
+00022990: 7d0a 2020 2020 2020 2020 290a 0a20 2020  }.        )..   
+000229a0: 2020 2020 2072 6574 7572 6e20 4164 644c       return AddL
+000229b0: 6179 6572 5665 7273 696f 6e50 6572 6d69  ayerVersionPermi
+000229c0: 7373 696f 6e52 6573 706f 6e73 6528 0a20  ssionResponse(. 
+000229d0: 2020 2020 2020 2020 2020 2053 7461 7465             State
+000229e0: 6d65 6e74 3d6a 736f 6e2e 6475 6d70 7328  ment=json.dumps(
+000229f0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00022a00: 207b 0a20 2020 2020 2020 2020 2020 2020   {.             
+00022a10: 2020 2020 2020 2022 5369 6422 3a20 7374         "Sid": st
+00022a20: 6174 656d 656e 742e 7369 642c 0a20 2020  atement.sid,.   
+00022a30: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00022a40: 2022 4566 6665 6374 223a 2022 416c 6c6f   "Effect": "Allo
+00022a50: 7722 2c0a 2020 2020 2020 2020 2020 2020  w",.            
+00022a60: 2020 2020 2020 2020 2250 7269 6e63 6970          "Princip
+00022a70: 616c 223a 2073 7461 7465 6d65 6e74 2e70  al": statement.p
+00022a80: 7269 6e63 6970 616c 2c0a 2020 2020 2020  rincipal,.      
+00022a90: 2020 2020 2020 2020 2020 2020 2020 2241                "A
+00022aa0: 6374 696f 6e22 3a20 7374 6174 656d 656e  ction": statemen
+00022ab0: 742e 6163 7469 6f6e 2c0a 2020 2020 2020  t.action,.      
+00022ac0: 2020 2020 2020 2020 2020 2020 2020 2252                "R
+00022ad0: 6573 6f75 7263 6522 3a20 6c61 7965 725f  esource": layer_
+00022ae0: 7665 7273 696f 6e2e 6c61 7965 725f 7665  version.layer_ve
+00022af0: 7273 696f 6e5f 6172 6e2c 0a20 2020 2020  rsion_arn,.     
+00022b00: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
+00022b10: 2020 2020 2020 2020 2029 2c0a 2020 2020           ),.    
+00022b20: 2020 2020 2020 2020 5265 7669 7369 6f6e          Revision
+00022b30: 4964 3d6c 6179 6572 5f76 6572 7369 6f6e  Id=layer_version
+00022b40: 2e70 6f6c 6963 792e 7265 7669 7369 6f6e  .policy.revision
+00022b50: 5f69 642c 0a20 2020 2020 2020 2029 0a0a  _id,.        )..
+00022b60: 2020 2020 6465 6620 7265 6d6f 7665 5f6c      def remove_l
+00022b70: 6179 6572 5f76 6572 7369 6f6e 5f70 6572  ayer_version_per
+00022b80: 6d69 7373 696f 6e28 0a20 2020 2020 2020  mission(.       
+00022b90: 2073 656c 662c 0a20 2020 2020 2020 2063   self,.        c
+00022ba0: 6f6e 7465 7874 3a20 5265 7175 6573 7443  ontext: RequestC
+00022bb0: 6f6e 7465 7874 2c0a 2020 2020 2020 2020  ontext,.        
+00022bc0: 6c61 7965 725f 6e61 6d65 3a20 4c61 7965  layer_name: Laye
+00022bd0: 724e 616d 652c 0a20 2020 2020 2020 2076  rName,.        v
+00022be0: 6572 7369 6f6e 5f6e 756d 6265 723a 204c  ersion_number: L
+00022bf0: 6179 6572 5665 7273 696f 6e4e 756d 6265  ayerVersionNumbe
+00022c00: 722c 0a20 2020 2020 2020 2073 7461 7465  r,.        state
+00022c10: 6d65 6e74 5f69 643a 2053 7461 7465 6d65  ment_id: Stateme
+00022c20: 6e74 4964 2c0a 2020 2020 2020 2020 7265  ntId,.        re
+00022c30: 7669 7369 6f6e 5f69 643a 2053 7472 696e  vision_id: Strin
+00022c40: 6720 3d20 4e6f 6e65 2c0a 2020 2020 2920  g = None,.    ) 
+00022c50: 2d3e 204e 6f6e 653a 0a20 2020 2020 2020  -> None:.       
+00022c60: 2023 2054 4f44 4f3a 2061 6464 206c 6179   # TODO: add lay
+00022c70: 6572 2041 524e 2061 7320 6c61 7965 725f  er ARN as layer_
+00022c80: 6e61 6d65 2073 7570 706f 7274 0a20 2020  name support.   
+00022c90: 2020 2020 206c 6179 6572 5f76 6572 7369       layer_versi
+00022ca0: 6f6e 5f61 726e 203d 2061 7069 5f75 7469  on_arn = api_uti
+00022cb0: 6c73 2e6c 6179 6572 5f76 6572 7369 6f6e  ls.layer_version
+00022cc0: 5f61 726e 280a 2020 2020 2020 2020 2020  _arn(.          
+00022cd0: 2020 6c61 7965 725f 6e61 6d65 2c20 636f    layer_name, co
+00022ce0: 6e74 6578 742e 6163 636f 756e 745f 6964  ntext.account_id
+00022cf0: 2c20 636f 6e74 6578 742e 7265 6769 6f6e  , context.region
+00022d00: 2c20 7374 7228 7665 7273 696f 6e5f 6e75  , str(version_nu
+00022d10: 6d62 6572 290a 2020 2020 2020 2020 290a  mber).        ).
+00022d20: 2020 2020 2020 2020 7374 6174 6520 3d20          state = 
+00022d30: 6c61 6d62 6461 5f73 746f 7265 735b 636f  lambda_stores[co
+00022d40: 6e74 6578 742e 6163 636f 756e 745f 6964  ntext.account_id
+00022d50: 5d5b 636f 6e74 6578 742e 7265 6769 6f6e  ][context.region
+00022d60: 5d0a 2020 2020 2020 2020 6c61 7965 7220  ].        layer 
+00022d70: 3d20 7374 6174 652e 6c61 7965 7273 2e67  = state.layers.g
+00022d80: 6574 286c 6179 6572 5f6e 616d 6529 0a20  et(layer_name). 
+00022d90: 2020 2020 2020 2069 6620 6c61 7965 7220         if layer 
+00022da0: 6973 204e 6f6e 653a 0a20 2020 2020 2020  is None:.       
+00022db0: 2020 2020 2072 6169 7365 2052 6573 6f75       raise Resou
+00022dc0: 7263 654e 6f74 466f 756e 6445 7863 6570  rceNotFoundExcep
+00022dd0: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
+00022de0: 2020 2020 2020 6622 4c61 7965 7220 7665        f"Layer ve
+00022df0: 7273 696f 6e20 7b6c 6179 6572 5f76 6572  rsion {layer_ver
+00022e00: 7369 6f6e 5f61 726e 7d20 646f 6573 206e  sion_arn} does n
+00022e10: 6f74 2065 7869 7374 2e22 2c20 5479 7065  ot exist.", Type
+00022e20: 3d22 5573 6572 220a 2020 2020 2020 2020  ="User".        
+00022e30: 2020 2020 290a 2020 2020 2020 2020 6c61      ).        la
+00022e40: 7965 725f 7665 7273 696f 6e20 3d20 6c61  yer_version = la
+00022e50: 7965 722e 6c61 7965 725f 7665 7273 696f  yer.layer_versio
+00022e60: 6e73 2e67 6574 2873 7472 2876 6572 7369  ns.get(str(versi
+00022e70: 6f6e 5f6e 756d 6265 7229 290a 2020 2020  on_number)).    
+00022e80: 2020 2020 6966 206c 6179 6572 5f76 6572      if layer_ver
+00022e90: 7369 6f6e 2069 7320 4e6f 6e65 3a0a 2020  sion is None:.  
+00022ea0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00022eb0: 5265 736f 7572 6365 4e6f 7446 6f75 6e64  ResourceNotFound
+00022ec0: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
+00022ed0: 2020 2020 2020 2020 2020 2066 224c 6179             f"Lay
+00022ee0: 6572 2076 6572 7369 6f6e 207b 6c61 7965  er version {laye
+00022ef0: 725f 7665 7273 696f 6e5f 6172 6e7d 2064  r_version_arn} d
+00022f00: 6f65 7320 6e6f 7420 6578 6973 742e 222c  oes not exist.",
+00022f10: 2054 7970 653d 2255 7365 7222 0a20 2020   Type="User".   
+00022f20: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
+00022f30: 2020 2020 6966 2072 6576 6973 696f 6e5f      if revision_
+00022f40: 6964 2061 6e64 206c 6179 6572 5f76 6572  id and layer_ver
+00022f50: 7369 6f6e 2e70 6f6c 6963 792e 7265 7669  sion.policy.revi
+00022f60: 7369 6f6e 5f69 6420 213d 2072 6576 6973  sion_id != revis
+00022f70: 696f 6e5f 6964 3a0a 2020 2020 2020 2020  ion_id:.        
+00022f80: 2020 2020 7261 6973 6520 5072 6563 6f6e      raise Precon
+00022f90: 6469 7469 6f6e 4661 696c 6564 4578 6365  ditionFailedExce
+00022fa0: 7074 696f 6e28 0a20 2020 2020 2020 2020  ption(.         
+00022fb0: 2020 2020 2020 2022 5468 6520 5265 7669         "The Revi
+00022fc0: 7369 6f6e 2049 6420 7072 6f76 6964 6564  sion Id provided
+00022fd0: 2064 6f65 7320 6e6f 7420 6d61 7463 6820   does not match 
+00022fe0: 7468 6520 6c61 7465 7374 2052 6576 6973  the latest Revis
+00022ff0: 696f 6e20 4964 2e20 220a 2020 2020 2020  ion Id. ".      
+00023000: 2020 2020 2020 2020 2020 2243 616c 6c20            "Call 
+00023010: 7468 6520 4765 744c 6179 6572 506f 6c69  the GetLayerPoli
+00023020: 6379 2041 5049 2074 6f20 7265 7472 6965  cy API to retrie
+00023030: 7665 2074 6865 206c 6174 6573 7420 5265  ve the latest Re
+00023040: 7669 7369 6f6e 2049 6422 2c0a 2020 2020  vision Id",.    
+00023050: 2020 2020 2020 2020 2020 2020 5479 7065              Type
+00023060: 3d22 5573 6572 222c 0a20 2020 2020 2020  ="User",.       
+00023070: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+00023080: 6966 2073 7461 7465 6d65 6e74 5f69 6420  if statement_id 
+00023090: 6e6f 7420 696e 206c 6179 6572 5f76 6572  not in layer_ver
+000230a0: 7369 6f6e 2e70 6f6c 6963 792e 7374 6174  sion.policy.stat
+000230b0: 656d 656e 7473 3a0a 2020 2020 2020 2020  ements:.        
+000230c0: 2020 2020 7261 6973 6520 5265 736f 7572      raise Resour
+000230d0: 6365 4e6f 7446 6f75 6e64 4578 6365 7074  ceNotFoundExcept
+000230e0: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
+000230f0: 2020 2020 2066 2253 7461 7465 6d65 6e74       f"Statement
+00023100: 207b 7374 6174 656d 656e 745f 6964 7d20   {statement_id} 
+00023110: 6973 206e 6f74 2066 6f75 6e64 2069 6e20  is not found in 
+00023120: 7265 736f 7572 6365 2070 6f6c 6963 792e  resource policy.
+00023130: 222c 2054 7970 653d 2255 7365 7222 0a20  ", Type="User". 
+00023140: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
+00023150: 2020 2020 2020 6f6c 645f 7374 6174 656d        old_statem
+00023160: 656e 7473 203d 206c 6179 6572 5f76 6572  ents = layer_ver
+00023170: 7369 6f6e 2e70 6f6c 6963 792e 7374 6174  sion.policy.stat
+00023180: 656d 656e 7473 0a20 2020 2020 2020 206c  ements.        l
+00023190: 6179 6572 5f76 6572 7369 6f6e 2e70 6f6c  ayer_version.pol
+000231a0: 6963 7920 3d20 6461 7461 636c 6173 7365  icy = dataclasse
+000231b0: 732e 7265 706c 6163 6528 0a20 2020 2020  s.replace(.     
+000231c0: 2020 2020 2020 206c 6179 6572 5f76 6572         layer_ver
+000231d0: 7369 6f6e 2e70 6f6c 6963 792c 0a20 2020  sion.policy,.   
+000231e0: 2020 2020 2020 2020 2073 7461 7465 6d65           stateme
+000231f0: 6e74 733d 7b6b 3a20 7620 666f 7220 6b2c  nts={k: v for k,
+00023200: 2076 2069 6e20 6f6c 645f 7374 6174 656d   v in old_statem
+00023210: 656e 7473 2e69 7465 6d73 2829 2069 6620  ents.items() if 
+00023220: 6b20 213d 2073 7461 7465 6d65 6e74 5f69  k != statement_i
+00023230: 647d 2c0a 2020 2020 2020 2020 290a 0a20  d},.        ).. 
+00023240: 2020 2064 6566 2067 6574 5f6c 6179 6572     def get_layer
+00023250: 5f76 6572 7369 6f6e 5f70 6f6c 6963 7928  _version_policy(
+00023260: 0a20 2020 2020 2020 2073 656c 662c 2063  .        self, c
+00023270: 6f6e 7465 7874 3a20 5265 7175 6573 7443  ontext: RequestC
+00023280: 6f6e 7465 7874 2c20 6c61 7965 725f 6e61  ontext, layer_na
+00023290: 6d65 3a20 4c61 7965 724e 616d 652c 2076  me: LayerName, v
+000232a0: 6572 7369 6f6e 5f6e 756d 6265 723a 204c  ersion_number: L
+000232b0: 6179 6572 5665 7273 696f 6e4e 756d 6265  ayerVersionNumbe
+000232c0: 720a 2020 2020 2920 2d3e 2047 6574 4c61  r.    ) -> GetLa
+000232d0: 7965 7256 6572 7369 6f6e 506f 6c69 6379  yerVersionPolicy
+000232e0: 5265 7370 6f6e 7365 3a0a 2020 2020 2020  Response:.      
+000232f0: 2020 2320 544f 444f 3a20 6164 6420 6c61    # TODO: add la
+00023300: 7965 7220 4152 4e20 6173 206c 6179 6572  yer ARN as layer
+00023310: 5f6e 616d 6520 7375 7070 6f72 740a 2020  _name support.  
+00023320: 2020 2020 2020 6c61 7965 725f 7665 7273        layer_vers
+00023330: 696f 6e5f 6172 6e20 3d20 6170 695f 7574  ion_arn = api_ut
+00023340: 696c 732e 6c61 7965 725f 7665 7273 696f  ils.layer_versio
+00023350: 6e5f 6172 6e28 0a20 2020 2020 2020 2020  n_arn(.         
+00023360: 2020 206c 6179 6572 5f6e 616d 652c 2063     layer_name, c
+00023370: 6f6e 7465 7874 2e61 6363 6f75 6e74 5f69  ontext.account_i
+00023380: 642c 2063 6f6e 7465 7874 2e72 6567 696f  d, context.regio
+00023390: 6e2c 2073 7472 2876 6572 7369 6f6e 5f6e  n, str(version_n
+000233a0: 756d 6265 7229 0a20 2020 2020 2020 2029  umber).        )
+000233b0: 0a20 2020 2020 2020 2073 7461 7465 203d  .        state =
+000233c0: 206c 616d 6264 615f 7374 6f72 6573 5b63   lambda_stores[c
+000233d0: 6f6e 7465 7874 2e61 6363 6f75 6e74 5f69  ontext.account_i
+000233e0: 645d 5b63 6f6e 7465 7874 2e72 6567 696f  d][context.regio
+000233f0: 6e5d 0a20 2020 2020 2020 206c 6179 6572  n].        layer
+00023400: 203d 2073 7461 7465 2e6c 6179 6572 732e   = state.layers.
+00023410: 6765 7428 6c61 7965 725f 6e61 6d65 290a  get(layer_name).
+00023420: 2020 2020 2020 2020 6966 206c 6179 6572          if layer
+00023430: 2069 7320 4e6f 6e65 3a0a 2020 2020 2020   is None:.      
+00023440: 2020 2020 2020 7261 6973 6520 5265 736f        raise Reso
+00023450: 7572 6365 4e6f 7446 6f75 6e64 4578 6365  urceNotFoundExce
+00023460: 7074 696f 6e28 0a20 2020 2020 2020 2020  ption(.         
+00023470: 2020 2020 2020 2066 224c 6179 6572 2076         f"Layer v
+00023480: 6572 7369 6f6e 207b 6c61 7965 725f 7665  ersion {layer_ve
+00023490: 7273 696f 6e5f 6172 6e7d 2064 6f65 7320  rsion_arn} does 
+000234a0: 6e6f 7420 6578 6973 742e 222c 2054 7970  not exist.", Typ
+000234b0: 653d 2255 7365 7222 0a20 2020 2020 2020  e="User".       
+000234c0: 2020 2020 2029 0a0a 2020 2020 2020 2020       )..        
+000234d0: 6c61 7965 725f 7665 7273 696f 6e20 3d20  layer_version = 
+000234e0: 6c61 7965 722e 6c61 7965 725f 7665 7273  layer.layer_vers
+000234f0: 696f 6e73 2e67 6574 2873 7472 2876 6572  ions.get(str(ver
+00023500: 7369 6f6e 5f6e 756d 6265 7229 290a 2020  sion_number)).  
+00023510: 2020 2020 2020 6966 206c 6179 6572 5f76        if layer_v
+00023520: 6572 7369 6f6e 2069 7320 4e6f 6e65 3a0a  ersion is None:.
+00023530: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00023540: 6520 5265 736f 7572 6365 4e6f 7446 6f75  e ResourceNotFou
+00023550: 6e64 4578 6365 7074 696f 6e28 0a20 2020  ndException(.   
+00023560: 2020 2020 2020 2020 2020 2020 2066 224c               f"L
+00023570: 6179 6572 2076 6572 7369 6f6e 207b 6c61  ayer version {la
+00023580: 7965 725f 7665 7273 696f 6e5f 6172 6e7d  yer_version_arn}
+00023590: 2064 6f65 7320 6e6f 7420 6578 6973 742e   does not exist.
+000235a0: 222c 2054 7970 653d 2255 7365 7222 0a20  ", Type="User". 
+000235b0: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
+000235c0: 2020 2020 2020 6966 206c 6179 6572 5f76        if layer_v
+000235d0: 6572 7369 6f6e 2e70 6f6c 6963 7920 6973  ersion.policy is
+000235e0: 204e 6f6e 653a 0a20 2020 2020 2020 2020   None:.         
+000235f0: 2020 2072 6169 7365 2052 6573 6f75 7263     raise Resourc
+00023600: 654e 6f74 466f 756e 6445 7863 6570 7469  eNotFoundExcepti
+00023610: 6f6e 280a 2020 2020 2020 2020 2020 2020  on(.            
+00023620: 2020 2020 224e 6f20 706f 6c69 6379 2069      "No policy i
+00023630: 7320 6173 736f 6369 6174 6564 2077 6974  s associated wit
+00023640: 6820 7468 6520 6769 7665 6e20 7265 736f  h the given reso
+00023650: 7572 6365 2e22 2c20 5479 7065 3d22 5573  urce.", Type="Us
+00023660: 6572 220a 2020 2020 2020 2020 2020 2020  er".            
+00023670: 290a 0a20 2020 2020 2020 2072 6574 7572  )..        retur
+00023680: 6e20 4765 744c 6179 6572 5665 7273 696f  n GetLayerVersio
+00023690: 6e50 6f6c 6963 7952 6573 706f 6e73 6528  nPolicyResponse(
+000236a0: 0a20 2020 2020 2020 2020 2020 2050 6f6c  .            Pol
+000236b0: 6963 793d 6a73 6f6e 2e64 756d 7073 280a  icy=json.dumps(.
+000236c0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000236d0: 7b0a 2020 2020 2020 2020 2020 2020 2020  {.              
+000236e0: 2020 2020 2020 2256 6572 7369 6f6e 223a        "Version":
+000236f0: 206c 6179 6572 5f76 6572 7369 6f6e 2e70   layer_version.p
+00023700: 6f6c 6963 792e 7665 7273 696f 6e2c 0a20  olicy.version,. 
+00023710: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023720: 2020 2022 4964 223a 206c 6179 6572 5f76     "Id": layer_v
+00023730: 6572 7369 6f6e 2e70 6f6c 6963 792e 6964  ersion.policy.id
+00023740: 2c0a 2020 2020 2020 2020 2020 2020 2020  ,.              
+00023750: 2020 2020 2020 2253 7461 7465 6d65 6e74        "Statement
+00023760: 223a 205b 0a20 2020 2020 2020 2020 2020  ": [.           
+00023770: 2020 2020 2020 2020 2020 2020 207b 0a20               {. 
 00023780: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023790: 2020 2020 2020 2020 2020 2022 4566 6665             "Effe
-000237a0: 6374 223a 2022 416c 6c6f 7722 2c0a 2020  ct": "Allow",.  
+00023790: 2020 2020 2020 2020 2020 2022 5369 6422             "Sid"
+000237a0: 3a20 7073 2e73 6964 2c0a 2020 2020 2020  : ps.sid,.      
 000237b0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-000237c0: 2020 2020 2020 2020 2020 2250 7269 6e63            "Princ
-000237d0: 6970 616c 223a 2070 732e 7072 696e 6369  ipal": ps.princi
-000237e0: 7061 6c2c 0a20 2020 2020 2020 2020 2020  pal,.           
-000237f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023800: 2022 4163 7469 6f6e 223a 2070 732e 6163   "Action": ps.ac
-00023810: 7469 6f6e 2c0a 2020 2020 2020 2020 2020  tion,.          
-00023820: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023830: 2020 2252 6573 6f75 7263 6522 3a20 6c61    "Resource": la
-00023840: 7965 725f 7665 7273 696f 6e2e 6c61 7965  yer_version.laye
-00023850: 725f 7665 7273 696f 6e5f 6172 6e2c 0a20  r_version_arn,. 
-00023860: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023870: 2020 2020 2020 207d 0a20 2020 2020 2020         }.       
-00023880: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00023890: 2066 6f72 2070 7320 696e 206c 6179 6572   for ps in layer
-000238a0: 5f76 6572 7369 6f6e 2e70 6f6c 6963 792e  _version.policy.
-000238b0: 7374 6174 656d 656e 7473 2e76 616c 7565  statements.value
-000238c0: 7328 290a 2020 2020 2020 2020 2020 2020  s().            
-000238d0: 2020 2020 2020 2020 5d2c 0a20 2020 2020          ],.     
-000238e0: 2020 2020 2020 2020 2020 207d 0a20 2020             }.   
-000238f0: 2020 2020 2020 2020 2029 2c0a 2020 2020           ),.    
-00023900: 2020 2020 2020 2020 5265 7669 7369 6f6e          Revision
-00023910: 4964 3d6c 6179 6572 5f76 6572 7369 6f6e  Id=layer_version
-00023920: 2e70 6f6c 6963 792e 7265 7669 7369 6f6e  .policy.revision
-00023930: 5f69 642c 0a20 2020 2020 2020 2029 0a0a  _id,.        )..
-00023940: 2020 2020 2320 3d3d 3d3d 3d3d 3d3d 3d3d      # ==========
-00023950: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00023960: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 2020  =============.  
-00023970: 2020 2320 3d3d 3d3d 3d3d 3d20 2046 756e    # =======  Fun
-00023980: 6374 696f 6e20 436f 6e63 7572 7265 6e63  ction Concurrenc
-00023990: 7920 203d 3d3d 3d3d 3d3d 3d0a 2020 2020  y  ========.    
-000239a0: 2320 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  # ==============
-000239b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000239c0: 3d3d 3d3d 3d3d 3d3d 3d0a 2020 2020 2320  =========.    # 
-000239d0: 2852 6573 6572 7665 6429 2066 756e 6374  (Reserved) funct
-000239e0: 696f 6e20 636f 6e63 7572 7265 6e63 7920  ion concurrency 
-000239f0: 6973 2073 636f 7065 6420 746f 2074 6865  is scoped to the
-00023a00: 2077 686f 6c65 2066 756e 6374 696f 6e0a   whole function.
-00023a10: 0a20 2020 2064 6566 2067 6574 5f66 756e  .    def get_fun
-00023a20: 6374 696f 6e5f 636f 6e63 7572 7265 6e63  ction_concurrenc
-00023a30: 7928 0a20 2020 2020 2020 2073 656c 662c  y(.        self,
-00023a40: 2063 6f6e 7465 7874 3a20 5265 7175 6573   context: Reques
-00023a50: 7443 6f6e 7465 7874 2c20 6675 6e63 7469  tContext, functi
-00023a60: 6f6e 5f6e 616d 653a 2046 756e 6374 696f  on_name: Functio
-00023a70: 6e4e 616d 650a 2020 2020 2920 2d3e 2047  nName.    ) -> G
-00023a80: 6574 4675 6e63 7469 6f6e 436f 6e63 7572  etFunctionConcur
-00023a90: 7265 6e63 7952 6573 706f 6e73 653a 0a20  rencyResponse:. 
-00023aa0: 2020 2020 2020 2066 756e 6374 696f 6e5f         function_
-00023ab0: 6e61 6d65 203d 2061 7069 5f75 7469 6c73  name = api_utils
-00023ac0: 2e67 6574 5f66 756e 6374 696f 6e5f 6e61  .get_function_na
-00023ad0: 6d65 280a 2020 2020 2020 2020 2020 2020  me(.            
-00023ae0: 6675 6e63 7469 6f6e 5f61 726e 5f6f 725f  function_arn_or_
-00023af0: 6e61 6d65 3d66 756e 6374 696f 6e5f 6e61  name=function_na
-00023b00: 6d65 2c20 7265 6769 6f6e 3d63 6f6e 7465  me, region=conte
-00023b10: 7874 2e72 6567 696f 6e0a 2020 2020 2020  xt.region.      
-00023b20: 2020 290a 2020 2020 2020 2020 666e 203d    ).        fn =
-00023b30: 2073 656c 662e 5f67 6574 5f66 756e 6374   self._get_funct
-00023b40: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
-00023b50: 2066 756e 6374 696f 6e5f 6e61 6d65 3d66   function_name=f
-00023b60: 756e 6374 696f 6e5f 6e61 6d65 2c20 7265  unction_name, re
-00023b70: 6769 6f6e 3d63 6f6e 7465 7874 2e72 6567  gion=context.reg
-00023b80: 696f 6e2c 2061 6363 6f75 6e74 5f69 643d  ion, account_id=
-00023b90: 636f 6e74 6578 742e 6163 636f 756e 745f  context.account_
-00023ba0: 6964 0a20 2020 2020 2020 2029 0a20 2020  id.        ).   
-00023bb0: 2020 2020 2072 6574 7572 6e20 4765 7446       return GetF
-00023bc0: 756e 6374 696f 6e43 6f6e 6375 7272 656e  unctionConcurren
-00023bd0: 6379 5265 7370 6f6e 7365 280a 2020 2020  cyResponse(.    
-00023be0: 2020 2020 2020 2020 5265 7365 7276 6564          Reserved
-00023bf0: 436f 6e63 7572 7265 6e74 4578 6563 7574  ConcurrentExecut
-00023c00: 696f 6e73 3d66 6e2e 7265 7365 7276 6564  ions=fn.reserved
-00023c10: 5f63 6f6e 6375 7272 656e 745f 6578 6563  _concurrent_exec
-00023c20: 7574 696f 6e73 0a20 2020 2020 2020 2029  utions.        )
-00023c30: 0a0a 2020 2020 6465 6620 7075 745f 6675  ..    def put_fu
-00023c40: 6e63 7469 6f6e 5f63 6f6e 6375 7272 656e  nction_concurren
-00023c50: 6379 280a 2020 2020 2020 2020 7365 6c66  cy(.        self
-00023c60: 2c0a 2020 2020 2020 2020 636f 6e74 6578  ,.        contex
-00023c70: 743a 2052 6571 7565 7374 436f 6e74 6578  t: RequestContex
-00023c80: 742c 0a20 2020 2020 2020 2066 756e 6374  t,.        funct
-00023c90: 696f 6e5f 6e61 6d65 3a20 4675 6e63 7469  ion_name: Functi
-00023ca0: 6f6e 4e61 6d65 2c0a 2020 2020 2020 2020  onName,.        
-00023cb0: 7265 7365 7276 6564 5f63 6f6e 6375 7272  reserved_concurr
-00023cc0: 656e 745f 6578 6563 7574 696f 6e73 3a20  ent_executions: 
-00023cd0: 5265 7365 7276 6564 436f 6e63 7572 7265  ReservedConcurre
-00023ce0: 6e74 4578 6563 7574 696f 6e73 2c0a 2020  ntExecutions,.  
-00023cf0: 2020 2920 2d3e 2043 6f6e 6375 7272 656e    ) -> Concurren
-00023d00: 6379 3a0a 2020 2020 2020 2020 6675 6e63  cy:.        func
-00023d10: 7469 6f6e 5f6e 616d 652c 2071 7561 6c69  tion_name, quali
-00023d20: 6669 6572 203d 2061 7069 5f75 7469 6c73  fier = api_utils
-00023d30: 2e67 6574 5f6e 616d 655f 616e 645f 7175  .get_name_and_qu
-00023d40: 616c 6966 6965 7228 0a20 2020 2020 2020  alifier(.       
-00023d50: 2020 2020 2066 756e 6374 696f 6e5f 6e61       function_na
-00023d60: 6d65 2c20 4e6f 6e65 2c20 636f 6e74 6578  me, None, contex
-00023d70: 742e 7265 6769 6f6e 0a20 2020 2020 2020  t.region.       
-00023d80: 2029 0a20 2020 2020 2020 2069 6620 7175   ).        if qu
-00023d90: 616c 6966 6965 723a 0a20 2020 2020 2020  alifier:.       
-00023da0: 2020 2020 2072 6169 7365 2049 6e76 616c       raise Inval
-00023db0: 6964 5061 7261 6d65 7465 7256 616c 7565  idParameterValue
-00023dc0: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
-00023dd0: 2020 2020 2020 2020 2020 2022 5468 6973             "This
-00023de0: 206f 7065 7261 7469 6f6e 2069 7320 7065   operation is pe
-00023df0: 726d 6974 7465 6420 6f6e 204c 616d 6264  rmitted on Lambd
-00023e00: 6120 6675 6e63 7469 6f6e 7320 6f6e 6c79  a functions only
-00023e10: 2e20 416c 6961 7365 7320 616e 6420 7665  . Aliases and ve
-00023e20: 7273 696f 6e73 2064 6f20 6e6f 7420 7375  rsions do not su
-00023e30: 7070 6f72 7420 7468 6973 206f 7065 7261  pport this opera
-00023e40: 7469 6f6e 2e20 506c 6561 7365 2073 7065  tion. Please spe
-00023e50: 6369 6679 2065 6974 6865 7220 6120 6675  cify either a fu
-00023e60: 6e63 7469 6f6e 206e 616d 6520 6f72 2061  nction name or a
-00023e70: 6e20 756e 7175 616c 6966 6965 6420 6675  n unqualified fu
-00023e80: 6e63 7469 6f6e 2041 524e 2e22 2c0a 2020  nction ARN.",.  
-00023e90: 2020 2020 2020 2020 2020 2020 2020 5479                Ty
-00023ea0: 7065 3d22 5573 6572 222c 0a20 2020 2020  pe="User",.     
-00023eb0: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-00023ec0: 2020 7374 6174 6520 3d20 6c61 6d62 6461    state = lambda
-00023ed0: 5f73 746f 7265 735b 636f 6e74 6578 742e  _stores[context.
-00023ee0: 6163 636f 756e 745f 6964 5d5b 636f 6e74  account_id][cont
-00023ef0: 6578 742e 7265 6769 6f6e 5d0a 2020 2020  ext.region].    
-00023f00: 2020 2020 666e 203d 2073 7461 7465 2e66      fn = state.f
-00023f10: 756e 6374 696f 6e73 2e67 6574 2866 756e  unctions.get(fun
-00023f20: 6374 696f 6e5f 6e61 6d65 290a 2020 2020  ction_name).    
-00023f30: 2020 2020 6966 206e 6f74 2066 6e3a 0a20      if not fn:. 
-00023f40: 2020 2020 2020 2020 2020 2066 6e5f 6172             fn_ar
-00023f50: 6e20 3d20 6170 695f 7574 696c 732e 7175  n = api_utils.qu
-00023f60: 616c 6966 6965 645f 6c61 6d62 6461 5f61  alified_lambda_a
-00023f70: 726e 280a 2020 2020 2020 2020 2020 2020  rn(.            
-00023f80: 2020 2020 6675 6e63 7469 6f6e 5f6e 616d      function_nam
-00023f90: 652c 0a20 2020 2020 2020 2020 2020 2020  e,.             
-00023fa0: 2020 2071 7561 6c69 6669 6572 3d22 244c     qualifier="$L
-00023fb0: 4154 4553 5422 2c0a 2020 2020 2020 2020  ATEST",.        
-00023fc0: 2020 2020 2020 2020 6163 636f 756e 743d          account=
-00023fd0: 636f 6e74 6578 742e 6163 636f 756e 745f  context.account_
-00023fe0: 6964 2c0a 2020 2020 2020 2020 2020 2020  id,.            
-00023ff0: 2020 2020 7265 6769 6f6e 3d63 6f6e 7465      region=conte
-00024000: 7874 2e72 6567 696f 6e2c 0a20 2020 2020  xt.region,.     
-00024010: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
-00024020: 2020 2020 2072 6169 7365 2052 6573 6f75       raise Resou
-00024030: 7263 654e 6f74 466f 756e 6445 7863 6570  rceNotFoundExcep
-00024040: 7469 6f6e 2866 2246 756e 6374 696f 6e20  tion(f"Function 
-00024050: 6e6f 7420 666f 756e 643a 207b 666e 5f61  not found: {fn_a
-00024060: 726e 7d22 2c20 5479 7065 3d22 5573 6572  rn}", Type="User
-00024070: 2229 0a0a 2020 2020 2020 2020 7365 7474  ")..        sett
-00024080: 696e 6773 203d 2073 656c 662e 6765 745f  ings = self.get_
-00024090: 6163 636f 756e 745f 7365 7474 696e 6773  account_settings
-000240a0: 2863 6f6e 7465 7874 290a 2020 2020 2020  (context).      
-000240b0: 2020 756e 7265 7365 7276 6564 5f63 6f6e    unreserved_con
-000240c0: 6375 7272 656e 745f 6578 6563 7574 696f  current_executio
-000240d0: 6e73 203d 2073 6574 7469 6e67 735b 2241  ns = settings["A
-000240e0: 6363 6f75 6e74 4c69 6d69 7422 5d5b 0a20  ccountLimit"][. 
-000240f0: 2020 2020 2020 2020 2020 2022 556e 7265             "Unre
-00024100: 7365 7276 6564 436f 6e63 7572 7265 6e74  servedConcurrent
-00024110: 4578 6563 7574 696f 6e73 220a 2020 2020  Executions".    
-00024120: 2020 2020 5d0a 0a20 2020 2020 2020 2069      ]..        i
-00024130: 6620 280a 2020 2020 2020 2020 2020 2020  f (.            
-00024140: 756e 7265 7365 7276 6564 5f63 6f6e 6375  unreserved_concu
-00024150: 7272 656e 745f 6578 6563 7574 696f 6e73  rrent_executions
-00024160: 202d 2072 6573 6572 7665 645f 636f 6e63   - reserved_conc
-00024170: 7572 7265 6e74 5f65 7865 6375 7469 6f6e  urrent_execution
-00024180: 730a 2020 2020 2020 2020 2920 3c20 636f  s.        ) < co
-00024190: 6e66 6967 2e4c 414d 4244 415f 4c49 4d49  nfig.LAMBDA_LIMI
-000241a0: 5453 5f4d 494e 494d 554d 5f55 4e52 4553  TS_MINIMUM_UNRES
-000241b0: 4552 5645 445f 434f 4e43 5552 5245 4e43  ERVED_CONCURRENC
-000241c0: 593a 0a20 2020 2020 2020 2020 2020 2072  Y:.            r
-000241d0: 6169 7365 2049 6e76 616c 6964 5061 7261  aise InvalidPara
-000241e0: 6d65 7465 7256 616c 7565 4578 6365 7074  meterValueExcept
-000241f0: 696f 6e28 0a20 2020 2020 2020 2020 2020  ion(.           
-00024200: 2020 2020 2066 2253 7065 6369 6669 6564       f"Specified
-00024210: 2052 6573 6572 7665 6443 6f6e 6375 7272   ReservedConcurr
-00024220: 656e 7445 7865 6375 7469 6f6e 7320 666f  entExecutions fo
-00024230: 7220 6675 6e63 7469 6f6e 2064 6563 7265  r function decre
-00024240: 6173 6573 2061 6363 6f75 6e74 2773 2055  ases account's U
-00024250: 6e72 6573 6572 7665 6443 6f6e 6375 7272  nreservedConcurr
-00024260: 656e 7445 7865 6375 7469 6f6e 2062 656c  entExecution bel
-00024270: 6f77 2069 7473 206d 696e 696d 756d 2076  ow its minimum v
-00024280: 616c 7565 206f 6620 5b7b 636f 6e66 6967  alue of [{config
-00024290: 2e4c 414d 4244 415f 4c49 4d49 5453 5f4d  .LAMBDA_LIMITS_M
-000242a0: 494e 494d 554d 5f55 4e52 4553 4552 5645  INIMUM_UNRESERVE
-000242b0: 445f 434f 4e43 5552 5245 4e43 597d 5d2e  D_CONCURRENCY}].
-000242c0: 220a 2020 2020 2020 2020 2020 2020 290a  ".            ).
-000242d0: 0a20 2020 2020 2020 2074 6f74 616c 5f70  .        total_p
-000242e0: 726f 7669 7369 6f6e 6564 5f63 6f6e 6375  rovisioned_concu
-000242f0: 7272 656e 6379 203d 2073 756d 280a 2020  rrency = sum(.  
-00024300: 2020 2020 2020 2020 2020 5b0a 2020 2020            [.    
-00024310: 2020 2020 2020 2020 2020 2020 7072 6f76              prov
-00024320: 6973 696f 6e65 645f 636f 6e66 6967 732e  isioned_configs.
-00024330: 7072 6f76 6973 696f 6e65 645f 636f 6e63  provisioned_conc
-00024340: 7572 7265 6e74 5f65 7865 6375 7469 6f6e  urrent_execution
-00024350: 730a 2020 2020 2020 2020 2020 2020 2020  s.              
-00024360: 2020 666f 7220 7072 6f76 6973 696f 6e65    for provisione
-00024370: 645f 636f 6e66 6967 7320 696e 2066 6e2e  d_configs in fn.
-00024380: 7072 6f76 6973 696f 6e65 645f 636f 6e63  provisioned_conc
-00024390: 7572 7265 6e63 795f 636f 6e66 6967 732e  urrency_configs.
-000243a0: 7661 6c75 6573 2829 0a20 2020 2020 2020  values().       
-000243b0: 2020 2020 205d 0a20 2020 2020 2020 2029       ].        )
-000243c0: 0a20 2020 2020 2020 2069 6620 746f 7461  .        if tota
-000243d0: 6c5f 7072 6f76 6973 696f 6e65 645f 636f  l_provisioned_co
-000243e0: 6e63 7572 7265 6e63 7920 3e20 7265 7365  ncurrency > rese
-000243f0: 7276 6564 5f63 6f6e 6375 7272 656e 745f  rved_concurrent_
-00024400: 6578 6563 7574 696f 6e73 3a0a 2020 2020  executions:.    
-00024410: 2020 2020 2020 2020 7261 6973 6520 496e          raise In
-00024420: 7661 6c69 6450 6172 616d 6574 6572 5661  validParameterVa
-00024430: 6c75 6545 7863 6570 7469 6f6e 280a 2020  lueException(.  
-00024440: 2020 2020 2020 2020 2020 2020 2020 6622                f"
-00024450: 2052 6573 6572 7665 6443 6f6e 6375 7272   ReservedConcurr
-00024460: 656e 7445 7865 6375 7469 6f6e 7320 207b  entExecutions  {
-00024470: 7265 7365 7276 6564 5f63 6f6e 6375 7272  reserved_concurr
-00024480: 656e 745f 6578 6563 7574 696f 6e73 7d20  ent_executions} 
-00024490: 7368 6f75 6c64 206e 6f74 2062 6520 6c6f  should not be lo
-000244a0: 7765 7220 7468 616e 2066 756e 6374 696f  wer than functio
-000244b0: 6e27 7320 746f 7461 6c20 7072 6f76 6973  n's total provis
-000244c0: 696f 6e65 6420 636f 6e63 7572 7265 6e63  ioned concurrenc
-000244d0: 7920 5b7b 746f 7461 6c5f 7072 6f76 6973  y [{total_provis
-000244e0: 696f 6e65 645f 636f 6e63 7572 7265 6e63  ioned_concurrenc
-000244f0: 797d 5d2e 220a 2020 2020 2020 2020 2020  y}].".          
-00024500: 2020 290a 0a20 2020 2020 2020 2066 6e2e    )..        fn.
-00024510: 7265 7365 7276 6564 5f63 6f6e 6375 7272  reserved_concurr
-00024520: 656e 745f 6578 6563 7574 696f 6e73 203d  ent_executions =
-00024530: 2072 6573 6572 7665 645f 636f 6e63 7572   reserved_concur
-00024540: 7265 6e74 5f65 7865 6375 7469 6f6e 730a  rent_executions.
-00024550: 0a20 2020 2020 2020 2072 6574 7572 6e20  .        return 
-00024560: 436f 6e63 7572 7265 6e63 7928 5265 7365  Concurrency(Rese
-00024570: 7276 6564 436f 6e63 7572 7265 6e74 4578  rvedConcurrentEx
-00024580: 6563 7574 696f 6e73 3d66 6e2e 7265 7365  ecutions=fn.rese
-00024590: 7276 6564 5f63 6f6e 6375 7272 656e 745f  rved_concurrent_
-000245a0: 6578 6563 7574 696f 6e73 290a 0a20 2020  executions)..   
-000245b0: 2064 6566 2064 656c 6574 655f 6675 6e63   def delete_func
-000245c0: 7469 6f6e 5f63 6f6e 6375 7272 656e 6379  tion_concurrency
-000245d0: 280a 2020 2020 2020 2020 7365 6c66 2c20  (.        self, 
-000245e0: 636f 6e74 6578 743a 2052 6571 7565 7374  context: Request
-000245f0: 436f 6e74 6578 742c 2066 756e 6374 696f  Context, functio
-00024600: 6e5f 6e61 6d65 3a20 4675 6e63 7469 6f6e  n_name: Function
-00024610: 4e61 6d65 0a20 2020 2029 202d 3e20 4e6f  Name.    ) -> No
-00024620: 6e65 3a0a 2020 2020 2020 2020 7374 6174  ne:.        stat
-00024630: 6520 3d20 6c61 6d62 6461 5f73 746f 7265  e = lambda_store
-00024640: 735b 636f 6e74 6578 742e 6163 636f 756e  s[context.accoun
-00024650: 745f 6964 5d5b 636f 6e74 6578 742e 7265  t_id][context.re
-00024660: 6769 6f6e 5d0a 2020 2020 2020 2020 666e  gion].        fn
-00024670: 203d 2073 7461 7465 2e66 756e 6374 696f   = state.functio
-00024680: 6e73 2e67 6574 2866 756e 6374 696f 6e5f  ns.get(function_
-00024690: 6e61 6d65 290a 2020 2020 2020 2020 666e  name).        fn
-000246a0: 2e72 6573 6572 7665 645f 636f 6e63 7572  .reserved_concur
-000246b0: 7265 6e74 5f65 7865 6375 7469 6f6e 7320  rent_executions 
-000246c0: 3d20 4e6f 6e65 0a0a 2020 2020 2320 3d3d  = None..    # ==
-000246d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000246e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-000246f0: 3d3d 3d3d 3d0a 2020 2020 2320 3d3d 3d3d  =====.    # ====
-00024700: 3d3d 3d3d 3d3d 3d3d 3d3d 3d20 2054 4147  ===========  TAG
-00024710: 5320 2020 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  S   ============
-00024720: 3d3d 3d0a 2020 2020 2320 3d3d 3d3d 3d3d  ===.    # ======
-00024730: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00024740: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00024750: 3d0a 2020 2020 2320 6f6e 6c79 2066 756e  =.    # only fun
-00024760: 6374 696f 6e20 4152 4e73 2061 7265 2061  ction ARNs are a
-00024770: 7661 696c 6162 6c65 2066 6f72 2074 6167  vailable for tag
-00024780: 6769 6e67 0a0a 2020 2020 6465 6620 5f67  ging..    def _g
-00024790: 6574 5f74 6167 7328 7365 6c66 2c20 6675  et_tags(self, fu
-000247a0: 6e63 7469 6f6e 3a20 4675 6e63 7469 6f6e  nction: Function
-000247b0: 2920 2d3e 2064 6963 745b 7374 722c 2073  ) -> dict[str, s
-000247c0: 7472 5d3a 0a20 2020 2020 2020 2072 6574  tr]:.        ret
-000247d0: 7572 6e20 6675 6e63 7469 6f6e 2e74 6167  urn function.tag
-000247e0: 7320 6f72 207b 7d0a 0a20 2020 2064 6566  s or {}..    def
-000247f0: 205f 7374 6f72 655f 7461 6773 2873 656c   _store_tags(sel
-00024800: 662c 2066 756e 6374 696f 6e3a 2046 756e  f, function: Fun
-00024810: 6374 696f 6e2c 2074 6167 733a 2064 6963  ction, tags: dic
-00024820: 745b 7374 722c 2073 7472 5d29 3a0a 2020  t[str, str]):.  
-00024830: 2020 2020 2020 6966 206c 656e 2874 6167        if len(tag
-00024840: 7329 203e 204c 414d 4244 415f 5441 475f  s) > LAMBDA_TAG_
-00024850: 4c49 4d49 545f 5045 525f 5245 534f 5552  LIMIT_PER_RESOUR
-00024860: 4345 3a0a 2020 2020 2020 2020 2020 2020  CE:.            
-00024870: 7261 6973 6520 496e 7661 6c69 6450 6172  raise InvalidPar
-00024880: 616d 6574 6572 5661 6c75 6545 7863 6570  ameterValueExcep
-00024890: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
-000248a0: 2020 2020 2020 224e 756d 6265 7220 6f66        "Number of
-000248b0: 2074 6167 7320 6578 6365 6564 7320 6675   tags exceeds fu
-000248c0: 6e63 7469 6f6e 2074 6167 206c 696d 6974  nction tag limit
-000248d0: 2e22 2c20 5479 7065 3d22 5573 6572 220a  .", Type="User".
-000248e0: 2020 2020 2020 2020 2020 2020 290a 2020              ).  
-000248f0: 2020 2020 2020 7769 7468 2066 756e 6374        with funct
-00024900: 696f 6e2e 6c6f 636b 3a0a 2020 2020 2020  ion.lock:.      
-00024910: 2020 2020 2020 6675 6e63 7469 6f6e 2e74        function.t
-00024920: 6167 7320 3d20 7461 6773 0a20 2020 2020  ags = tags.     
-00024930: 2020 2020 2020 2023 2064 6972 7479 2068         # dirty h
-00024940: 6163 6b20 666f 7220 6368 616e 6765 6420  ack for changed 
-00024950: 7265 7669 7369 6f6e 2069 642c 2073 686f  revision id, sho
-00024960: 756c 6420 7265 6576 616c 7561 7465 206d  uld reevaluate m
-00024970: 6f64 656c 2074 6f20 7072 6576 656e 7420  odel to prevent 
-00024980: 7468 6973 3a0a 2020 2020 2020 2020 2020  this:.          
-00024990: 2020 6c61 7465 7374 5f76 6572 7369 6f6e    latest_version
-000249a0: 203d 2066 756e 6374 696f 6e2e 7665 7273   = function.vers
-000249b0: 696f 6e73 5b22 244c 4154 4553 5422 5d0a  ions["$LATEST"].
-000249c0: 2020 2020 2020 2020 2020 2020 6675 6e63              func
-000249d0: 7469 6f6e 2e76 6572 7369 6f6e 735b 2224  tion.versions["$
-000249e0: 4c41 5445 5354 225d 203d 2064 6174 6163  LATEST"] = datac
-000249f0: 6c61 7373 6573 2e72 6570 6c61 6365 280a  lasses.replace(.
-00024a00: 2020 2020 2020 2020 2020 2020 2020 2020                  
-00024a10: 6c61 7465 7374 5f76 6572 7369 6f6e 2c20  latest_version, 
-00024a20: 636f 6e66 6967 3d64 6174 6163 6c61 7373  config=dataclass
-00024a30: 6573 2e72 6570 6c61 6365 286c 6174 6573  es.replace(lates
-00024a40: 745f 7665 7273 696f 6e2e 636f 6e66 6967  t_version.config
-00024a50: 290a 2020 2020 2020 2020 2020 2020 290a  ).            ).
-00024a60: 0a20 2020 2064 6566 205f 7570 6461 7465  .    def _update
-00024a70: 5f74 6167 7328 7365 6c66 2c20 6675 6e63  _tags(self, func
-00024a80: 7469 6f6e 3a20 4675 6e63 7469 6f6e 2c20  tion: Function, 
-00024a90: 7461 6773 3a20 6469 6374 5b73 7472 2c20  tags: dict[str, 
-00024aa0: 7374 725d 293a 0a20 2020 2020 2020 2077  str]):.        w
-00024ab0: 6974 6820 6675 6e63 7469 6f6e 2e6c 6f63  ith function.loc
-00024ac0: 6b3a 0a20 2020 2020 2020 2020 2020 2073  k:.            s
-00024ad0: 746f 7265 645f 7461 6773 203d 2066 756e  tored_tags = fun
-00024ae0: 6374 696f 6e2e 7461 6773 206f 7220 7b7d  ction.tags or {}
-00024af0: 0a20 2020 2020 2020 2020 2020 2073 746f  .            sto
-00024b00: 7265 645f 7461 6773 207c 3d20 7461 6773  red_tags |= tags
-00024b10: 0a20 2020 2020 2020 2020 2020 2073 656c  .            sel
-00024b20: 662e 5f73 746f 7265 5f74 6167 7328 6675  f._store_tags(fu
-00024b30: 6e63 7469 6f6e 3d66 756e 6374 696f 6e2c  nction=function,
-00024b40: 2074 6167 733d 7374 6f72 6564 5f74 6167   tags=stored_tag
-00024b50: 7329 0a0a 2020 2020 6465 6620 7461 675f  s)..    def tag_
-00024b60: 7265 736f 7572 6365 2873 656c 662c 2063  resource(self, c
-00024b70: 6f6e 7465 7874 3a20 5265 7175 6573 7443  ontext: RequestC
-00024b80: 6f6e 7465 7874 2c20 7265 736f 7572 6365  ontext, resource
-00024b90: 3a20 4675 6e63 7469 6f6e 4172 6e2c 2074  : FunctionArn, t
-00024ba0: 6167 733a 2054 6167 7329 202d 3e20 4e6f  ags: Tags) -> No
-00024bb0: 6e65 3a0a 2020 2020 2020 2020 6966 206e  ne:.        if n
-00024bc0: 6f74 2074 6167 733a 0a20 2020 2020 2020  ot tags:.       
-00024bd0: 2020 2020 2072 6169 7365 2049 6e76 616c       raise Inval
-00024be0: 6964 5061 7261 6d65 7465 7256 616c 7565  idParameterValue
-00024bf0: 4578 6365 7074 696f 6e28 0a20 2020 2020  Exception(.     
-00024c00: 2020 2020 2020 2020 2020 2022 416e 2065             "An e
-00024c10: 7272 6f72 206f 6363 7572 7265 6420 616e  rror occurred an
-00024c20: 6420 7468 6520 7265 7175 6573 7420 6361  d the request ca
-00024c30: 6e6e 6f74 2062 6520 7072 6f63 6573 7365  nnot be processe
-00024c40: 642e 222c 2054 7970 653d 2255 7365 7222  d.", Type="User"
-00024c50: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
-00024c60: 2020 2020 2020 2020 7061 7474 6572 6e5f          pattern_
-00024c70: 6d61 7463 6820 3d20 6170 695f 7574 696c  match = api_util
-00024c80: 732e 4655 4c4c 5f46 4e5f 4152 4e5f 5041  s.FULL_FN_ARN_PA
-00024c90: 5454 4552 4e2e 7365 6172 6368 2872 6573  TTERN.search(res
-00024ca0: 6f75 7263 6529 0a20 2020 2020 2020 2069  ource).        i
-00024cb0: 6620 6e6f 7420 7061 7474 6572 6e5f 6d61  f not pattern_ma
-00024cc0: 7463 683a 0a20 2020 2020 2020 2020 2020  tch:.           
-00024cd0: 2072 6169 7365 2056 616c 6964 6174 696f   raise Validatio
-00024ce0: 6e45 7863 6570 7469 6f6e 280a 2020 2020  nException(.    
-00024cf0: 2020 2020 2020 2020 2020 2020 7266 2231              rf"1
-00024d00: 2076 616c 6964 6174 696f 6e20 6572 726f   validation erro
-00024d10: 7220 6465 7465 6374 6564 3a20 5661 6c75  r detected: Valu
-00024d20: 6520 277b 7265 736f 7572 6365 7d27 2061  e '{resource}' a
-00024d30: 7420 2772 6573 6f75 7263 6527 2066 6169  t 'resource' fai
-00024d40: 6c65 6420 746f 2073 6174 6973 6679 2063  led to satisfy c
-00024d50: 6f6e 7374 7261 696e 743a 204d 656d 6265  onstraint: Membe
-00024d60: 7220 6d75 7374 2073 6174 6973 6679 2072  r must satisfy r
-00024d70: 6567 756c 6172 2065 7870 7265 7373 696f  egular expressio
-00024d80: 6e20 7061 7474 6572 6e3a 2061 726e 3a28  n pattern: arn:(
-00024d90: 6177 735b 612d 7a41 2d5a 2d5d 2a29 3f3a  aws[a-zA-Z-]*)?:
-00024da0: 6c61 6d62 6461 3a5b 612d 7a5d 7b7b 327d  lambda:[a-z]{{2}
-00024db0: 7d28 282d 676f 7629 7c28 2d69 736f 2862  }((-gov)|(-iso(b
-00024dc0: 3f29 2929 3f2d 5b61 2d7a 5d2b 2d5c 647b  ?)))?-[a-z]+-\d{
-00024dd0: 7b31 7d7d 3a5c 647b 7b31 327d 7d3a 6675  {1}}:\d{{12}}:fu
-00024de0: 6e63 7469 6f6e 3a5b 612d 7a41 2d5a 302d  nction:[a-zA-Z0-
-00024df0: 392d 5f5d 2b28 3a28 5c24 4c41 5445 5354  9-_]+(:(\$LATEST
-00024e00: 7c5b 612d 7a41 2d5a 302d 392d 5f5d 2b29  |[a-zA-Z0-9-_]+)
-00024e10: 293f 220a 2020 2020 2020 2020 2020 2020  )?".            
-00024e20: 290a 0a20 2020 2020 2020 2067 726f 7570  )..        group
-00024e30: 7320 3d20 7061 7474 6572 6e5f 6d61 7463  s = pattern_matc
-00024e40: 682e 6772 6f75 7064 6963 7428 290a 2020  h.groupdict().  
-00024e50: 2020 2020 2020 666e 5f6e 616d 6520 3d20        fn_name = 
-00024e60: 6772 6f75 7073 2e67 6574 2822 6675 6e63  groups.get("func
-00024e70: 7469 6f6e 5f6e 616d 6522 290a 0a20 2020  tion_name")..   
-00024e80: 2020 2020 2069 6620 6772 6f75 7073 2e67       if groups.g
-00024e90: 6574 2822 7175 616c 6966 6965 7222 293a  et("qualifier"):
-00024ea0: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00024eb0: 7365 2049 6e76 616c 6964 5061 7261 6d65  se InvalidParame
-00024ec0: 7465 7256 616c 7565 4578 6365 7074 696f  terValueExceptio
-00024ed0: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
-00024ee0: 2020 2022 5461 6767 696e 6720 6f70 6572     "Tagging oper
-00024ef0: 6174 696f 6e73 2061 7265 2070 6572 6d69  ations are permi
-00024f00: 7474 6564 206f 6e20 4c61 6d62 6461 2066  tted on Lambda f
-00024f10: 756e 6374 696f 6e73 206f 6e6c 792e 2054  unctions only. T
-00024f20: 6167 7320 6f6e 2061 6c69 6173 6573 2061  ags on aliases a
-00024f30: 6e64 2076 6572 7369 6f6e 7320 6172 6520  nd versions are 
-00024f40: 6e6f 7420 7375 7070 6f72 7465 642e 2050  not supported. P
-00024f50: 6c65 6173 6520 7370 6563 6966 7920 6569  lease specify ei
-00024f60: 7468 6572 2061 2066 756e 6374 696f 6e20  ther a function 
-00024f70: 6e61 6d65 206f 7220 6120 6675 6e63 7469  name or a functi
-00024f80: 6f6e 2041 524e 2e22 2c0a 2020 2020 2020  on ARN.",.      
-00024f90: 2020 2020 2020 2020 2020 5479 7065 3d22            Type="
-00024fa0: 5573 6572 222c 0a20 2020 2020 2020 2020  User",.         
-00024fb0: 2020 2029 0a0a 2020 2020 2020 2020 666e     )..        fn
-00024fc0: 203d 2073 656c 662e 5f67 6574 5f66 756e   = self._get_fun
-00024fd0: 6374 696f 6e28 0a20 2020 2020 2020 2020  ction(.         
-00024fe0: 2020 2066 756e 6374 696f 6e5f 6e61 6d65     function_name
-00024ff0: 3d66 6e5f 6e61 6d65 2c20 6163 636f 756e  =fn_name, accoun
-00025000: 745f 6964 3d63 6f6e 7465 7874 2e61 6363  t_id=context.acc
-00025010: 6f75 6e74 5f69 642c 2072 6567 696f 6e3d  ount_id, region=
-00025020: 636f 6e74 6578 742e 7265 6769 6f6e 0a20  context.region. 
-00025030: 2020 2020 2020 2029 0a0a 2020 2020 2020         )..      
-00025040: 2020 7365 6c66 2e5f 7570 6461 7465 5f74    self._update_t
-00025050: 6167 7328 666e 2c20 7461 6773 290a 0a20  ags(fn, tags).. 
-00025060: 2020 2064 6566 206c 6973 745f 7461 6773     def list_tags
-00025070: 2873 656c 662c 2063 6f6e 7465 7874 3a20  (self, context: 
-00025080: 5265 7175 6573 7443 6f6e 7465 7874 2c20  RequestContext, 
-00025090: 7265 736f 7572 6365 3a20 4675 6e63 7469  resource: Functi
-000250a0: 6f6e 4172 6e29 202d 3e20 4c69 7374 5461  onArn) -> ListTa
-000250b0: 6773 5265 7370 6f6e 7365 3a0a 2020 2020  gsResponse:.    
-000250c0: 2020 2020 6675 6e63 7469 6f6e 5f6e 616d      function_nam
-000250d0: 6520 3d20 6170 695f 7574 696c 732e 6765  e = api_utils.ge
-000250e0: 745f 6675 6e63 7469 6f6e 5f6e 616d 6528  t_function_name(
-000250f0: 7265 736f 7572 6365 2c20 636f 6e74 6578  resource, contex
-00025100: 742e 7265 6769 6f6e 290a 2020 2020 2020  t.region).      
-00025110: 2020 666e 203d 2073 656c 662e 5f67 6574    fn = self._get
-00025120: 5f66 756e 6374 696f 6e28 0a20 2020 2020  _function(.     
-00025130: 2020 2020 2020 2066 756e 6374 696f 6e5f         function_
-00025140: 6e61 6d65 3d66 756e 6374 696f 6e5f 6e61  name=function_na
-00025150: 6d65 2c20 6163 636f 756e 745f 6964 3d63  me, account_id=c
-00025160: 6f6e 7465 7874 2e61 6363 6f75 6e74 5f69  ontext.account_i
-00025170: 642c 2072 6567 696f 6e3d 636f 6e74 6578  d, region=contex
-00025180: 742e 7265 6769 6f6e 0a20 2020 2020 2020  t.region.       
-00025190: 2029 0a0a 2020 2020 2020 2020 7265 7475   )..        retu
-000251a0: 726e 204c 6973 7454 6167 7352 6573 706f  rn ListTagsRespo
-000251b0: 6e73 6528 5461 6773 3d73 656c 662e 5f67  nse(Tags=self._g
-000251c0: 6574 5f74 6167 7328 666e 2929 0a0a 2020  et_tags(fn))..  
-000251d0: 2020 6465 6620 756e 7461 675f 7265 736f    def untag_reso
-000251e0: 7572 6365 280a 2020 2020 2020 2020 7365  urce(.        se
-000251f0: 6c66 2c20 636f 6e74 6578 743a 2052 6571  lf, context: Req
-00025200: 7565 7374 436f 6e74 6578 742c 2072 6573  uestContext, res
-00025210: 6f75 7263 653a 2046 756e 6374 696f 6e41  ource: FunctionA
-00025220: 726e 2c20 7461 675f 6b65 7973 3a20 5461  rn, tag_keys: Ta
-00025230: 674b 6579 4c69 7374 0a20 2020 2029 202d  gKeyList.    ) -
-00025240: 3e20 4e6f 6e65 3a0a 2020 2020 2020 2020  > None:.        
-00025250: 6966 206e 6f74 2074 6167 5f6b 6579 733a  if not tag_keys:
-00025260: 0a20 2020 2020 2020 2020 2020 2072 6169  .            rai
-00025270: 7365 2056 616c 6964 6174 696f 6e45 7863  se ValidationExc
-00025280: 6570 7469 6f6e 280a 2020 2020 2020 2020  eption(.        
-00025290: 2020 2020 2020 2020 2231 2076 616c 6964          "1 valid
-000252a0: 6174 696f 6e20 6572 726f 7220 6465 7465  ation error dete
-000252b0: 6374 6564 3a20 5661 6c75 6520 6e75 6c6c  cted: Value null
-000252c0: 2061 7420 2774 6167 4b65 7973 2720 6661   at 'tagKeys' fa
-000252d0: 696c 6564 2074 6f20 7361 7469 7366 7920  iled to satisfy 
-000252e0: 636f 6e73 7472 6169 6e74 3a20 4d65 6d62  constraint: Memb
-000252f0: 6572 206d 7573 7420 6e6f 7420 6265 206e  er must not be n
-00025300: 756c 6c22 0a20 2020 2020 2020 2020 2020  ull".           
-00025310: 2029 2020 2320 7368 6f75 6c64 2070 726f   )  # should pro
-00025320: 6261 626c 7920 6265 2067 656e 6572 616c  bably be general
-00025330: 697a 6564 2061 2062 6974 0a0a 2020 2020  ized a bit..    
-00025340: 2020 2020 6675 6e63 7469 6f6e 5f6e 616d      function_nam
-00025350: 6520 3d20 6170 695f 7574 696c 732e 6765  e = api_utils.ge
-00025360: 745f 6675 6e63 7469 6f6e 5f6e 616d 6528  t_function_name(
-00025370: 7265 736f 7572 6365 2c20 636f 6e74 6578  resource, contex
-00025380: 742e 7265 6769 6f6e 290a 2020 2020 2020  t.region).      
-00025390: 2020 666e 203d 2073 656c 662e 5f67 6574    fn = self._get
-000253a0: 5f66 756e 6374 696f 6e28 0a20 2020 2020  _function(.     
-000253b0: 2020 2020 2020 2066 756e 6374 696f 6e5f         function_
-000253c0: 6e61 6d65 3d66 756e 6374 696f 6e5f 6e61  name=function_na
-000253d0: 6d65 2c20 6163 636f 756e 745f 6964 3d63  me, account_id=c
-000253e0: 6f6e 7465 7874 2e61 6363 6f75 6e74 5f69  ontext.account_i
-000253f0: 642c 2072 6567 696f 6e3d 636f 6e74 6578  d, region=contex
-00025400: 742e 7265 6769 6f6e 0a20 2020 2020 2020  t.region.       
-00025410: 2029 0a0a 2020 2020 2020 2020 2320 636f   )..        # co
-00025420: 7079 2066 6972 7374 2c20 7468 656e 2073  py first, then s
-00025430: 6574 2065 7870 6c69 6369 746c 7920 696e  et explicitly in
-00025440: 2073 746f 7265 2074 6167 730a 2020 2020   store tags.    
-00025450: 2020 2020 7461 6773 203d 2064 6963 7428      tags = dict(
-00025460: 666e 2e74 6167 7320 6f72 207b 7d29 0a20  fn.tags or {}). 
-00025470: 2020 2020 2020 2069 6620 7461 6773 3a0a         if tags:.
-00025480: 2020 2020 2020 2020 2020 2020 666f 7220              for 
-00025490: 6b65 7920 696e 2074 6167 5f6b 6579 733a  key in tag_keys:
-000254a0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000254b0: 2069 6620 6b65 7920 696e 2074 6167 733a   if key in tags:
-000254c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
-000254d0: 2020 2020 2074 6167 732e 706f 7028 6b65       tags.pop(ke
-000254e0: 7929 0a20 2020 2020 2020 2073 656c 662e  y).        self.
-000254f0: 5f73 746f 7265 5f74 6167 7328 6675 6e63  _store_tags(func
-00025500: 7469 6f6e 3d66 6e2c 2074 6167 733d 7461  tion=fn, tags=ta
-00025510: 6773 290a 0a20 2020 2023 203d 3d3d 3d3d  gs)..    # =====
-00025520: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00025530: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00025540: 3d3d 0a20 2020 2023 203d 3d3d 3d3d 3d3d  ==.    # =======
-00025550: 2020 4c45 4741 4359 202f 2044 4550 5245    LEGACY / DEPRE
-00025560: 4341 5445 4420 2020 3d3d 3d3d 3d3d 3d3d  CATED   ========
-00025570: 0a20 2020 2023 203d 3d3d 3d3d 3d3d 3d3d  .    # =========
-00025580: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
-00025590: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a0a  ==============..
-000255a0: 2020 2020 6465 6620 696e 766f 6b65 5f61      def invoke_a
-000255b0: 7379 6e63 280a 2020 2020 2020 2020 7365  sync(.        se
-000255c0: 6c66 2c0a 2020 2020 2020 2020 636f 6e74  lf,.        cont
-000255d0: 6578 743a 2052 6571 7565 7374 436f 6e74  ext: RequestCont
-000255e0: 6578 742c 0a20 2020 2020 2020 2066 756e  ext,.        fun
-000255f0: 6374 696f 6e5f 6e61 6d65 3a20 4e61 6d65  ction_name: Name
-00025600: 7370 6163 6564 4675 6e63 7469 6f6e 4e61  spacedFunctionNa
-00025610: 6d65 2c0a 2020 2020 2020 2020 696e 766f  me,.        invo
-00025620: 6b65 5f61 7267 733a 2049 4f5b 426c 6f62  ke_args: IO[Blob
-00025630: 5374 7265 616d 5d2c 0a20 2020 2029 202d  Stream],.    ) -
-00025640: 3e20 496e 766f 6b65 4173 796e 6352 6573  > InvokeAsyncRes
-00025650: 706f 6e73 653a 0a20 2020 2020 2020 2022  ponse:.        "
-00025660: 2222 4c45 4741 4359 2041 5049 2065 6e64  ""LEGACY API end
-00025670: 706f 696e 742e 2045 7665 6e20 4157 5320  point. Even AWS 
-00025680: 6865 6176 696c 7920 6469 7363 6f75 7261  heavily discoura
-00025690: 6765 7320 6974 7320 7573 6167 652e 2222  ges its usage.""
-000256a0: 220a 2020 2020 2020 2020 7261 6973 6520  ".        raise 
-000256b0: 4e6f 7449 6d70 6c65 6d65 6e74 6564 4572  NotImplementedEr
-000256c0: 726f 720a                                ror.
+000237c0: 2020 2020 2020 2245 6666 6563 7422 3a20        "Effect": 
+000237d0: 2241 6c6c 6f77 222c 0a20 2020 2020 2020  "Allow",.       
+000237e0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000237f0: 2020 2020 2022 5072 696e 6369 7061 6c22       "Principal"
+00023800: 3a20 7073 2e70 7269 6e63 6970 616c 2c0a  : ps.principal,.
+00023810: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023820: 2020 2020 2020 2020 2020 2020 2241 6374              "Act
+00023830: 696f 6e22 3a20 7073 2e61 6374 696f 6e2c  ion": ps.action,
+00023840: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+00023850: 2020 2020 2020 2020 2020 2020 2022 5265               "Re
+00023860: 736f 7572 6365 223a 206c 6179 6572 5f76  source": layer_v
+00023870: 6572 7369 6f6e 2e6c 6179 6572 5f76 6572  ersion.layer_ver
+00023880: 7369 6f6e 5f61 726e 2c0a 2020 2020 2020  sion_arn,.      
+00023890: 2020 2020 2020 2020 2020 2020 2020 2020                  
+000238a0: 2020 7d0a 2020 2020 2020 2020 2020 2020    }.            
+000238b0: 2020 2020 2020 2020 2020 2020 666f 7220              for 
+000238c0: 7073 2069 6e20 6c61 7965 725f 7665 7273  ps in layer_vers
+000238d0: 696f 6e2e 706f 6c69 6379 2e73 7461 7465  ion.policy.state
+000238e0: 6d65 6e74 732e 7661 6c75 6573 2829 0a20  ments.values(). 
+000238f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00023900: 2020 205d 2c0a 2020 2020 2020 2020 2020     ],.          
+00023910: 2020 2020 2020 7d0a 2020 2020 2020 2020        }.        
+00023920: 2020 2020 292c 0a20 2020 2020 2020 2020      ),.         
+00023930: 2020 2052 6576 6973 696f 6e49 643d 6c61     RevisionId=la
+00023940: 7965 725f 7665 7273 696f 6e2e 706f 6c69  yer_version.poli
+00023950: 6379 2e72 6576 6973 696f 6e5f 6964 2c0a  cy.revision_id,.
+00023960: 2020 2020 2020 2020 290a 0a20 2020 2023          )..    #
+00023970: 203d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d   ===============
+00023980: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00023990: 3d3d 3d3d 3d3d 3d3d 0a20 2020 2023 203d  ========.    # =
+000239a0: 3d3d 3d3d 3d3d 2020 4675 6e63 7469 6f6e  ======  Function
+000239b0: 2043 6f6e 6375 7272 656e 6379 2020 3d3d   Concurrency  ==
+000239c0: 3d3d 3d3d 3d3d 0a20 2020 2023 203d 3d3d  ======.    # ===
+000239d0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000239e0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000239f0: 3d3d 3d3d 0a20 2020 2023 2028 5265 7365  ====.    # (Rese
+00023a00: 7276 6564 2920 6675 6e63 7469 6f6e 2063  rved) function c
+00023a10: 6f6e 6375 7272 656e 6379 2069 7320 7363  oncurrency is sc
+00023a20: 6f70 6564 2074 6f20 7468 6520 7768 6f6c  oped to the whol
+00023a30: 6520 6675 6e63 7469 6f6e 0a0a 2020 2020  e function..    
+00023a40: 6465 6620 6765 745f 6675 6e63 7469 6f6e  def get_function
+00023a50: 5f63 6f6e 6375 7272 656e 6379 280a 2020  _concurrency(.  
+00023a60: 2020 2020 2020 7365 6c66 2c20 636f 6e74        self, cont
+00023a70: 6578 743a 2052 6571 7565 7374 436f 6e74  ext: RequestCont
+00023a80: 6578 742c 2066 756e 6374 696f 6e5f 6e61  ext, function_na
+00023a90: 6d65 3a20 4675 6e63 7469 6f6e 4e61 6d65  me: FunctionName
+00023aa0: 0a20 2020 2029 202d 3e20 4765 7446 756e  .    ) -> GetFun
+00023ab0: 6374 696f 6e43 6f6e 6375 7272 656e 6379  ctionConcurrency
+00023ac0: 5265 7370 6f6e 7365 3a0a 2020 2020 2020  Response:.      
+00023ad0: 2020 6675 6e63 7469 6f6e 5f6e 616d 6520    function_name 
+00023ae0: 3d20 6170 695f 7574 696c 732e 6765 745f  = api_utils.get_
+00023af0: 6675 6e63 7469 6f6e 5f6e 616d 6528 0a20  function_name(. 
+00023b00: 2020 2020 2020 2020 2020 2066 756e 6374             funct
+00023b10: 696f 6e5f 6172 6e5f 6f72 5f6e 616d 653d  ion_arn_or_name=
+00023b20: 6675 6e63 7469 6f6e 5f6e 616d 652c 2072  function_name, r
+00023b30: 6567 696f 6e3d 636f 6e74 6578 742e 7265  egion=context.re
+00023b40: 6769 6f6e 0a20 2020 2020 2020 2029 0a20  gion.        ). 
+00023b50: 2020 2020 2020 2066 6e20 3d20 7365 6c66         fn = self
+00023b60: 2e5f 6765 745f 6675 6e63 7469 6f6e 280a  ._get_function(.
+00023b70: 2020 2020 2020 2020 2020 2020 6675 6e63              func
+00023b80: 7469 6f6e 5f6e 616d 653d 6675 6e63 7469  tion_name=functi
+00023b90: 6f6e 5f6e 616d 652c 2072 6567 696f 6e3d  on_name, region=
+00023ba0: 636f 6e74 6578 742e 7265 6769 6f6e 2c20  context.region, 
+00023bb0: 6163 636f 756e 745f 6964 3d63 6f6e 7465  account_id=conte
+00023bc0: 7874 2e61 6363 6f75 6e74 5f69 640a 2020  xt.account_id.  
+00023bd0: 2020 2020 2020 290a 2020 2020 2020 2020        ).        
+00023be0: 7265 7475 726e 2047 6574 4675 6e63 7469  return GetFuncti
+00023bf0: 6f6e 436f 6e63 7572 7265 6e63 7952 6573  onConcurrencyRes
+00023c00: 706f 6e73 6528 0a20 2020 2020 2020 2020  ponse(.         
+00023c10: 2020 2052 6573 6572 7665 6443 6f6e 6375     ReservedConcu
+00023c20: 7272 656e 7445 7865 6375 7469 6f6e 733d  rrentExecutions=
+00023c30: 666e 2e72 6573 6572 7665 645f 636f 6e63  fn.reserved_conc
+00023c40: 7572 7265 6e74 5f65 7865 6375 7469 6f6e  urrent_execution
+00023c50: 730a 2020 2020 2020 2020 290a 0a20 2020  s.        )..   
+00023c60: 2064 6566 2070 7574 5f66 756e 6374 696f   def put_functio
+00023c70: 6e5f 636f 6e63 7572 7265 6e63 7928 0a20  n_concurrency(. 
+00023c80: 2020 2020 2020 2073 656c 662c 0a20 2020         self,.   
+00023c90: 2020 2020 2063 6f6e 7465 7874 3a20 5265       context: Re
+00023ca0: 7175 6573 7443 6f6e 7465 7874 2c0a 2020  questContext,.  
+00023cb0: 2020 2020 2020 6675 6e63 7469 6f6e 5f6e        function_n
+00023cc0: 616d 653a 2046 756e 6374 696f 6e4e 616d  ame: FunctionNam
+00023cd0: 652c 0a20 2020 2020 2020 2072 6573 6572  e,.        reser
+00023ce0: 7665 645f 636f 6e63 7572 7265 6e74 5f65  ved_concurrent_e
+00023cf0: 7865 6375 7469 6f6e 733a 2052 6573 6572  xecutions: Reser
+00023d00: 7665 6443 6f6e 6375 7272 656e 7445 7865  vedConcurrentExe
+00023d10: 6375 7469 6f6e 732c 0a20 2020 2029 202d  cutions,.    ) -
+00023d20: 3e20 436f 6e63 7572 7265 6e63 793a 0a20  > Concurrency:. 
+00023d30: 2020 2020 2020 2066 756e 6374 696f 6e5f         function_
+00023d40: 6e61 6d65 2c20 7175 616c 6966 6965 7220  name, qualifier 
+00023d50: 3d20 6170 695f 7574 696c 732e 6765 745f  = api_utils.get_
+00023d60: 6e61 6d65 5f61 6e64 5f71 7561 6c69 6669  name_and_qualifi
+00023d70: 6572 280a 2020 2020 2020 2020 2020 2020  er(.            
+00023d80: 6675 6e63 7469 6f6e 5f6e 616d 652c 204e  function_name, N
+00023d90: 6f6e 652c 2063 6f6e 7465 7874 2e72 6567  one, context.reg
+00023da0: 696f 6e0a 2020 2020 2020 2020 290a 2020  ion.        ).  
+00023db0: 2020 2020 2020 6966 2071 7561 6c69 6669        if qualifi
+00023dc0: 6572 3a0a 2020 2020 2020 2020 2020 2020  er:.            
+00023dd0: 7261 6973 6520 496e 7661 6c69 6450 6172  raise InvalidPar
+00023de0: 616d 6574 6572 5661 6c75 6545 7863 6570  ameterValueExcep
+00023df0: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
+00023e00: 2020 2020 2020 2254 6869 7320 6f70 6572        "This oper
+00023e10: 6174 696f 6e20 6973 2070 6572 6d69 7474  ation is permitt
+00023e20: 6564 206f 6e20 4c61 6d62 6461 2066 756e  ed on Lambda fun
+00023e30: 6374 696f 6e73 206f 6e6c 792e 2041 6c69  ctions only. Ali
+00023e40: 6173 6573 2061 6e64 2076 6572 7369 6f6e  ases and version
+00023e50: 7320 646f 206e 6f74 2073 7570 706f 7274  s do not support
+00023e60: 2074 6869 7320 6f70 6572 6174 696f 6e2e   this operation.
+00023e70: 2050 6c65 6173 6520 7370 6563 6966 7920   Please specify 
+00023e80: 6569 7468 6572 2061 2066 756e 6374 696f  either a functio
+00023e90: 6e20 6e61 6d65 206f 7220 616e 2075 6e71  n name or an unq
+00023ea0: 7561 6c69 6669 6564 2066 756e 6374 696f  ualified functio
+00023eb0: 6e20 4152 4e2e 222c 0a20 2020 2020 2020  n ARN.",.       
+00023ec0: 2020 2020 2020 2020 2054 7970 653d 2255           Type="U
+00023ed0: 7365 7222 2c0a 2020 2020 2020 2020 2020  ser",.          
+00023ee0: 2020 290a 0a20 2020 2020 2020 2073 7461    )..        sta
+00023ef0: 7465 203d 206c 616d 6264 615f 7374 6f72  te = lambda_stor
+00023f00: 6573 5b63 6f6e 7465 7874 2e61 6363 6f75  es[context.accou
+00023f10: 6e74 5f69 645d 5b63 6f6e 7465 7874 2e72  nt_id][context.r
+00023f20: 6567 696f 6e5d 0a20 2020 2020 2020 2066  egion].        f
+00023f30: 6e20 3d20 7374 6174 652e 6675 6e63 7469  n = state.functi
+00023f40: 6f6e 732e 6765 7428 6675 6e63 7469 6f6e  ons.get(function
+00023f50: 5f6e 616d 6529 0a20 2020 2020 2020 2069  _name).        i
+00023f60: 6620 6e6f 7420 666e 3a0a 2020 2020 2020  f not fn:.      
+00023f70: 2020 2020 2020 666e 5f61 726e 203d 2061        fn_arn = a
+00023f80: 7069 5f75 7469 6c73 2e71 7561 6c69 6669  pi_utils.qualifi
+00023f90: 6564 5f6c 616d 6264 615f 6172 6e28 0a20  ed_lambda_arn(. 
+00023fa0: 2020 2020 2020 2020 2020 2020 2020 2066                 f
+00023fb0: 756e 6374 696f 6e5f 6e61 6d65 2c0a 2020  unction_name,.  
+00023fc0: 2020 2020 2020 2020 2020 2020 2020 7175                qu
+00023fd0: 616c 6966 6965 723d 2224 4c41 5445 5354  alifier="$LATEST
+00023fe0: 222c 0a20 2020 2020 2020 2020 2020 2020  ",.             
+00023ff0: 2020 2061 6363 6f75 6e74 3d63 6f6e 7465     account=conte
+00024000: 7874 2e61 6363 6f75 6e74 5f69 642c 0a20  xt.account_id,. 
+00024010: 2020 2020 2020 2020 2020 2020 2020 2072                 r
+00024020: 6567 696f 6e3d 636f 6e74 6578 742e 7265  egion=context.re
+00024030: 6769 6f6e 2c0a 2020 2020 2020 2020 2020  gion,.          
+00024040: 2020 290a 2020 2020 2020 2020 2020 2020    ).            
+00024050: 7261 6973 6520 5265 736f 7572 6365 4e6f  raise ResourceNo
+00024060: 7446 6f75 6e64 4578 6365 7074 696f 6e28  tFoundException(
+00024070: 6622 4675 6e63 7469 6f6e 206e 6f74 2066  f"Function not f
+00024080: 6f75 6e64 3a20 7b66 6e5f 6172 6e7d 222c  ound: {fn_arn}",
+00024090: 2054 7970 653d 2255 7365 7222 290a 0a20   Type="User").. 
+000240a0: 2020 2020 2020 2073 6574 7469 6e67 7320         settings 
+000240b0: 3d20 7365 6c66 2e67 6574 5f61 6363 6f75  = self.get_accou
+000240c0: 6e74 5f73 6574 7469 6e67 7328 636f 6e74  nt_settings(cont
+000240d0: 6578 7429 0a20 2020 2020 2020 2075 6e72  ext).        unr
+000240e0: 6573 6572 7665 645f 636f 6e63 7572 7265  eserved_concurre
+000240f0: 6e74 5f65 7865 6375 7469 6f6e 7320 3d20  nt_executions = 
+00024100: 7365 7474 696e 6773 5b22 4163 636f 756e  settings["Accoun
+00024110: 744c 696d 6974 225d 5b0a 2020 2020 2020  tLimit"][.      
+00024120: 2020 2020 2020 2255 6e72 6573 6572 7665        "Unreserve
+00024130: 6443 6f6e 6375 7272 656e 7445 7865 6375  dConcurrentExecu
+00024140: 7469 6f6e 7322 0a20 2020 2020 2020 205d  tions".        ]
+00024150: 0a0a 2020 2020 2020 2020 6966 2028 0a20  ..        if (. 
+00024160: 2020 2020 2020 2020 2020 2075 6e72 6573             unres
+00024170: 6572 7665 645f 636f 6e63 7572 7265 6e74  erved_concurrent
+00024180: 5f65 7865 6375 7469 6f6e 7320 2d20 7265  _executions - re
+00024190: 7365 7276 6564 5f63 6f6e 6375 7272 656e  served_concurren
+000241a0: 745f 6578 6563 7574 696f 6e73 0a20 2020  t_executions.   
+000241b0: 2020 2020 2029 203c 2063 6f6e 6669 672e       ) < config.
+000241c0: 4c41 4d42 4441 5f4c 494d 4954 535f 4d49  LAMBDA_LIMITS_MI
+000241d0: 4e49 4d55 4d5f 554e 5245 5345 5256 4544  NIMUM_UNRESERVED
+000241e0: 5f43 4f4e 4355 5252 454e 4359 3a0a 2020  _CONCURRENCY:.  
+000241f0: 2020 2020 2020 2020 2020 7261 6973 6520            raise 
+00024200: 496e 7661 6c69 6450 6172 616d 6574 6572  InvalidParameter
+00024210: 5661 6c75 6545 7863 6570 7469 6f6e 280a  ValueException(.
+00024220: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00024230: 6622 5370 6563 6966 6965 6420 5265 7365  f"Specified Rese
+00024240: 7276 6564 436f 6e63 7572 7265 6e74 4578  rvedConcurrentEx
+00024250: 6563 7574 696f 6e73 2066 6f72 2066 756e  ecutions for fun
+00024260: 6374 696f 6e20 6465 6372 6561 7365 7320  ction decreases 
+00024270: 6163 636f 756e 7427 7320 556e 7265 7365  account's Unrese
+00024280: 7276 6564 436f 6e63 7572 7265 6e74 4578  rvedConcurrentEx
+00024290: 6563 7574 696f 6e20 6265 6c6f 7720 6974  ecution below it
+000242a0: 7320 6d69 6e69 6d75 6d20 7661 6c75 6520  s minimum value 
+000242b0: 6f66 205b 7b63 6f6e 6669 672e 4c41 4d42  of [{config.LAMB
+000242c0: 4441 5f4c 494d 4954 535f 4d49 4e49 4d55  DA_LIMITS_MINIMU
+000242d0: 4d5f 554e 5245 5345 5256 4544 5f43 4f4e  M_UNRESERVED_CON
+000242e0: 4355 5252 454e 4359 7d5d 2e22 0a20 2020  CURRENCY}].".   
+000242f0: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
+00024300: 2020 2020 746f 7461 6c5f 7072 6f76 6973      total_provis
+00024310: 696f 6e65 645f 636f 6e63 7572 7265 6e63  ioned_concurrenc
+00024320: 7920 3d20 7375 6d28 0a20 2020 2020 2020  y = sum(.       
+00024330: 2020 2020 205b 0a20 2020 2020 2020 2020       [.         
+00024340: 2020 2020 2020 2070 726f 7669 7369 6f6e         provision
+00024350: 6564 5f63 6f6e 6669 6773 2e70 726f 7669  ed_configs.provi
+00024360: 7369 6f6e 6564 5f63 6f6e 6375 7272 656e  sioned_concurren
+00024370: 745f 6578 6563 7574 696f 6e73 0a20 2020  t_executions.   
+00024380: 2020 2020 2020 2020 2020 2020 2066 6f72               for
+00024390: 2070 726f 7669 7369 6f6e 6564 5f63 6f6e   provisioned_con
+000243a0: 6669 6773 2069 6e20 666e 2e70 726f 7669  figs in fn.provi
+000243b0: 7369 6f6e 6564 5f63 6f6e 6375 7272 656e  sioned_concurren
+000243c0: 6379 5f63 6f6e 6669 6773 2e76 616c 7565  cy_configs.value
+000243d0: 7328 290a 2020 2020 2020 2020 2020 2020  s().            
+000243e0: 5d0a 2020 2020 2020 2020 290a 2020 2020  ].        ).    
+000243f0: 2020 2020 6966 2074 6f74 616c 5f70 726f      if total_pro
+00024400: 7669 7369 6f6e 6564 5f63 6f6e 6375 7272  visioned_concurr
+00024410: 656e 6379 203e 2072 6573 6572 7665 645f  ency > reserved_
+00024420: 636f 6e63 7572 7265 6e74 5f65 7865 6375  concurrent_execu
+00024430: 7469 6f6e 733a 0a20 2020 2020 2020 2020  tions:.         
+00024440: 2020 2072 6169 7365 2049 6e76 616c 6964     raise Invalid
+00024450: 5061 7261 6d65 7465 7256 616c 7565 4578  ParameterValueEx
+00024460: 6365 7074 696f 6e28 0a20 2020 2020 2020  ception(.       
+00024470: 2020 2020 2020 2020 2066 2220 5265 7365           f" Rese
+00024480: 7276 6564 436f 6e63 7572 7265 6e74 4578  rvedConcurrentEx
+00024490: 6563 7574 696f 6e73 2020 7b72 6573 6572  ecutions  {reser
+000244a0: 7665 645f 636f 6e63 7572 7265 6e74 5f65  ved_concurrent_e
+000244b0: 7865 6375 7469 6f6e 737d 2073 686f 756c  xecutions} shoul
+000244c0: 6420 6e6f 7420 6265 206c 6f77 6572 2074  d not be lower t
+000244d0: 6861 6e20 6675 6e63 7469 6f6e 2773 2074  han function's t
+000244e0: 6f74 616c 2070 726f 7669 7369 6f6e 6564  otal provisioned
+000244f0: 2063 6f6e 6375 7272 656e 6379 205b 7b74   concurrency [{t
+00024500: 6f74 616c 5f70 726f 7669 7369 6f6e 6564  otal_provisioned
+00024510: 5f63 6f6e 6375 7272 656e 6379 7d5d 2e22  _concurrency}]."
+00024520: 0a20 2020 2020 2020 2020 2020 2029 0a0a  .            )..
+00024530: 2020 2020 2020 2020 666e 2e72 6573 6572          fn.reser
+00024540: 7665 645f 636f 6e63 7572 7265 6e74 5f65  ved_concurrent_e
+00024550: 7865 6375 7469 6f6e 7320 3d20 7265 7365  xecutions = rese
+00024560: 7276 6564 5f63 6f6e 6375 7272 656e 745f  rved_concurrent_
+00024570: 6578 6563 7574 696f 6e73 0a0a 2020 2020  executions..    
+00024580: 2020 2020 7265 7475 726e 2043 6f6e 6375      return Concu
+00024590: 7272 656e 6379 2852 6573 6572 7665 6443  rrency(ReservedC
+000245a0: 6f6e 6375 7272 656e 7445 7865 6375 7469  oncurrentExecuti
+000245b0: 6f6e 733d 666e 2e72 6573 6572 7665 645f  ons=fn.reserved_
+000245c0: 636f 6e63 7572 7265 6e74 5f65 7865 6375  concurrent_execu
+000245d0: 7469 6f6e 7329 0a0a 2020 2020 6465 6620  tions)..    def 
+000245e0: 6465 6c65 7465 5f66 756e 6374 696f 6e5f  delete_function_
+000245f0: 636f 6e63 7572 7265 6e63 7928 0a20 2020  concurrency(.   
+00024600: 2020 2020 2073 656c 662c 2063 6f6e 7465       self, conte
+00024610: 7874 3a20 5265 7175 6573 7443 6f6e 7465  xt: RequestConte
+00024620: 7874 2c20 6675 6e63 7469 6f6e 5f6e 616d  xt, function_nam
+00024630: 653a 2046 756e 6374 696f 6e4e 616d 650a  e: FunctionName.
+00024640: 2020 2020 2920 2d3e 204e 6f6e 653a 0a20      ) -> None:. 
+00024650: 2020 2020 2020 2073 7461 7465 203d 206c         state = l
+00024660: 616d 6264 615f 7374 6f72 6573 5b63 6f6e  ambda_stores[con
+00024670: 7465 7874 2e61 6363 6f75 6e74 5f69 645d  text.account_id]
+00024680: 5b63 6f6e 7465 7874 2e72 6567 696f 6e5d  [context.region]
+00024690: 0a20 2020 2020 2020 2066 6e20 3d20 7374  .        fn = st
+000246a0: 6174 652e 6675 6e63 7469 6f6e 732e 6765  ate.functions.ge
+000246b0: 7428 6675 6e63 7469 6f6e 5f6e 616d 6529  t(function_name)
+000246c0: 0a20 2020 2020 2020 2066 6e2e 7265 7365  .        fn.rese
+000246d0: 7276 6564 5f63 6f6e 6375 7272 656e 745f  rved_concurrent_
+000246e0: 6578 6563 7574 696f 6e73 203d 204e 6f6e  executions = Non
+000246f0: 650a 0a20 2020 2023 203d 3d3d 3d3d 3d3d  e..    # =======
+00024700: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00024710: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00024720: 0a20 2020 2023 203d 3d3d 3d3d 3d3d 3d3d  .    # =========
+00024730: 3d3d 3d3d 3d3d 2020 5441 4753 2020 203d  ======  TAGS   =
+00024740: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a20  ==============. 
+00024750: 2020 2023 203d 3d3d 3d3d 3d3d 3d3d 3d3d     # ===========
+00024760: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00024770: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 0a20 2020  ============.   
+00024780: 2023 206f 6e6c 7920 6675 6e63 7469 6f6e   # only function
+00024790: 2041 524e 7320 6172 6520 6176 6169 6c61   ARNs are availa
+000247a0: 626c 6520 666f 7220 7461 6767 696e 670a  ble for tagging.
+000247b0: 0a20 2020 2064 6566 205f 6765 745f 7461  .    def _get_ta
+000247c0: 6773 2873 656c 662c 2066 756e 6374 696f  gs(self, functio
+000247d0: 6e3a 2046 756e 6374 696f 6e29 202d 3e20  n: Function) -> 
+000247e0: 6469 6374 5b73 7472 2c20 7374 725d 3a0a  dict[str, str]:.
+000247f0: 2020 2020 2020 2020 7265 7475 726e 2066          return f
+00024800: 756e 6374 696f 6e2e 7461 6773 206f 7220  unction.tags or 
+00024810: 7b7d 0a0a 2020 2020 6465 6620 5f73 746f  {}..    def _sto
+00024820: 7265 5f74 6167 7328 7365 6c66 2c20 6675  re_tags(self, fu
+00024830: 6e63 7469 6f6e 3a20 4675 6e63 7469 6f6e  nction: Function
+00024840: 2c20 7461 6773 3a20 6469 6374 5b73 7472  , tags: dict[str
+00024850: 2c20 7374 725d 293a 0a20 2020 2020 2020  , str]):.       
+00024860: 2069 6620 6c65 6e28 7461 6773 2920 3e20   if len(tags) > 
+00024870: 4c41 4d42 4441 5f54 4147 5f4c 494d 4954  LAMBDA_TAG_LIMIT
+00024880: 5f50 4552 5f52 4553 4f55 5243 453a 0a20  _PER_RESOURCE:. 
+00024890: 2020 2020 2020 2020 2020 2072 6169 7365             raise
+000248a0: 2049 6e76 616c 6964 5061 7261 6d65 7465   InvalidParamete
+000248b0: 7256 616c 7565 4578 6365 7074 696f 6e28  rValueException(
+000248c0: 0a20 2020 2020 2020 2020 2020 2020 2020  .               
+000248d0: 2022 4e75 6d62 6572 206f 6620 7461 6773   "Number of tags
+000248e0: 2065 7863 6565 6473 2066 756e 6374 696f   exceeds functio
+000248f0: 6e20 7461 6720 6c69 6d69 742e 222c 2054  n tag limit.", T
+00024900: 7970 653d 2255 7365 7222 0a20 2020 2020  ype="User".     
+00024910: 2020 2020 2020 2029 0a20 2020 2020 2020         ).       
+00024920: 2077 6974 6820 6675 6e63 7469 6f6e 2e6c   with function.l
+00024930: 6f63 6b3a 0a20 2020 2020 2020 2020 2020  ock:.           
+00024940: 2066 756e 6374 696f 6e2e 7461 6773 203d   function.tags =
+00024950: 2074 6167 730a 2020 2020 2020 2020 2020   tags.          
+00024960: 2020 2320 6469 7274 7920 6861 636b 2066    # dirty hack f
+00024970: 6f72 2063 6861 6e67 6564 2072 6576 6973  or changed revis
+00024980: 696f 6e20 6964 2c20 7368 6f75 6c64 2072  ion id, should r
+00024990: 6565 7661 6c75 6174 6520 6d6f 6465 6c20  eevaluate model 
+000249a0: 746f 2070 7265 7665 6e74 2074 6869 733a  to prevent this:
+000249b0: 0a20 2020 2020 2020 2020 2020 206c 6174  .            lat
+000249c0: 6573 745f 7665 7273 696f 6e20 3d20 6675  est_version = fu
+000249d0: 6e63 7469 6f6e 2e76 6572 7369 6f6e 735b  nction.versions[
+000249e0: 2224 4c41 5445 5354 225d 0a20 2020 2020  "$LATEST"].     
+000249f0: 2020 2020 2020 2066 756e 6374 696f 6e2e         function.
+00024a00: 7665 7273 696f 6e73 5b22 244c 4154 4553  versions["$LATES
+00024a10: 5422 5d20 3d20 6461 7461 636c 6173 7365  T"] = dataclasse
+00024a20: 732e 7265 706c 6163 6528 0a20 2020 2020  s.replace(.     
+00024a30: 2020 2020 2020 2020 2020 206c 6174 6573             lates
+00024a40: 745f 7665 7273 696f 6e2c 2063 6f6e 6669  t_version, confi
+00024a50: 673d 6461 7461 636c 6173 7365 732e 7265  g=dataclasses.re
+00024a60: 706c 6163 6528 6c61 7465 7374 5f76 6572  place(latest_ver
+00024a70: 7369 6f6e 2e63 6f6e 6669 6729 0a20 2020  sion.config).   
+00024a80: 2020 2020 2020 2020 2029 0a0a 2020 2020           )..    
+00024a90: 6465 6620 5f75 7064 6174 655f 7461 6773  def _update_tags
+00024aa0: 2873 656c 662c 2066 756e 6374 696f 6e3a  (self, function:
+00024ab0: 2046 756e 6374 696f 6e2c 2074 6167 733a   Function, tags:
+00024ac0: 2064 6963 745b 7374 722c 2073 7472 5d29   dict[str, str])
+00024ad0: 3a0a 2020 2020 2020 2020 7769 7468 2066  :.        with f
+00024ae0: 756e 6374 696f 6e2e 6c6f 636b 3a0a 2020  unction.lock:.  
+00024af0: 2020 2020 2020 2020 2020 7374 6f72 6564            stored
+00024b00: 5f74 6167 7320 3d20 6675 6e63 7469 6f6e  _tags = function
+00024b10: 2e74 6167 7320 6f72 207b 7d0a 2020 2020  .tags or {}.    
+00024b20: 2020 2020 2020 2020 7374 6f72 6564 5f74          stored_t
+00024b30: 6167 7320 7c3d 2074 6167 730a 2020 2020  ags |= tags.    
+00024b40: 2020 2020 2020 2020 7365 6c66 2e5f 7374          self._st
+00024b50: 6f72 655f 7461 6773 2866 756e 6374 696f  ore_tags(functio
+00024b60: 6e3d 6675 6e63 7469 6f6e 2c20 7461 6773  n=function, tags
+00024b70: 3d73 746f 7265 645f 7461 6773 290a 0a20  =stored_tags).. 
+00024b80: 2020 2064 6566 2074 6167 5f72 6573 6f75     def tag_resou
+00024b90: 7263 6528 7365 6c66 2c20 636f 6e74 6578  rce(self, contex
+00024ba0: 743a 2052 6571 7565 7374 436f 6e74 6578  t: RequestContex
+00024bb0: 742c 2072 6573 6f75 7263 653a 2046 756e  t, resource: Fun
+00024bc0: 6374 696f 6e41 726e 2c20 7461 6773 3a20  ctionArn, tags: 
+00024bd0: 5461 6773 2920 2d3e 204e 6f6e 653a 0a20  Tags) -> None:. 
+00024be0: 2020 2020 2020 2069 6620 6e6f 7420 7461         if not ta
+00024bf0: 6773 3a0a 2020 2020 2020 2020 2020 2020  gs:.            
+00024c00: 7261 6973 6520 496e 7661 6c69 6450 6172  raise InvalidPar
+00024c10: 616d 6574 6572 5661 6c75 6545 7863 6570  ameterValueExcep
+00024c20: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
+00024c30: 2020 2020 2020 2241 6e20 6572 726f 7220        "An error 
+00024c40: 6f63 6375 7272 6564 2061 6e64 2074 6865  occurred and the
+00024c50: 2072 6571 7565 7374 2063 616e 6e6f 7420   request cannot 
+00024c60: 6265 2070 726f 6365 7373 6564 2e22 2c20  be processed.", 
+00024c70: 5479 7065 3d22 5573 6572 220a 2020 2020  Type="User".    
+00024c80: 2020 2020 2020 2020 290a 0a20 2020 2020          )..     
+00024c90: 2020 2070 6174 7465 726e 5f6d 6174 6368     pattern_match
+00024ca0: 203d 2061 7069 5f75 7469 6c73 2e46 554c   = api_utils.FUL
+00024cb0: 4c5f 464e 5f41 524e 5f50 4154 5445 524e  L_FN_ARN_PATTERN
+00024cc0: 2e73 6561 7263 6828 7265 736f 7572 6365  .search(resource
+00024cd0: 290a 2020 2020 2020 2020 6966 206e 6f74  ).        if not
+00024ce0: 2070 6174 7465 726e 5f6d 6174 6368 3a0a   pattern_match:.
+00024cf0: 2020 2020 2020 2020 2020 2020 7261 6973              rais
+00024d00: 6520 5661 6c69 6461 7469 6f6e 4578 6365  e ValidationExce
+00024d10: 7074 696f 6e28 0a20 2020 2020 2020 2020  ption(.         
+00024d20: 2020 2020 2020 2072 6622 3120 7661 6c69         rf"1 vali
+00024d30: 6461 7469 6f6e 2065 7272 6f72 2064 6574  dation error det
+00024d40: 6563 7465 643a 2056 616c 7565 2027 7b72  ected: Value '{r
+00024d50: 6573 6f75 7263 657d 2720 6174 2027 7265  esource}' at 're
+00024d60: 736f 7572 6365 2720 6661 696c 6564 2074  source' failed t
+00024d70: 6f20 7361 7469 7366 7920 636f 6e73 7472  o satisfy constr
+00024d80: 6169 6e74 3a20 4d65 6d62 6572 206d 7573  aint: Member mus
+00024d90: 7420 7361 7469 7366 7920 7265 6775 6c61  t satisfy regula
+00024da0: 7220 6578 7072 6573 7369 6f6e 2070 6174  r expression pat
+00024db0: 7465 726e 3a20 6172 6e3a 2861 7773 5b61  tern: arn:(aws[a
+00024dc0: 2d7a 412d 5a2d 5d2a 293f 3a6c 616d 6264  -zA-Z-]*)?:lambd
+00024dd0: 613a 5b61 2d7a 5d7b 7b32 7d7d 2828 2d67  a:[a-z]{{2}}((-g
+00024de0: 6f76 297c 282d 6973 6f28 623f 2929 293f  ov)|(-iso(b?)))?
+00024df0: 2d5b 612d 7a5d 2b2d 5c64 7b7b 317d 7d3a  -[a-z]+-\d{{1}}:
+00024e00: 5c64 7b7b 3132 7d7d 3a66 756e 6374 696f  \d{{12}}:functio
+00024e10: 6e3a 5b61 2d7a 412d 5a30 2d39 2d5f 5d2b  n:[a-zA-Z0-9-_]+
+00024e20: 283a 285c 244c 4154 4553 547c 5b61 2d7a  (:(\$LATEST|[a-z
+00024e30: 412d 5a30 2d39 2d5f 5d2b 2929 3f22 0a20  A-Z0-9-_]+))?". 
+00024e40: 2020 2020 2020 2020 2020 2029 0a0a 2020             )..  
+00024e50: 2020 2020 2020 6772 6f75 7073 203d 2070        groups = p
+00024e60: 6174 7465 726e 5f6d 6174 6368 2e67 726f  attern_match.gro
+00024e70: 7570 6469 6374 2829 0a20 2020 2020 2020  updict().       
+00024e80: 2066 6e5f 6e61 6d65 203d 2067 726f 7570   fn_name = group
+00024e90: 732e 6765 7428 2266 756e 6374 696f 6e5f  s.get("function_
+00024ea0: 6e61 6d65 2229 0a0a 2020 2020 2020 2020  name")..        
+00024eb0: 6966 2067 726f 7570 732e 6765 7428 2271  if groups.get("q
+00024ec0: 7561 6c69 6669 6572 2229 3a0a 2020 2020  ualifier"):.    
+00024ed0: 2020 2020 2020 2020 7261 6973 6520 496e          raise In
+00024ee0: 7661 6c69 6450 6172 616d 6574 6572 5661  validParameterVa
+00024ef0: 6c75 6545 7863 6570 7469 6f6e 280a 2020  lueException(.  
+00024f00: 2020 2020 2020 2020 2020 2020 2020 2254                "T
+00024f10: 6167 6769 6e67 206f 7065 7261 7469 6f6e  agging operation
+00024f20: 7320 6172 6520 7065 726d 6974 7465 6420  s are permitted 
+00024f30: 6f6e 204c 616d 6264 6120 6675 6e63 7469  on Lambda functi
+00024f40: 6f6e 7320 6f6e 6c79 2e20 5461 6773 206f  ons only. Tags o
+00024f50: 6e20 616c 6961 7365 7320 616e 6420 7665  n aliases and ve
+00024f60: 7273 696f 6e73 2061 7265 206e 6f74 2073  rsions are not s
+00024f70: 7570 706f 7274 6564 2e20 506c 6561 7365  upported. Please
+00024f80: 2073 7065 6369 6679 2065 6974 6865 7220   specify either 
+00024f90: 6120 6675 6e63 7469 6f6e 206e 616d 6520  a function name 
+00024fa0: 6f72 2061 2066 756e 6374 696f 6e20 4152  or a function AR
+00024fb0: 4e2e 222c 0a20 2020 2020 2020 2020 2020  N.",.           
+00024fc0: 2020 2020 2054 7970 653d 2255 7365 7222       Type="User"
+00024fd0: 2c0a 2020 2020 2020 2020 2020 2020 290a  ,.            ).
+00024fe0: 0a20 2020 2020 2020 2066 6e20 3d20 7365  .        fn = se
+00024ff0: 6c66 2e5f 6765 745f 6675 6e63 7469 6f6e  lf._get_function
+00025000: 280a 2020 2020 2020 2020 2020 2020 6675  (.            fu
+00025010: 6e63 7469 6f6e 5f6e 616d 653d 666e 5f6e  nction_name=fn_n
+00025020: 616d 652c 2061 6363 6f75 6e74 5f69 643d  ame, account_id=
+00025030: 636f 6e74 6578 742e 6163 636f 756e 745f  context.account_
+00025040: 6964 2c20 7265 6769 6f6e 3d63 6f6e 7465  id, region=conte
+00025050: 7874 2e72 6567 696f 6e0a 2020 2020 2020  xt.region.      
+00025060: 2020 290a 0a20 2020 2020 2020 2073 656c    )..        sel
+00025070: 662e 5f75 7064 6174 655f 7461 6773 2866  f._update_tags(f
+00025080: 6e2c 2074 6167 7329 0a0a 2020 2020 6465  n, tags)..    de
+00025090: 6620 6c69 7374 5f74 6167 7328 7365 6c66  f list_tags(self
+000250a0: 2c20 636f 6e74 6578 743a 2052 6571 7565  , context: Reque
+000250b0: 7374 436f 6e74 6578 742c 2072 6573 6f75  stContext, resou
+000250c0: 7263 653a 2046 756e 6374 696f 6e41 726e  rce: FunctionArn
+000250d0: 2920 2d3e 204c 6973 7454 6167 7352 6573  ) -> ListTagsRes
+000250e0: 706f 6e73 653a 0a20 2020 2020 2020 2066  ponse:.        f
+000250f0: 756e 6374 696f 6e5f 6e61 6d65 203d 2061  unction_name = a
+00025100: 7069 5f75 7469 6c73 2e67 6574 5f66 756e  pi_utils.get_fun
+00025110: 6374 696f 6e5f 6e61 6d65 2872 6573 6f75  ction_name(resou
+00025120: 7263 652c 2063 6f6e 7465 7874 2e72 6567  rce, context.reg
+00025130: 696f 6e29 0a20 2020 2020 2020 2066 6e20  ion).        fn 
+00025140: 3d20 7365 6c66 2e5f 6765 745f 6675 6e63  = self._get_func
+00025150: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
+00025160: 2020 6675 6e63 7469 6f6e 5f6e 616d 653d    function_name=
+00025170: 6675 6e63 7469 6f6e 5f6e 616d 652c 2061  function_name, a
+00025180: 6363 6f75 6e74 5f69 643d 636f 6e74 6578  ccount_id=contex
+00025190: 742e 6163 636f 756e 745f 6964 2c20 7265  t.account_id, re
+000251a0: 6769 6f6e 3d63 6f6e 7465 7874 2e72 6567  gion=context.reg
+000251b0: 696f 6e0a 2020 2020 2020 2020 290a 0a20  ion.        ).. 
+000251c0: 2020 2020 2020 2072 6574 7572 6e20 4c69         return Li
+000251d0: 7374 5461 6773 5265 7370 6f6e 7365 2854  stTagsResponse(T
+000251e0: 6167 733d 7365 6c66 2e5f 6765 745f 7461  ags=self._get_ta
+000251f0: 6773 2866 6e29 290a 0a20 2020 2064 6566  gs(fn))..    def
+00025200: 2075 6e74 6167 5f72 6573 6f75 7263 6528   untag_resource(
+00025210: 0a20 2020 2020 2020 2073 656c 662c 2063  .        self, c
+00025220: 6f6e 7465 7874 3a20 5265 7175 6573 7443  ontext: RequestC
+00025230: 6f6e 7465 7874 2c20 7265 736f 7572 6365  ontext, resource
+00025240: 3a20 4675 6e63 7469 6f6e 4172 6e2c 2074  : FunctionArn, t
+00025250: 6167 5f6b 6579 733a 2054 6167 4b65 794c  ag_keys: TagKeyL
+00025260: 6973 740a 2020 2020 2920 2d3e 204e 6f6e  ist.    ) -> Non
+00025270: 653a 0a20 2020 2020 2020 2069 6620 6e6f  e:.        if no
+00025280: 7420 7461 675f 6b65 7973 3a0a 2020 2020  t tag_keys:.    
+00025290: 2020 2020 2020 2020 7261 6973 6520 5661          raise Va
+000252a0: 6c69 6461 7469 6f6e 4578 6365 7074 696f  lidationExceptio
+000252b0: 6e28 0a20 2020 2020 2020 2020 2020 2020  n(.             
+000252c0: 2020 2022 3120 7661 6c69 6461 7469 6f6e     "1 validation
+000252d0: 2065 7272 6f72 2064 6574 6563 7465 643a   error detected:
+000252e0: 2056 616c 7565 206e 756c 6c20 6174 2027   Value null at '
+000252f0: 7461 674b 6579 7327 2066 6169 6c65 6420  tagKeys' failed 
+00025300: 746f 2073 6174 6973 6679 2063 6f6e 7374  to satisfy const
+00025310: 7261 696e 743a 204d 656d 6265 7220 6d75  raint: Member mu
+00025320: 7374 206e 6f74 2062 6520 6e75 6c6c 220a  st not be null".
+00025330: 2020 2020 2020 2020 2020 2020 2920 2023              )  #
+00025340: 2073 686f 756c 6420 7072 6f62 6162 6c79   should probably
+00025350: 2062 6520 6765 6e65 7261 6c69 7a65 6420   be generalized 
+00025360: 6120 6269 740a 0a20 2020 2020 2020 2066  a bit..        f
+00025370: 756e 6374 696f 6e5f 6e61 6d65 203d 2061  unction_name = a
+00025380: 7069 5f75 7469 6c73 2e67 6574 5f66 756e  pi_utils.get_fun
+00025390: 6374 696f 6e5f 6e61 6d65 2872 6573 6f75  ction_name(resou
+000253a0: 7263 652c 2063 6f6e 7465 7874 2e72 6567  rce, context.reg
+000253b0: 696f 6e29 0a20 2020 2020 2020 2066 6e20  ion).        fn 
+000253c0: 3d20 7365 6c66 2e5f 6765 745f 6675 6e63  = self._get_func
+000253d0: 7469 6f6e 280a 2020 2020 2020 2020 2020  tion(.          
+000253e0: 2020 6675 6e63 7469 6f6e 5f6e 616d 653d    function_name=
+000253f0: 6675 6e63 7469 6f6e 5f6e 616d 652c 2061  function_name, a
+00025400: 6363 6f75 6e74 5f69 643d 636f 6e74 6578  ccount_id=contex
+00025410: 742e 6163 636f 756e 745f 6964 2c20 7265  t.account_id, re
+00025420: 6769 6f6e 3d63 6f6e 7465 7874 2e72 6567  gion=context.reg
+00025430: 696f 6e0a 2020 2020 2020 2020 290a 0a20  ion.        ).. 
+00025440: 2020 2020 2020 2023 2063 6f70 7920 6669         # copy fi
+00025450: 7273 742c 2074 6865 6e20 7365 7420 6578  rst, then set ex
+00025460: 706c 6963 6974 6c79 2069 6e20 7374 6f72  plicitly in stor
+00025470: 6520 7461 6773 0a20 2020 2020 2020 2074  e tags.        t
+00025480: 6167 7320 3d20 6469 6374 2866 6e2e 7461  ags = dict(fn.ta
+00025490: 6773 206f 7220 7b7d 290a 2020 2020 2020  gs or {}).      
+000254a0: 2020 6966 2074 6167 733a 0a20 2020 2020    if tags:.     
+000254b0: 2020 2020 2020 2066 6f72 206b 6579 2069         for key i
+000254c0: 6e20 7461 675f 6b65 7973 3a0a 2020 2020  n tag_keys:.    
+000254d0: 2020 2020 2020 2020 2020 2020 6966 206b              if k
+000254e0: 6579 2069 6e20 7461 6773 3a0a 2020 2020  ey in tags:.    
+000254f0: 2020 2020 2020 2020 2020 2020 2020 2020                  
+00025500: 7461 6773 2e70 6f70 286b 6579 290a 2020  tags.pop(key).  
+00025510: 2020 2020 2020 7365 6c66 2e5f 7374 6f72        self._stor
+00025520: 655f 7461 6773 2866 756e 6374 696f 6e3d  e_tags(function=
+00025530: 666e 2c20 7461 6773 3d74 6167 7329 0a0a  fn, tags=tags)..
+00025540: 2020 2020 2320 3d3d 3d3d 3d3d 3d3d 3d3d      # ==========
+00025550: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+00025560: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d0a 2020  =============.  
+00025570: 2020 2320 3d3d 3d3d 3d3d 3d20 204c 4547    # =======  LEG
+00025580: 4143 5920 2f20 4445 5052 4543 4154 4544  ACY / DEPRECATED
+00025590: 2020 203d 3d3d 3d3d 3d3d 3d0a 2020 2020     ========.    
+000255a0: 2320 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  # ==============
+000255b0: 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d 3d3d  ================
+000255c0: 3d3d 3d3d 3d3d 3d3d 3d0a 0a20 2020 2064  =========..    d
+000255d0: 6566 2069 6e76 6f6b 655f 6173 796e 6328  ef invoke_async(
+000255e0: 0a20 2020 2020 2020 2073 656c 662c 0a20  .        self,. 
+000255f0: 2020 2020 2020 2063 6f6e 7465 7874 3a20         context: 
+00025600: 5265 7175 6573 7443 6f6e 7465 7874 2c0a  RequestContext,.
+00025610: 2020 2020 2020 2020 6675 6e63 7469 6f6e          function
+00025620: 5f6e 616d 653a 204e 616d 6573 7061 6365  _name: Namespace
+00025630: 6446 756e 6374 696f 6e4e 616d 652c 0a20  dFunctionName,. 
+00025640: 2020 2020 2020 2069 6e76 6f6b 655f 6172         invoke_ar
+00025650: 6773 3a20 494f 5b42 6c6f 6253 7472 6561  gs: IO[BlobStrea
+00025660: 6d5d 2c0a 2020 2020 2920 2d3e 2049 6e76  m],.    ) -> Inv
+00025670: 6f6b 6541 7379 6e63 5265 7370 6f6e 7365  okeAsyncResponse
+00025680: 3a0a 2020 2020 2020 2020 2222 224c 4547  :.        """LEG
+00025690: 4143 5920 4150 4920 656e 6470 6f69 6e74  ACY API endpoint
+000256a0: 2e20 4576 656e 2041 5753 2068 6561 7669  . Even AWS heavi
+000256b0: 6c79 2064 6973 636f 7572 6167 6573 2069  ly discourages i
+000256c0: 7473 2075 7361 6765 2e22 2222 0a20 2020  ts usage.""".   
+000256d0: 2020 2020 2072 6169 7365 204e 6f74 496d       raise NotIm
+000256e0: 706c 656d 656e 7465 6445 7272 6f72 0a    plementedError.
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/awslambda/urlrouter.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/awslambda/urlrouter.py`

 * *Files 2% similar despite different names*

```diff
@@ -4,14 +4,15 @@
 import urllib
 from datetime import datetime
 from http import HTTPStatus
 
 from localstack import config
 from localstack.aws.api import HttpResponse
 from localstack.aws.api.lambda_ import InvocationType
+from localstack.aws.protocol.serializer import gen_amzn_requestid
 from localstack.http import Request, Router
 from localstack.http.dispatcher import Handler
 from localstack.services.awslambda.api_utils import FULL_FN_ARN_PATTERN
 from localstack.services.awslambda.invocation.lambda_models import InvocationError, InvocationResult
 from localstack.services.awslambda.invocation.lambda_service import LambdaService
 from localstack.services.awslambda.invocation.models import lambda_stores
 from localstack.utils.aws.request_context import AWS_REGION_REGEX
@@ -80,14 +81,15 @@
             function_name=match.get("function_name"),
             qualifier=match.get("qualifier"),
             account_id=match.get("account_id"),
             region=match.get("region_name"),
             invocation_type=InvocationType.RequestResponse,
             client_context="{}",  # TODO: test
             payload=to_bytes(json.dumps(event)),
+            request_id=gen_amzn_requestid(),
         )
         result = result_ft.result(timeout=900)
 
         if isinstance(result, InvocationError):
             response = HttpResponse("Internal Server Error", HTTPStatus.BAD_GATEWAY)
         else:
             response = lambda_result_to_response(result)
@@ -169,16 +171,16 @@
     response = HttpResponse()
 
     # Set default headers
     response.headers.update(
         {
             "Content-Type": "application/json",
             "Connection": "keep-alive",
-            "x-amzn-requestid": long_uid(),
-            "x-amzn-trace-id": long_uid(),
+            "x-amzn-requestid": result.request_id,
+            "x-amzn-trace-id": long_uid(),  # TODO: get the proper trace id here
         }
     )
 
     original_payload = to_str(result.payload)
     parsed_result = json.loads(original_payload)
 
     # patch to fix whitespaces
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/api_utils.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/api_utils.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/cfn_utils.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/cfn_utils.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/deployment_utils.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/deployment_utils.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/engine/entities.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/engine/entities.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/engine/template_deployer.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/engine/template_deployer.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/engine/template_preparer.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/engine/template_preparer.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/engine/transformers.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/engine/transformers.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/engine/yaml_parser.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/engine/yaml_parser.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/apigateway.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/apigateway.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/awslambda.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/awslambda.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/cdk.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/cdk.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/certificatemanager.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/certificatemanager.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/cloudformation.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/cloudformation.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/cloudwatch.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/cloudwatch.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/dynamodb.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/dynamodb.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/ec2.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/ec2.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/ecr.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/ecr.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/elasticsearch.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/elasticsearch.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/events.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/events.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/iam.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/iam.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/kinesis.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/kinesis.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/kinesisfirehose.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/kinesisfirehose.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/kms.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/kms.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/logs.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/logs.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/opensearch.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/opensearch.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/redshift.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/redshift.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/resourcegroups.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/resourcegroups.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/route53.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/route53.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/s3.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/s3.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/secretsmanager.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/secretsmanager.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/sns.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/sns.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/sqs.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/sqs.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/ssm.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/ssm.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/models/stepfunctions.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/models/stepfunctions.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/packages.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/packages.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/service_models.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/service_models.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudformation/stores.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudformation/stores.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudwatch/alarm_scheduler.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudwatch/alarm_scheduler.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/cloudwatch/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/cloudwatch/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodb/models.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodb/models.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodb/packages.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodb/packages.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodb/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodb/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodb/server.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodb/server.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodb/utils.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodb/utils.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodbstreams/dynamodbstreams_api.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodbstreams/dynamodbstreams_api.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/dynamodbstreams/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/dynamodbstreams/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/ec2/exceptions.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/ec2/exceptions.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/ec2/models.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/ec2/models.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/ec2/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/ec2/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/edge.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/edge.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/es/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/es/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/events/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/events/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/events/scheduler.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/events/scheduler.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/firehose/mappers.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/firehose/mappers.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/firehose/models.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/firehose/models.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/firehose/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/firehose/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/generic_proxy.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/generic_proxy.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/iam/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/iam/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/infra.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/infra.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/internal.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/internal.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/kinesis/kinesis_mock_server.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/kinesis/kinesis_mock_server.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/kinesis/models.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/kinesis/models.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/kinesis/packages.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/kinesis/packages.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/kinesis/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/kinesis/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/kms/local_kms_provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/kms/local_kms_provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/kms/local_kms_server.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/kms/local_kms_server.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/kms/models.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/kms/models.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/kms/packages.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/kms/packages.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/kms/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/kms/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/logs/models.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/logs/models.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/logs/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/logs/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/messages.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/messages.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/moto.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/moto.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/motoserver.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/motoserver.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/opensearch/cluster.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/opensearch/cluster.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/opensearch/cluster_manager.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/opensearch/cluster_manager.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/opensearch/models.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/opensearch/models.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/opensearch/packages.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/opensearch/packages.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/opensearch/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/opensearch/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/opensearch/versions.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/opensearch/versions.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/plugins.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/plugins.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/providers.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/providers.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/redshift/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/redshift/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/route53/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/route53/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/route53resolver/models.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/route53resolver/models.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/route53resolver/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/route53resolver/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/route53resolver/utils.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/route53resolver/utils.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/s3/constants.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/s3/constants.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/s3/cors.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/s3/cors.py`

 * *Files 2% similar despite different names*

```diff
@@ -8,15 +8,14 @@
 from localstack.aws.api import RequestContext
 from localstack.aws.api.s3 import AccessForbidden, BadRequest, CORSRule, CORSRules
 from localstack.aws.chain import Handler, HandlerChain
 
 # TODO: refactor those to expose the needed methods
 from localstack.aws.handlers.cors import CorsEnforcer, CorsResponseEnricher
 from localstack.aws.protocol.op_router import RestServiceOperationRouter
-from localstack.aws.protocol.serializer import gen_amzn_requestid_long
 from localstack.aws.protocol.service_router import get_service_catalog
 from localstack.constants import S3_VIRTUAL_HOSTNAME
 from localstack.http import Request, Response
 from localstack.services.s3.models import BucketCorsIndex
 from localstack.services.s3.utils import S3_VIRTUAL_HOSTNAME_REGEX
 
 # TODO: add more logging statements
@@ -100,15 +99,15 @@
         is_options_request = request.method == "OPTIONS"
 
         def stop_options_chain():
             """
             Stops the chain to avoid the OPTIONS request being parsed. The request is ready to be returned to the
             client. We also need to add specific headers normally added by the serializer for regular requests.
             """
-            request_id = gen_amzn_requestid_long()
+            request_id = context.request_id
             response.headers["x-amz-request-id"] = request_id
             response.headers[
                 "x-amz-id-2"
             ] = f"MzRISOwyjmnup{request_id}7/JypPGXLh0OVFGcJaaO3KW/hRAqKOpIEEp"
 
             response.set_response(b"")
             response.headers.pop("Content-Type", None)
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/s3/models.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/s3/models.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/s3/multipart_content.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/s3/multipart_content.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/s3/notifications.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/s3/notifications.py`

 * *Files 1% similar despite different names*

```diff
@@ -24,15 +24,14 @@
     NotificationId,
     ObjectKey,
     QueueArn,
     QueueConfiguration,
     TopicArn,
     TopicConfiguration,
 )
-from localstack.aws.protocol.serializer import gen_amzn_requestid_long
 from localstack.config import DEFAULT_REGION
 from localstack.services.s3.models import get_moto_s3_backend
 from localstack.services.s3.utils import (
     _create_invalid_argument_exc,
     get_bucket_from_moto,
     get_key_from_moto_bucket,
 )
@@ -79,14 +78,15 @@
 
 class Notification(TypedDict):
     Records: List[EventRecord]
 
 
 @dataclass
 class S3EventNotificationContext:
+    request_id: str
     event_type: str
     region: str
     bucket_name: BucketName
     key_name: ObjectKey
     xray: str
     bucket_location: BucketRegion
     key_size: int
@@ -132,14 +132,15 @@
             etag = ""
             key_size = 0
         else:
             etag = key.etag.strip('"')
             key_size = key.contentsize
 
         return cls(
+            request_id=request_context.request_id,
             event_type=EVENT_OPERATION_MAP.get(request_context.operation.wire_name, ""),
             region=request_context.region,
             bucket_name=bucket_name,
             bucket_location=bucket.location,
             key_name=quote(key.name),
             key_etag=etag,
             key_size=key_size,
@@ -470,15 +471,15 @@
             "bucket": {"name": ctx.bucket_name},
             "object": {
                 "key": ctx.key_name,
                 "size": ctx.key_size,
                 "etag": ctx.key_etag,
                 "sequencer": "0062E99A88DC407460",
             },
-            "request-id": gen_amzn_requestid_long(),
+            "request-id": ctx.request_id,
             "requester": "074255357339",
             "source-ip-address": "127.0.0.1",
             # TODO previously headers.get("X-Forwarded-For", "127.0.0.1").split(",")[0]
         }
 
         if "ObjectCreated" in ctx.event_type:
             entry["DetailType"] = "Object Created"
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/s3/presigned_url.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/s3/presigned_url.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/s3/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/s3/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/s3/s3_listener.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/s3/s3_listener.py`

 * *Files 0% similar despite different names*

```diff
@@ -17,15 +17,15 @@
 from botocore.client import ClientError
 from moto.s3.exceptions import InvalidFilterRuleName, MissingBucket
 from moto.s3.models import FakeBucket
 from requests.models import Request, Response
 
 from localstack import config, constants
 from localstack.aws.api import CommonServiceException
-from localstack.aws.protocol.serializer import gen_amzn_requestid_long
+from localstack.aws.protocol.serializer import gen_amzn_requestid
 from localstack.config import get_protocol as get_service_protocol
 from localstack.services.generic_proxy import ProxyListener
 from localstack.services.generic_proxy import append_cors_headers as _append_default_cors_headers
 from localstack.services.generic_proxy import is_cors_origin_allowed
 from localstack.services.s3 import multipart_content
 from localstack.services.s3.s3_utils import (
     ALLOWED_HEADER_OVERRIDES,
@@ -245,15 +245,15 @@
                 "eventSource": "aws:s3",
                 "awsRegion": aws_stack.get_region(),
                 "eventTime": timestamp_millis(),
                 "eventName": event_name,
                 "userIdentity": {"principalId": "AIDAJDPLRKLG7UEXAMPLE"},
                 "requestParameters": {"sourceIPAddress": source_ip},
                 "responseElements": {
-                    "x-amz-request-id": gen_amzn_requestid_long(),
+                    "x-amz-request-id": gen_amzn_requestid(),  # TODO: replace with context request ID
                     "x-amz-id-2": "eftixk72aD6Ap51TnqcoF8eFidJG9Z/2",  # Amazon S3 host that processed the request
                 },
                 "s3": {
                     "s3SchemaVersion": "1.0",
                     "configurationId": config_id,
                     "bucket": {
                         "name": bucket_name,
@@ -413,15 +413,15 @@
                 "bucket": {"name": bucket_name},
                 "object": {
                     "key": key,
                     "size": object_data.get("ContentLength"),
                     "etag": object_data.get("ETag", ""),
                     "sequencer": "0062E99A88DC407460",
                 },
-                "request-id": gen_amzn_requestid_long(),
+                "request-id": gen_amzn_requestid(),  # TODO: replace with context request ID
                 "requester": "074255357339",
                 "source-ip-address": source_ip,
             },
         }
 
         if action == "ObjectCreated":
             entry["DetailType"] = "Object Created"
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/s3/s3_starter.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/s3/s3_starter.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/s3/s3_utils.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/s3/s3_utils.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/s3/utils.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/s3/utils.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/s3/virtual_host.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/s3/virtual_host.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/s3/website_hosting.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/s3/website_hosting.py`

 * *Files 2% similar despite different names*

```diff
@@ -15,15 +15,15 @@
     NoSuchKey,
     NoSuchWebsiteConfiguration,
     ObjectKey,
     RoutingRule,
     RoutingRules,
     WebsiteConfiguration,
 )
-from localstack.aws.protocol.serializer import gen_amzn_requestid_long
+from localstack.aws.protocol.serializer import gen_amzn_requestid
 from localstack.constants import S3_STATIC_WEBSITE_HOSTNAME
 from localstack.http import Request, Response, Router
 from localstack.http.dispatcher import Handler
 from localstack.services.s3.models import S3Store, get_moto_s3_backend, s3_stores
 from localstack.utils.aws import aws_stack
 
 LOG = logging.getLogger(__name__)
@@ -86,25 +86,28 @@
     :param request: router Request object
     :param bucket_name: str, bucket name
     :param path: the path of the request
     :param port: /
     :return: Response object
     """
     if request.method != "GET":
-        return Response(_create_405_error_string(request.method), status=405)
+        return Response(
+            _create_405_error_string(request.method, request_id=gen_amzn_requestid()), status=405
+        )
 
     try:
         return _serve_key(request, bucket_name, path)
 
     except (NoSuchBucket, NoSuchWebsiteConfiguration, NoSuchKeyFromErrorDocument, NoSuchKey) as e:
         resource_name = e.Key if hasattr(e, "Key") else e.BucketName
         response_body = _create_404_error_string(
             code=e.code,
             message=e.message,
             resource_name=resource_name,
+            request_id=gen_amzn_requestid(),
             from_error_document=getattr(e, "ErrorDocumentKey", None),
         )
         return Response(response_body, status=e.status_code)
 
     except Exception:
         LOG.exception("Exception encountered while trying to serve s3-website at %s", request.url)
         return Response(_create_500_error_string(), status=500)
@@ -339,28 +342,28 @@
         return _remove_leading_whitespace(r)
 
     return wrapper
 
 
 @_flatten_html_response
 def _create_404_error_string(
-    code: str, message: str, resource_name: str, from_error_document: str = None
+    code: str, message: str, resource_name: str, request_id: str, from_error_document: str = None
 ) -> str:
     # TODO: the nested error could be permission related
     #  permission are not enforced currently
     resource_key = "Key" if "Key" in code else "BucketName"
     return f"""<html>
     <head><title>404 Not Found</title></head>
     <body>
         <h1>404 Not Found</h1>
         <ul>
             <li>Code: {code}</li>
             <li>Message: {message}</li>
             <li>{resource_key}: {resource_name}</li>
-            <li>RequestId: {gen_amzn_requestid_long()}</li>
+            <li>RequestId: {request_id}</li>
             <li>HostId: h6t23Wl2Ndijztq+COn9kvx32omFVRLLtwk36D6+2/CIYSey+Uox6kBxRgcnAASsgnGwctU6zzU=</li>
         </ul>
         {_create_nested_404_error_string(from_error_document)}
         <hr/>
     </body>
 </html>
 """
@@ -375,25 +378,25 @@
             <li>Message: The specified key does not exist.</li>
             <li>Key: {error_document_key}</li>
         </ul>
     """
 
 
 @_flatten_html_response
-def _create_405_error_string(method: str) -> str:
+def _create_405_error_string(method: str, request_id: str) -> str:
     return f"""<html>
     <head><title>405 Method Not Allowed</title></head>
     <body>
         <h1>405 Method Not Allowed</h1>
         <ul>
             <li>Code: MethodNotAllowed</li>
             <li>Message: The specified method is not allowed against this resource.</li>
             <li>Method: {method.upper()}</li>
             <li>ResourceType: OBJECT</li>
-            <li>RequestId: {gen_amzn_requestid_long()}</li>
+            <li>RequestId: {request_id}</li>
             <li>HostId: h6t23Wl2Ndijztq+COn9kvx32omFVRLLtwk36D6+2/CIYSey+Uox6kBxRgcnAASsgnGwctU6zzU=</li>
         </ul>
         <hr/>
     </body>
 </html>
 """
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/secretsmanager/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/secretsmanager/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/ses/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/ses/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/sns/constants.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/sns/constants.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/sns/models.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/sns/models.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/sns/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/sns/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/sns/publisher.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/sns/publisher.py`

 * *Files 1% similar despite different names*

```diff
@@ -179,18 +179,17 @@
                 InvocationType=InvocationType.Event,
             )
             status_code = inv_result.get("StatusCode")
             payload = inv_result.get("Payload")
             if payload:
                 delivery = {
                     "statusCode": status_code,
-                    # TODO: normally, this is the lambda RequestId (invocation id)
-                    # but we don't get it from the response, this could change if we set the RequestId when we receive
-                    # the request instead of when sending the response. For now, mock it with a random UUID
-                    "providerResponse": json.dumps({"lambdaRequestId": long_uid()}),
+                    "providerResponse": json.dumps(
+                        {"lambdaRequestId": inv_result["ResponseMetadata"]["RequestId"]}
+                    ),
                 }
                 store_delivery_log(context.message, subscriber, success=True, delivery=delivery)
 
         except Exception as exc:
             LOG.info(
                 "Unable to run Lambda function on SNS message: %s %s", exc, traceback.format_exc()
             )
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/sqs/constants.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/sqs/constants.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/sqs/exceptions.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/sqs/exceptions.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/sqs/models.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/sqs/models.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/sqs/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/sqs/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/sqs/query_api.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/sqs/query_api.py`

 * *Files 3% similar despite different names*

```diff
@@ -17,14 +17,15 @@
 from localstack.aws.protocol.validate import MissingRequiredField, validate_request
 from localstack.aws.spec import load_service
 from localstack.http import Request, Response, Router, route
 from localstack.http.dispatcher import Handler
 from localstack.services.sqs.exceptions import MissingParameter
 from localstack.utils.aws import aws_stack
 from localstack.utils.aws.request_context import extract_region_from_headers
+from localstack.utils.strings import long_uid
 
 LOG = logging.getLogger(__name__)
 
 service = load_service("sqs")
 parser = create_parser(service)
 serializer = create_serializer(service)
 
@@ -112,33 +113,36 @@
 
 
 def handle_request(request: Request, region: str) -> Response:
     if request.is_json:
         # TODO: the response should be sent as JSON response
         raise NotImplementedError
 
+    request_id = long_uid()
+
     try:
         response, operation = try_call_sqs(request, region)
         del response["ResponseMetadata"]
-        return serializer.serialize_to_response(response, operation, request.headers)
+        return serializer.serialize_to_response(response, operation, request.headers, request_id)
     except UnknownOperationException:
         return Response("<UnknownOperationException/>", 404)
     except CommonServiceException as e:
         # use a dummy operation for the serialization to work
         op = service.operation_model(service.operation_names[0])
-        return serializer.serialize_error_to_response(e, op, request.headers)
+        return serializer.serialize_error_to_response(e, op, request.headers, request_id)
     except Exception as e:
         LOG.exception("exception")
         op = service.operation_model(service.operation_names[0])
         return serializer.serialize_error_to_response(
             CommonServiceException(
                 "InternalError", f"An internal error occurred: {e}", status_code=500
             ),
             op,
             request.headers,
+            request_id,
         )
 
 
 def try_call_sqs(request: Request, region: str) -> Tuple[Dict, OperationModel]:
     action = request.values.get("Action")
     if not action:
         raise UnknownOperationException()
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/sqs/utils.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/sqs/utils.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/ssm/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/ssm/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/antlt4utils/antlr4utils.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/antlt4utils/antlr4utils.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/catch/catch_decl.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/catch/catch_decl.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/catch/catcher_decl.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/catch/catcher_decl.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/error_name/custom_error_name.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/error_name/custom_error_name.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/error_name/error_equals_decl.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/error_name/error_equals_decl.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/error_name/error_name.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/error_name/error_name.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/error_name/states_error_name.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/error_name/states_error_name.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/error_name/states_error_name_type.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/error_name/states_error_name_type.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/parameters.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/parameters.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/path/input_path.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/path/input_path.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/path/items_path.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/path/items_path.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/path/output_path.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/path/output_path.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/path/result_path.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/path/result_path.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadarr/payload_arr.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadarr/payload_arr.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding_intrinsic_func.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding_intrinsic_func.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding_path.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding_path.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding_path_context_obj.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding_path_context_obj.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding_value.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadbinding/payload_binding_value.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadtmpl/payload_tmpl.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/payload/payloadvalue/payloadtmpl/payload_tmpl.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/result_selector.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/result_selector.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/retry/backoff_rate_decl.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/retry/backoff_rate_decl.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/retry/interval_seconds_decl.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/retry/interval_seconds_decl.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/retry/max_attempts_decl.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/retry/max_attempts_decl.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/retry/retrier_decl.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/retry/retrier_decl.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/common/retry/retry_decl.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/common/retry/retry_decl.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/eval_component.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/eval_component.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_function.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_function.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_json_path.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_json_path.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_list.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/argument/function_argument_list.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/function.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/function.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_contains.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_contains.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_get_item.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_get_item.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_length.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_length.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_partition.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_partition.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_range.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_range.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_unique.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/array/array_unique.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/encoding_decoding/base_64_decode.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/encoding_decoding/base_64_decode.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/encoding_decoding/base_64_encode.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/encoding_decoding/base_64_encode.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/factory.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/factory.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/generic/string_format.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/generic/string_format.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/hash_calculations/hash_func.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/hash_calculations/hash_func.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/json_manipulation/json_merge.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/json_manipulation/json_merge.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/json_manipulation/json_to_string.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/json_manipulation/json_to_string.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/json_manipulation/string_to_json.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/json_manipulation/string_to_json.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/math_operations/math_add.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/math_operations/math_add.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/math_operations/math_random.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/math_operations/math_random.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_array.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_array.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_format.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_format.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_json_to_string.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_json_to_string.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_string_to_json.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_string_to_json.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_uuid.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/states_function_uuid.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/string_operations/string_split.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/string_operations/string_split.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/unique_id_generation/uuid.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/function/statesfunction/unique_id_generation/uuid.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/functionname/state_fuinction_name_types.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/functionname/state_fuinction_name_types.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/intrinsic/functionname/state_function_name_types.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/intrinsic/functionname/state_function_name_types.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/program/program.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/program/program.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/choice_rule.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/choice_rule.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_composite.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_composite.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_func.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_func.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_operator_type.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_operator_type.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_props.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/comparison_props.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/factory.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/factory.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/boolean_equals.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/boolean_equals.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/is_operator.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/is_operator.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/numeric.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/numeric.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/string_operators.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/string_operators.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/timestamp_operators.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/comparison/operator/implementations/timestamp_operators.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_choice/state_choice.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_choice/state_choice.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/execute_state.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/execute_state.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/itemprocessor/item_processor.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/itemprocessor/item_processor.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/state_map.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_map/state_map.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_parallel/branches_decl.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_parallel/branches_decl.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_parallel/state_parallel.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_parallel/state_parallel.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/resource.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/resource.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task_lambda.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task_lambda.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task_service.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task_service.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task_service_aws_sdk.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task_service_aws_sdk.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task_service_lambda.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_execution/state_task/state_task_service_lambda.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_fail/state_fail.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_fail/state_fail.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_pass/state_pass.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_pass/state_pass.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_props.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_props.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_succeed/state_succeed.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_succeed/state_succeed.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/state_wait.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/state_wait.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/variable.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/variable.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/seconds.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/seconds.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/seconds_path.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/seconds_path.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/timestamp.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/timestamp.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/timestamp_path.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/timestamp_path.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/wait_function.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/component/state/state_wait/wait_function/wait_function.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/contextobject/contex_object.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/contextobject/contex_object.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/environment.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/environment.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/event/event_detail.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/event/event_detail.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/event/event_history.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/event/event_history.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/program_worker.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/program_worker.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/eval/programstate/program_running.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/eval/programstate/program_running.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/parse/asl_parser.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/parse/asl_parser.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/parse/intrinsic/intrinsic_parser.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/parse/intrinsic/intrinsic_parser.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/parse/intrinsic/preprocessor.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/parse/intrinsic/preprocessor.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/parse/preprocessor.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/parse/preprocessor.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/asl/parse/typed_props.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/asl/parse/typed_props.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/backend/execution.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/backend/execution.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/backend/execution_worker.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/backend/execution_worker.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/backend/state_machine.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/backend/state_machine.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/backend/store.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/backend/store.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/packages.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/packages.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/provider_v2.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/provider_v2.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/stepfunctions_starter.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/stepfunctions_starter.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stepfunctions/stepfunctions_utils.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stepfunctions/stepfunctions_utils.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/stores.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/stores.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/sts/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/sts/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/transcribe/packages.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/transcribe/packages.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/services/transcribe/provider.py` & `localstack-core-2.0.3.dev20230424170116/localstack/services/transcribe/provider.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/state/core.py` & `localstack-core-2.0.3.dev20230424170116/localstack/state/core.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/state/inspect.py` & `localstack-core-2.0.3.dev20230424170116/localstack/state/inspect.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/state/pickle.py` & `localstack-core-2.0.3.dev20230424170116/localstack/state/pickle.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/state/snapshot.py` & `localstack-core-2.0.3.dev20230424170116/localstack/state/snapshot.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/testing/aws/asf_utils.py` & `localstack-core-2.0.3.dev20230424170116/localstack/testing/aws/asf_utils.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/testing/aws/cloudformation_utils.py` & `localstack-core-2.0.3.dev20230424170116/localstack/testing/aws/cloudformation_utils.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/testing/aws/lambda_utils.py` & `localstack-core-2.0.3.dev20230424170116/localstack/testing/aws/lambda_utils.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/testing/aws/util.py` & `localstack-core-2.0.3.dev20230424170116/localstack/testing/aws/util.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/detect_thread_leakage.py` & `localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/detect_thread_leakage.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/filters.py` & `localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/filters.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/find_orphaned_snapshots.py` & `localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/find_orphaned_snapshots.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/fixture_conflicts.py` & `localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/fixture_conflicts.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/fixtures.py` & `localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/fixtures.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/metric_collection.py` & `localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/metric_collection.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/snapshot.py` & `localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/snapshot.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/testing/pytest/util.py` & `localstack-core-2.0.3.dev20230424170116/localstack/testing/pytest/util.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/testing/snapshots/prototype.py` & `localstack-core-2.0.3.dev20230424170116/localstack/testing/snapshots/prototype.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/testing/snapshots/report.py` & `localstack-core-2.0.3.dev20230424170116/localstack/testing/snapshots/report.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/testing/snapshots/transformer.py` & `localstack-core-2.0.3.dev20230424170116/localstack/testing/snapshots/transformer.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/testing/snapshots/transformer_utility.py` & `localstack-core-2.0.3.dev20230424170116/localstack/testing/snapshots/transformer_utility.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/analytics/cli.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/analytics/cli.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/analytics/client.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/analytics/client.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/analytics/events.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/analytics/events.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/analytics/logger.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/analytics/logger.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/analytics/metadata.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/analytics/metadata.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/analytics/publisher.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/analytics/publisher.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/analytics/service_request_aggregator.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/analytics/service_request_aggregator.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/archives.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/archives.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/asyncio.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/asyncio.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/auth.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/auth.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/arns.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/arns.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/aws_models.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/aws_models.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/aws_responses.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/aws_responses.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/aws_stack.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/aws_stack.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/client.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/client.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/client_types.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/client_types.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/dead_letter_queue.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/dead_letter_queue.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/message_forwarding.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/message_forwarding.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/queries.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/queries.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/request_context.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/request_context.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/resources.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/resources.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/aws/templating.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/aws/templating.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/bootstrap.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/bootstrap.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/cloudwatch/cloudwatch_util.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/cloudwatch/cloudwatch_util.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/collections.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/collections.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/common.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/common.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/config_listener.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/config_listener.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/container_networking.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/container_networking.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/container_utils/container_client.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/container_utils/container_client.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/container_utils/docker_cmd_client.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/container_utils/docker_cmd_client.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/container_utils/docker_sdk_client.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/container_utils/docker_sdk_client.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/coverage_docs.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/coverage_docs.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/crypto.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/crypto.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/diagnose.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/diagnose.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/docker_utils.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/docker_utils.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/files.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/files.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/functions.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/functions.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/http.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/http.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/json.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/json.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/kinesis/kclipy_helper.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/kinesis/kclipy_helper.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/kinesis/kinesis_connector.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/kinesis/kinesis_connector.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/kinesis/kinesis_util.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/kinesis/kinesis_util.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/net.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/net.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/no_exit_argument_parser.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/no_exit_argument_parser.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/numbers.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/numbers.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/objects.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/objects.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/patch.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/patch.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/platform.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/platform.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/run.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/run.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/scheduler.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/scheduler.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/server/http2_server.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/server/http2_server.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/server/proxy_server.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/server/proxy_server.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/serving.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/serving.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/ssl.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/ssl.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/strings.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/strings.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/sync.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/sync.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/tagging.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/tagging.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/tail.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/tail.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/testutil.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/testutil.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/threads.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/threads.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/time.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/time.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/urls.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/urls.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/venv.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/venv.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack/utils/xml.py` & `localstack-core-2.0.3.dev20230424170116/localstack/utils/xml.py`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack_core.egg-info/PKG-INFO` & `localstack-core-2.0.3.dev20230424170116/localstack_core.egg-info/PKG-INFO`

 * *Files 16% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: localstack-core
-Version: 2.0.3.dev20230424153605
+Version: 2.0.3.dev20230424170116
 Summary: The core library and runtime of LocalStack
 Home-page: https://github.com/localstack/localstack
 Author: LocalStack Contributors
 Author-email: info@localstack.cloud
 License: Apache License 2.0
 Classifier: Programming Language :: Python :: 3.10
 Classifier: License :: OSI Approved :: Apache Software License
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack_core.egg-info/SOURCES.txt` & `localstack-core-2.0.3.dev20230424170116/localstack_core.egg-info/SOURCES.txt`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack_core.egg-info/entry_points.txt` & `localstack-core-2.0.3.dev20230424170116/localstack_core.egg-info/entry_points.txt`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack_core.egg-info/plux.json` & `localstack-core-2.0.3.dev20230424170116/localstack_core.egg-info/plux.json`

 * *Files 0% similar despite different names*

#### Pretty-printed

 * *Similarity: 0.9354575163398693%*

 * *Differences: {"'localstack.hooks.on_infra_start'": '{insert: [(1, '*

 * *                                      "'_patch_botocore_json_parser=localstack.aws.client:_patch_botocore_json_parser'), "*

 * *                                      '(4, '*

 * *                                      "'validate_configuration=localstack.services.awslambda.plugins:validate_configuration')], "*

 * *                                      'delete: [2, 0]}',*

 * * "'localstack.packages'": '{insert: [(6, '*

 * *                          "'local-kms/community=localstack. []*

```diff
@@ -53,36 +53,36 @@
         "register_virtual_host_routes=localstack.services.s3.virtual_host:register_virtual_host_routes"
     ],
     "localstack.hooks.on_infra_shutdown": [
         "_run_init_scripts_on_shutdown=localstack.runtime.init:_run_init_scripts_on_shutdown",
         "run_shutdown_handlers=localstack.runtime.shutdown:run_shutdown_handlers"
     ],
     "localstack.hooks.on_infra_start": [
-        "_patch_botocore_json_parser=localstack.aws.client:_patch_botocore_json_parser",
         "_run_init_scripts_on_start=localstack.runtime.init:_run_init_scripts_on_start",
-        "validate_configuration=localstack.services.awslambda.plugins:validate_configuration",
+        "_patch_botocore_json_parser=localstack.aws.client:_patch_botocore_json_parser",
         "_publish_config_as_analytics_event=localstack.runtime.analytics:_publish_config_as_analytics_event",
         "_publish_container_info=localstack.runtime.analytics:_publish_container_info",
+        "validate_configuration=localstack.services.awslambda.plugins:validate_configuration",
         "deprecation_warnings=localstack.plugins:deprecation_warnings",
         "register_partition_adjusting_proxy_listener=localstack.plugins:register_partition_adjusting_proxy_listener"
     ],
     "localstack.hooks.prepare_host": [
         "prepare_host_machine_id=localstack.utils.analytics.metadata:prepare_host_machine_id"
     ],
     "localstack.lambda.runtime_executor": [
         "docker=localstack.services.awslambda.invocation.plugins:DockerRuntimeExecutorPlugin"
     ],
     "localstack.packages": [
-        "stepfunctions-local/community=localstack.services.stepfunctions.plugins:stepfunctions_local_packages",
-        "opensearch/community=localstack.services.opensearch.plugins:opensearch_package",
-        "elasticsearch/community=localstack.services.es.plugins:elasticsearch_package",
         "kinesis-mock/community=localstack.services.kinesis.plugins:kinesismock_package",
-        "local-kms/community=localstack.services.kms.plugins:local_kms_package",
         "dynamodb-local/community=localstack.services.dynamodb.plugins:dynamodb_local_package",
-        "terraform/community=localstack.packages.plugins:terraform_package",
         "ffmpeg/community=localstack.services.transcribe.plugins:ffmpeg_package",
         "awslambda-go-runtime/community=localstack.services.awslambda.plugins:awslambda_go_runtime_package",
         "awslambda-runtime/community=localstack.services.awslambda.plugins:awslambda_runtime_package",
         "lambda-java-libs/community=localstack.services.awslambda.plugins:lambda_java_libs",
-        "cloudformation-libs/community=localstack.services.cloudformation.plugins:cloudformation_package"
+        "local-kms/community=localstack.services.kms.plugins:local_kms_package",
+        "stepfunctions-local/community=localstack.services.stepfunctions.plugins:stepfunctions_local_packages",
+        "elasticsearch/community=localstack.services.es.plugins:elasticsearch_package",
+        "cloudformation-libs/community=localstack.services.cloudformation.plugins:cloudformation_package",
+        "opensearch/community=localstack.services.opensearch.plugins:opensearch_package",
+        "terraform/community=localstack.packages.plugins:terraform_package"
     ]
 }
```

### Comparing `localstack-core-2.0.3.dev20230424153605/localstack_core.egg-info/requires.txt` & `localstack-core-2.0.3.dev20230424170116/localstack_core.egg-info/requires.txt`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/pyproject.toml` & `localstack-core-2.0.3.dev20230424170116/pyproject.toml`

 * *Files identical despite different names*

### Comparing `localstack-core-2.0.3.dev20230424153605/setup.cfg` & `localstack-core-2.0.3.dev20230424170116/setup.cfg`

 * *Files identical despite different names*

