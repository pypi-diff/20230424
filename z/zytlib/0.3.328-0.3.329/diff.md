# Comparing `tmp/zytlib-0.3.328-py3-none-any.whl.zip` & `tmp/zytlib-0.3.329-py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,36 +1,36 @@
-Zip file size: 72696 bytes, number of entries: 34
--rw-r--r--  2.0 unx      750 b- defN 23-Apr-23 10:05 zytlib/__init__.py
--rw-r--r--  2.0 unx       35 b- defN 23-Apr-23 10:05 zytlib/table.py
--rw-r--r--  2.0 unx       37 b- defN 23-Apr-23 10:05 zytlib/vector.py
--rw-r--r--  2.0 unx      145 b- defN 23-Apr-23 10:05 zytlib/container/__init__.py
--rw-r--r--  2.0 unx     3240 b- defN 23-Apr-23 10:05 zytlib/container/sequence.py
--rw-r--r--  2.0 unx     9598 b- defN 23-Apr-23 10:05 zytlib/container/table.py
--rw-r--r--  2.0 unx    11061 b- defN 23-Apr-23 10:05 zytlib/container/torch_table.py
--rw-r--r--  2.0 unx   179917 b- defN 23-Apr-23 10:05 zytlib/container/vector.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-23 10:05 zytlib/deprecated/__init__.py
--rw-r--r--  2.0 unx     1000 b- defN 23-Apr-23 10:05 zytlib/deprecated/_test_curses.py
--rw-r--r--  2.0 unx    11461 b- defN 23-Apr-23 10:05 zytlib/deprecated/terminal.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-23 10:05 zytlib/inout/__init__.py
--rw-r--r--  2.0 unx    32428 b- defN 23-Apr-23 10:05 zytlib/inout/filemanager.py
--rw-r--r--  2.0 unx    30748 b- defN 23-Apr-23 10:05 zytlib/inout/logging.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-23 10:05 zytlib/nstools/__init__.py
--rw-r--r--  2.0 unx     2757 b- defN 23-Apr-23 10:05 zytlib/nstools/torch_utils.py
--rw-r--r--  2.0 unx        0 b- defN 23-Apr-23 10:05 zytlib/utils/__init__.py
--rw-r--r--  2.0 unx      643 b- defN 23-Apr-23 10:05 zytlib/utils/classfunc.py
--rw-r--r--  2.0 unx      161 b- defN 23-Apr-23 10:05 zytlib/utils/strtools.py
--rw-r--r--  2.0 unx     3569 b- defN 23-Apr-23 10:05 zytlib/utils/timing.py
--rw-r--r--  2.0 unx     6413 b- defN 23-Apr-23 10:05 zytlib/utils/touch.py
--rw-r--r--  2.0 unx     2031 b- defN 23-Apr-23 10:05 zytlib/utils/utils.py
--rw-r--r--  2.0 unx    13839 b- defN 23-Apr-23 10:05 zytlib/utils/wrapper.py
--rw-r--r--  2.0 unx      489 b- defN 23-Apr-23 10:05 zytlib/utils/wrapper_plus.py
--rw-r--r--  2.0 unx      575 b- defN 23-Apr-23 10:05 zytlib/visual/__init__.py
--rw-r--r--  2.0 unx     4887 b- defN 23-Apr-23 10:05 zytlib/visual/animation.py
--rw-r--r--  2.0 unx     2904 b- defN 23-Apr-23 10:05 zytlib/visual/debugger.py
--rw-r--r--  2.0 unx     2119 b- defN 23-Apr-23 10:05 zytlib/visual/display.py
--rw-r--r--  2.0 unx     2572 b- defN 23-Apr-23 10:05 zytlib/visual/plot.py
--rw-r--r--  2.0 unx      355 b- defN 23-Apr-23 10:05 zytlib/visual/progress.py
--rw-r--r--  2.0 unx     3317 b- defN 23-Apr-23 10:05 zytlib-0.3.328.dist-info/METADATA
--rw-r--r--  2.0 unx       92 b- defN 23-Apr-23 10:05 zytlib-0.3.328.dist-info/WHEEL
--rw-r--r--  2.0 unx        7 b- defN 23-Apr-23 10:05 zytlib-0.3.328.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     2736 b- defN 23-Apr-23 10:05 zytlib-0.3.328.dist-info/RECORD
-34 files, 329886 bytes uncompressed, 68344 bytes compressed:  79.3%
+Zip file size: 72967 bytes, number of entries: 34
+-rw-r--r--  2.0 unx      750 b- defN 23-Apr-24 01:49 zytlib/__init__.py
+-rw-r--r--  2.0 unx       35 b- defN 23-Apr-24 01:49 zytlib/table.py
+-rw-r--r--  2.0 unx       37 b- defN 23-Apr-24 01:49 zytlib/vector.py
+-rw-r--r--  2.0 unx      145 b- defN 23-Apr-24 01:49 zytlib/container/__init__.py
+-rw-r--r--  2.0 unx     3240 b- defN 23-Apr-24 01:49 zytlib/container/sequence.py
+-rw-r--r--  2.0 unx     9598 b- defN 23-Apr-24 01:49 zytlib/container/table.py
+-rw-r--r--  2.0 unx    11061 b- defN 23-Apr-24 01:49 zytlib/container/torch_table.py
+-rw-r--r--  2.0 unx   179917 b- defN 23-Apr-24 01:49 zytlib/container/vector.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-24 01:49 zytlib/deprecated/__init__.py
+-rw-r--r--  2.0 unx     1000 b- defN 23-Apr-24 01:49 zytlib/deprecated/_test_curses.py
+-rw-r--r--  2.0 unx    11461 b- defN 23-Apr-24 01:49 zytlib/deprecated/terminal.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-24 01:49 zytlib/inout/__init__.py
+-rw-r--r--  2.0 unx    32428 b- defN 23-Apr-24 01:49 zytlib/inout/filemanager.py
+-rw-r--r--  2.0 unx    30748 b- defN 23-Apr-24 01:49 zytlib/inout/logging.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-24 01:49 zytlib/nstools/__init__.py
+-rw-r--r--  2.0 unx     3770 b- defN 23-Apr-24 01:49 zytlib/nstools/torch_utils.py
+-rw-r--r--  2.0 unx        0 b- defN 23-Apr-24 01:49 zytlib/utils/__init__.py
+-rw-r--r--  2.0 unx      643 b- defN 23-Apr-24 01:49 zytlib/utils/classfunc.py
+-rw-r--r--  2.0 unx      161 b- defN 23-Apr-24 01:49 zytlib/utils/strtools.py
+-rw-r--r--  2.0 unx     3569 b- defN 23-Apr-24 01:49 zytlib/utils/timing.py
+-rw-r--r--  2.0 unx     6413 b- defN 23-Apr-24 01:49 zytlib/utils/touch.py
+-rw-r--r--  2.0 unx     2031 b- defN 23-Apr-24 01:49 zytlib/utils/utils.py
+-rw-r--r--  2.0 unx    13839 b- defN 23-Apr-24 01:49 zytlib/utils/wrapper.py
+-rw-r--r--  2.0 unx      489 b- defN 23-Apr-24 01:49 zytlib/utils/wrapper_plus.py
+-rw-r--r--  2.0 unx      575 b- defN 23-Apr-24 01:49 zytlib/visual/__init__.py
+-rw-r--r--  2.0 unx     4887 b- defN 23-Apr-24 01:49 zytlib/visual/animation.py
+-rw-r--r--  2.0 unx     2904 b- defN 23-Apr-24 01:49 zytlib/visual/debugger.py
+-rw-r--r--  2.0 unx     2119 b- defN 23-Apr-24 01:49 zytlib/visual/display.py
+-rw-r--r--  2.0 unx     2572 b- defN 23-Apr-24 01:49 zytlib/visual/plot.py
+-rw-r--r--  2.0 unx      355 b- defN 23-Apr-24 01:49 zytlib/visual/progress.py
+-rw-r--r--  2.0 unx     3317 b- defN 23-Apr-24 01:49 zytlib-0.3.329.dist-info/METADATA
+-rw-r--r--  2.0 unx       92 b- defN 23-Apr-24 01:49 zytlib-0.3.329.dist-info/WHEEL
+-rw-r--r--  2.0 unx        7 b- defN 23-Apr-24 01:49 zytlib-0.3.329.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     2736 b- defN 23-Apr-24 01:49 zytlib-0.3.329.dist-info/RECORD
+34 files, 330899 bytes uncompressed, 68615 bytes compressed:  79.3%
```

## zipnote {}

```diff
@@ -84,20 +84,20 @@
 
 Filename: zytlib/visual/plot.py
 Comment: 
 
 Filename: zytlib/visual/progress.py
 Comment: 
 
-Filename: zytlib-0.3.328.dist-info/METADATA
+Filename: zytlib-0.3.329.dist-info/METADATA
 Comment: 
 
-Filename: zytlib-0.3.328.dist-info/WHEEL
+Filename: zytlib-0.3.329.dist-info/WHEEL
 Comment: 
 
-Filename: zytlib-0.3.328.dist-info/top_level.txt
+Filename: zytlib-0.3.329.dist-info/top_level.txt
 Comment: 
 
-Filename: zytlib-0.3.328.dist-info/RECORD
+Filename: zytlib-0.3.329.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## zytlib/nstools/torch_utils.py

```diff
@@ -1,12 +1,13 @@
 import torch
 import numpy as np
 from typing import Callable, Any, List, Union, Tuple
 from collections import namedtuple
 from ..container.vector import vector
+import re
 
 def to_LongTensor(x: Any) -> torch.LongTensor:
     if isinstance(x, torch.Tensor):
         return x.long()
     elif isinstance(x, np.ndarray):
         return torch.from_numpy(x).long()
     elif isinstance(x, (list, tuple)):
@@ -30,14 +31,47 @@
 
     cov_xy = (x * y).sum(dim)
     cov_x = (x).pow(2).sum(dim)
     cov_y = (y).pow(2).sum(dim)
 
     return cov_xy / (eps + cov_x * cov_y).sqrt()
 
+def einflatten(cmd: str, x: torch.Tensor) -> torch.Tensor:
+    if "->" not in cmd:
+        return x.flatten()
+    left_cmd, right_cmd = cmd.split("->")
+    if not right_cmd:
+        return x.flatten()
+    assert len(left_cmd) == x.dim()
+    assert len(left_cmd) == len(set(left_cmd))
+    new_shape: List[int] = list()
+    i, j = 0, 0
+    while i < len(left_cmd):
+        if right_cmd[j].isalpha():
+            assert left_cmd[i] == right_cmd[j]
+            new_shape.append(x.shape[i])
+            i += 1
+            j += 1
+        else:
+            assert right_cmd[j] == "["
+            j += 1
+            t = -1
+            while j < len(right_cmd):
+                if right_cmd[j] == "]":
+                    t = t * -1
+                    j += 1
+                    break
+                assert right_cmd[j] == left_cmd[i]
+                t *= x.shape[i]
+                i += 1
+                j += 1
+            assert t > 0
+            new_shape.append(t)
+    return x.reshape(tuple(new_shape))
+
 ConditionAverage = namedtuple("ConditionAverage", ["avg_tensor", "count"])
 
 def condition_average(x: torch.Tensor, condition_num: Union[int, Tuple[int]], condition: torch.Tensor, *, dim: int=-1) -> ConditionAverage:
     dim = dim % x.dim()
     if isinstance(condition_num, int):
         assert condition_num > 0
         assert condition.dim() == 1
```

## Comparing `zytlib-0.3.328.dist-info/METADATA` & `zytlib-0.3.329.dist-info/METADATA`

 * *Files 2% similar despite different names*

```diff
@@ -1,10 +1,10 @@
 Metadata-Version: 2.1
 Name: zytlib
-Version: 0.3.328
+Version: 0.3.329
 Summary: This is A foundamental package containing some basic self-designed functions and types for Project PyCTLib. 
 Home-page: https://github.com/Bertie97/pyctlib/tree/main/pyctlib
 Author: All contributors of PyCTLib
 Author-email: zytfdu@icloud.com
 License: MIT Licence
 Keywords: pip,zytlib
 Platform: any
```

## Comparing `zytlib-0.3.328.dist-info/RECORD` & `zytlib-0.3.329.dist-info/RECORD`

 * *Files 4% similar despite different names*

```diff
@@ -9,26 +9,26 @@
 zytlib/deprecated/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 zytlib/deprecated/_test_curses.py,sha256=p6ARxr7wwy9Afuj0EvnC93Ot9fSYi30T9nad4jVmsgk,1000
 zytlib/deprecated/terminal.py,sha256=YVQcA3jKpHGex-cGEf5EQZf9e-iacszPajfzEgixzQA,11461
 zytlib/inout/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 zytlib/inout/filemanager.py,sha256=K26LAZeUImQdFrkuQ0KrYQy2Eu39b5RARI2sHt1XLhA,32428
 zytlib/inout/logging.py,sha256=kPd7wg7y7ckMkTpkAJW51VWWG2pdcskGBxKu6HGODY4,30748
 zytlib/nstools/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-zytlib/nstools/torch_utils.py,sha256=DfjjspibbB6x8tzVDkXe7lGBl-PyTyIBnv_ILv54L7k,2757
+zytlib/nstools/torch_utils.py,sha256=1pH8OS_3smrLu2dTbbEMRIpg9U5WRQ2spuzASjrzQ-M,3770
 zytlib/utils/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 zytlib/utils/classfunc.py,sha256=HfIu6dq7CSMBG8y-No_4OMnLHgxCLT2Z_wIo6X_ahVk,643
 zytlib/utils/strtools.py,sha256=ytgrgk3mWAqqOuaMC_ckmHOe8zzLRXDtBq6j0ZuZVAE,161
 zytlib/utils/timing.py,sha256=OGlr0Q6Uxr05pwtzHtlxJHHK3mXeZd-5YdEIc4qKF8M,3569
 zytlib/utils/touch.py,sha256=InpCJtZbRre5hVDzVl--yA3QEPiUIIRvSI4_Y5hX5V4,6413
 zytlib/utils/utils.py,sha256=ZWwwP2jhFMMr8vLKqE1T99jXwRpsZdayLM1Y9dzy0rM,2031
 zytlib/utils/wrapper.py,sha256=gSa8tuqqEfhVJ_B--FJi8nz7BOsj0wC24mvPvKFgvV0,13839
 zytlib/utils/wrapper_plus.py,sha256=gzxKcbsZ2xEqQluzTwp06Hqf4Ttm2iMjjhyLNfay-mE,489
 zytlib/visual/__init__.py,sha256=faaJ-ys17tnVAC0w5ZHU66_VKcrcbiTZFQ6_PcNGtaQ,575
 zytlib/visual/animation.py,sha256=UvJwiQzgbSiXbjmuR0Ib8_ZlbfA8l81WG3Y3nd9HRdc,4887
 zytlib/visual/debugger.py,sha256=GUz2U4RFosQlZMxbR3HYSvng3-G-UzBCI-HGkUYkKKE,2904
 zytlib/visual/display.py,sha256=lzXFfno0wlUB1RVfWWFLTppSNezzjL68fBPm-JwHVCY,2119
 zytlib/visual/plot.py,sha256=fB-a1mhEVOnqLN7LGAIflZIkRsrrc2RX-UH50SU0Cmk,2572
 zytlib/visual/progress.py,sha256=GgZX7LbjQUDf3V2-HcrA3nNkw52PRxbZV9buMgK519o,355
-zytlib-0.3.328.dist-info/METADATA,sha256=gY_7sg-LM9BKxw1FrOkL67ie6lSkcp-AzhvAHilhji0,3317
-zytlib-0.3.328.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
-zytlib-0.3.328.dist-info/top_level.txt,sha256=MM5VcTDuVj-BaEIbC62T3PaPy4XmSD3InWJei3Fi0UY,7
-zytlib-0.3.328.dist-info/RECORD,,
+zytlib-0.3.329.dist-info/METADATA,sha256=T5bj9oFx-zxoWMU9rlR1o7dy9vURcQqaYfLeshF-38I,3317
+zytlib-0.3.329.dist-info/WHEEL,sha256=G16H4A3IeoQmnOrYV4ueZGKSjhipXx8zc8nu9FGlvMA,92
+zytlib-0.3.329.dist-info/top_level.txt,sha256=MM5VcTDuVj-BaEIbC62T3PaPy4XmSD3InWJei3Fi0UY,7
+zytlib-0.3.329.dist-info/RECORD,,
```

