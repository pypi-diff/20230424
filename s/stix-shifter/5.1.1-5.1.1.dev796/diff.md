# Comparing `tmp/stix_shifter-5.1.1-py2.py3-none-any.whl.zip` & `tmp/stix_shifter-5.1.1.dev796-py2.py3-none-any.whl.zip`

## zipinfo {}

```diff
@@ -1,18 +1,18 @@
-Zip file size: 27556 bytes, number of entries: 16
--rw-rw-r--  2.0 unx        0 b- defN 23-Mar-21 13:47 stix_shifter/__init__.py
--rw-rw-r--  2.0 unx        0 b- defN 23-Mar-21 13:47 stix_shifter/scripts/__init__.py
--rw-rw-r--  2.0 unx    17901 b- defN 23-Mar-21 13:47 stix_shifter/scripts/stix_shifter.py
--rw-rw-r--  2.0 unx    13894 b- defN 23-Mar-21 13:47 stix_shifter/scripts/supported_property_exporter.py
--rw-rw-r--  2.0 unx        0 b- defN 23-Mar-21 13:47 stix_shifter/stix_translation/__init__.py
--rw-rw-r--  2.0 unx    21567 b- defN 23-Mar-21 13:51 stix_shifter/stix_translation/json_to_stix_translator.py
--rw-rw-r--  2.0 unx     8319 b- defN 23-Mar-21 13:47 stix_shifter/stix_translation/stix_translation.py
--rw-rw-r--  2.0 unx        0 b- defN 23-Mar-21 13:47 stix_shifter/stix_transmission/__init__.py
--rw-rw-r--  2.0 unx     4462 b- defN 23-Mar-21 13:47 stix_shifter/stix_transmission/stix_transmission.py
--rw-rw-r--  2.0 unx    12786 b- defN 23-Mar-21 13:51 stix_shifter-5.1.1.dist-info/LICENSE.md
--rw-rw-r--  2.0 unx     7958 b- defN 23-Mar-21 13:51 stix_shifter-5.1.1.dist-info/METADATA
--rw-rw-r--  2.0 unx     1418 b- defN 23-Mar-21 13:51 stix_shifter-5.1.1.dist-info/NOTICE
--rw-rw-r--  2.0 unx      110 b- defN 23-Mar-21 13:51 stix_shifter-5.1.1.dist-info/WHEEL
--rw-rw-r--  2.0 unx       72 b- defN 23-Mar-21 13:51 stix_shifter-5.1.1.dist-info/entry_points.txt
--rw-rw-r--  2.0 unx       13 b- defN 23-Mar-21 13:51 stix_shifter-5.1.1.dist-info/top_level.txt
-?rw-rw-r--  2.0 unx     1494 b- defN 23-Mar-21 13:51 stix_shifter-5.1.1.dist-info/RECORD
-16 files, 89994 bytes uncompressed, 25020 bytes compressed:  72.2%
+Zip file size: 27816 bytes, number of entries: 16
+-rw-rw-r--  2.0 unx        0 b- defN 23-Apr-24 17:21 stix_shifter/__init__.py
+-rw-rw-r--  2.0 unx        0 b- defN 23-Apr-24 17:21 stix_shifter/scripts/__init__.py
+-rw-rw-r--  2.0 unx    18616 b- defN 23-Apr-24 17:21 stix_shifter/scripts/stix_shifter.py
+-rw-rw-r--  2.0 unx    13894 b- defN 23-Apr-24 17:21 stix_shifter/scripts/supported_property_exporter.py
+-rw-rw-r--  2.0 unx        0 b- defN 23-Apr-24 17:21 stix_shifter/stix_translation/__init__.py
+-rw-rw-r--  2.0 unx    21897 b- defN 23-Apr-24 17:23 stix_shifter/stix_translation/json_to_stix_translator.py
+-rw-rw-r--  2.0 unx     8319 b- defN 23-Apr-24 17:21 stix_shifter/stix_translation/stix_translation.py
+-rw-rw-r--  2.0 unx        0 b- defN 23-Apr-24 17:21 stix_shifter/stix_transmission/__init__.py
+-rw-rw-r--  2.0 unx     4462 b- defN 23-Apr-24 17:21 stix_shifter/stix_transmission/stix_transmission.py
+-rw-rw-r--  2.0 unx    12786 b- defN 23-Apr-24 17:23 stix_shifter-5.1.1.dev796.dist-info/LICENSE.md
+-rw-rw-r--  2.0 unx     7976 b- defN 23-Apr-24 17:23 stix_shifter-5.1.1.dev796.dist-info/METADATA
+-rw-rw-r--  2.0 unx     1418 b- defN 23-Apr-24 17:23 stix_shifter-5.1.1.dev796.dist-info/NOTICE
+-rw-rw-r--  2.0 unx      110 b- defN 23-Apr-24 17:23 stix_shifter-5.1.1.dev796.dist-info/WHEEL
+-rw-rw-r--  2.0 unx       72 b- defN 23-Apr-24 17:23 stix_shifter-5.1.1.dev796.dist-info/entry_points.txt
+-rw-rw-r--  2.0 unx       13 b- defN 23-Apr-24 17:23 stix_shifter-5.1.1.dev796.dist-info/top_level.txt
+?rw-rw-r--  2.0 unx     1543 b- defN 23-Apr-24 17:23 stix_shifter-5.1.1.dev796.dist-info/RECORD
+16 files, 91106 bytes uncompressed, 25182 bytes compressed:  72.4%
```

## zipnote {}

```diff
@@ -21,29 +21,29 @@
 
 Filename: stix_shifter/stix_transmission/__init__.py
 Comment: 
 
 Filename: stix_shifter/stix_transmission/stix_transmission.py
 Comment: 
 
-Filename: stix_shifter-5.1.1.dist-info/LICENSE.md
+Filename: stix_shifter-5.1.1.dev796.dist-info/LICENSE.md
 Comment: 
 
-Filename: stix_shifter-5.1.1.dist-info/METADATA
+Filename: stix_shifter-5.1.1.dev796.dist-info/METADATA
 Comment: 
 
-Filename: stix_shifter-5.1.1.dist-info/NOTICE
+Filename: stix_shifter-5.1.1.dev796.dist-info/NOTICE
 Comment: 
 
-Filename: stix_shifter-5.1.1.dist-info/WHEEL
+Filename: stix_shifter-5.1.1.dev796.dist-info/WHEEL
 Comment: 
 
-Filename: stix_shifter-5.1.1.dist-info/entry_points.txt
+Filename: stix_shifter-5.1.1.dev796.dist-info/entry_points.txt
 Comment: 
 
-Filename: stix_shifter-5.1.1.dist-info/top_level.txt
+Filename: stix_shifter-5.1.1.dev796.dist-info/top_level.txt
 Comment: 
 
-Filename: stix_shifter-5.1.1.dist-info/RECORD
+Filename: stix_shifter-5.1.1.dev796.dist-info/RECORD
 Comment: 
 
 Zip file comment:
```

## stix_shifter/scripts/stix_shifter.py

```diff
@@ -107,29 +107,38 @@
         type=str,
         help='Data source authentication'
     )
 
     # operation subparser
     operation_subparser = transmit_parser.add_subparsers(title="operation", dest="operation_command")
     operation_subparser.add_parser(stix_transmission.PING, help="Pings the data source")
+    
     query_operation_parser = operation_subparser.add_parser(stix_transmission.QUERY, help="Executes a query on the data source")
     query_operation_parser.add_argument('query_string', help='native datasource query string')
+    
     results_operation_parser = operation_subparser.add_parser(stix_transmission.RESULTS, help="Fetches the results of the data source query")
     results_operation_parser.add_argument('search_id', help='uuid of executed query')
     results_operation_parser.add_argument('offset', help='offset of results')
     results_operation_parser.add_argument('length', help='length of results')
+    results_operation_parser.add_argument('metadata', nargs='?', help='metadata to fetch results')
+    
     resultsstix_operation_parser = operation_subparser.add_parser(stix_transmission.RESULTS_STIX, help="Fetches the results of the data source query, response is translated in STIX")
     resultsstix_operation_parser.add_argument('search_id', help='uuid of executed query')
     resultsstix_operation_parser.add_argument('offset', help='offset of results')
     resultsstix_operation_parser.add_argument('length', help='length of results')
     resultsstix_operation_parser.add_argument('data_source', help='STIX identity object representing a datasource')
+    resultsstix_operation_parser.add_argument('metadata', nargs='?', help='metadata to fetch results')
+
     status_operation_parser = operation_subparser.add_parser(stix_transmission.STATUS, help="Gets the current status of the query")
     status_operation_parser.add_argument('search_id', help='uuid of executed query')
+    status_operation_parser.add_argument('metadata', nargs='?', help='metadata to fetch results')
+
     delete_operation_parser = operation_subparser.add_parser(stix_transmission.DELETE, help="Delete a running query on the data source")
     delete_operation_parser.add_argument('search_id', help='id of query to remove')
+    
     operation_subparser.add_parser(stix_transmission.IS_ASYNC, help='Checks if the query operation is asynchronous')
 
     execute_parser = parent_subparsers.add_parser(EXECUTE, help='Translate and fully execute a query')
     # positional arguments
     execute_parser.add_argument(
         'transmission_module',
         help='Which connection module to use'
@@ -380,37 +389,46 @@
         status <search id>,
         results <search id> <offset> <length>,
         results_stix <search id> <offset> <length> <data_source>
         ping,
         is_async
     >
     """
+    log = utils_logger.set_logger(__name__)
     connection_dict = json.loads(args.connection)
     configuration_dict = json.loads(args.configuration)
     transmission = stix_transmission.StixTransmission(args.module, connection_dict, configuration_dict)
 
     operation_command = args.operation_command
+    if 'metadata' in args and args.metadata:
+        metadata = args.metadata
+        try:
+            metadata = json.loads(metadata)
+        except Exception as ex:
+            log.debug(exception_to_string(ex))
+            log.error('Cannot convert supplied metadata string to json')
+            pass
 
     if operation_command == stix_transmission.QUERY:
         query = args.query_string
         result = transmission.query(query)
     elif operation_command == stix_transmission.STATUS:
         search_id = args.search_id
-        result = transmission.status(search_id)
+        result = transmission.status(search_id, metadata=None)
     elif operation_command == stix_transmission.RESULTS:
         search_id = args.search_id
         offset = args.offset
         length = args.length
-        result = transmission.results(search_id, offset, length)
+        result = transmission.results(search_id, offset, length, metadata=None)
     elif operation_command == stix_transmission.RESULTS_STIX:
         search_id = args.search_id
         offset = args.offset
         length = args.length
         data_source = args.data_source
-        result = transmission.results_stix(search_id, offset, length, data_source)
+        result = transmission.results_stix(search_id, offset, length, data_source, metadata=None)
     elif operation_command == stix_transmission.DELETE:
         search_id = args.search_id
         result = transmission.delete(search_id)
     elif operation_command == stix_transmission.PING:
         result = transmission.ping()
     elif operation_command == stix_transmission.IS_ASYNC:
         result = transmission.is_async()
```

## stix_shifter/stix_translation/json_to_stix_translator.py

```diff
@@ -15,41 +15,49 @@
 NUMBER_OBSERVED_KEY = 'number_observed'
 FIRST_OBSERVED_KEY = 'first_observed'
 LAST_OBSERVED_KEY = 'last_observed'
 
 
 # convert JSON data to STIX object using map_data and transformers
 def convert_to_stix(data_source, map_data, data, transformers, options, callback=None):
+    try:
+        ds2stix = DataSourceObjToStixObj(data_source, map_data, transformers, options, callback)
 
-    ds2stix = DataSourceObjToStixObj(data_source, map_data, transformers, options, callback)
-
-    # map data list to list of transformed objects
-    observation = ds2stix.transform
-    results = list(map(observation, data))
-
-    for stix_object in results:
-        if ds2stix.spec_version == "2.1":
-            del stix_object["objects"]
-        ds2stix.bundle["objects"].append(stix_object)
-
-    for _, value in ds2stix.unique_cybox_objects.items():
-        ds2stix.bundle["objects"].append(value)
-
-    if options.get('stix_validator'):
-        if ds2stix.spec_version == "2.1":
-            # Serialize and Deserialize bundle to covert StixObjectIds to strings
-            bundle_obj = json.dumps(ds2stix.bundle, sort_keys=False)
-            bundle_obj = json.loads(bundle_obj)
-        else:
-            bundle_obj = ds2stix.bundle
-        validated_result = validate_instance(bundle_obj, ValidationOptions(version=ds2stix.spec_version))
-        print_results(validated_result)
-
-    return ds2stix.bundle
-
+        # map data list to list of transformed objects
+        observation = ds2stix.transform
+        results = list(map(observation, data))
+
+        for stix_object in results:
+            if ds2stix.spec_version == "2.1":
+                del stix_object["objects"]
+            ds2stix.bundle["objects"].append(stix_object)
+
+        for _, value in ds2stix.unique_cybox_objects.items():
+            ds2stix.bundle["objects"].append(value)
+
+        if options.get('stix_validator'):
+            if ds2stix.spec_version == "2.1":
+                # Serialize and Deserialize bundle to covert StixObjectIds to strings
+                bundle_obj = json.dumps(ds2stix.bundle, sort_keys=False)
+                bundle_obj = json.loads(bundle_obj)
+            else:
+                bundle_obj = ds2stix.bundle
+            validated_result = validate_instance(bundle_obj, ValidationOptions(version=ds2stix.spec_version))
+            print_results(validated_result)
+
+        return ds2stix.bundle
+
+    except Exception as e:
+        try:
+            # try to print the error line
+            logger_log = logger.set_logger(__name__)
+            logger_log.error(logger.last_tb_to_string(e))
+        except:
+            pass
+        raise e
 
 class DataSourceObjToStixObj:
     logger = logger.set_logger(__name__)
 
     def __init__(self, data_source, ds_to_stix_map, transformers, options, callback=None):
         self.identity_id = data_source["id"]
         self.ds_to_stix_map = ds_to_stix_map
```

## Comparing `stix_shifter-5.1.1.dist-info/LICENSE.md` & `stix_shifter-5.1.1.dev796.dist-info/LICENSE.md`

 * *Files identical despite different names*

## Comparing `stix_shifter-5.1.1.dist-info/METADATA` & `stix_shifter-5.1.1.dev796.dist-info/METADATA`

 * *Files 1% similar despite different names*

```diff
@@ -1,41 +1,41 @@
 Metadata-Version: 2.1
 Name: stix-shifter
-Version: 5.1.1
+Version: 5.1.1.dev796
 Summary: Tools and interface to translate STIX formatted results and queries to different data source formats and to set up appropriate connection strings for invoking and triggering actions in openwhisk
 Home-page: https://github.com/opencybersecurityalliance/stix-shifter
 Author: ibm
 Author-email: 
 Project-URL: Source, https://github.com/opencybersecurityalliance/stix-shifter
 Keywords: datasource stix translate transform transmit
 Classifier: License :: OSI Approved :: Apache Software License
 Classifier: Programming Language :: Python :: 3.8
 Classifier: Programming Language :: Python :: 3.9
 Description-Content-Type: text/markdown
 License-File: LICENSE.md
 License-File: NOTICE
-Requires-Dist: aioboto3 (==11.0.1)
-Requires-Dist: requests-toolbelt (==0.10.1)
-Requires-Dist: flask (==2.2.3)
-Requires-Dist: stix2-validator (==3.1.3)
-Requires-Dist: aiohttp-retry (==2.8.3)
-Requires-Dist: pyOpenSSL (==23.0.0)
-Requires-Dist: asyncio (==3.4.3)
 Requires-Dist: stix2-matcher (==3.0.0)
-Requires-Dist: json-fix (==0.5.1)
-Requires-Dist: adal (==1.2.7)
+Requires-Dist: aioboto3 (==11.1.0)
 Requires-Dist: colorlog (==6.7.0)
+Requires-Dist: stix2-patterns (==1.3.2)
+Requires-Dist: azure-identity (==1.12.0)
+Requires-Dist: aiohttp-retry (==2.8.3)
+Requires-Dist: aiomysql (==0.1.1)
+Requires-Dist: antlr4-python3-runtime (==4.8)
+Requires-Dist: flask (==2.2.3)
+Requires-Dist: flatten-json (==0.1.13)
+Requires-Dist: xmltodict (==0.13.0)
+Requires-Dist: stix2-validator (==3.1.3)
+Requires-Dist: pyOpenSSL (==23.1.1)
+Requires-Dist: requests-toolbelt (==0.10.1)
+Requires-Dist: json-fix (==0.5.2)
 Requires-Dist: asynctest (==0.13.0)
 Requires-Dist: python-dateutil (==2.8.2)
+Requires-Dist: asyncio (==3.4.3)
 Requires-Dist: jsonmerge (==1.9.0)
-Requires-Dist: flatten-json (==0.1.13)
-Requires-Dist: aiomysql (==0.1.1)
-Requires-Dist: xmltodict (==0.13.0)
-Requires-Dist: stix2-patterns (==1.3.2)
-Requires-Dist: antlr4-python3-runtime (==4.8)
 
 [![example workflow](https://github.com/opencybersecurityalliance/stix-shifter/actions/workflows/main.yml/badge.svg)](https://github.com/opencybersecurityalliance/stix-shifter/actions)
 [![codecov](https://codecov.io/gh/opencybersecurityalliance/stix-shifter/branch/develop/graph/badge.svg?token=gQvl14peRj)](https://codecov.io/gh/opencybersecurityalliance/stix-shifter)
 
 ### Join us on Slack!
 
 [Click here](https://docs.google.com/forms/d/1vEAqg9SKBF3UMtmbJJ9qqLarrXN5zeVG3_obedA3DKs) and fill out the form to receive an invite to the Open Cybersecurity Alliance slack instance, then join the #stix-shifter channel, to meet and discuss usage with the team.
```

## Comparing `stix_shifter-5.1.1.dist-info/NOTICE` & `stix_shifter-5.1.1.dev796.dist-info/NOTICE`

 * *Files identical despite different names*

## Comparing `stix_shifter-5.1.1.dist-info/RECORD` & `stix_shifter-5.1.1.dev796.dist-info/RECORD`

 * *Files 8% similar despite different names*

```diff
@@ -1,16 +1,16 @@
 stix_shifter/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 stix_shifter/scripts/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-stix_shifter/scripts/stix_shifter.py,sha256=XHI9B1iE35XddZSwieK_oXINmBVkJsNOGm3P5dh4njk,17901
+stix_shifter/scripts/stix_shifter.py,sha256=pZzTPgbHNwHCXImxGb5hjw-502BRl8dtIrUAFBYynPs,18616
 stix_shifter/scripts/supported_property_exporter.py,sha256=LzahJJfvaalOW_o9Sa89fMcqs-00cjbySPnWjC2UlNY,13894
 stix_shifter/stix_translation/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
-stix_shifter/stix_translation/json_to_stix_translator.py,sha256=72KkjPPwPGUxxyhtYaq9CcFAOOKG_emxSqKeCnmveyw,21567
+stix_shifter/stix_translation/json_to_stix_translator.py,sha256=Y1Vxu4Ry0YG1E0fGPjaXGYjMkzXlcs7hZJicAGMGfh4,21897
 stix_shifter/stix_translation/stix_translation.py,sha256=KUzBIb2WrJ5HlgTsXtFHnHzqNbZgyOJWo6zWGp9jDhM,8319
 stix_shifter/stix_transmission/__init__.py,sha256=47DEQpj8HBSa-_TImW-5JCeuQeRkm5NMpJWZG3hSuFU,0
 stix_shifter/stix_transmission/stix_transmission.py,sha256=g03U6wMu2Yj0gCCtr8ox6fJGu27EoPem5y_7cIGLedY,4462
-stix_shifter-5.1.1.dist-info/LICENSE.md,sha256=ssGEKMVW69oFTBblVhD1YPolqCOyOCJi4wRDRI7xCnU,12786
-stix_shifter-5.1.1.dist-info/METADATA,sha256=c6ISjzAxN0sjRYyTr2Dn6WpZFQU63TsUnLPo5kL4vgU,7958
-stix_shifter-5.1.1.dist-info/NOTICE,sha256=wx-gWE9vSnLJ7YQkrGlMp9VNXOXG57TTxDDRd9CEdYg,1418
-stix_shifter-5.1.1.dist-info/WHEEL,sha256=bb2Ot9scclHKMOLDEHY6B2sicWOgugjFKaJsT7vwMQo,110
-stix_shifter-5.1.1.dist-info/entry_points.txt,sha256=7FNxDTZWzRwKCGlz-6f13MKrNgyrA_lKCsObJ1z6Swg,72
-stix_shifter-5.1.1.dist-info/top_level.txt,sha256=wAbFHOjr2ue_lgkQ5YGPNi1xgSbyyn0X05oB91b9qhs,13
-stix_shifter-5.1.1.dist-info/RECORD,,
+stix_shifter-5.1.1.dev796.dist-info/LICENSE.md,sha256=ssGEKMVW69oFTBblVhD1YPolqCOyOCJi4wRDRI7xCnU,12786
+stix_shifter-5.1.1.dev796.dist-info/METADATA,sha256=4T7Yzric66UMERNg-MQRqU-LNnmc2z6s8Vjd-9vzChQ,7976
+stix_shifter-5.1.1.dev796.dist-info/NOTICE,sha256=wx-gWE9vSnLJ7YQkrGlMp9VNXOXG57TTxDDRd9CEdYg,1418
+stix_shifter-5.1.1.dev796.dist-info/WHEEL,sha256=bb2Ot9scclHKMOLDEHY6B2sicWOgugjFKaJsT7vwMQo,110
+stix_shifter-5.1.1.dev796.dist-info/entry_points.txt,sha256=7FNxDTZWzRwKCGlz-6f13MKrNgyrA_lKCsObJ1z6Swg,72
+stix_shifter-5.1.1.dev796.dist-info/top_level.txt,sha256=wAbFHOjr2ue_lgkQ5YGPNi1xgSbyyn0X05oB91b9qhs,13
+stix_shifter-5.1.1.dev796.dist-info/RECORD,,
```

